var regionList=function(){"use strict";function t(){}const e=t=>t;function n(t,e){for(const n in e)t[n]=e[n];return t}function r(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(r)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let a;function c(t,e){return a||(a=document.createElement("a")),a.href=e,t===a.href}function u(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function d(t){let e;return u(t,(t=>e=t))(),e}function f(t,e,n){t.$$.on_destroy.push(u(e,n))}function p(t,e,n,r){if(t){const i=m(t,e,n,r);return t[0](i)}}function m(t,e,r,i){return t[1]&&i?n(r.ctx.slice(),t[1](i(e))):r.ctx}function g(t,e,n,r){if(t[2]&&r){const i=t[2](r(n));if(void 0===e.dirty)return i;if("object"==typeof i){const t=[],n=Math.max(e.dirty.length,i.length);for(let r=0;r<n;r+=1)t[r]=e.dirty[r]|i[r];return t}return e.dirty|i}return e.dirty}function h(t,e,n,r,i,o){if(i){const s=m(e,n,r,o);t.p(s,i)}}function v(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let t=0;t<n;t++)e[t]=-1;return e}return-1}function $(e){return e&&s(e.destroy)?e.destroy:t}function b(t){const e="string"==typeof t&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const w="undefined"!=typeof window;let y=w?()=>window.performance.now():()=>Date.now(),x=w?t=>requestAnimationFrame(t):t;const k=new Set;function S(t){k.forEach((e=>{e.c(t)||(k.delete(e),e.f())})),0!==k.size&&x(S)}function E(t,e){t.appendChild(e)}function C(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function O(t){const e=N("style");return function(t,e){E(t.head||t,e),e.sheet}(C(t),e),e.sheet}function P(t,e,n){t.insertBefore(e,n||null)}function L(t){t.parentNode&&t.parentNode.removeChild(t)}function I(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function R(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function T(t){return document.createTextNode(t)}function A(){return T(" ")}function V(){return T("")}function M(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function j(t){return function(e){return e.preventDefault(),t.call(this,e)}}function q(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function _(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const D=["width","height"];function U(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const r in e)null==e[r]?t.removeAttribute(r):"style"===r?t.style.cssText=e[r]:"__value"===r?t.value=t[r]=e[r]:n[r]&&n[r].set&&-1===D.indexOf(r)?t[r]=e[r]:_(t,r,e[r])}function F(t,e){e=""+e,t.data!==e&&(t.data=e)}function H(t,e){t.value=null==e?"":e}function z(t,e,n,r){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,r?"important":"")}function B(t,e,n){t.classList[n?"add":"remove"](e)}function W(t,e,{bubbles:n=!1,cancelable:r=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,r,e),i}class J{constructor(t=!1){this.is_svg=!1,this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,e,n=null){this.e||(this.is_svg?this.e=R(e.nodeName):this.e=N(11===e.nodeType?"TEMPLATE":e.nodeName),this.t="TEMPLATE"!==e.tagName?e:e.content,this.c(t)),this.i(n)}h(t){this.e.innerHTML=t,this.n=Array.from("TEMPLATE"===this.e.nodeName?this.e.content.childNodes:this.e.childNodes)}i(t){for(let e=0;e<this.n.length;e+=1)P(this.t,this.n[e],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(L)}}const X=new Map;let G,Z=0;function Y(t,e,n,r,i,o,s,l=0){const a=16.666/r;let c="{\n";for(let t=0;t<=1;t+=a){const r=e+(n-e)*o(t);c+=100*t+`%{${s(r,1-r)}}\n`}const u=c+`100% {${s(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${l}`,f=C(t),{stylesheet:p,rules:m}=X.get(f)||function(t,e){const n={stylesheet:O(e),rules:{}};return X.set(t,n),n}(f,t);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${d} ${r}ms linear ${i}ms 1 both`,Z+=1,d}function Q(t,e){const n=(t.style.animation||"").split(", "),r=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),i=n.length-r.length;i&&(t.style.animation=r.join(", "),Z-=i,Z||x((()=>{Z||(X.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&L(e)})),X.clear())})))}function K(t){G=t}function tt(){if(!G)throw new Error("Function called outside component initialization");return G}function et(t){tt().$$.on_mount.push(t)}function nt(t){tt().$$.on_destroy.push(t)}function rt(){const t=tt();return(e,n,{cancelable:r=!1}={})=>{const i=t.$$.callbacks[e];if(i){const o=W(e,n,{cancelable:r});return i.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}function it(t,e){return tt().$$.context.set(t,e),e}function ot(t){return tt().$$.context.get(t)}function st(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t.call(this,e)))}const lt=[],at=[];let ct=[];const ut=[],dt=Promise.resolve();let ft=!1;function pt(){ft||(ft=!0,dt.then($t))}function mt(t){ct.push(t)}const gt=new Set;let ht,vt=0;function $t(){if(0!==vt)return;const t=G;do{try{for(;vt<lt.length;){const t=lt[vt];vt++,K(t),bt(t.$$)}}catch(t){throw lt.length=0,vt=0,t}for(K(null),lt.length=0,vt=0;at.length;)at.pop()();for(let t=0;t<ct.length;t+=1){const e=ct[t];gt.has(e)||(gt.add(e),e())}ct.length=0}while(lt.length);for(;ut.length;)ut.pop()();ft=!1,gt.clear(),K(t)}function bt(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(mt)}}function wt(t,e,n){t.dispatchEvent(W(`${e?"intro":"outro"}${n}`))}const yt=new Set;let xt;function kt(){xt={r:0,c:[],p:xt}}function St(){xt.r||o(xt.c),xt=xt.p}function Et(t,e){t&&t.i&&(yt.delete(t),t.i(e))}function Ct(t,e,n,r){if(t&&t.o){if(yt.has(t))return;yt.add(t),xt.c.push((()=>{yt.delete(t),r&&(n&&t.d(1),r())})),t.o(e)}else r&&r()}const Ot={duration:0};function Pt(n,r,i,l){const a={direction:"both"};let c=r(n,i,a),u=l?0:1,d=null,f=null,p=null;function m(){p&&Q(n,p)}function g(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function h(r){const{delay:i=0,duration:s=300,easing:l=e,tick:a=t,css:h}=c||Ot,v={start:y()+i,b:r};r||(v.group=xt,xt.r+=1),d||f?f=v:(h&&(m(),p=Y(n,u,r,s,i,l,h)),r&&a(0,1),d=g(v,s),mt((()=>wt(n,r,"start"))),function(t){let e;0===k.size&&x(S),new Promise((n=>{k.add(e={c:t,f:n})}))}((t=>{if(f&&t>f.start&&(d=g(f,s),f=null,wt(n,d.b,"start"),h&&(m(),p=Y(n,u,d.b,d.duration,0,l,c.css))),d)if(t>=d.end)a(u=d.b,1-u),wt(n,d.b,"end"),f||(d.b?m():--d.group.r||o(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;u=d.a+d.d*l(e/d.duration),a(u,1-u)}return!(!d&&!f)})))}return{run(t){s(c)?(ht||(ht=Promise.resolve(),ht.then((()=>{ht=null}))),ht).then((()=>{c=c(a),h(t)})):h(t)},end(){m(),d=f=null}}}function Lt(t,e){const n=e.token={};function r(t,r,i,o){if(e.token!==n)return;e.resolved=o;let s=e.ctx;void 0!==i&&(s=s.slice(),s[i]=o);const l=t&&(e.current=t)(s);let a=!1;e.block&&(e.blocks?e.blocks.forEach(((t,n)=>{n!==r&&t&&(kt(),Ct(t,1,1,(()=>{e.blocks[n]===t&&(e.blocks[n]=null)})),St())})):e.block.d(1),l.c(),Et(l,1),l.m(e.mount(),e.anchor),a=!0),e.block=l,e.blocks&&(e.blocks[r]=l),a&&$t()}if(!(i=t)||"object"!=typeof i&&"function"!=typeof i||"function"!=typeof i.then){if(e.current!==e.then)return r(e.then,1,e.value,t),!0;e.resolved=t}else{const n=tt();if(t.then((t=>{K(n),r(e.then,1,e.value,t),K(null)}),(t=>{if(K(n),r(e.catch,2,e.error,t),K(null),!e.hasCatch)throw t})),e.current!==e.pending)return r(e.pending,0),!0}var i}function It(t,e,n){const r=e.slice(),{resolved:i}=t;t.current===t.then&&(r[t.value]=i),t.current===t.catch&&(r[t.error]=i),t.block.p(r,n)}function Nt(t,e){Ct(t,1,1,(()=>{e.delete(t.key)}))}function Rt(t,e,n,r,i,s,l,a,c,u,d,f){let p=t.length,m=s.length,g=p;const h={};for(;g--;)h[t[g].key]=g;const v=[],$=new Map,b=new Map,w=[];for(g=m;g--;){const t=f(i,s,g),o=n(t);let a=l.get(o);a?r&&w.push((()=>a.p(t,e))):(a=u(o,t),a.c()),$.set(o,v[g]=a),o in h&&b.set(o,Math.abs(g-h[o]))}const y=new Set,x=new Set;function k(t){Et(t,1),t.m(a,d),l.set(t.key,t),d=t.first,m--}for(;p&&m;){const e=v[m-1],n=t[p-1],r=e.key,i=n.key;e===n?(d=e.first,p--,m--):$.has(i)?!l.has(r)||y.has(r)?k(e):x.has(i)?p--:b.get(r)>b.get(i)?(x.add(r),k(e)):(y.add(i),p--):(c(n,l),p--)}for(;p--;){const e=t[p];$.has(e.key)||c(e,l)}for(;m;)k(v[m-1]);return o(w),v}function Tt(t,e){const n={},r={},i={$$scope:1};let o=t.length;for(;o--;){const s=t[o],l=e[o];if(l){for(const t in s)t in l||(r[t]=1);for(const t in l)i[t]||(n[t]=l[t],i[t]=1);t[o]=l}else for(const t in s)i[t]=1}for(const t in r)t in n||(n[t]=void 0);return n}function At(t){t&&t.c()}function Vt(t,e,n,i){const{fragment:l,after_update:a}=t.$$;l&&l.m(e,n),i||mt((()=>{const e=t.$$.on_mount.map(r).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):o(e),t.$$.on_mount=[]})),a.forEach(mt)}function Mt(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];ct.forEach((r=>-1===t.indexOf(r)?e.push(r):n.push(r))),n.forEach((t=>t())),ct=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(e,n,r,s,l,a,c,u=[-1]){const d=G;K(e);const f=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:l,bound:i(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:i(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};c&&c(f.root);let p=!1;if(f.ctx=r?r(e,n.props||{},((t,n,...r)=>{const i=r.length?r[0]:n;return f.ctx&&l(f.ctx[t],f.ctx[t]=i)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](i),p&&function(t,e){-1===t.$$.dirty[0]&&(lt.push(t),pt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}(e,t)),n})):[],f.update(),p=!0,o(f.before_update),f.fragment=!!s&&s(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(L)}else f.fragment&&f.fragment.c();n.intro&&Et(e.$$.fragment),Vt(e,n.target,n.anchor,n.customElement),$t()}K(d)}class qt{$destroy(){Mt(this,1),this.$destroy=t}$on(e,n){if(!s(n))return t;const r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(n),()=>{const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function _t(t){const e=t-1;return e*e*e+1}function Dt(t,{delay:n=0,duration:r=400,easing:i=e}={}){const o=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:i,css:t=>"opacity: "+t*o}}function Ut(t,{delay:e=0,duration:n=400,easing:r=_t,x:i=0,y:o=0,opacity:s=0}={}){const l=getComputedStyle(t),a=+l.opacity,c="none"===l.transform?"":l.transform,u=a*(1-s),[d,f]=b(i),[p,m]=b(o);return{delay:e,duration:n,easing:r,css:(t,e)=>`\n\t\t\ttransform: ${c} translate(${(1-t)*d}${f}, ${(1-t)*p}${m});\n\t\t\topacity: ${a-u*e}`}}const Ft=[];function Ht(e,n=t){let r;const i=new Set;function o(t){if(l(e,t)&&(e=t,r)){const t=!Ft.length;for(const t of i)t[1](),Ft.push(t,e);if(t){for(let t=0;t<Ft.length;t+=2)Ft[t][0](Ft[t+1]);Ft.length=0}}}return{set:o,update:function(t){o(t(e))},subscribe:function(s,l=t){const a=[s,l];return i.add(a),1===i.size&&(r=n(o)||t),s(e),()=>{i.delete(a),0===i.size&&r&&(r(),r=null)}}}}function zt(e,n,r){const i=!Array.isArray(e),l=i?[e]:e,a=n.length<2;return c=e=>{let r=!1;const c=[];let d=0,f=t;const p=()=>{if(d)return;f();const r=n(i?c[0]:c,e);a?e(r):f=s(r)?r:t},m=l.map(((t,e)=>u(t,(t=>{c[e]=t,d&=~(1<<e),r&&p()}),(()=>{d|=1<<e}))));return r=!0,p(),function(){o(m),f(),r=!1}},{subscribe:Ht(r,c).subscribe};var c}const Bt=APP_LANG,Wt=APP_NAME;WEBAPP_NAME;const Jt=USER_ID;IS_SUPERUSER,ADD_PERMISSION;const Xt=CSRF_TOKEN,Gt=ADDITIONAL_MODULES,Zt="Region",Yt=SAS_APP_URL,Qt=CANTALOUPE_APP_URL,Kt=MEDIA_PATH,te=PAGE_LEN,ee=Ht(!1),ne=Ht("");async function re(t){ee.set(!0);try{return await t()}finally{ee.set(!1)}}function ie(t,e=100){const n=Math.floor(.75*e);return t.length>e?t.slice(0,n)+"..."+t.slice(-e+n):t}function oe(t,e){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(e));if(!isNaN(n))return t.set(n),n}return t.set(1),1}function se(t,e,n){if(e.set(t),"undefined"!=typeof window){const e=new URL(window.location.href);e.searchParams.set(n,t),window.history.pushState({},"",e)}}function le(t=null,e="full",n="full"){if(!t)return"https://placehold.co/96x96/png?text=No+image";if((t=t.split("_")).length<3)return"https://placehold.co/96x96/png?text=No+image";const r=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,i=t.join("_").replace(".jpg","");return`${Qt??"http://localhost:8182"}/iiif/2/${i}.jpg/${r}/${n}/0/default.jpg`}function ae(t=null,e=1){return`${Yt??"http://localhost:3000"}/index.html?iiif-content=${t}&canvas=${e}`}function ce(t,e=null,n=!1){return new Promise((r=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:r(void 0),e&&(document.getElementById("modal-title").innerHTML=e),document.getElementById("modal-body").innerHTML=t,document.getElementById("hidden-msg-btn").click();const i=document.getElementById("cancel-btn"),o=document.getElementById("ok-btn"),s=document.getElementById("modal-bkg"),l=()=>{i.removeEventListener("click",a),s.removeEventListener("click",a),o.removeEventListener("click",c),document.getElementById("modal-footer").hidden=!0},a=()=>{l(),r(!1)},c=()=>{l(),r(!0)};i.addEventListener("click",a),o.addEventListener("click",c)}else n?r(window.confirm(t)):(window.alert(t),r(void 0))}))}function ue(t,e){const n=window.URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`${e}`,document.body.appendChild(r),r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r)}const de=function(){const t={id:null,type:"documentSet",title:"en"===Bt?"Document set":"Set de document",selected:{}},e={id:null,type:"regionsSet",title:"en"===Bt?"Regions set":"Set de régions",selected:{}},n=Ht({records:JSON.parse(localStorage.getItem("documentSet"))||t,regions:JSON.parse(localStorage.getItem("regionsSet"))||e}),{subscribe:r,update:i,get:o}=n,s=Ht(!1);function l(t,e=!1){s.set(e),localStorage.setItem(t.type,JSON.stringify(t))}function a(t,e){return t[e?"regions":"records"]?.selected||{}}function c(t,e=!0){const n=a(t,e);return e?n[Zt]??{}:Object.entries(n)}function u(t,e,n){const r=n===Zt?"regions":"records",i=t[r],{[e]:o,...s}=i.selected[n];return t[r]={...i,selected:{...i.selected,[n]:s}},l(t[r]),t}function d(t,e,n=!0){const r=e.class===Zt?"regions":"records",i=t[r],o=i.selected,s=e.class===Zt?e:{title:e.title,url:e.url};return t[r]={...i,selected:{...o,[e.class]:{...o[e.class]||{},[e.id]:s}}},n&&l(t[r]),t}function f(t,e){return t[e.class.toLowerCase().includes("regions")?"regions":"records"].id===e.id}return{subscribe:r,save:t=>i((e=>function(t,e){const n=e?"regions-set":"document-set";if(e)return window.alert("Region set management is not yet implemented"),t;let r=t[e?"regions":"records"],o={};Object.entries(r.selected).forEach((([t,e])=>{o[t]=Object.keys(e)}));const l=null!==r.id?`${r.id}/change`:"add";return fetch(`${window.location.origin}/${Wt}/${n}/${l}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Xt},body:JSON.stringify({title:r.title,selection:r,...o})}).then((t=>t.json())).then((t=>{if(!t?.document_set_id)throw new Error("Failed to save selection");i((n=>{const r=n[e?"regions":"records"];return r.id=t.document_set_id,r.title=t.document_set_title,s.set(!0),n}))})).catch((t=>console.error("Error:",t))),t}(e,t))),empty:n=>i((r=>(r[n?"regions":"records"]=n?e:t,l(r[n?"regions":"records"]),r))),removeAll:(t,e)=>i((n=>function(t,e,n){const r=n===Zt?"regions":"records",i=t[r];let o=i.selected[n];return o&&Object.keys(o).length?(e.forEach((t=>{delete o[t]})),t[r]={...i,selected:{...i.selected,[n]:o}},l(t[r]),t):t}(n,t,e))),remove:(t,e)=>i((n=>u(n,t,e))),addAll:t=>i((e=>function(t,e){const n=e[0].type===Zt;return e.forEach((e=>{t=d(t,e,!1)})),l(t[n?"regions":"records"]),t}(e,t))),add:t=>i((e=>d(e,t))),toggle:t=>i((e=>{const n=a(e,t.class===Zt);return n[t.class]?.[t.id]?u(e,t.id,t.class):d(e,t)})),updateTitle:(t,e)=>i((n=>{const r=e?"regions":"records";return n[r]={...n[r],title:t},l(n[r],!0),n})),isSaved:s,isSelected:zt(n,(t=>e=>a(t,e.class===Zt)[e.class]?.hasOwnProperty(e.id)||!1)),isSetSelected:zt(n,(t=>e=>f(t,e))),selected:zt(n,(t=>e=>c(t,e))),nbSelected:zt(n,(t=>e=>{const n=c(t,e);return e?Object.keys(n).length:n.reduce(((t,[e,n])=>t+Object.keys(n).length),0)})),selectionTitle:zt(n,(t=>e=>t[e?"regions":"records"].title)),selection:zt(n,(t=>e=>t[e?"regions":"records"])),toggleSet:n=>i((r=>f(r,n)?function(n,r){const i=r.class.toLowerCase().includes("regions");return n[i?"regions":"records"]=i?e:t,l(n[i?"regions":"records"]),n}(r,n):function(t,e){const n=e.class.toLowerCase().includes("regions")?"regions":"records";return null===e.selection.id&&(e.selection.id=e.id),t[n]=e.selection,l(t[n]),t}(r,n)))}}();const fe=function(){const t=`${window.location.origin}${window.location.pathname}`,e=Ht(1),n=Ht({}),r=Ht({}),i=Ht("");oe(e,"p");const o=(async()=>{const e=await fetch(`${t}canvas`),r=await e.json();let i={};return Object.values(r).forEach((t=>{Object.entries(t).forEach((([t,e])=>{i[t]=e}))})),n.set(i),r})(),s=zt(e,(e=>(async()=>{const n=await fetch(`${t}canvas?p=${e}`),i=await n.json();return r.set(i),i})()));return{currentPage:e,pageRegions:r,allRegions:n,fetchPages:s,fetchAll:o,handlePageUpdate:function(t){se(t,e,"p")},remove:function(t){n.update((e=>(delete e[t],{...e}))),r.update((e=>{for(const n in e)if(e[n][t]){const{[t]:r,...i}=e[n];return e[n]=i,e}return e}))},clipBoard:i,copyRef:function(t){i.update((e=>{const n=e===t?"":t;return navigator.clipboard.writeText(n).then((t=>"")),n}))}}}();function pe(t){let e,n,r;return{c(){e=N("div"),e.innerHTML='<div class="loader svelte-vizlcg"></div>',_(e,"class","bkg-shade svelte-vizlcg")},m(t,n){P(t,e,n),r=!0},i(t){r||(mt((()=>{r&&(n||(n=Pt(e,Dt,{duration:150},!0)),n.run(1))})),r=!0)},o(t){n||(n=Pt(e,Dt,{duration:150},!1)),n.run(0),r=!1},d(t){t&&L(e),t&&n&&n.end()}}}function me(t){let e,n,r=t[0]&&pe();return{c(){r&&r.c(),e=V()},m(t,i){r&&r.m(t,i),P(t,e,i),n=!0},p(t,[n]){t[0]?r?1&n&&Et(r,1):(r=pe(),r.c(),Et(r,1),r.m(e.parentNode,e)):r&&(kt(),Ct(r,1,1,(()=>{r=null})),St())},i(t){n||(Et(r),n=!0)},o(t){Ct(r),n=!1},d(t){r&&r.d(t),t&&L(e)}}}function ge(t,e,n){let{visible:r=!1}=e;return t.$$set=t=>{"visible"in t&&n(0,r=t.visible)},[r]}class he extends qt{constructor(t){super(),jt(this,t,ge,me,l,{visible:0})}}function ve(t){let e;return{c(){e=R("path"),_(e,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),_(e,"class","svelte-rtaaid")},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function $e(t){let e;return{c(){e=R("path"),_(e,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),_(e,"class","svelte-rtaaid")},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function be(e){let n,r="en"===Bt?"Copy ID":"Copier l'ID";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function we(e){let n,r="en"===Bt?"Copied!":"Copié !";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function ye(t){let e,n,r,i,s,l,a,u,d,f,p,m,g,h,v,$,b,w;function y(t,e){return t[4]?$e:ve}let x=y(t),k=x(t);function S(t,e){return t[4]?we:be}let C=S(t),O=C(t);return{c(){e=N("div"),n=N("figure"),r=N("img"),s=A(),l=N("div"),a=N("span"),d=A(),f=N("button"),p=R("svg"),k.c(),m=A(),g=N("span"),O.c(),_(r,"class","region-img svelte-rtaaid"),c(r.src,i=le(t[0].img,t[0].xyhw,t[1]?"96,":`,${t[2]}`))||_(r,"src",i),_(r,"alt","Extracted region"),_(a,"class","overlay-desc"),_(l,"class","overlay is-center svelte-rtaaid"),_(n,"class",u="image card region-image "+(t[1]?"is-96x96":"")+" svelte-rtaaid"),_(n,"tabindex","-1"),z(n,"height",t[2]+"px"),z(n,"min-width",t[2]+"px"),_(p,"xmlns","http://www.w3.org/2000/svg"),_(p,"viewBox","0 0 384 512"),_(p,"class","svelte-rtaaid"),_(g,"class","tooltip svelte-rtaaid"),_(f,"class","button region-btn tag svelte-rtaaid"),_(e,"class",h="region is-center "+(t[5](t[0])?"checked":"")+" svelte-rtaaid")},m(i,o){P(i,e,o),E(e,n),E(n,r),E(n,s),E(n,l),E(l,a),a.innerHTML=t[3],E(e,d),E(e,f),E(f,p),k.m(p,null),E(f,m),E(f,g),O.m(g,null),$=!0,b||(w=[M(n,"click",t[9]),M(n,"keyup",xe),M(f,"click",t[10])],b=!0)},p(t,[o]){(!$||7&o&&!c(r.src,i=le(t[0].img,t[0].xyhw,t[1]?"96,":`,${t[2]}`)))&&_(r,"src",i),(!$||8&o)&&(a.innerHTML=t[3]),(!$||2&o&&u!==(u="image card region-image "+(t[1]?"is-96x96":"")+" svelte-rtaaid"))&&_(n,"class",u),(!$||4&o)&&z(n,"height",t[2]+"px"),(!$||4&o)&&z(n,"min-width",t[2]+"px"),x!==(x=y(t))&&(k.d(1),k=x(t),k&&(k.c(),k.m(p,null))),C===(C=S(t))&&O?O.p(t,o):(O.d(1),O=C(t),O&&(O.c(),O.m(g,null))),(!$||33&o&&h!==(h="region is-center "+(t[5](t[0])?"checked":"")+" svelte-rtaaid"))&&_(e,"class",h)},i(t){$||(mt((()=>{$&&(v||(v=Pt(e,Dt,{duration:500},!0)),v.run(1))})),$=!0)},o(t){v||(v=Pt(e,Dt,{duration:500},!1)),v.run(0),$=!1},d(t){t&&L(e),k.d(),O.d(),t&&v&&v.end(),b=!1,o(w)}}}const xe=()=>null;function ke(t,e,n){let r,i,o;const{isSelected:s}=de;f(t,s,(t=>n(5,o=t)));const{clipBoard:l}=fe;f(t,l,(t=>n(8,i=t)));let{item:a}=e,{isSquare:c=!0}=e,{height:u=(c?96:140)}=e,{desc:d=a.title}=e;return t.$$set=t=>{"item"in t&&n(0,a=t.item),"isSquare"in t&&n(1,c=t.isSquare),"height"in t&&n(2,u=t.height),"desc"in t&&n(3,d=t.desc)},t.$$.update=()=>{257&t.$$.dirty&&n(4,r=a.ref===i)},[a,c,u,d,r,o,s,l,i,()=>de.toggle(a),()=>fe.copyRef(a.ref)]}class Se extends qt{constructor(t){super(),jt(this,t,ke,ye,l,{item:0,isSquare:1,height:2,desc:3})}}function Ee(e){let n,r,i,o,s,l,a,c,u,d="en"===Bt?"Selection":"Sélection";return{c(){n=N("div"),r=N("button"),i=N("span"),o=N("i"),s=A(),l=T(d),a=T("\n            ("),c=T(e[0]),u=T(")"),_(o,"class","fa-solid fa-book-bookmark"),_(i,"id","btn-content"),_(r,"id","set-btn"),_(r,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),_(r,"data-target","selection-modal"),_(n,"class","set-container svelte-hs48f9")},m(t,e){P(t,n,e),E(n,r),E(r,i),E(i,o),E(i,s),E(i,l),E(i,a),E(i,c),E(i,u)},p(t,[e]){1&e&&F(c,t[0])},i:t,o:t,d(t){t&&L(n)}}}function Ce(t,e,n){let{selectionLength:r=0}=e,i=r;return t.$$set=t=>{"selectionLength"in t&&n(0,r=t.selectionLength)},t.$$.update=()=>{if(3&t.$$.dirty&&r!==i){const t=r>i;n(1,i=r);const e=document.getElementById("btn-content");e&&e.animate([{transform:t?"translateY(-7px)":"translateX(-5px)"},{transform:t?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[r,i]}class Oe extends qt{constructor(t){super(),jt(this,t,Ce,Ee,l,{selectionLength:0})}}function Pe(e){let n,r,i,o,s,l,a,c,u,d,f,p,m,g,h;return{c(){n=N("button"),r=A(),i=N("div"),o=N("div"),s=A(),l=N("div"),a=N("div"),a.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',c=A(),u=N("section"),d=A(),f=N("footer"),p=N("div"),m=N("button"),m.textContent=""+("en"===Bt?"Abort":"Retour"),g=A(),h=N("button"),h.textContent="OK",_(n,"id","hidden-msg-btn"),_(n,"class","js-modal-trigger"),_(n,"data-target","msg-modal"),n.hidden=!0,_(o,"id","modal-bkg"),_(o,"class","modal-background"),_(a,"class","modal-card-head media mb-0"),_(u,"id","modal-body"),_(u,"class","modal-card-body"),_(m,"id","cancel-btn"),_(m,"class","button is-link is-light button-close"),_(h,"id","ok-btn"),_(h,"class","button is-link button-close"),_(p,"class","buttons"),_(f,"id","modal-footer"),_(f,"class","modal-card-foot is-center pt-3"),f.hidden=!0,_(l,"class","modal-content"),_(i,"id","msg-modal"),_(i,"class","modal fade"),_(i,"tabindex","-1"),_(i,"aria-labelledby","selection-modal-label"),_(i,"aria-hidden","true")},m(t,e){P(t,n,e),P(t,r,e),P(t,i,e),E(i,o),E(i,s),E(i,l),E(l,a),E(l,c),E(l,u),E(l,d),E(l,f),E(f,p),E(p,m),E(p,g),E(p,h)},p:t,i:t,o:t,d(t){t&&L(n),t&&L(r),t&&L(i)}}}class Le extends qt{constructor(t){super(),jt(this,t,null,Pe,l,{})}}function Ie(e){let n,r,i,o,s,l=Gt.includes("regions"),a=l&&function(e){let n,r,i;return{c(){n=N("button"),n.textContent="en"===Bt?"Automatic region extraction":"Extraction automatique des régions",_(n,"class","button is-link is-inverted")},m(t,o){P(t,n,o),r||(i=M(n,"click",e[1]),r=!0)},p:t,d(t){t&&L(n),r=!1,i()}}}(e);return{c(){n=N("div"),r=N("button"),r.textContent=""+("en"===Bt?"Manually annotate":"Annoter manuellement"),i=A(),a&&a.c(),_(r,"class","button is-link"),_(n,"class","is-center buttons is-centered pt-5")},m(t,l){P(t,n,l),E(n,r),E(n,i),a&&a.m(n,null),o||(s=M(r,"click",e[0]),o=!0)},p(t,[e]){l&&a.p(t,e)},i:t,o:t,d(t){t&&L(n),a&&a.d(),o=!1,s()}}}function Ne(t,e,n){const r=ot("witness");let{currentRegionId:i}=e,{baseUrl:o}=e;return t.$$set=t=>{"currentRegionId"in t&&n(2,i=t.currentRegionId),"baseUrl"in t&&n(3,o=t.baseUrl)},[async function(){const t=`${window.location.origin}/${Wt}`;let e=`${t}/witness/${r.id}/regions/add`;if(1===r.regions.length||i){const n=i||r.regions[0];e=`${t}/witness/${r.id}/regions/${n}/add`}const n=await re((()=>fetch(e,{method:"POST",headers:{"X-CSRFToken":Xt}})));if(!n.ok)throw await ce(`Failed to create regions: '${n.statusText}'`,"Error"),new Error(`Failed to create regions: '${n.statusText}'`);let s;try{s=await n.json()}catch(t){throw await ce(`Failed to parse JSON response: '${t}'`,"Error"),new Error(`Failed to parse JSON response: '${t}'`)}s.hasOwnProperty("mirador_url")&&window.open(s.mirador_url),s.hasOwnProperty("regions_id")&&(window.location.href=`${o.split("regions/")[0]}regions/${s.regions_id}`)},async function(){const t=`${window.location.origin}/${Wt}/witness/${r.id}/regions/extract`,e=await re((()=>fetch(t,{method:"POST",headers:{"X-CSRFToken":Xt}})));let n;if(!e.ok){try{n=await e.json()}catch(t){throw await ce(`Failed to parse JSON response: '${t}'`,"Error"),new Error(`Failed to parse JSON response: '${t}'`)}throw await ce(`Failed to launch regions extraction: '${n.message}'`,"Error"),new Error(`Failed to launch regions extraction: '${n.message}'`)}const i=n.doc_set_id;if(!i)throw await ce("Failed to launch regions extraction: 'No document set id'","Error"),new Error("Failed to launch regions extraction: 'No document set id'");window.location.href=`${window.location.origin}/${Wt}/treatment/add/?document_set=${i}&task_type=regions`},i,o]}class Re extends qt{constructor(t){super(),jt(this,t,Ne,Ie,l,{currentRegionId:2,baseUrl:3})}}function Te(t,e,n){const r=t.slice();return r[6]=e[n],r}function Ae(t){let e,n=t[3].regions,r=[];for(let e=0;e<n.length;e+=1)r[e]=Me(Te(t,n,e));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=V()},m(t,n){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,n);P(t,e,n)},p(t,i){if(9&i){let o;for(n=t[3].regions,o=0;o<n.length;o+=1){const s=Te(t,n,o);r[o]?r[o].p(s,i):(r[o]=Me(s),r[o].c(),r[o].m(e.parentNode,e))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(t){I(r,t),t&&L(e)}}}function Ve(t){let e,n;function r(t,n){return 4&n&&(e=null),null==e&&(e=!!["all","page"].includes(t[2])),e?qe:"similarity"===t[2]?je:void 0}let i=r(t,-1),o=i&&i(t);return{c(){o&&o.c(),n=V()},m(t,e){o&&o.m(t,e),P(t,n,e)},p(t,e){i===(i=r(t,e))&&o?o.p(t,e):(o&&o.d(1),o=i&&i(t),o&&(o.c(),o.m(n.parentNode,n)))},d(t){o&&o.d(t),t&&L(n)}}}function Me(t){let e,n,r,i,o=t[6]+"";return{c(){e=N("a"),n=T("Regions #"),r=T(o),_(e,"href",i=""+(t[0]+t[6])),_(e,"class","tag is-dark mr-3 is-rounded")},m(t,i){P(t,e,i),E(e,n),E(e,r)},p(t,n){1&n&&i!==(i=""+(t[0]+t[6]))&&_(e,"href",i)},d(t){t&&L(e)}}}function je(e){let n,r,i;return{c(){n=N("button"),n.textContent=""+("en"===Bt?"Delete all regions similarity":"Supprimer toutes les similarités du document"),_(n,"class","tag is-danger")},m(t,o){P(t,n,o),r||(i=M(n,"click",e[5]),r=!0)},p:t,d(t){t&&L(n),r=!1,i()}}}function qe(e){let n,r,i;return{c(){n=N("button"),n.textContent=""+("en"===Bt?"Delete regions record":"Supprimer l'intégralité des régions"),_(n,"class","tag is-danger")},m(t,o){P(t,n,o),r||(i=M(n,"click",e[4]),r=!0)},p:t,d(t){t&&L(n),r=!1,i()}}}function _e(e){let n;function r(t,e){return t[1]?Ve:Ae}let i=r(e),o=i(e);return{c(){n=N("div"),o.c()},m(t,e){P(t,n,e),o.m(n,null)},p(t,[e]){i===(i=r(t))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n,null)))},i:t,o:t,d(t){t&&L(n),o.d()}}}function De(t,e,n){const r=ot("witness");let{baseUrl:i=`${window.location.origin}${window.location.pathname}`}=e,{currentRegionId:o}=e,{currentLayout:s}=e;return t.$$set=t=>{"baseUrl"in t&&n(0,i=t.baseUrl),"currentRegionId"in t&&n(1,o=t.currentRegionId),"currentLayout"in t&&n(2,s=t.currentLayout)},[i,o,s,r,async function(){if(!await ce("en"===Bt?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement ?","en"===Bt?"Confirm deletion":"Confirmer la suppression",!0))return;if("number"!=typeof o)throw new Error("Invalid region ID");const t=`${window.location.origin}/${Wt}/regions/${o}/delete`;try{const e=await re((()=>fetch(t,{method:"DELETE",headers:{"X-CSRFToken":Xt}})));if(204!==e.status)throw new Error(`Failed to delete regions: '${e.statusText}'`);window.location.href=`${i.split("regions/")[0]}regions/`}catch(t){console.error(t)}},async function(){if(!await ce("en"===Bt?"Are you sure you want to delete all similarity scores for this document?":"Voulez-vous vraiment supprimer l'intégralité des scores de similarité pour ce document ?","en"===Bt?"Confirm deletion":"Confirmer la suppression",!0))return;if("number"!=typeof o)throw new Error("Invalid region ID");const t=`${window.location.origin}/${Wt}/similarity/reset/${o}`;try{const e=await re((()=>fetch(t,{method:"DELETE",headers:{"X-CSRFToken":Xt}})));if(204!==e.status&&200!==e.status)throw new Error(`Failed to delete similarity: '${e.statusText}'`);window.location.href=`${i.split("regions/")[0]}regions/`}catch(t){console.error(t),await ce(t.message,"Error")}}]}class Ue extends qt{constructor(t){super(),jt(this,t,De,_e,l,{baseUrl:0,currentRegionId:1,currentLayout:2})}}function Fe(t){let e;return{c(){e=R("path"),_(e,"d","M471.6 21.7c-21.9-21.9-57.3-21.9-79.2 0L362.3 51.7l97.9 97.9 30.1-30.1c21.9-21.9 21.9-57.3 0-79.2L471.6 21.7zm-299.2 220c-6.1 6.1-10.8 13.6-13.5 21.9l-29.6 88.8c-2.9 8.6-.6 18.1 5.8 24.6s15.9 8.7 24.6 5.8l88.8-29.6c8.2-2.7 15.7-7.4 21.9-13.5L437.7 172.3 339.7 74.3 172.4 241.7zM96 64C43 64 0 107 0 160V416c0 53 43 96 96 96H352c53 0 96-43 96-96V320c0-17.7-14.3-32-32-32s-32 14.3-32 32v96c0 17.7-14.3 32-32 32H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h96c17.7 0 32-14.3 32-32s-14.3-32-32-32H96z"),_(e,"class","svelte-h0t5l9")},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function He(t){let e;return{c(){e=R("path"),_(e,"d","M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z"),_(e,"class","svelte-h0t5l9")},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function ze(e){let n,r="en"===Bt?"Edit":"Modifier";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function Be(e){let n,r="en"===Bt?"Validate":"Valider";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function We(e){let n,r,i,s,l,a,c,u,d,f,p,m,g,h,v,$,b="en"===Bt?"Reload":"Recharger",w="en"===Bt?"Go to editor":"Aller à l'éditeur",y="en"===Bt?"Delete selected regions":"Supprimer les régions sélectionnées";return{c(){n=N("button"),r=N("i"),i=A(),s=T(b),l=A(),a=N("a"),c=N("i"),u=A(),d=T(w),f=A(),p=N("button"),m=N("i"),g=A(),h=T(y),_(r,"class","fa-solid fa-rotate-right"),_(n,"class","tag is-link is-light is-rounded mr-3"),_(c,"class","fa-solid fa-edit"),_(a,"class","tag is-link is-rounded mr-3"),_(a,"href",ae(e[4])),_(a,"target","_blank"),_(m,"class","fa-solid fa-trash"),_(p,"class","tag is-danger is-rounded")},m(t,o){P(t,n,o),E(n,r),E(n,i),E(n,s),P(t,l,o),P(t,a,o),E(a,c),E(a,u),E(a,d),P(t,f,o),P(t,p,o),E(p,m),E(p,g),E(p,h),v||($=[M(n,"click",e[14]),M(p,"click",e[6])],v=!0)},p:t,d(t){t&&L(n),t&&L(l),t&&L(a),t&&L(f),t&&L(p),v=!1,o($)}}}function Je(e){let n,r,i,s,l,a,c,u,d,f,p,m,g,h,v,$,b,w,y,x="en"===Bt?"Download":"Télécharger";function k(t,e){return t[0]?He:Fe}let S=k(e),C=S(e);function O(t,e){return t[0]?Be:ze}let I=O(e),V=I(e),j=e[0]&&We(e);return{c(){n=N("div"),r=N("button"),i=R("svg"),C.c(),s=A(),V.c(),a=A(),c=N("button"),u=N("i"),d=A(),f=N("span"),f.textContent=""+("en"===Bt?"Select all":"Tout sélectionner"),p=A(),m=N("button"),g=N("i"),h=A(),v=T(x),$=A(),b=N("div"),j&&j.c(),_(i,"xmlns","http://www.w3.org/2000/svg"),_(i,"viewBox","0 0 384 512"),_(i,"class","pr-3 svelte-h0t5l9"),_(r,"class",l="button "+(e[0]?"is-success":"is-link")+" mr-3"),_(u,"class","fa-solid fa-square-check"),_(f,"id","all-selection"),_(c,"class","button is-link is-light mr-3"),_(g,"class","fa-solid fa-download"),_(m,"class","button is-link is-light"),_(n,"class","is-right mb-3"),_(b,"class","edit-action is-right svelte-h0t5l9")},m(t,o){P(t,n,o),E(n,r),E(r,i),C.m(i,null),E(r,s),V.m(r,null),E(n,a),E(n,c),E(c,u),E(c,d),E(c,f),E(n,p),E(n,m),E(m,g),E(m,h),E(m,v),P(t,$,o),P(t,b,o),j&&j.m(b,null),w||(y=[M(r,"click",e[13]),M(c,"click",e[7]),M(m,"click",e[8])],w=!0)},p(t,[e]){S!==(S=k(t))&&(C.d(1),C=S(t),C&&(C.c(),C.m(i,null))),I===(I=O(t))&&V?V.p(t,e):(V.d(1),V=I(t),V&&(V.c(),V.m(r,null))),1&e&&l!==(l="button "+(t[0]?"is-success":"is-link")+" mr-3")&&_(r,"class",l),t[0]?j?j.p(t,e):(j=We(t),j.c(),j.m(b,null)):j&&(j.d(1),j=null)},i:t,o:t,d(t){t&&L(n),C.d(),V.d(),t&&L($),t&&L(b),j&&j.d(),w=!1,o(y)}}}async function Xe(t){const e=SAS_APP_URL.replace("https","http"),n=`${SAS_APP_URL}/annotation/destroy?uri=${e}/annotation/${t}`,r=await fetch(n,{method:"DELETE"});if(204!==r.status)throw new Error(`Failed to delete ${n} due to ${r.status}: '${r.statusText}'`)}function Ge(t,e,n){let r,i,o,s,l,a,c;const{selected:u,nbSelected:d}=de;f(t,u,(t=>n(10,l=t))),f(t,d,(t=>n(12,c=t)));const{allRegions:p}=fe;f(t,p,(t=>n(11,a=t)));const m=ot("manifest"),g=ot("isValidated");function h(){n(0,i=!i)}return t.$$.update=()=>{4096&t.$$.dirty&&n(9,r=c(!0)),1024&t.$$.dirty&&(o=l(!0)),2560&t.$$.dirty&&(s=r>=Object.keys(a).length)},n(0,i=!g),[i,u,d,p,m,h,async function(){if(await ce("en"===Bt?"Are you sure you want to delete these regions?":"Voulez-vous vraiment supprimer ces régions ?","en"===Bt?"Confirm deletion":"Confirmer la suppression",!0))for(const t of Object.keys(o))try{if(!a.hasOwnProperty(t))continue;await Xe(t),fe.remove(t),de.remove(t,Zt)}catch(e){await ce(`Failed to delete region ${t}: ${e.message}`,"Error")}},function(){s?de.removeAll(Object.keys(a),Zt):de.addAll(Object.values(a))},async function(){const t=Object.values(l(!0)).map((t=>t.ref)),e=await re((()=>fetch(`${window.location.origin}/${Wt}/regions/export`,{method:"POST",headers:{"X-CSRFToken":Xt},body:JSON.stringify({regionsRef:t})})));ue(await e.blob(),"regions.zip")},r,l,a,c,()=>h(),()=>location.reload()]}class Ze extends qt{constructor(t){super(),jt(this,t,Ge,Je,l,{})}}const Ye=function(){const t=`${window.location.origin}${window.location.pathname}`,e=window.location.pathname.match(/\d+/g).join("-"),n={[e]:{}},r=Ht(1),i=Ht({});let o=JSON.parse(localStorage.getItem("selectedRegions"));o&&!o.hasOwnProperty(e)&&(o=n);const s=Ht(o||n),l=Ht(JSON.parse(localStorage.getItem("excludedCategories"))||[]),a=Ht([]),c=Ht([]),u=()=>oe(r,"sp"),f=zt(r,(t=>(async()=>function(t){const e=25*(t-1),n=e+25,r=d(a).slice(e,n);return c.set(r),r}(t))()));function p(t){se(t,r,"sp")}function m(t){localStorage.setItem("selectedRegions",JSON.stringify(t))}const g=zt(s,(t=>n=>t[e]?.hasOwnProperty(n))),h=[2,6],v=Ht({recursionDepth:h,filterByRegion:!1}),$=zt([v,Ht({})],(([t,e])=>({propagate:t,other:e})));return{currentPage:r,comparedRegions:i,excludedCategories:l,qImgs:a,pageQImgs:c,selectedRegions:s,fetchSimilarity:async function(){ee.set(!0);try{const e=await fetch(`${t}compared-regions`),n=await e.json();i.set(n);const r=await fetch(`${t}query-images`),o=await r.json();o.length>0&&(a.set(o),p(u()))}catch(t){console.error("Error:",t),ne.set(t.message)}finally{ee.set(!1)}},setPageQImgs:f,getRegionsInfo:function(t){const e=d(i),n=Object.keys(e).filter((e=>e.startsWith(t)));return 1!==n.length?{title:"Error"}:e[n[0]]},handlePageUpdate:p,unselect:function(t){s.update((n=>{const r={...n};return delete r[e][t],m(r),r}))},select:function(t){s.update((n=>{const r={...n,[e]:{...n[e]||{},[t.ref]:t}};return m(r),r}))},addComparedRegions:function(t){i.update((e=>({...e,[t.ref]:t})))},isSelected:g,pageLength:25,toolbarParams:$,propagateParams:v,allowedPropagateDepthRange:h}}();function Qe(t){let e,n,r;const i=t[1].default,o=p(i,t,t[0],null);return{c(){e=N("table"),n=N("tbody"),o&&o.c(),_(e,"class","table is-fullwidth")},m(t,i){P(t,e,i),E(e,n),o&&o.m(n,null),r=!0},p(t,[e]){o&&o.p&&(!r||1&e)&&h(o,i,t,t[0],r?g(i,t[0],e,null):v(t[0]),null)},i(t){r||(Et(o,t),r=!0)},o(t){Ct(o,t),r=!1},d(t){t&&L(e),o&&o.d(t)}}}function Ke(t,e,n){let{$$slots:r={},$$scope:i}=e;return t.$$set=t=>{"$$scope"in t&&n(0,i=t.$$scope)},[i,r]}class tn extends qt{constructor(t){super(),jt(this,t,Ke,Qe,l,{})}}function en(t){let e,n,r,i,o,s,l,a,c,u=t[4]>1&&nn(t),d=t[4]<t[3]&&sn(t);return{c(){e=N("nav"),n=N("ul"),u&&u.c(),r=A(),i=N("li"),o=N("a"),s=T(t[4]),l=A(),d&&d.c(),_(o,"class","pagination-link is-current"),_(o,"href",null),_(n,"class","pagination-list ml-0"),_(e,"class","pagination is-centered mb-2"),_(e,"aria-label","pagination")},m(f,p){P(f,e,p),E(e,n),u&&u.m(n,null),E(n,r),E(n,i),E(i,o),E(o,s),E(n,l),d&&d.m(n,null),a||(c=M(o,"click",j(t[8])),a=!0)},p(t,e){t[4]>1?u?u.p(t,e):(u=nn(t),u.c(),u.m(n,r)):u&&(u.d(1),u=null),16&e&&F(s,t[4]),t[4]<t[3]?d?d.p(t,e):(d=sn(t),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(t){t&&L(e),u&&u.d(),d&&d.d(),a=!1,c()}}}function nn(t){let e,n,r,i,o,s,l=t[4]-1>1&&rn(t);return{c(){e=N("li"),n=N("a"),n.textContent="1",r=A(),l&&l.c(),i=V(),_(n,"class","pagination-link"),_(n,"href",null)},m(a,c){P(a,e,c),E(e,n),P(a,r,c),l&&l.m(a,c),P(a,i,c),o||(s=M(n,"click",j(t[6])),o=!0)},p(t,e){t[4]-1>1?l?l.p(t,e):(l=rn(t),l.c(),l.m(i.parentNode,i)):l&&(l.d(1),l=null)},d(t){t&&L(e),t&&L(r),l&&l.d(t),t&&L(i),o=!1,s()}}}function rn(t){let e,n,r,i,o,s,l=t[4]-1+"",a=t[4]-1>2&&on();return{c(){a&&a.c(),e=A(),n=N("li"),r=N("a"),i=T(l),_(r,"class","pagination-link"),_(r,"href",null)},m(l,c){a&&a.m(l,c),P(l,e,c),P(l,n,c),E(n,r),E(r,i),o||(s=M(r,"click",j(t[7])),o=!0)},p(t,n){t[4]-1>2?a||(a=on(),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),16&n&&l!==(l=t[4]-1+"")&&F(i,l)},d(t){a&&a.d(t),t&&L(e),t&&L(n),o=!1,s()}}}function on(t){let e;return{c(){e=N("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function sn(t){let e,n,r,i,o,s,l=t[4]+1<t[3]&&ln(t);return{c(){l&&l.c(),e=A(),n=N("li"),r=N("a"),i=T(t[3]),_(r,"class","pagination-link"),_(r,"href",null)},m(a,c){l&&l.m(a,c),P(a,e,c),P(a,n,c),E(n,r),E(r,i),o||(s=M(r,"click",j(t[10])),o=!0)},p(t,n){t[4]+1<t[3]?l?l.p(t,n):(l=ln(t),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null),8&n&&F(i,t[3])},d(t){l&&l.d(t),t&&L(e),t&&L(n),o=!1,s()}}}function ln(t){let e,n,r,i,o,s,l,a=t[4]+1+"",c=t[4]+2<t[3]&&an();return{c(){e=N("li"),n=N("a"),r=T(a),i=A(),c&&c.c(),o=V(),_(n,"class","pagination-link"),_(n,"href",null)},m(a,u){P(a,e,u),E(e,n),E(n,r),P(a,i,u),c&&c.m(a,u),P(a,o,u),s||(l=M(n,"click",j(t[9])),s=!0)},p(t,e){16&e&&a!==(a=t[4]+1+"")&&F(r,a),t[4]+2<t[3]?c||(c=an(),c.c(),c.m(o.parentNode,o)):c&&(c.d(1),c=null)},d(t){t&&L(e),t&&L(i),c&&c.d(t),t&&L(o),s=!1,l()}}}function an(t){let e;return{c(){e=N("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(t,n){P(t,e,n)},d(t){t&&L(e)}}}function cn(e){let n,r,i,o,s,l,a,c=e[4]*e[2]-e[2]+1+"",u=Math.min(e[4]*e[2],e[1])+"",d=(e[3]>1||e[1]>e[2])&&en(e);return{c(){d&&d.c(),n=A(),r=N("div"),i=T(c),o=T(" - "),s=T(u),l=T(" / "),a=T(e[1]),_(r,"class","is-size-7 is-center mb-4")},m(t,e){d&&d.m(t,e),P(t,n,e),P(t,r,e),E(r,i),E(r,o),E(r,s),E(r,l),E(r,a)},p(t,[e]){t[3]>1||t[1]>t[2]?d?d.p(t,e):(d=en(t),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),20&e&&c!==(c=t[4]*t[2]-t[2]+1+"")&&F(i,c),22&e&&u!==(u=Math.min(t[4]*t[2],t[1])+"")&&F(s,u),2&e&&F(a,t[1])},i:t,o:t,d(t){d&&d.d(t),t&&L(n),t&&L(r)}}}function un(t,e,n){let r,i,{store:o}=e;const{currentPage:s}=o;f(t,s,(t=>n(4,i=t)));let{nbOfItems:l}=e,{pageLength:a=te}=e;return t.$$set=t=>{"store"in t&&n(0,o=t.store),"nbOfItems"in t&&n(1,l=t.nbOfItems),"pageLength"in t&&n(2,a=t.pageLength)},t.$$.update=()=>{6&t.$$.dirty&&n(3,r=a<te?1:Math.ceil(l/a))},[o,l,a,r,i,s,()=>o.handlePageUpdate(1),()=>o.handlePageUpdate(i-1),()=>o.handlePageUpdate(i),()=>o.handlePageUpdate(i+1),()=>o.handlePageUpdate(r)]}class dn extends qt{constructor(t){super(),jt(this,t,un,cn,l,{store:0,nbOfItems:1,pageLength:2})}}const fn='<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 69">\n        <rect x="10" y="10.62" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <rect x="1" y="1" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <rect x="10" y="10.62" width="46" height="45.71" rx="4.11" ry="4.11" fill="currentColor" stroke="none"/>\n    </svg>',pn='<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71">\n        <rect x="12" y="12.43" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <path d="M 12 21.43 L 21 12.43" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 12 30 L 30 12.43" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 40 56 L 57 38" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 48.3 56.29 L 57 47" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 12 39 L 39 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 12 48 L 48 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 13 56 L 57 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 31 56 L 57 29" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 21 57 L 57 21" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n    </svg>',mn='<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 73">\n        <rect x="14" y="14.43" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3" stroke-dasharray="9 9"/>\n        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n    </svg>',gn='<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59 59">\n        <rect x="1" y="0.62" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <path d="M 2.67 54.55 L 55 2" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n        <path d="M 54.37 54.05 L 2.72 2.24" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>\n    </svg>',hn='<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59 59">\n        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>\n        <path d="M 8.69 55.28 C 9.25 44.15 18.08 35.28 28.86 35.28 C 32.5 35.28 36.07 36.3 39.18 38.25 C 44.96 41.85 48.66 48.3 49.02 55.28 Z M 17.85 21.48 C 17.85 15.37 22.79 10.39 28.86 10.39 C 34.92 10.39 39.86 15.37 39.86 21.48 C 39.86 27.59 34.92 32.56 28.86 32.56 C 22.79 32.56 17.85 27.59 17.85 21.48 Z M 40.37 36.34 C 38.43 35.13 36.32 34.25 34.13 33.7 C 38.82 31.64 42.1 26.94 42.1 21.48 C 42.1 14.13 36.16 8.15 28.86 8.15 C 21.55 8.15 15.61 14.13 15.61 21.48 C 15.61 26.95 18.9 31.66 23.6 33.71 C 13.76 36.18 6.41 45.4 6.41 56.4 C 6.41 57.02 6.92 57.52 7.54 57.52 L 50.17 57.52 C 50.79 57.52 51.3 57.02 51.3 56.4 C 51.3 48.23 47.11 40.54 40.37 36.34 Z" fill="currentColor" stroke="none"/>\n    </svg>',vn="en"===Bt?"overall visual matches":"correspondances visuelles globales",$n="en"===Bt?"visual matches on part of the image":"correspondances visuelles sur une partie de l'image",bn="en"===Bt?"semantic and non-visual matches":"correspondances sémantiques et non-visuelle",wn="en"===Bt?"regions without match":"régions sans correspondance",yn="en"===Bt?"user specific category":"correspondances spécifiques à l'utilisateur";function xn(t){let e,n,r,i,s,l,a,c,u,d,f,p,m,g,h,v;return n=new Se({props:{item:t[2],size:256,desc:t[3],isSquare:!1}}),{c(){e=N("div"),At(n.$$.fragment),r=A(),i=N("div"),s=N("span"),l=A(),a=N("span"),c=A(),u=N("span"),d=A(),f=N("span"),p=A(),m=N("span"),_(s,"class","tag is-hoverable pl-4 pr-3 py-4"),_(s,"title","en"===Bt?"Exact match":"Correspondance exacte"),B(s,"is-selected",1===t[0]),_(a,"class","tag is-hoverable py-4 px-3"),_(a,"title","en"===Bt?"Partial match":"Correspondance partielle"),B(a,"is-selected",2===t[0]),_(u,"class","tag is-hoverable py-4 px-3"),_(u,"title","en"===Bt?"Semantic match":"Correspondance sémantique"),B(u,"is-selected",3===t[0]),_(f,"class","tag is-hoverable py-4 px-3"),_(f,"title","en"===Bt?"No match":"Aucune correspondance"),B(f,"is-selected",4===t[0]),_(m,"class","tag is-hoverable pl-3 pr-4 py-4"),_(m,"title","en"===Bt?"User match":"Correspondance utilisateur"),B(m,"is-selected",t[1]),_(i,"class","tags has-addons is-dark is-center")},m(o,$){P(o,e,$),Vt(n,e,null),E(e,r),E(e,i),E(i,s),s.innerHTML=fn,E(i,l),E(i,a),a.innerHTML=pn,E(i,c),E(i,u),u.innerHTML=mn,E(i,d),E(i,f),f.innerHTML=gn,E(i,p),E(i,m),m.innerHTML=hn,g=!0,h||(v=[M(s,"click",t[13]),M(s,"keyup",null),M(a,"click",t[14]),M(a,"keyup",null),M(u,"click",t[15]),M(u,"keyup",null),M(f,"click",t[16]),M(f,"keyup",null),M(m,"click",t[17]),M(m,"keyup",null)],h=!0)},p(t,[e]){(!g||1&e)&&B(s,"is-selected",1===t[0]),(!g||1&e)&&B(a,"is-selected",2===t[0]),(!g||1&e)&&B(u,"is-selected",3===t[0]),(!g||1&e)&&B(f,"is-selected",4===t[0]),(!g||2&e)&&B(m,"is-selected",t[1])},i(t){g||(Et(n.$$.fragment,t),g=!0)},o(t){Ct(n.$$.fragment,t),g=!1},d(t){t&&L(e),Mt(n),h=!1,o(v)}}}function kn(t,e,n){let r,i;const o=new URL(window.location.href),s=o.origin;o.pathname;let{qImg:l}=e,{sImg:a}=e,{qRegions:c}=e,{sRegions:u}=e,{score:d=0}=e,{category:f=null}=e,{users:p=[]}=e,{isManual:m}=e;const g=ot("similarityPropagatedContext")||!1,[h,v,$,b]=a.split(".")[0].split("_"),w={id:a,img:a,title:`Canvas ${$} - ${b} - ${"en"===Bt?"Witness":"Témoin"} #${y=h,y.match(/\d+/g).toString()}`,xywh:b,canvas:$,ref:a.replace(".jpg",""),type:Zt};var y;const x=`${h}_${v}`,k=`${Ye.getRegionsInfo(x).title}<br>\n        Page ${parseInt($)}<br>\n        <b>${d?`Score: ${d}`:"en"===Bt?"Manual similarity":"Correspondance manuelle"}</b>`;function S(t){let e=(t=t.slice()).indexOf(Number(Jt));return i&&-1===e?t.push(Number(Jt)):i||-1===e||t.splice(e,1),t}const E=()=>({img_1:l,img_2:a,regions_id_1:c,regions_id_2:u,score:d,category:r,category_x:S(p),is_manual:m||g});function C(t){5===t?n(1,i=!i):n(0,r=r===t?null:t)}async function O(t){console.log("categorize called !"),C(t),console.log(E());try{const e=await fetch(`${s}/${Wt}/save-category`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Xt},body:JSON.stringify(E())});e.ok?e.json().then((t=>console.log("categorize success response",t))):(console.error("Error: Network response was not ok"),C(t))}catch(e){console.error("Error:",e),C(t)}}return t.$$set=t=>{"qImg"in t&&n(5,l=t.qImg),"sImg"in t&&n(6,a=t.sImg),"qRegions"in t&&n(7,c=t.qRegions),"sRegions"in t&&n(8,u=t.sRegions),"score"in t&&n(9,d=t.score),"category"in t&&n(10,f=t.category),"users"in t&&n(11,p=t.users),"isManual"in t&&n(12,m=t.isManual)},t.$$.update=()=>{1024&t.$$.dirty&&n(0,r=f),2048&t.$$.dirty&&n(1,i=p.includes(Number(Jt))||!1)},[r,i,w,k,O,l,a,c,u,d,f,p,m,()=>O(1),()=>O(2),()=>O(3),()=>O(4),()=>O(5)]}class Sn extends qt{constructor(t){super(),jt(this,t,kn,xn,l,{qImg:5,sImg:6,qRegions:7,sRegions:8,score:9,category:10,users:11,isManual:12})}}function En(t,e,n){const r=t.slice();return r[6]=e[n][0],r[7]=e[n][1],r[8]=e[n][2],r[9]=e[n][3],r[10]=e[n][4],r[11]=e[n][5],r[12]=e[n][6],r[13]=e[n][7],r}function Cn(e){let n,r,i="en"===Bt?`Error when retrieving similar regions: ${e[16]}`:`Erreur de recupération des régions similaires: ${e[16]}`;return{c(){n=N("div"),r=T(i),_(n,"class","faded is-center")},m(t,e){P(t,n,e),E(n,r)},p(t,e){2&e&&i!==(i="en"===Bt?`Error when retrieving similar regions: ${t[16]}`:`Erreur de recupération des régions similaires: ${t[16]}`)&&F(r,i)},i:t,o:t,d(t){t&&L(n)}}}function On(t){let e,n,r=t[5],i=[];for(let e=0;e<r.length;e+=1)i[e]=Nn(En(t,r,e));const o=t=>Ct(i[t],1,1,(()=>{i[t]=null}));let s=null;return r.length||(s=Pn(t)),{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=V(),s&&s.c()},m(t,r){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,r);P(t,e,r),s&&s.m(t,r),n=!0},p(t,n){if(7&n){let l;for(r=t[5],l=0;l<r.length;l+=1){const o=En(t,r,l);i[l]?(i[l].p(o,n),Et(i[l],1)):(i[l]=Nn(o),i[l].c(),Et(i[l],1),i[l].m(e.parentNode,e))}for(kt(),l=r.length;l<i.length;l+=1)o(l);St(),!r.length&&s?s.p(t,n):r.length?s&&(s.d(1),s=null):(s=Pn(t),s.c(),s.m(e.parentNode,e))}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Et(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Ct(i[t]);n=!1},d(t){I(i,t),t&&L(e),s&&s.d(t)}}}function Pn(t){let e,n;function r(t,n){return 4&n&&(e=null),null==e&&(e=!(0!==Object.values(t[2]).length)),e?In:Ln}let i=r(t,-1),o=i(t);return{c(){o.c(),n=V()},m(t,e){o.m(t,e),P(t,n,e)},p(t,e){i===(i=r(t,e))&&o?o.p(t,e):(o.d(1),o=i(t),o&&(o.c(),o.m(n.parentNode,n)))},d(t){o.d(t),t&&L(n)}}}function Ln(e){let n;return{c(){n=N("div"),n.textContent=("en"===Bt?"No similar regions":"Pas de régions similaires")+" \n            ",_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function In(e){let n;return{c(){n=N("div"),n.textContent=("en"===Bt?"No document selected":"Aucun document sélectionné")+" \n            ",_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function Nn(t){let e,n;return e=new Sn({props:{qImg:t[0],sImg:t[8],score:t[6],qRegions:t[9],sRegions:t[10],category:t[11],users:t[12],isManual:t[13]}}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},p(t,n){const r={};1&n&&(r.qImg=t[0]),2&n&&(r.sImg=t[8]),2&n&&(r.score=t[6]),2&n&&(r.qRegions=t[9]),2&n&&(r.sRegions=t[10]),2&n&&(r.category=t[11]),2&n&&(r.users=t[12]),2&n&&(r.isManual=t[13]),e.$set(r)},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}function Rn(e){let n;return{c(){n=N("div"),n.textContent=""+("en"!==Bt||e[4]?"fr"!==Bt||e[4]?"en"===Bt&&e[4]?"Retrieving propagated regions...":"Récupération de similarités propagées...":"Récupération des régions similaires...":"Retrieving similar regions..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function Tn(t){let e,n,r,i={ctx:t,current:null,token:null,hasCatch:!0,pending:Rn,then:On,catch:Cn,value:5,error:16,blocks:[,,,]};return Lt(n=t[1],i),{c(){e=V(),i.block.c()},m(t,n){P(t,e,n),i.block.m(t,i.anchor=n),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(e,[r]){t=e,i.ctx=t,2&r&&n!==(n=t[1])&&Lt(n,i)||It(i,t,r)},i(t){r||(Et(i.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ct(i.blocks[t])}r=!1},d(t){t&&L(e),i.block.d(t),i.token=null,i=null}}}function An(t,e,n){let r;const{selectedRegions:i}=Ye;f(t,i,(t=>n(2,r=t)));let{qImg:o}=e,{sImgsPromise:s}=e;const l=ot("similarityPropagatedContext")||!1;return t.$$set=t=>{"qImg"in t&&n(0,o=t.qImg),"sImgsPromise"in t&&n(1,s=t.sImgsPromise)},[o,s,r,i,l]}class Vn extends qt{constructor(t){super(),jt(this,t,An,Tn,l,{qImg:0,sImgsPromise:1})}}function Mn(t){let e,n,r;return n=new Vn({props:{qImg:t[0],sImgsPromise:t[1],displayType:"similarityMatches"}}),{c(){e=N("div"),At(n.$$.fragment),_(e,"class","grid is-gap-2")},m(t,i){P(t,e,i),Vt(n,e,null),r=!0},p(t,[e]){const r={};1&e&&(r.qImg=t[0]),2&e&&(r.sImgsPromise=t[1]),n.$set(r)},i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){t&&L(e),Mt(n)}}}function jn(t,e,n){let r,i,o;const{selectedRegions:s,excludedCategories:l}=Ye;f(t,s,(t=>n(5,o=t))),f(t,l,(t=>n(4,i=t)));const a=`${window.location.origin}${window.location.pathname}`,c=window.location.pathname.match(/\d+/g).join("-");let{qImg:u}=e;return t.$$set=t=>{"qImg"in t&&n(0,u=t.qImg)},t.$$.update=()=>{49&t.$$.dirty&&n(1,r=async function(t,e,n){if(0===Object.values(e).map((t=>t.id)).length)return{};const r=await fetch(`${a}similar-images`,{method:"POST",body:JSON.stringify({regionsIds:Object.values(e[c]).map((t=>t.id)),qImg:t,topk:10,excludedCategories:n}),headers:{"Content-Type":"application/json","X-CSRFToken":Xt}});return await r.json()}(u,o,i))},[u,r,s,l,i,o]}class qn extends qt{constructor(t){super(),jt(this,t,jn,Mn,l,{qImg:0})}}function _n(e){let n,r,i;return{c(){n=N("span"),r=T(e[0]),_(n,"id",e[3]),_(n,"class",i="tooltip "+e[2]+" "+(e[1]?"display":"")+" svelte-1mx5qza")},m(t,e){P(t,n,e),E(n,r)},p(t,[e]){1&e&&F(r,t[0]),6&e&&i!==(i="tooltip "+t[2]+" "+(t[1]?"display":"")+" svelte-1mx5qza")&&_(n,"class",i)},i:t,o:t,d(t){t&&L(n)}}}function Dn(t,e,n){let r,i,o,{tooltipText:s}=e,{targetHtmlId:l}=e;const a=`tooltip-generic-${window.crypto.randomUUID()}`;return et((()=>{i=l?document.getElementById(l):document.getElementById(a).parentElement,l&&!i&&(console.error(`TooltipGeneric: element with ID ${l}, defaulting to the parent element`),i=document.getElementById(a).targetElement),i.addEventListener("mouseover",(()=>n(1,o=!0))),i.addEventListener("mouseout",(()=>n(1,o=!1))),i.addEventListener("click",(()=>n(1,o=!o)))})),nt((()=>{["mouseover","mouseout","click"].forEach(i.removeEventListener)})),t.$$set=t=>{"tooltipText"in t&&n(0,s=t.tooltipText),"targetHtmlId"in t&&n(4,l=t.targetHtmlId)},n(2,r=n(2,r=s.length<20?"tooltip-thin":s.length<100?"tooltip-mid":"tooltip-wide")),i=void 0,n(1,o=!1),[s,o,r,a,l]}class Un extends qt{constructor(t){super(),jt(this,t,Dn,_n,l,{tooltipText:0,targetHtmlId:4})}}function Fn(t){let e,n,r,i,o,s;return o=new Un({props:{tooltipText:t[2]}}),{c(){e=N("div"),n=N("button"),r=N("span"),i=A(),At(o.$$.fragment),_(r,"class","iconify"),_(r,"data-icon",t[0]),_(r,"title",t[1]),_(n,"class","svelte-gmxkvo"),_(e,"class","is-inline-block icon-tooltip svelte-gmxkvo")},m(t,l){P(t,e,l),E(e,n),E(n,r),E(n,i),Vt(o,n,null),s=!0},p(t,[e]){(!s||1&e)&&_(r,"data-icon",t[0]),(!s||2&e)&&_(r,"title",t[1]);const n={};4&e&&(n.tooltipText=t[2]),o.$set(n)},i(t){s||(Et(o.$$.fragment,t),s=!0)},o(t){Ct(o.$$.fragment,t),s=!1},d(t){t&&L(e),Mt(o)}}}function Hn(t,e,n){let{iconifyIcon:r,altText:i,tooltipText:o}=e;return t.$$set=t=>{"iconifyIcon"in t&&n(0,r=t.iconifyIcon),"altText"in t&&n(1,i=t.altText),"tooltipText"in t&&n(2,o=t.tooltipText)},[r,i,o]}class zn extends qt{constructor(t){super(),jt(this,t,Hn,Fn,l,{iconifyIcon:0,altText:1,tooltipText:2})}}function Bn(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Wn(t){let e,n,r,i,o,s,l=t[5].length+"",a=t[5].length>1?"es":"";return o=new zn({props:{iconifyIcon:"material-symbols:help-outline",altText:"en"===Bt?"Display help":"Afficher une explication",tooltipText:t[2]}}),{c(){e=T(l),n=T(" propagated match"),r=T(a),i=A(),At(o.$$.fragment)},m(t,l){P(t,e,l),P(t,n,l),P(t,r,l),P(t,i,l),Vt(o,t,l),s=!0},p(t,n){(!s||2&n)&&l!==(l=t[5].length+"")&&F(e,l),(!s||2&n)&&a!==(a=t[5].length>1?"es":"")&&F(r,a)},i(t){s||(Et(o.$$.fragment,t),s=!0)},o(t){Ct(o.$$.fragment,t),s=!1},d(t){t&&L(e),t&&L(n),t&&L(r),t&&L(i),Mt(o,t)}}}function Jn(e){return{c:t,m:t,p:t,i:t,o:t,d:t}}function Xn(t){let e,n,r,i,o,s,l,a,c={ctx:t,current:null,token:null,hasCatch:!1,pending:Jn,then:Wn,catch:Bn,value:5,blocks:[,,,]};return Lt(i=t[1],c),l=new Vn({props:{qImg:t[0],sImgsPromise:t[1],displayType:"suggestionMatches"}}),{c(){e=N("div"),n=N("div"),r=N("div"),c.block.c(),o=A(),s=N("div"),At(l.$$.fragment),_(r,"class","block"),_(s,"class","grid is-gap-2"),_(n,"class","matches-suggestion svelte-1li2qm8"),_(e,"class","block matches-suggestion-wrapper svelte-1li2qm8")},m(t,i){P(t,e,i),E(e,n),E(n,r),c.block.m(r,c.anchor=null),c.mount=()=>r,c.anchor=null,E(n,o),E(n,s),Vt(l,s,null),a=!0},p(e,[n]){t=e,c.ctx=t,2&n&&i!==(i=t[1])&&Lt(i,c)||It(c,t,n);const r={};1&n&&(r.qImg=t[0]),2&n&&(r.sImgsPromise=t[1]),l.$set(r)},i(t){a||(Et(c.block),Et(l.$$.fragment,t),a=!0)},o(t){for(let t=0;t<3;t+=1){Ct(c.blocks[t])}Ct(l.$$.fragment,t),a=!1},d(t){t&&L(e),c.block.d(),c.token=null,c=null,Mt(l)}}}function Gn(t,e,n){let r,{qImg:i}=e;it("similarityPropagatedContext",!0);const o=`${window.location.origin}${window.location.pathname}`,s="en"===Bt?"Propagated matches are exact matches to images that have an exact match with the current image. There may be up to 5 exact matches connecting the current image and propagated images.":"Les correspondances propagées correspondent à des correspondances exactes à des images ayant une correspondance exacte avec l'image actuelle. Il peut y avoir jusqu'à 5 images reliant l'image actuelle à une correspondance propagée.";return t.$$set=t=>{"qImg"in t&&n(0,i=t.qImg)},n(1,r=(async()=>fetch(`${o}propagated-matches/${i}`).then((t=>t.json())))()),[i,r,s]}class Zn extends qt{constructor(t){super(),jt(this,t,Gn,Xn,l,{qImg:0})}}function Yn(t){let e,n,r,i,s,l,a,u,d,f,p,m,g,h,v,$,b,w,y,x,k,S,C,O,I,V,j,q,D,U,F,B,W=parseInt(t[4])+"";return V=new qn({props:{qImg:t[0]}}),D=new Zn({props:{qImg:t[0]}}),{c(){e=N("tr"),n=N("th"),r=N("div"),i=N("a"),s=N("i"),l=T("\n                Page "),a=T(W),u=A(),d=N("img"),p=A(),m=N("div"),g=N("div"),h=N("input"),v=A(),$=N("button"),$.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"></path></svg>',b=A(),w=N("button"),y=R("svg"),x=R("path"),C=A(),O=N("td"),I=N("div"),At(V.$$.fragment),j=A(),q=N("div"),At(D.$$.fragment),_(s,"class","fa-solid fa-pen-to-square"),_(i,"class","tag px-2 py-1 mb-2 is-rounded is-hoverable"),_(i,"href",ae(t[5],parseInt(t[4]))),_(i,"target","_blank"),c(d.src,f=le(t[0],"full","250,"))||_(d,"src",f),_(d,"alt","Query region"),_(d,"class","mb-3 card"),_(h,"class","input is-small tag"),_(h,"type","text"),_(h,"placeholder","en"===Bt?"Add new match":"Ajouter une correspondance"),_($,"class","button is-small tag is-link is-center"),_(g,"class","tags has-addons"),z(g,"flex-wrap","nowrap"),_(x,"fill","white"),_(x,"d","M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"),_(y,"xmlns","http://www.w3.org/2000/svg"),_(y,"viewBox","0 0 384 512"),_(w,"id","no-match"),_(w,"class",k="button is-small tag is-danger is-center m-0 "+(1===t[2]?"visible":"")+" svelte-f4c92p"),_(w,"title","en"===Bt?"No match for this region in this witness":"Aucune correspondance de cette région pour ce témoin"),_(m,"class","new-similarity control pt-2 is-center svelte-f4c92p"),_(r,"class","content-wrapper py-5"),_(n,"class","is-3 center-flex is-narrow"),z(n,"width","260px"),_(I,"class","fixed-grid has-5-cols"),_(q,"class","fixed-grid has-5-cols"),_(O,"class","p-5 is-fullwidth")},m(o,c){P(o,e,c),E(e,n),E(n,r),E(r,i),E(i,s),E(i,l),E(i,a),E(r,u),E(r,d),E(r,p),E(r,m),E(m,g),E(g,h),H(h,t[1]),E(g,v),E(g,$),E(m,b),E(m,w),E(w,y),E(y,x),E(e,C),E(e,O),E(O,I),Vt(V,I,null),E(O,j),E(O,q),Vt(D,q,null),U=!0,F||(B=[M(h,"input",t[9]),M($,"click",t[6]),M(w,"click",t[7])],F=!0)},p(t,[e]){(!U||1&e&&!c(d.src,f=le(t[0],"full","250,")))&&_(d,"src",f),2&e&&h.value!==t[1]&&H(h,t[1]),(!U||4&e&&k!==(k="button is-small tag is-danger is-center m-0 "+(1===t[2]?"visible":"")+" svelte-f4c92p"))&&_(w,"class",k);const n={};1&e&&(n.qImg=t[0]),V.$set(n);const r={};1&e&&(r.qImg=t[0]),D.$set(r)},i(t){U||(mt((()=>{U&&(S||(S=Pt(w,Dt,{duration:500},!0)),S.run(1))})),Et(V.$$.fragment,t),Et(D.$$.fragment,t),U=!0)},o(t){S||(S=Pt(w,Dt,{duration:500},!1)),S.run(0),Ct(V.$$.fragment,t),Ct(D.$$.fragment,t),U=!1},d(t){t&&L(e),t&&S&&S.end(),Mt(V),Mt(D),F=!1,o(B)}}}function Qn(t,e,n){let r,i;const{selectedRegions:o}=Ye;f(t,o,(t=>n(8,i=t)));let{qImg:s}=e,l="";const[a,c,u,d]=s.split(".")[0].split("_"),p=ot("manifest"),m=`${window.location.origin}${window.location.pathname}`,g=window.location.pathname.match(/\d+/g).join("-"),h="en"===Bt?"Error":"Erreur";return t.$$set=t=>{"qImg"in t&&n(0,s=t.qImg)},t.$$.update=()=>{256&t.$$.dirty&&n(2,r=i.hasOwnProperty(g)?Object.values(i[g]).length:0)},[s,l,r,o,u,p,async function(){var t;if(l&&(t=(t=l).replace(".jpg",""),/^wit\d+_[a-zA-Z]{3}\d+_\d+_\d+,\d+,\d+,\d+$/.test(t)))try{const t=await fetch(`${m}add-region-pair`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Xt},body:JSON.stringify({q_img:s.replace(".jpg",""),s_img:l})});t.ok||(console.error("Error: Network response was not ok"),await ce("en"===Bt?"Problem with network, match was not added":"Problème de réseau, la correspondance n'a pas été ajoutée",h));const e=await t.json();if(e.hasOwnProperty("error")||!e.hasOwnProperty("s_regions"))return void await ce("en"===Bt?`Request was unsuccessful, match was not added:<br>${e.error}`:`La requête n'a pas abouti, la correspondance n'a pas été ajoutée :<br>${e.error}`,h);const n=e.s_regions;Ye.addComparedRegions(n),Ye.select(n)}catch(t){console.error("Error:",t),await ce("en"===Bt?`An error has occurred, match was not added:<br>${t}`:`Une erreur s'est produite, la correspondance n'a pas été ajoutée :<br>${t}`,h)}else await ce("en"===Bt?"Please insert a valid region reference to add a new match":"Veuillez insérer une référence de région valide pour ajouter une nouvelle correspondance","Error")},async function(){const t=Object.values(i[g])[0];if(await ce("en"===Bt?`Do you confirm this region does not have any match in ${t.title}?`:`Confirmez-vous que cette région n'a pas de correspondance dans ${t.title} ?`,"en"===Bt?"Confirm no match":"Confirmer l'absence de correspondance",!0))try{(await fetch(`${m}no-match`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Xt},body:JSON.stringify({q_img:s,s_regions:t.id})})).ok||(console.error("Error: Network response was not ok"),await ce("en"===Bt?"Problem with network":"Problème de réseau",h)),Ye.select(t)}catch(t){console.error("Error:",t),await ce("en"===Bt?`An error has occurred, request was unsuccessful:<br>${t}`:`Une erreur s'est produite, la requête n'a pas abouti :<br>${t}`,h)}},i,function(){l=this.value,n(1,l)}]}class Kn extends qt{constructor(t){super(),jt(this,t,Qn,Yn,l,{qImg:0})}}function tr(t,e,n){const r=t.slice();return r[8]=e[n],r}function er(e){let n,r,i,o=e[11]+"";return{c(){n=N("tr"),r=T("Error when retrieving similar regions: "),i=T(o)},m(t,e){P(t,n,e),E(n,r),E(n,i)},p(t,e){2&e&&o!==(o=t[11]+"")&&F(i,o)},i:t,o:t,d(t){t&&L(n)}}}function nr(t){let e,n,r=[],i=new Map,o=t[2];const s=t=>t[8].id;for(let e=0;e<o.length;e+=1){let n=tr(t,o,e),l=s(n);i.set(l,r[e]=ir(l,n))}let l=null;return o.length||(l=rr()),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=V(),l&&l.c()},m(t,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,i);P(t,e,i),l&&l.m(t,i),n=!0},p(t,n){4&n&&(o=t[2],kt(),r=Rt(r,n,s,1,t,o,i,e.parentNode,Nt,ir,e,tr),St(),!o.length&&l?l.p(t,n):o.length?l&&(l.d(1),l=null):(l=rr(),l.c(),l.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<o.length;t+=1)Et(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Ct(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&L(e),l&&l.d(t)}}}function rr(e){let n,r;return{c(){n=N("tr"),n.textContent=""+("en"===Bt?"No similarity":"Pas de similarités"),r=A(),_(n,"class","faded is-center")},m(t,e){P(t,n,e),P(t,r,e)},p:t,d(t){t&&L(n),t&&L(r)}}}function ir(t,e){let n,r,i;return r=new Kn({props:{qImg:e[8]}}),{key:t,first:null,c(){n=V(),At(r.$$.fragment),this.first=n},m(t,e){P(t,n,e),Vt(r,t,e),i=!0},p(t,n){e=t;const i={};4&n&&(i.qImg=e[8]),r.$set(i)},i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(n),Mt(r,t)}}}function or(e){let n;return{c(){n=N("tr"),n.textContent=""+("en"===Bt?"Retrieving similarity page...":"Récupération la page de similarité..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function sr(t){let e,n,r,i={ctx:t,current:null,token:null,hasCatch:!0,pending:or,then:nr,catch:er,value:7,error:11,blocks:[,,,]};return Lt(n=t[1],i),{c(){e=V(),i.block.c()},m(t,n){P(t,e,n),i.block.m(t,i.anchor=n),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(e,r){t=e,i.ctx=t,2&r&&n!==(n=t[1])&&Lt(n,i)||It(i,t,r)},i(t){r||(Et(i.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ct(i.blocks[t])}r=!1},d(t){t&&L(e),i.block.d(t),i.token=null,i=null}}}function lr(t){let e,n,r,i,o,s,l;return n=new dn({props:{store:Ye,nbOfItems:t[0].length,pageLength:t[6]}}),i=new tn({props:{$$slots:{default:[sr]},$$scope:{ctx:t}}}),s=new dn({props:{store:Ye,nbOfItems:t[0].length,pageLength:t[6]}}),{c(){e=N("div"),At(n.$$.fragment),r=A(),At(i.$$.fragment),o=A(),At(s.$$.fragment)},m(t,a){P(t,e,a),Vt(n,e,null),E(e,r),Vt(i,e,null),E(e,o),Vt(s,e,null),l=!0},p(t,[e]){const r={};1&e&&(r.nbOfItems=t[0].length),n.$set(r);const o={};4102&e&&(o.$$scope={dirty:e,ctx:t}),i.$set(o);const l={};1&e&&(l.nbOfItems=t[0].length),s.$set(l)},i(t){l||(Et(n.$$.fragment,t),Et(i.$$.fragment,t),Et(s.$$.fragment,t),l=!0)},o(t){Ct(n.$$.fragment,t),Ct(i.$$.fragment,t),Ct(s.$$.fragment,t),l=!1},d(t){t&&L(e),Mt(n),Mt(i),Mt(s)}}}function ar(t,e,n){let r,i,o;const{qImgs:s,pageQImgs:l,setPageQImgs:a,pageLength:c}=Ye;return f(t,s,(t=>n(0,r=t))),f(t,l,(t=>n(2,o=t))),f(t,a,(t=>n(1,i=t))),[r,i,o,s,l,a,c]}class cr extends qt{constructor(t){super(),jt(this,t,ar,lr,l,{})}}function ur(t,e,n){const r=t.slice();return r[8]=e[n][0],r[9]=e[n][1],r}function dr(e){let n;return{c(){n=N("span"),n.textContent=""+("en"===Bt?"current":"courant"),_(n,"class","tag is-dark svelte-503e8j")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function fr(t){let e,n,r,i,s,l,a,c,u=t[5](t[8]),d=ie(t[9].title)+"",f=u&&dr();function p(){return t[6](t[9])}return{c(){e=N("div"),f&&f.c(),n=A(),r=N("span"),i=T(d),l=A(),_(r,"class",s="tag is-small "+(t[0](t[8])?"is-selected":"is-contrasted")+" svelte-503e8j"),_(e,"class","tags has-addons mb-0 is-hoverable")},m(t,o){P(t,e,o),f&&f.m(e,null),E(e,n),E(e,r),E(r,i),E(e,l),a||(c=[M(e,"click",p),M(e,"keyup",null)],a=!0)},p(o,l){t=o,2&l&&(u=t[5](t[8])),u?f?f.p(t,l):(f=dr(),f.c(),f.m(e,n)):f&&(f.d(1),f=null),2&l&&d!==(d=ie(t[9].title)+"")&&F(i,d),3&l&&s!==(s="tag is-small "+(t[0](t[8])?"is-selected":"is-contrasted")+" svelte-503e8j")&&_(r,"class",s)},d(t){t&&L(e),f&&f.d(),a=!1,o(c)}}}function pr(e){let n,r=Object.entries(e[1]),i=[];for(let t=0;t<r.length;t+=1)i[t]=fr(ur(e,r,t));return{c(){n=N("div");for(let t=0;t<i.length;t+=1)i[t].c();_(n,"class","field is-grouped is-grouped-multiline")},m(t,e){P(t,n,e);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null)},p(t,[e]){if(51&e){let o;for(r=Object.entries(t[1]),o=0;o<r.length;o+=1){const s=ur(t,r,o);i[o]?i[o].p(s,e):(i[o]=fr(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},i:t,o:t,d(t){t&&L(n),I(i,t)}}}function mr(t,e,n){let r,i;const{comparedRegions:o,isSelected:s}=Ye;f(t,o,(t=>n(1,i=t))),f(t,s,(t=>n(0,r=t)));const l=ot("imgPrefix");function a(t){r(t.ref)?Ye.unselect(t.ref):Ye.select(t)}return[r,i,o,s,a,function(t){return t.startsWith(l)},t=>a(t)]}class gr extends qt{constructor(t){super(),jt(this,t,mr,pr,l,{})}}function hr(t,e,n){const r=t.slice();return r[8]=e[n],r}function vr(t){let e,n,r,i,o,s,l,a=t[8].title+"";function c(t,e){return 6&e&&(r=null),null==r&&(r=!!t[2].includes(t[8].id)),r?br:$r}let u=c(t,-1),d=u(t);return{c(){e=N("div"),n=N("span"),d.c(),i=A(),o=T(a),_(n,"class","label svelte-1a5w65y"),_(e,"class","label-container px-2 py-1 svelte-1a5w65y")},m(t,r){P(t,e,r),E(e,n),d.m(n,null),E(n,i),E(n,o),l=!0},p(t,e){u===(u=c(t,e))&&d?d.p(t,e):(d.d(1),d=u(t),d&&(d.c(),d.m(n,i))),(!l||2&e)&&a!==(a=t[8].title+"")&&F(o,a)},i(t){l||(mt((()=>{l&&(s||(s=Pt(e,Ut,{x:40,duration:300},!0)),s.run(1))})),l=!0)},o(t){s||(s=Pt(e,Ut,{x:40,duration:300},!1)),s.run(0),l=!1},d(t){t&&L(e),d.d(),t&&s&&s.end()}}}function $r(e){let n,r="en"===Bt?"Hide ":"Masquer les ";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function br(e){let n,r="en"===Bt?"Show ":"Afficher les ";return{c(){n=T(r)},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function wr(t){let e,n,r,i,s,l,a,c,u=t[8].svg+"",d=t[0]===t[8].id&&vr(t);function f(){return t[5](t[8])}function p(){return t[7](t[8])}return{c(){e=N("div"),n=N("span"),r=A(),d&&d.c(),i=A(),_(n,"class","tool-icon p-1 svelte-1a5w65y"),_(e,"class",s="toolbar-item "+(t[2].includes(t[8].id)?"":"selected")+" svelte-1a5w65y")},m(o,s){P(o,e,s),E(e,n),n.innerHTML=u,E(e,r),d&&d.m(e,null),E(e,i),l=!0,a||(c=[M(e,"mouseenter",f),M(e,"mouseleave",t[6]),M(e,"click",p),M(e,"keyup",null)],a=!0)},p(r,o){t=r,(!l||2&o)&&u!==(u=t[8].svg+"")&&(n.innerHTML=u),t[0]===t[8].id?d?(d.p(t,o),3&o&&Et(d,1)):(d=vr(t),d.c(),Et(d,1),d.m(e,i)):d&&(kt(),Ct(d,1,1,(()=>{d=null})),St()),(!l||6&o&&s!==(s="toolbar-item "+(t[2].includes(t[8].id)?"":"selected")+" svelte-1a5w65y"))&&_(e,"class",s)},i(t){l||(Et(d),l=!0)},o(t){Ct(d),l=!1},d(t){t&&L(e),d&&d.d(),a=!1,o(c)}}}function yr(t){let e,n,r,i=t[1],o=[];for(let e=0;e<i.length;e+=1)o[e]=wr(hr(t,i,e));const s=t=>Ct(o[t],1,1,(()=>{o[t]=null}));return{c(){e=N("div");for(let t=0;t<o.length;t+=1)o[t].c();_(e,"class","toolbar svelte-1a5w65y")},m(t,n){P(t,e,n);for(let t=0;t<o.length;t+=1)o[t]&&o[t].m(e,null);r=!0},p(t,[n]){if(23&n){let r;for(i=t[1],r=0;r<i.length;r+=1){const s=hr(t,i,r);o[r]?(o[r].p(s,n),Et(o[r],1)):(o[r]=wr(s),o[r].c(),Et(o[r],1),o[r].m(e,null))}for(kt(),r=i.length;r<o.length;r+=1)s(r);St()}},i(t){if(!r){for(let t=0;t<i.length;t+=1)Et(o[t]);mt((()=>{r&&(n||(n=Pt(e,Dt,{duration:500},!0)),n.run(1))})),r=!0}},o(t){o=o.filter(Boolean);for(let t=0;t<o.length;t+=1)Ct(o[t]);n||(n=Pt(e,Dt,{duration:500},!1)),n.run(0),r=!1},d(t){t&&L(e),I(o,t),t&&n&&n.end()}}}function xr(t,e,n){let r,i;const{excludedCategories:o}=Ye;f(t,o,(t=>n(2,i=t)));let s=null;function l(t){o.update((e=>e.includes(t)?e.filter((e=>e!==t)):[...e,t])),localStorage.setItem("excludedCategories",JSON.stringify(i))}return n(1,r=[{id:1,title:vn,svg:fn},{id:2,title:$n,svg:pn},{id:3,title:bn,svg:mn},{id:4,title:wn,svg:gn},{id:5,title:yn,svg:hn}]),[s,r,i,o,l,t=>n(0,s=t.id),()=>n(0,s=null),t=>l(t.id)]}class kr extends qt{constructor(t){super(),jt(this,t,xr,yr,l,{})}}var Sr,Er;function Cr(t){return"object"==typeof t&&"function"==typeof t.to}function Or(t){t.parentElement.removeChild(t)}function Pr(t){return null!=t}function Lr(t){t.preventDefault()}function Ir(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function Nr(t,e,n){n>0&&(Vr(t,e),setTimeout((function(){Mr(t,e)}),n))}function Rr(t){return Math.max(Math.min(t,100),0)}function Tr(t){return Array.isArray(t)?t:[t]}function Ar(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function Vr(t,e){t.classList&&!/\s/.test(e)?t.classList.add(e):t.className+=" "+e}function Mr(t,e){t.classList&&!/\s/.test(e)?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function jr(t){var e=void 0!==window.pageXOffset,n="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:n?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:n?t.documentElement.scrollTop:t.body.scrollTop}}function qr(t,e){return 100/(e-t)}function _r(t,e,n){return 100*e/(t[n+1]-t[n])}function Dr(t,e){for(var n=1;t>=e[n];)n+=1;return n}function Ur(t,e,n){if(n>=t.slice(-1)[0])return 100;var r=Dr(n,t),i=t[r-1],o=t[r],s=e[r-1],l=e[r];return s+function(t,e){return _r(t,t[0]<0?e+Math.abs(t[0]):e-t[0],0)}([i,o],n)/qr(s,l)}function Fr(t,e,n,r){if(100===r)return r;var i=Dr(r,t),o=t[i-1],s=t[i];return n?r-o>(s-o)/2?s:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(r-t[i-1],e[i-1]):r}!function(t){t.Range="range",t.Steps="steps",t.Positions="positions",t.Count="count",t.Values="values"}(Sr||(Sr={})),function(t){t[t.None=-1]="None",t[t.NoValue=0]="NoValue",t[t.LargeValue=1]="LargeValue",t[t.SmallValue=2]="SmallValue"}(Er||(Er={}));var Hr=function(){function t(t,e,n){var r;this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=e;var i=[];for(Object.keys(t).forEach((function(e){i.push([Tr(t[e]),e])})),i.sort((function(t,e){return t[0][0]-e[0][0]})),r=0;r<i.length;r++)this.handleEntryPoint(i[r][1],i[r][0]);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}return t.prototype.getDistance=function(t){for(var e=[],n=0;n<this.xNumSteps.length-1;n++)e[n]=_r(this.xVal,t,n);return e},t.prototype.getAbsoluteDistance=function(t,e,n){var r,i=0;if(t<this.xPct[this.xPct.length-1])for(;t>this.xPct[i+1];)i++;else t===this.xPct[this.xPct.length-1]&&(i=this.xPct.length-2);n||t!==this.xPct[i+1]||i++,null===e&&(e=[]);var o=1,s=e[i],l=0,a=0,c=0,u=0;for(r=n?(t-this.xPct[i])/(this.xPct[i+1]-this.xPct[i]):(this.xPct[i+1]-t)/(this.xPct[i+1]-this.xPct[i]);s>0;)l=this.xPct[i+1+u]-this.xPct[i+u],e[i+u]*o+100-100*r>100?(a=l*r,o=(s-100*r)/e[i+u],r=1):(a=e[i+u]*l/100*o,o=0),n?(c-=a,this.xPct.length+u>=1&&u--):(c+=a,this.xPct.length-u>=1&&u++),s=e[i+u]*o;return t+c},t.prototype.toStepping=function(t){return t=Ur(this.xVal,this.xPct,t)},t.prototype.fromStepping=function(t){return function(t,e,n){if(n>=100)return t.slice(-1)[0];var r=Dr(n,e),i=t[r-1],o=t[r],s=e[r-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(n-s)*qr(s,e[r]))}(this.xVal,this.xPct,t)},t.prototype.getStep=function(t){return t=Fr(this.xPct,this.xSteps,this.snap,t)},t.prototype.getDefaultStep=function(t,e,n){var r=Dr(t,this.xPct);return(100===t||e&&t===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},t.prototype.getNearbySteps=function(t){var e=Dr(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},t.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(Ar);return Math.max.apply(null,t)},t.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},t.prototype.convert=function(t){return this.getStep(this.toStepping(t))},t.prototype.handleEntryPoint=function(t,e){var n;if(!Ir(n="min"===t?0:"max"===t?100:parseFloat(t))||!Ir(e[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(e[0]);var r=Number(e[1]);n?this.xSteps.push(!isNaN(r)&&r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},t.prototype.handleStepPoint=function(t,e){if(e)if(this.xVal[t]!==this.xVal[t+1]){this.xSteps[t]=_r([this.xVal[t],this.xVal[t+1]],e,0)/qr(this.xPct[t],this.xPct[t+1]);var n=(this.xVal[t+1]-this.xVal[t])/this.xNumSteps[t],r=Math.ceil(Number(n.toFixed(3))-1),i=this.xVal[t]+this.xNumSteps[t]*r;this.xHighestCompleteStep[t]=i}else this.xSteps[t]=this.xHighestCompleteStep[t]=this.xVal[t]},t}(),zr={to:function(t){return void 0===t?"":t.toFixed(2)},from:Number},Br={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},Wr={tooltips:".__tooltips",aria:".__aria"};function Jr(t,e){if(!Ir(e))throw new Error("noUiSlider: 'step' is not numeric.");t.singleStep=e}function Xr(t,e){if(!Ir(e))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");t.keyboardPageMultiplier=e}function Gr(t,e){if(!Ir(e))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");t.keyboardMultiplier=e}function Zr(t,e){if(!Ir(e))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");t.keyboardDefaultStep=e}function Yr(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider: 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");t.spectrum=new Hr(e,t.snap||!1,t.singleStep)}function Qr(t,e){if(e=Tr(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider: 'start' option is incorrect.");t.handles=e.length,t.start=e}function Kr(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'snap' option must be a boolean.");t.snap=e}function ti(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'animate' option must be a boolean.");t.animate=e}function ei(t,e){if("number"!=typeof e)throw new Error("noUiSlider: 'animationDuration' option must be a number.");t.animationDuration=e}function ni(t,e){var n,r=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(n=1;n<t.handles;n++)r.push(e);r.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");r=e}t.connect=r}function ri(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function ii(t,e){if(!Ir(e))throw new Error("noUiSlider: 'margin' option must be numeric.");0!==e&&(t.margin=t.spectrum.getDistance(e))}function oi(t,e){if(!Ir(e))throw new Error("noUiSlider: 'limit' option must be numeric.");if(t.limit=t.spectrum.getDistance(e),!t.limit||t.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function si(t,e){var n;if(!Ir(e)&&!Array.isArray(e))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!Ir(e[0])&&!Ir(e[1]))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){for(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getDistance(e[0]),t.spectrum.getDistance(e[1])],n=0;n<t.spectrum.xNumSteps.length-1;n++)if(t.padding[0][n]<0||t.padding[1][n]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var r=e[0]+e[1],i=t.spectrum.xVal[0];if(r/(t.spectrum.xVal[t.spectrum.xVal.length-1]-i)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function li(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function ai(t,e){if("string"!=typeof e)throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var n=e.indexOf("tap")>=0,r=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0,l=e.indexOf("unconstrained")>=0,a=e.indexOf("invert-connects")>=0,c=e.indexOf("drag-all")>=0,u=e.indexOf("smooth-steps")>=0;if(i){if(2!==t.handles)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");ii(t,t.start[1]-t.start[0])}if(a&&2!==t.handles)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(l&&(t.margin||t.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:n||o,drag:r,dragAll:c,smoothSteps:u,fixed:i,snap:o,hover:s,unconstrained:l,invertConnects:a}}function ci(t,e){if(!1!==e)if(!0===e||Cr(e)){t.tooltips=[];for(var n=0;n<t.handles;n++)t.tooltips.push(e)}else{if((e=Tr(e)).length!==t.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");e.forEach((function(t){if("boolean"!=typeof t&&!Cr(t))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")})),t.tooltips=e}}function ui(t,e){if(e.length!==t.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");t.handleAttributes=e}function di(t,e){if(!Cr(e))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");t.ariaFormat=e}function fi(t,e){if(!function(t){return Cr(t)&&"function"==typeof t.from}(e))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");t.format=e}function pi(t,e){if("boolean"!=typeof e)throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");t.keyboardSupport=e}function mi(t,e){t.documentElement=e}function gi(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function hi(t,e){if("object"!=typeof e)throw new Error("noUiSlider: 'cssClasses' must be an object.");"string"==typeof t.cssPrefix?(t.cssClasses={},Object.keys(e).forEach((function(n){t.cssClasses[n]=t.cssPrefix+e[n]}))):t.cssClasses=e}function vi(t){var e={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:zr,format:zr},n={step:{r:!1,t:Jr},keyboardPageMultiplier:{r:!1,t:Xr},keyboardMultiplier:{r:!1,t:Gr},keyboardDefaultStep:{r:!1,t:Zr},start:{r:!0,t:Qr},connect:{r:!0,t:ni},direction:{r:!0,t:li},snap:{r:!1,t:Kr},animate:{r:!1,t:ti},animationDuration:{r:!1,t:ei},range:{r:!0,t:Yr},orientation:{r:!1,t:ri},margin:{r:!1,t:ii},limit:{r:!1,t:oi},padding:{r:!1,t:si},behaviour:{r:!0,t:ai},ariaFormat:{r:!1,t:di},format:{r:!1,t:fi},tooltips:{r:!1,t:ci},keyboardSupport:{r:!0,t:pi},documentElement:{r:!1,t:mi},cssPrefix:{r:!0,t:gi},cssClasses:{r:!0,t:hi},handleAttributes:{r:!1,t:ui}},r={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Br,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach((function(i){if(Pr(t[i])||void 0!==r[i])n[i].t(e,Pr(t[i])?t[i]:r[i]);else if(n[i].r)throw new Error("noUiSlider: '"+i+"' is required.")})),e.pips=t.pips;var i=document.createElement("div"),o=void 0!==i.style.msTransform,s=void 0!==i.style.transform;e.transformRule=s?"transform":o?"msTransform":"webkitTransform";return e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function $i(t,e,n){var r,i,o,s,l,a,c,u=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},d=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),f=t,p=e.spectrum,m=[],g=[],h=[],v=0,$={},b=!1,w=t.ownerDocument,y=e.documentElement||w.documentElement,x=w.body,k="rtl"===w.dir||1===e.ort?0:100;function S(t,e){var n=w.createElement("div");return e&&Vr(n,e),t.appendChild(n),n}function E(t,n){var r=S(t,e.cssClasses.origin),i=S(r,e.cssClasses.handle);if(S(i,e.cssClasses.touchArea),i.setAttribute("data-handle",String(n)),e.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",(function(t){return function(t,n){if(P()||L(n))return!1;var r=["Left","Right"],i=["Down","Up"],o=["PageDown","PageUp"],s=["Home","End"];e.dir&&!e.ort?r.reverse():e.ort&&!e.dir&&(i.reverse(),o.reverse());var l,a=t.key.replace("Arrow",""),c=a===o[0],u=a===o[1],d=a===i[0]||a===r[0]||c,f=a===i[1]||a===r[1]||u,h=a===s[0],v=a===s[1];if(!(d||f||h||v))return!0;if(t.preventDefault(),f||d){var $=d?0:1,b=lt(n)[$];if(null===b)return!1;!1===b&&(b=p.getDefaultStep(g[n],d,e.keyboardDefaultStep)),b*=u||c?e.keyboardPageMultiplier:e.keyboardMultiplier,b=Math.max(b,1e-7),b*=d?-1:1,l=m[n]+b}else l=v?e.spectrum.xVal[e.spectrum.xVal.length-1]:e.spectrum.xVal[0];return nt(n,p.toStepping(l),!0,!0),G("slide",n),G("update",n),G("change",n),G("set",n),!1}(t,n)}))),void 0!==e.handleAttributes){var o=e.handleAttributes[n];Object.keys(o).forEach((function(t){i.setAttribute(t,o[t])}))}return i.setAttribute("role","slider"),i.setAttribute("aria-orientation",e.ort?"vertical":"horizontal"),0===n?Vr(i,e.cssClasses.handleLower):n===e.handles-1&&Vr(i,e.cssClasses.handleUpper),r.handle=i,r}function C(t,n){return!!n&&S(t,e.cssClasses.connect)}function O(t,n){return!(!e.tooltips||!e.tooltips[n])&&S(t.firstChild,e.cssClasses.tooltip)}function P(){return f.hasAttribute("disabled")}function L(t){return o[t].hasAttribute("disabled")}function I(){a&&(X("update"+Wr.tooltips),a.forEach((function(t){t&&Or(t)})),a=null)}function N(){I(),a=o.map(O),J("update"+Wr.tooltips,(function(t,n,r){if(a&&e.tooltips&&!1!==a[n]){var i=t[n];!0!==e.tooltips[n]&&(i=e.tooltips[n].to(r[n])),a[n].innerHTML=i}}))}function R(t,e){return t.map((function(t){return p.fromStepping(e?p.getStep(t):t)}))}function T(t){var e,n=function(t){if(t.mode===Sr.Range||t.mode===Sr.Steps)return p.xVal;if(t.mode===Sr.Count){if(t.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var e=t.values-1,n=100/e,r=[];e--;)r[e]=e*n;return r.push(100),R(r,t.stepped)}return t.mode===Sr.Positions?R(t.values,t.stepped):t.mode===Sr.Values?t.stepped?t.values.map((function(t){return p.fromStepping(p.getStep(p.toStepping(t)))})):t.values:[]}(t),r={},i=p.xVal[0],o=p.xVal[p.xVal.length-1],s=!1,l=!1,a=0;return e=n.slice().sort((function(t,e){return t-e})),(n=e.filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==i&&(n.unshift(i),s=!0),n[n.length-1]!==o&&(n.push(o),l=!0),n.forEach((function(e,i){var o,c,u,d,f,m,g,h,v,$,b=e,w=n[i+1],y=t.mode===Sr.Steps;for(y&&(o=p.xNumSteps[i]),o||(o=w-b),void 0===w&&(w=b),o=Math.max(o,1e-7),c=b;c<=w;c=Number((c+o).toFixed(7))){for(h=(f=(d=p.toStepping(c))-a)/(t.density||1),$=f/(v=Math.round(h)),u=1;u<=v;u+=1)r[(m=a+u*$).toFixed(5)]=[p.fromStepping(m),0];g=n.indexOf(c)>-1?Er.LargeValue:y?Er.SmallValue:Er.NoValue,!i&&s&&c!==w&&(g=0),c===w&&l||(r[d.toFixed(5)]=[c,g]),a=d}})),r}function A(t,n,r){var i,o,s=w.createElement("div"),l=((i={})[Er.None]="",i[Er.NoValue]=e.cssClasses.valueNormal,i[Er.LargeValue]=e.cssClasses.valueLarge,i[Er.SmallValue]=e.cssClasses.valueSub,i),a=((o={})[Er.None]="",o[Er.NoValue]=e.cssClasses.markerNormal,o[Er.LargeValue]=e.cssClasses.markerLarge,o[Er.SmallValue]=e.cssClasses.markerSub,o),c=[e.cssClasses.valueHorizontal,e.cssClasses.valueVertical],u=[e.cssClasses.markerHorizontal,e.cssClasses.markerVertical];function d(t,n){var r=n===e.cssClasses.value,i=r?l:a;return n+" "+(r?c:u)[e.ort]+" "+i[t]}return Vr(s,e.cssClasses.pips),Vr(s,0===e.ort?e.cssClasses.pipsHorizontal:e.cssClasses.pipsVertical),Object.keys(t).forEach((function(i){!function(t,i,o){if((o=n?n(i,o):o)!==Er.None){var l=S(s,!1);l.className=d(o,e.cssClasses.marker),l.style[e.style]=t+"%",o>Er.NoValue&&((l=S(s,!1)).className=d(o,e.cssClasses.value),l.setAttribute("data-value",String(i)),l.style[e.style]=t+"%",l.innerHTML=String(r.to(i)))}}(i,t[i][0],t[i][1])})),s}function V(){l&&(Or(l),l=null)}function M(t){V();var e=T(t),n=t.filter,r=t.format||{to:function(t){return String(Math.round(t))}};return l=f.appendChild(A(e,n,r))}function j(){var t=r.getBoundingClientRect(),n="offset"+["Width","Height"][e.ort];return 0===e.ort?t.width||r[n]:t.height||r[n]}function q(t,n,r,i){var o=function(o){var s,l,a=function(t,e,n){var r=0===t.type.indexOf("touch"),i=0===t.type.indexOf("mouse"),o=0===t.type.indexOf("pointer"),s=0,l=0;0===t.type.indexOf("MSPointer")&&(o=!0);if("mousedown"===t.type&&!t.buttons&&!t.touches)return!1;if(r){var a=function(e){var r=e.target;return r===n||n.contains(r)||t.composed&&t.composedPath().shift()===n};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,a);if(c.length>1)return!1;s=c[0].pageX,l=c[0].pageY}else{var u=Array.prototype.find.call(t.changedTouches,a);if(!u)return!1;s=u.pageX,l=u.pageY}}e=e||jr(w),(i||o)&&(s=t.clientX+e.x,l=t.clientY+e.y);return t.pageOffset=e,t.points=[s,l],t.cursor=i||o,t}(o,i.pageOffset,i.target||n);return!!a&&(!(P()&&!i.doNotReject)&&(s=f,l=e.cssClasses.tap,!((s.classList?s.classList.contains(l):new RegExp("\\b"+l+"\\b").test(s.className))&&!i.doNotReject)&&(!(t===u.start&&void 0!==a.buttons&&a.buttons>1)&&((!i.hover||!a.buttons)&&(d||a.preventDefault(),a.calcPoint=a.points[e.ort],void r(a,i))))))},s=[];return t.split(" ").forEach((function(t){n.addEventListener(t,o,!!d&&{passive:!0}),s.push([t,o])})),s}function _(t){var n,i,o,s,l,a,c=100*(t-(n=r,i=e.ort,o=n.getBoundingClientRect(),s=n.ownerDocument,l=s.documentElement,a=jr(s),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(a.x=0),i?o.top+a.y-l.clientTop:o.left+a.x-l.clientLeft))/j();return c=Rr(c),e.dir?100-c:c}function D(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&F(t,e)}function U(t,n){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==n.buttonsProperty)return F(t,n);var r=(e.dir?-1:1)*(t.calcPoint-n.startCalcPoint);Q(r>0,100*r/n.baseSize,n.locations,n.handleNumbers,n.connect)}function F(t,n){n.handle&&(Mr(n.handle,e.cssClasses.active),v-=1),n.listeners.forEach((function(t){y.removeEventListener(t[0],t[1])})),0===v&&(Mr(f,e.cssClasses.drag),et(),t.cursor&&(x.style.cursor="",x.removeEventListener("selectstart",Lr))),e.events.smoothSteps&&(n.handleNumbers.forEach((function(t){nt(t,g[t],!0,!0,!1,!1)})),n.handleNumbers.forEach((function(t){G("update",t)}))),n.handleNumbers.forEach((function(t){G("change",t),G("set",t),G("end",t)}))}function H(t,n){if(!n.handleNumbers.some(L)){var r;if(1===n.handleNumbers.length)r=o[n.handleNumbers[0]].children[0],v+=1,Vr(r,e.cssClasses.active);t.stopPropagation();var i=[],s=q(u.move,y,U,{target:t.target,handle:r,connect:n.connect,listeners:i,startCalcPoint:t.calcPoint,baseSize:j(),pageOffset:t.pageOffset,handleNumbers:n.handleNumbers,buttonsProperty:t.buttons,locations:g.slice()}),l=q(u.end,y,F,{target:t.target,handle:r,listeners:i,doNotReject:!0,handleNumbers:n.handleNumbers}),a=q("mouseout",y,D,{target:t.target,handle:r,listeners:i,doNotReject:!0,handleNumbers:n.handleNumbers});i.push.apply(i,s.concat(l,a)),t.cursor&&(x.style.cursor=getComputedStyle(t.target).cursor,o.length>1&&Vr(f,e.cssClasses.drag),x.addEventListener("selectstart",Lr,!1)),n.handleNumbers.forEach((function(t){G("start",t)}))}}function z(t){t.stopPropagation();var n=_(t.calcPoint),r=function(t){var e=100,n=!1;return o.forEach((function(r,i){if(!L(i)){var o=g[i],s=Math.abs(o-t);(s<e||s<=e&&t>o||100===s&&100===e)&&(n=i,e=s)}})),n}(n);!1!==r&&(e.events.snap||Nr(f,e.cssClasses.tap,e.animationDuration),nt(r,n,!0,!0),et(),G("slide",r,!0),G("update",r,!0),e.events.snap?H(t,{handleNumbers:[r]}):(G("change",r,!0),G("set",r,!0)))}function B(t){var e=_(t.calcPoint),n=p.getStep(e),r=p.fromStepping(n);Object.keys($).forEach((function(t){"hover"===t.split(".")[0]&&$[t].forEach((function(t){t.call(ct,r)}))}))}function W(t){t.fixed||o.forEach((function(t,e){q(u.start,t.children[0],H,{handleNumbers:[e]})})),t.tap&&q(u.start,r,z,{}),t.hover&&q(u.move,r,B,{hover:!0}),t.drag&&s.forEach((function(n,r){if(!1!==n&&0!==r&&r!==s.length-1){var i=o[r-1],l=o[r],a=[n],c=[i,l],d=[r-1,r];Vr(n,e.cssClasses.draggable),t.fixed&&(a.push(i.children[0]),a.push(l.children[0])),t.dragAll&&(c=o,d=h),a.forEach((function(t){q(u.start,t,H,{handles:c,handleNumbers:d,connect:n})}))}}))}function J(t,e){$[t]=$[t]||[],$[t].push(e),"update"===t.split(".")[0]&&o.forEach((function(t,e){G("update",e)}))}function X(t){var e=t&&t.split(".")[0],n=e?t.substring(e.length):t;Object.keys($).forEach((function(t){var r=t.split(".")[0],i=t.substring(r.length);e&&e!==r||n&&n!==i||function(t){return t===Wr.aria||t===Wr.tooltips}(i)&&n!==i||delete $[t]}))}function G(t,n,r){Object.keys($).forEach((function(i){var o=i.split(".")[0];t===o&&$[i].forEach((function(t){t.call(ct,m.map(e.format.to),n,m.slice(),r||!1,g.slice(),ct)}))}))}function Z(t,n,r,i,s,l,a){var c;return o.length>1&&!e.events.unconstrained&&(i&&n>0&&(c=p.getAbsoluteDistance(t[n-1],e.margin,!1),r=Math.max(r,c)),s&&n<o.length-1&&(c=p.getAbsoluteDistance(t[n+1],e.margin,!0),r=Math.min(r,c))),o.length>1&&e.limit&&(i&&n>0&&(c=p.getAbsoluteDistance(t[n-1],e.limit,!1),r=Math.min(r,c)),s&&n<o.length-1&&(c=p.getAbsoluteDistance(t[n+1],e.limit,!0),r=Math.max(r,c))),e.padding&&(0===n&&(c=p.getAbsoluteDistance(0,e.padding[0],!1),r=Math.max(r,c)),n===o.length-1&&(c=p.getAbsoluteDistance(100,e.padding[1],!0),r=Math.min(r,c))),a||(r=p.getStep(r)),!((r=Rr(r))===t[n]&&!l)&&r}function Y(t,n){var r=e.ort;return(r?n:t)+", "+(r?t:n)}function Q(t,n,r,i,o){var s=r.slice(),l=i[0],a=e.events.smoothSteps,c=[!t,t],u=[t,!t];i=i.slice(),t&&i.reverse(),i.length>1?i.forEach((function(t,e){var r=Z(s,t,s[t]+n,c[e],u[e],!1,a);!1===r?n=0:(n=r-s[t],s[t]=r)})):c=u=[!0];var d=!1;i.forEach((function(t,e){d=nt(t,r[t]+n,c[e],u[e],!1,a)||d})),d&&(i.forEach((function(t){G("update",t),G("slide",t)})),null!=o&&G("drag",l))}function K(t,n){return e.dir?100-t-n:t}function tt(t,n){g[t]=n,m[t]=p.fromStepping(n);var r="translate("+Y(K(n,0)-k+"%","0")+")";if(o[t].style[e.transformRule]=r,e.events.invertConnects&&g.length>1){var i=g.every((function(t,e,n){return 0===e||t>=n[e-1]}));if(b!==!i)return b=!b,ni(e,e.connect.map((function(t){return!t}))),void at()}rt(t),rt(t+1),b&&(rt(t-1),rt(t+2))}function et(){h.forEach((function(t){var e=g[t]>50?-1:1,n=3+(o.length+e*t);o[t].style.zIndex=String(n)}))}function nt(t,e,n,r,i,o){return i||(e=Z(g,t,e,n,r,!1,o)),!1!==e&&(tt(t,e),!0)}function rt(t){if(s[t]){var n=g.slice();b&&n.sort((function(t,e){return t-e}));var r=0,i=100;0!==t&&(r=n[t-1]),t!==s.length-1&&(i=n[t]);var o=i-r,l="translate("+Y(K(r,o)+"%","0")+")",a="scale("+Y(o/100,"1")+")";s[t].style[e.transformRule]=l+" "+a}}function it(t,n){return null===t||!1===t||void 0===t?g[n]:("number"==typeof t&&(t=String(t)),!1!==(t=e.format.from(t))&&(t=p.toStepping(t)),!1===t||isNaN(t)?g[n]:t)}function ot(t,n,r){var i=Tr(t),o=void 0===g[0];n=void 0===n||n,e.animate&&!o&&Nr(f,e.cssClasses.tap,e.animationDuration),h.forEach((function(t){nt(t,it(i[t],t),!0,!1,r)}));var s=1===h.length?0:1;if(o&&p.hasNoSize()&&(r=!0,g[0]=0,h.length>1)){var l=100/(h.length-1);h.forEach((function(t){g[t]=t*l}))}for(;s<h.length;++s)h.forEach((function(t){nt(t,g[t],!0,!0,r)}));et(),h.forEach((function(t){G("update",t),null!==i[t]&&n&&G("set",t)}))}function st(t){if(void 0===t&&(t=!1),t)return 1===m.length?m[0]:m.slice(0);var n=m.map(e.format.to);return 1===n.length?n[0]:n}function lt(t){var n=g[t],r=p.getNearbySteps(n),i=m[t],o=r.thisStep.step,s=null;if(e.snap)return[i-r.stepBefore.startValue||null,r.stepAfter.startValue-i||null];!1!==o&&i+o>r.stepAfter.startValue&&(o=r.stepAfter.startValue-i),s=i>r.thisStep.startValue?r.thisStep.step:!1!==r.stepBefore.step&&i-r.stepBefore.highestStep,100===n?o=null:0===n&&(s=null);var l=p.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(l))),null!==s&&!1!==s&&(s=Number(s.toFixed(l))),[s,o]}function at(){for(;i.firstChild;)i.removeChild(i.firstChild);for(var t=0;t<=e.handles;t++)s[t]=C(i,e.connect[t]),rt(t);W({drag:e.events.drag,fixed:!0})}Vr(c=f,e.cssClasses.target),0===e.dir?Vr(c,e.cssClasses.ltr):Vr(c,e.cssClasses.rtl),0===e.ort?Vr(c,e.cssClasses.horizontal):Vr(c,e.cssClasses.vertical),Vr(c,"rtl"===getComputedStyle(c).direction?e.cssClasses.textDirectionRtl:e.cssClasses.textDirectionLtr),r=S(c,e.cssClasses.base),function(t,n){i=S(n,e.cssClasses.connects),o=[],(s=[]).push(C(i,t[0]));for(var r=0;r<e.handles;r++)o.push(E(n,r)),h[r]=r,s.push(C(i,t[r+1]))}(e.connect,r),W(e.events),ot(e.start),e.pips&&M(e.pips),e.tooltips&&N(),X("update"+Wr.aria),J("update"+Wr.aria,(function(t,n,r,i,s){h.forEach((function(t){var n=o[t],i=Z(g,t,0,!0,!0,!0),l=Z(g,t,100,!0,!0,!0),a=s[t],c=String(e.ariaFormat.to(r[t]));i=p.fromStepping(i).toFixed(1),l=p.fromStepping(l).toFixed(1),a=p.fromStepping(a).toFixed(1),n.children[0].setAttribute("aria-valuemin",i),n.children[0].setAttribute("aria-valuemax",l),n.children[0].setAttribute("aria-valuenow",a),n.children[0].setAttribute("aria-valuetext",c)}))}));var ct={destroy:function(){for(X(Wr.aria),X(Wr.tooltips),Object.keys(e.cssClasses).forEach((function(t){Mr(f,e.cssClasses[t])}));f.firstChild;)f.removeChild(f.firstChild);delete f.noUiSlider},steps:function(){return h.map(lt)},on:J,off:X,get:st,set:ot,setHandle:function(t,e,n,r){if(!((t=Number(t))>=0&&t<h.length))throw new Error("noUiSlider: invalid handle number, got: "+t);nt(t,it(e,t),!0,!0,r),G("update",t),n&&G("set",t)},reset:function(t){ot(e.start,t)},disable:function(t){null!=t?(o[t].setAttribute("disabled",""),o[t].handle.removeAttribute("tabindex")):(f.setAttribute("disabled",""),o.forEach((function(t){t.handle.removeAttribute("tabindex")})))},enable:function(t){null!=t?(o[t].removeAttribute("disabled"),o[t].handle.setAttribute("tabindex","0")):(f.removeAttribute("disabled"),o.forEach((function(t){t.removeAttribute("disabled"),t.handle.setAttribute("tabindex","0")})))},__moveHandles:function(t,e,n){Q(t,e,g,n)},options:n,updateOptions:function(t,r){var i=st(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];o.forEach((function(e){void 0!==t[e]&&(n[e]=t[e])}));var s=vi(n);o.forEach((function(n){void 0!==t[n]&&(e[n]=s[n])})),p=s.spectrum,e.margin=s.margin,e.limit=s.limit,e.padding=s.padding,e.pips?M(e.pips):V(),e.tooltips?N():I(),g=[],ot(Pr(t.start)?t.start:i,r),t.connect&&at()},target:f,removePips:V,removeTooltips:I,getPositions:function(){return g.slice()},getTooltips:function(){return a},getOrigins:function(){return o},pips:M};return ct}var bi={__spectrum:Hr,cssClasses:Br,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var n=$i(t,vi(e),e);return t.noUiSlider=n,n}};function wi(e){let n,r,i;return{c(){n=N("div"),r=N("div"),i=N("div"),_(i,"class","slider"),_(r,"class","slider-wrapper svelte-r6rzos")},m(t,o){P(t,n,o),E(n,r),E(r,i),e[5](i)},p:t,i:t,o:t,d(t){t&&L(n),e[5](null)}}}function yi(t,e,n){let r,i,{minVal:o}=e,{maxVal:s}=e,{step:l=1}=e;const a=rt(),c=[],u={min:void 0,max:void 0},d=[`noUi-handle-${window.crypto.randomUUID()}`,`noUi-handle-${window.crypto.randomUUID()}`];const f=([t,e])=>{u.min=r.min,u.max=r.max,n(4,r={min:t,max:e})};return et((()=>{bi.create(i,{start:[o,s],step:l,connect:!0,range:r,handleAttributes:[{id:d[0]},{id:d[1]}],pips:{mode:"steps",filter:(t,e)=>[o,s].includes(t)?1:-1}}),i.noUiSlider.on("set",(()=>{let t=i.noUiSlider.get(!0);f(t),a("updateRange",t)})),d.map(((t,e)=>{c.push(new Un({target:document.getElementById(t),props:{tooltipText:0===e?r.min:r.max}}))}))})),t.$$set=t=>{"minVal"in t&&n(1,o=t.minVal),"maxVal"in t&&n(2,s=t.maxVal),"step"in t&&n(3,l=t.step)},t.$$.update=()=>{6&t.$$.dirty&&n(4,r={min:o,max:s}),16&t.$$.dirty&&(c.length&&u.min!==r.min&&c[0].$set({tooltipText:r.min}),c.length&&u.max!==r.max&&c[1].$set({tooltipText:r.max}))},[i,o,s,l,r,function(t){at[t?"unshift":"push"]((()=>{i=t,n(0,i)}))}]}class xi extends qt{constructor(t){super(),jt(this,t,yi,wi,l,{minVal:1,maxVal:2,step:3})}}function ki(e){let n,r,i,o,s,l,a,c;return{c(){n=N("div"),r=N("label"),i=T(e[0]),o=A(),s=N("input"),_(r,"for",e[2]),_(r,"class","is-clickable"),_(s,"type","checkbox"),_(s,"id",e[2]),_(s,"name",e[2]),_(s,"class","svelte-1vd06dk"),_(n,"class",l="pill-checkbox checkbox-wrapper tag is-clickable "+(e[1]?"is-success":"is-link")+" svelte-1vd06dk")},m(t,l){P(t,n,l),E(n,r),E(r,i),E(n,o),E(n,s),a||(c=M(s,"click",e[3]),a=!0)},p(t,[e]){1&e&&F(i,t[0]),2&e&&l!==(l="pill-checkbox checkbox-wrapper tag is-clickable "+(t[1]?"is-success":"is-link")+" svelte-1vd06dk")&&_(n,"class",l)},i:t,o:t,d(t){t&&L(n),a=!1,c()}}}function Si(t,e,n){let r,{checkboxLabel:i}=e;const o=`input-pill-checkbox-${window.crypto.randomUUID()}`,s=rt();return t.$$set=t=>{"checkboxLabel"in t&&n(0,i=t.checkboxLabel)},n(1,r=!1),[i,r,o,()=>{n(1,r=!r),s("updateChecked",r)}]}class Ei extends qt{constructor(t){super(),jt(this,t,Si,ki,l,{checkboxLabel:0})}}const Ci=Math.min,Oi=Math.max,Pi=Math.round,Li=Math.floor,Ii=t=>({x:t,y:t}),Ni={left:"right",right:"left",bottom:"top",top:"bottom"},Ri={start:"end",end:"start"};function Ti(t,e,n){return Oi(t,Ci(e,n))}function Ai(t,e){return"function"==typeof t?t(e):t}function Vi(t){return t.split("-")[0]}function Mi(t){return t.split("-")[1]}function ji(t){return"x"===t?"y":"x"}function qi(t){return"y"===t?"height":"width"}function _i(t){return["top","bottom"].includes(Vi(t))?"y":"x"}function Di(t){return ji(_i(t))}function Ui(t){return t.replace(/start|end/g,(t=>Ri[t]))}function Fi(t){return t.replace(/left|right|bottom|top/g,(t=>Ni[t]))}function Hi(t){const{x:e,y:n,width:r,height:i}=t;return{width:r,height:i,top:n,left:e,right:e+r,bottom:n+i,x:e,y:n}}function zi(t,e,n){let{reference:r,floating:i}=t;const o=_i(e),s=Di(e),l=qi(s),a=Vi(e),c="y"===o,u=r.x+r.width/2-i.width/2,d=r.y+r.height/2-i.height/2,f=r[l]/2-i[l]/2;let p;switch(a){case"top":p={x:u,y:r.y-i.height};break;case"bottom":p={x:u,y:r.y+r.height};break;case"right":p={x:r.x+r.width,y:d};break;case"left":p={x:r.x-i.width,y:d};break;default:p={x:r.x,y:r.y}}switch(Mi(e)){case"start":p[s]-=f*(n&&c?-1:1);break;case"end":p[s]+=f*(n&&c?-1:1)}return p}async function Bi(t,e){var n;void 0===e&&(e={});const{x:r,y:i,platform:o,rects:s,elements:l,strategy:a}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:d="floating",altBoundary:f=!1,padding:p=0}=Ai(e,t),m=function(t){return"number"!=typeof t?function(t){return{top:0,right:0,bottom:0,left:0,...t}}(t):{top:t,right:t,bottom:t,left:t}}(p),g=l[f?"floating"===d?"reference":"floating":d],h=Hi(await o.getClippingRect({element:null==(n=await(null==o.isElement?void 0:o.isElement(g)))||n?g:g.contextElement||await(null==o.getDocumentElement?void 0:o.getDocumentElement(l.floating)),boundary:c,rootBoundary:u,strategy:a})),v="floating"===d?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,$=await(null==o.getOffsetParent?void 0:o.getOffsetParent(l.floating)),b=await(null==o.isElement?void 0:o.isElement($))&&await(null==o.getScale?void 0:o.getScale($))||{x:1,y:1},w=Hi(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:v,offsetParent:$,strategy:a}):v);return{top:(h.top-w.top+m.top)/b.y,bottom:(w.bottom-h.bottom+m.bottom)/b.y,left:(h.left-w.left+m.left)/b.x,right:(w.right-h.right+m.right)/b.x}}function Wi(){return"undefined"!=typeof window}function Ji(t){return Zi(t)?(t.nodeName||"").toLowerCase():"#document"}function Xi(t){var e;return(null==t||null==(e=t.ownerDocument)?void 0:e.defaultView)||window}function Gi(t){var e;return null==(e=(Zi(t)?t.ownerDocument:t.document)||window.document)?void 0:e.documentElement}function Zi(t){return!!Wi()&&(t instanceof Node||t instanceof Xi(t).Node)}function Yi(t){return!!Wi()&&(t instanceof Element||t instanceof Xi(t).Element)}function Qi(t){return!!Wi()&&(t instanceof HTMLElement||t instanceof Xi(t).HTMLElement)}function Ki(t){return!(!Wi()||"undefined"==typeof ShadowRoot)&&(t instanceof ShadowRoot||t instanceof Xi(t).ShadowRoot)}function to(t){const{overflow:e,overflowX:n,overflowY:r,display:i}=so(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(i)}function eo(t){return["table","td","th"].includes(Ji(t))}function no(t){return[":popover-open",":modal"].some((e=>{try{return t.matches(e)}catch(t){return!1}}))}function ro(t){const e=io(),n=Yi(t)?so(t):t;return["transform","translate","scale","rotate","perspective"].some((t=>!!n[t]&&"none"!==n[t]))||!!n.containerType&&"normal"!==n.containerType||!e&&!!n.backdropFilter&&"none"!==n.backdropFilter||!e&&!!n.filter&&"none"!==n.filter||["transform","translate","scale","rotate","perspective","filter"].some((t=>(n.willChange||"").includes(t)))||["paint","layout","strict","content"].some((t=>(n.contain||"").includes(t)))}function io(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function oo(t){return["html","body","#document"].includes(Ji(t))}function so(t){return Xi(t).getComputedStyle(t)}function lo(t){return Yi(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ao(t){if("html"===Ji(t))return t;const e=t.assignedSlot||t.parentNode||Ki(t)&&t.host||Gi(t);return Ki(e)?e.host:e}function co(t){const e=ao(t);return oo(e)?t.ownerDocument?t.ownerDocument.body:t.body:Qi(e)&&to(e)?e:co(e)}function uo(t,e,n){var r;void 0===e&&(e=[]),void 0===n&&(n=!0);const i=co(t),o=i===(null==(r=t.ownerDocument)?void 0:r.body),s=Xi(i);if(o){const t=fo(s);return e.concat(s,s.visualViewport||[],to(i)?i:[],t&&n?uo(t):[])}return e.concat(i,uo(i,[],n))}function fo(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function po(t){const e=so(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const i=Qi(t),o=i?t.offsetWidth:n,s=i?t.offsetHeight:r,l=Pi(n)!==o||Pi(r)!==s;return l&&(n=o,r=s),{width:n,height:r,$:l}}function mo(t){return Yi(t)?t:t.contextElement}function go(t){const e=mo(t);if(!Qi(e))return Ii(1);const n=e.getBoundingClientRect(),{width:r,height:i,$:o}=po(e);let s=(o?Pi(n.width):n.width)/r,l=(o?Pi(n.height):n.height)/i;return s&&Number.isFinite(s)||(s=1),l&&Number.isFinite(l)||(l=1),{x:s,y:l}}const ho=Ii(0);function vo(t){const e=Xi(t);return io()&&e.visualViewport?{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}:ho}function $o(t,e,n,r){void 0===e&&(e=!1),void 0===n&&(n=!1);const i=t.getBoundingClientRect(),o=mo(t);let s=Ii(1);e&&(r?Yi(r)&&(s=go(r)):s=go(t));const l=function(t,e,n){return void 0===e&&(e=!1),!(!n||e&&n!==Xi(t))&&e}(o,n,r)?vo(o):Ii(0);let a=(i.left+l.x)/s.x,c=(i.top+l.y)/s.y,u=i.width/s.x,d=i.height/s.y;if(o){const t=Xi(o),e=r&&Yi(r)?Xi(r):r;let n=t,i=fo(n);for(;i&&r&&e!==n;){const t=go(i),e=i.getBoundingClientRect(),r=so(i),o=e.left+(i.clientLeft+parseFloat(r.paddingLeft))*t.x,s=e.top+(i.clientTop+parseFloat(r.paddingTop))*t.y;a*=t.x,c*=t.y,u*=t.x,d*=t.y,a+=o,c+=s,n=Xi(i),i=fo(n)}}return Hi({width:u,height:d,x:a,y:c})}function bo(t,e){const n=lo(t).scrollLeft;return e?e.left+n:$o(Gi(t)).left+n}function wo(t,e,n){void 0===n&&(n=!1);const r=t.getBoundingClientRect();return{x:r.left+e.scrollLeft-(n?0:bo(t,r)),y:r.top+e.scrollTop}}function yo(t,e,n){let r;if("viewport"===e)r=function(t,e){const n=Xi(t),r=Gi(t),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,l=0,a=0;if(i){o=i.width,s=i.height;const t=io();(!t||t&&"fixed"===e)&&(l=i.offsetLeft,a=i.offsetTop)}return{width:o,height:s,x:l,y:a}}(t,n);else if("document"===e)r=function(t){const e=Gi(t),n=lo(t),r=t.ownerDocument.body,i=Oi(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Oi(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+bo(t);const l=-n.scrollTop;return"rtl"===so(r).direction&&(s+=Oi(e.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:l}}(Gi(t));else if(Yi(e))r=function(t,e){const n=$o(t,!0,"fixed"===e),r=n.top+t.clientTop,i=n.left+t.clientLeft,o=Qi(t)?go(t):Ii(1);return{width:t.clientWidth*o.x,height:t.clientHeight*o.y,x:i*o.x,y:r*o.y}}(e,n);else{const n=vo(t);r={x:e.x-n.x,y:e.y-n.y,width:e.width,height:e.height}}return Hi(r)}function xo(t,e){const n=ao(t);return!(n===e||!Yi(n)||oo(n))&&("fixed"===so(n).position||xo(n,e))}function ko(t,e,n){const r=Qi(e),i=Gi(e),o="fixed"===n,s=$o(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const a=Ii(0);if(r||!r&&!o)if(("body"!==Ji(e)||to(i))&&(l=lo(e)),r){const t=$o(e,!0,o,e);a.x=t.x+e.clientLeft,a.y=t.y+e.clientTop}else i&&(a.x=bo(i));const c=!i||r||o?Ii(0):wo(i,l);return{x:s.left+l.scrollLeft-a.x-c.x,y:s.top+l.scrollTop-a.y-c.y,width:s.width,height:s.height}}function So(t){return"static"===so(t).position}function Eo(t,e){if(!Qi(t)||"fixed"===so(t).position)return null;if(e)return e(t);let n=t.offsetParent;return Gi(t)===n&&(n=n.ownerDocument.body),n}function Co(t,e){const n=Xi(t);if(no(t))return n;if(!Qi(t)){let e=ao(t);for(;e&&!oo(e);){if(Yi(e)&&!So(e))return e;e=ao(e)}return n}let r=Eo(t,e);for(;r&&eo(r)&&So(r);)r=Eo(r,e);return r&&oo(r)&&So(r)&&!ro(r)?n:r||function(t){let e=ao(t);for(;Qi(e)&&!oo(e);){if(ro(e))return e;if(no(e))return null;e=ao(e)}return null}(t)||n}const Oo={convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{elements:e,rect:n,offsetParent:r,strategy:i}=t;const o="fixed"===i,s=Gi(r),l=!!e&&no(e.floating);if(r===s||l&&o)return n;let a={scrollLeft:0,scrollTop:0},c=Ii(1);const u=Ii(0),d=Qi(r);if((d||!d&&!o)&&(("body"!==Ji(r)||to(s))&&(a=lo(r)),Qi(r))){const t=$o(r);c=go(r),u.x=t.x+r.clientLeft,u.y=t.y+r.clientTop}const f=!s||d||o?Ii(0):wo(s,a,!0);return{width:n.width*c.x,height:n.height*c.y,x:n.x*c.x-a.scrollLeft*c.x+u.x+f.x,y:n.y*c.y-a.scrollTop*c.y+u.y+f.y}},getDocumentElement:Gi,getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:r,strategy:i}=t;const o="clippingAncestors"===n?no(e)?[]:function(t,e){const n=e.get(t);if(n)return n;let r=uo(t,[],!1).filter((t=>Yi(t)&&"body"!==Ji(t))),i=null;const o="fixed"===so(t).position;let s=o?ao(t):t;for(;Yi(s)&&!oo(s);){const e=so(s),n=ro(s);n||"fixed"!==e.position||(i=null),(o?!n&&!i:!n&&"static"===e.position&&i&&["absolute","fixed"].includes(i.position)||to(s)&&!n&&xo(t,s))?r=r.filter((t=>t!==s)):i=e,s=ao(s)}return e.set(t,r),r}(e,this._c):[].concat(n),s=[...o,r],l=s[0],a=s.reduce(((t,n)=>{const r=yo(e,n,i);return t.top=Oi(r.top,t.top),t.right=Ci(r.right,t.right),t.bottom=Ci(r.bottom,t.bottom),t.left=Oi(r.left,t.left),t}),yo(e,l,i));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:Co,getElementRects:async function(t){const e=this.getOffsetParent||Co,n=this.getDimensions,r=await n(t.floating);return{reference:ko(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}},getClientRects:function(t){return Array.from(t.getClientRects())},getDimensions:function(t){const{width:e,height:n}=po(t);return{width:e,height:n}},getScale:go,isElement:Yi,isRTL:function(t){return"rtl"===so(t).direction}};function Po(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function Lo(t,e,n,r){void 0===r&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:l="function"==typeof IntersectionObserver,animationFrame:a=!1}=r,c=mo(t),u=i||o?[...c?uo(c):[],...uo(e)]:[];u.forEach((t=>{i&&t.addEventListener("scroll",n,{passive:!0}),o&&t.addEventListener("resize",n)}));const d=c&&l?function(t,e){let n,r=null;const i=Gi(t);function o(){var t;clearTimeout(n),null==(t=r)||t.disconnect(),r=null}return function s(l,a){void 0===l&&(l=!1),void 0===a&&(a=1),o();const c=t.getBoundingClientRect(),{left:u,top:d,width:f,height:p}=c;if(l||e(),!f||!p)return;const m={rootMargin:-Li(d)+"px "+-Li(i.clientWidth-(u+f))+"px "+-Li(i.clientHeight-(d+p))+"px "+-Li(u)+"px",threshold:Oi(0,Ci(1,a))||1};let g=!0;function h(e){const r=e[0].intersectionRatio;if(r!==a){if(!g)return s();r?s(!1,r):n=setTimeout((()=>{s(!1,1e-7)}),1e3)}1!==r||Po(c,t.getBoundingClientRect())||s(),g=!1}try{r=new IntersectionObserver(h,{...m,root:i.ownerDocument})}catch(t){r=new IntersectionObserver(h,m)}r.observe(t)}(!0),o}(c,n):null;let f,p=-1,m=null;s&&(m=new ResizeObserver((t=>{let[r]=t;r&&r.target===c&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame((()=>{var t;null==(t=m)||t.observe(e)}))),n()})),c&&!a&&m.observe(c),m.observe(e));let g=a?$o(t):null;return a&&function e(){const r=$o(t);g&&!Po(g,r)&&n();g=r,f=requestAnimationFrame(e)}(),n(),()=>{var t;u.forEach((t=>{i&&t.removeEventListener("scroll",n),o&&t.removeEventListener("resize",n)})),null==d||d(),null==(t=m)||t.disconnect(),m=null,a&&cancelAnimationFrame(f)}}const Io=function(t){return void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:i,y:o,placement:s,middlewareData:l}=e,a=await async function(t,e){const{placement:n,platform:r,elements:i}=t,o=await(null==r.isRTL?void 0:r.isRTL(i.floating)),s=Vi(n),l=Mi(n),a="y"===_i(n),c=["left","top"].includes(s)?-1:1,u=o&&a?-1:1,d=Ai(e,t);let{mainAxis:f,crossAxis:p,alignmentAxis:m}="number"==typeof d?{mainAxis:d,crossAxis:0,alignmentAxis:null}:{mainAxis:d.mainAxis||0,crossAxis:d.crossAxis||0,alignmentAxis:d.alignmentAxis};return l&&"number"==typeof m&&(p="end"===l?-1*m:m),a?{x:p*u,y:f*c}:{x:f*c,y:p*u}}(e,t);return s===(null==(n=l.offset)?void 0:n.placement)&&null!=(r=l.arrow)&&r.alignmentOffset?{}:{x:i+a.x,y:o+a.y,data:{...a,placement:s}}}}},No=function(t){return void 0===t&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:i}=e,{mainAxis:o=!0,crossAxis:s=!1,limiter:l={fn:t=>{let{x:e,y:n}=t;return{x:e,y:n}}},...a}=Ai(t,e),c={x:n,y:r},u=await Bi(e,a),d=_i(Vi(i)),f=ji(d);let p=c[f],m=c[d];if(o){const t="y"===f?"bottom":"right";p=Ti(p+u["y"===f?"top":"left"],p,p-u[t])}if(s){const t="y"===d?"bottom":"right";m=Ti(m+u["y"===d?"top":"left"],m,m-u[t])}const g=l.fn({...e,[f]:p,[d]:m});return{...g,data:{x:g.x-n,y:g.y-r,enabled:{[f]:o,[d]:s}}}}}},Ro=function(t){return void 0===t&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:l,platform:a,elements:c}=e,{mainAxis:u=!0,crossAxis:d=!0,fallbackPlacements:f,fallbackStrategy:p="bestFit",fallbackAxisSideDirection:m="none",flipAlignment:g=!0,...h}=Ai(t,e);if(null!=(n=o.arrow)&&n.alignmentOffset)return{};const v=Vi(i),$=_i(l),b=Vi(l)===l,w=await(null==a.isRTL?void 0:a.isRTL(c.floating)),y=f||(b||!g?[Fi(l)]:function(t){const e=Fi(t);return[Ui(t),e,Ui(e)]}(l)),x="none"!==m;!f&&x&&y.push(...function(t,e,n,r){const i=Mi(t);let o=function(t,e,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(t){case"top":case"bottom":return n?e?i:r:e?r:i;case"left":case"right":return e?o:s;default:return[]}}(Vi(t),"start"===n,r);return i&&(o=o.map((t=>t+"-"+i)),e&&(o=o.concat(o.map(Ui)))),o}(l,g,m,w));const k=[l,...y],S=await Bi(e,h),E=[];let C=(null==(r=o.flip)?void 0:r.overflows)||[];if(u&&E.push(S[v]),d){const t=function(t,e,n){void 0===n&&(n=!1);const r=Mi(t),i=Di(t),o=qi(i);let s="x"===i?r===(n?"end":"start")?"right":"left":"start"===r?"bottom":"top";return e.reference[o]>e.floating[o]&&(s=Fi(s)),[s,Fi(s)]}(i,s,w);E.push(S[t[0]],S[t[1]])}if(C=[...C,{placement:i,overflows:E}],!E.every((t=>t<=0))){var O,P;const t=((null==(O=o.flip)?void 0:O.index)||0)+1,e=k[t];if(e)return{data:{index:t,overflows:C},reset:{placement:e}};let n=null==(P=C.filter((t=>t.overflows[0]<=0)).sort(((t,e)=>t.overflows[1]-e.overflows[1]))[0])?void 0:P.placement;if(!n)switch(p){case"bestFit":{var L;const t=null==(L=C.filter((t=>{if(x){const e=_i(t.placement);return e===$||"y"===e}return!0})).map((t=>[t.placement,t.overflows.filter((t=>t>0)).reduce(((t,e)=>t+e),0)])).sort(((t,e)=>t[1]-e[1]))[0])?void 0:L[0];t&&(n=t);break}case"initialPlacement":n=l}if(i!==n)return{reset:{placement:n}}}return{}}}},To=(t,e,n)=>{const r=new Map,i={platform:Oo,...n},o={...i.platform,_c:r};return(async(t,e,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,l=o.filter(Boolean),a=await(null==s.isRTL?void 0:s.isRTL(e));let c=await s.getElementRects({reference:t,floating:e,strategy:i}),{x:u,y:d}=zi(c,r,a),f=r,p={},m=0;for(let n=0;n<l.length;n++){const{name:o,fn:g}=l[n],{x:h,y:v,data:$,reset:b}=await g({x:u,y:d,initialPlacement:r,placement:f,strategy:i,middlewareData:p,rects:c,platform:s,elements:{reference:t,floating:e}});u=null!=h?h:u,d=null!=v?v:d,p={...p,[o]:{...p[o],...$}},b&&m<=50&&(m++,"object"==typeof b&&(b.placement&&(f=b.placement),b.rects&&(c=!0===b.rects?await s.getElementRects({reference:t,floating:e,strategy:i}):b.rects),({x:u,y:d}=zi(c,f,a))),n=-1)}return{x:u,y:d,placement:f,strategy:i,middlewareData:p}})(t,e,{...i,platform:o})};function Ao(t){let e,n;const r={autoUpdate:!0};let i=t;const o=e=>({...r,...t||{},...e||{}}),s=t=>{e&&n&&(i=o(t),To(e,n,i).then((t=>{Object.assign(n.style,{position:t.strategy,left:`${t.x}px`,top:`${t.y}px`}),i?.onComputed&&i.onComputed(t)})))},l=t=>{nt(t.subscribe((t=>{void 0===e?(e=t,s()):(Object.assign(e,t),s())})))};return[t=>{if("subscribe"in t)return l(t),{};e=t,s()},(t,r)=>{let l;n=t,i=o(r),setTimeout((()=>s(r)),0),s(r);const a=()=>{l&&(l(),l=void 0)},c=({autoUpdate:t}=i||{})=>{a(),!1!==t&&(pt(),dt).then((()=>Lo(e,n,(()=>s(i)),!0===t?{}:t)))};return l=c(),{update(t){s(t),l=c(t)},destroy(){a()}}},s]}function Vo({loadOptions:t,filterText:e,items:n,multiple:r,value:i,itemId:o,groupBy:s,filterSelectedItems:l,itemFilter:a,convertStringItemsToObjects:c,filterGroupedItems:u,label:d}){if(n&&t)return n;if(!n)return[];n&&n.length>0&&"object"!=typeof n[0]&&(n=c(n));let f=n.filter((t=>{let n=a(t[d],e,t);return n&&r&&i?.length&&(n=!i.some((e=>!!l&&e[o]===t[o]))),n}));return s&&(f=u(f)),f}async function Mo({dispatch:t,loadOptions:e,convertStringItemsToObjects:n,filterText:r}){let i=await e(r).catch((e=>{console.warn("svelte-select loadOptions error :>> ",e),t("error",{type:"loadOptions",details:e})}));if(i&&!i.cancelled)return i?(i&&i.length>0&&"object"!=typeof i[0]&&(i=n(i)),t("loaded",{items:i})):i=[],{filteredItems:i,loading:!1,focused:!0,listOpen:!0}}function jo(e){let n,r;return{c(){n=R("svg"),r=R("path"),_(r,"fill","currentColor"),_(r,"d","M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747\n          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0\n          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502\n          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0\n          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"),_(n,"width","100%"),_(n,"height","100%"),_(n,"viewBox","0 0 20 20"),_(n,"focusable","false"),_(n,"aria-hidden","true"),_(n,"class","svelte-qbd276")},m(t,e){P(t,n,e),E(n,r)},p:t,i:t,o:t,d(t){t&&L(n)}}}class qo extends qt{constructor(t){super(),jt(this,t,null,jo,l,{})}}function _o(e){let n,r;return{c(){n=R("svg"),r=R("path"),_(r,"fill","currentColor"),_(r,"d","M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124\n    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"),_(n,"width","100%"),_(n,"height","100%"),_(n,"viewBox","-2 -2 50 50"),_(n,"focusable","false"),_(n,"aria-hidden","true"),_(n,"role","presentation"),_(n,"class","svelte-whdbu1")},m(t,e){P(t,n,e),E(n,r)},p:t,i:t,o:t,d(t){t&&L(n)}}}class Do extends qt{constructor(t){super(),jt(this,t,null,_o,l,{})}}function Uo(e){let n,r;return{c(){n=R("svg"),r=R("circle"),_(r,"class","circle_path svelte-1p3nqvd"),_(r,"cx","50"),_(r,"cy","50"),_(r,"r","20"),_(r,"fill","none"),_(r,"stroke","currentColor"),_(r,"stroke-width","5"),_(r,"stroke-miterlimit","10"),_(n,"class","loading svelte-1p3nqvd"),_(n,"viewBox","25 25 50 50")},m(t,e){P(t,n,e),E(n,r)},p:t,i:t,o:t,d(t){t&&L(n)}}}class Fo extends qt{constructor(t){super(),jt(this,t,null,Uo,l,{})}}const Ho=t=>({value:8&t[0]}),zo=t=>({value:t[3]}),Bo=t=>({value:8&t[0]}),Wo=t=>({value:t[3]}),Jo=t=>({listOpen:64&t[0]}),Xo=t=>({listOpen:t[6]}),Go=t=>({}),Zo=t=>({}),Yo=t=>({}),Qo=t=>({}),Ko=t=>({selection:8&t[0]}),ts=t=>({selection:t[3]});function es(t,e,n){const r=t.slice();return r[126]=e[n],r[128]=n,r}const ns=t=>({}),rs=t=>({}),is=t=>({selection:8&t[0]}),os=t=>({selection:t[126],index:t[128]}),ss=t=>({}),ls=t=>({}),as=t=>({}),cs=t=>({}),us=t=>({}),ds=t=>({});function fs(t,e,n){const r=t.slice();return r[126]=e[n],r[128]=n,r}const ps=t=>({item:16777216&t[0]}),ms=t=>({item:t[126],index:t[128]}),gs=t=>({filteredItems:16777216&t[0]}),hs=t=>({filteredItems:t[24]}),vs=t=>({}),$s=t=>({});function bs(t){let e,n,r,i,s,l,a,c,u=t[50]["list-prepend"]&&ws(t);const d=[ks,xs,ys],f=[];function p(t,e){return t[50].list?0:t[24].length>0?1:t[19]?-1:2}~(r=p(t))&&(i=f[r]=d[r](t));let m=t[50]["list-append"]&&Es(t);return{c(){e=N("div"),u&&u.c(),n=A(),i&&i.c(),s=A(),m&&m.c(),_(e,"class","svelte-select-list svelte-82qwg8"),_(e,"role","none"),B(e,"prefloat",t[28])},m(i,o){P(i,e,o),u&&u.m(e,null),E(e,n),~r&&f[r].m(e,null),E(e,s),m&&m.m(e,null),t[91](e),l=!0,a||(c=[$(t[49].call(null,e)),M(e,"scroll",t[41]),M(e,"pointerup",q(j(t[85]))),M(e,"mousedown",q(j(t[86])))],a=!0)},p(t,o){t[50]["list-prepend"]?u?(u.p(t,o),524288&o[1]&&Et(u,1)):(u=ws(t),u.c(),Et(u,1),u.m(e,n)):u&&(kt(),Ct(u,1,1,(()=>{u=null})),St());let a=r;r=p(t),r===a?~r&&f[r].p(t,o):(i&&(kt(),Ct(f[a],1,1,(()=>{f[a]=null})),St()),~r?(i=f[r],i?i.p(t,o):(i=f[r]=d[r](t),i.c()),Et(i,1),i.m(e,s)):i=null),t[50]["list-append"]?m?(m.p(t,o),524288&o[1]&&Et(m,1)):(m=Es(t),m.c(),Et(m,1),m.m(e,null)):m&&(kt(),Ct(m,1,1,(()=>{m=null})),St()),(!l||268435456&o[0])&&B(e,"prefloat",t[28])},i(t){l||(Et(u),Et(i),Et(m),l=!0)},o(t){Ct(u),Ct(i),Ct(m),l=!1},d(n){n&&L(e),u&&u.d(),~r&&f[r].d(),m&&m.d(),t[91](null),a=!1,o(c)}}}function ws(t){let e;const n=t[83]["list-prepend"],r=p(n,t,t[82],$s);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1048576&i[2])&&h(r,n,t,t[82],e?g(n,t[82],i,vs):v(t[82]),$s)},i(t){e||(Et(r,t),e=!0)},o(t){Ct(r,t),e=!1},d(t){r&&r.d(t)}}}function ys(e){let n;const r=e[83].empty,i=p(r,e,e[82],ds),o=i||function(e){let n;return{c(){n=N("div"),n.textContent="No options",_(n,"class","empty svelte-82qwg8")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}();return{c(){o&&o.c()},m(t,e){o&&o.m(t,e),n=!0},p(t,e){i&&i.p&&(!n||1048576&e[2])&&h(i,r,t,t[82],n?g(r,t[82],e,us):v(t[82]),ds)},i(t){n||(Et(o,t),n=!0)},o(t){Ct(o,t),n=!1},d(t){o&&o.d(t)}}}function xs(t){let e,n,r=t[24],i=[];for(let e=0;e<r.length;e+=1)i[e]=Ss(fs(t,r,e));const o=t=>Ct(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=V()},m(t,r){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,r);P(t,e,r),n=!0},p(t,n){if(1627402376&n[0]|28672&n[1]|1048576&n[2]){let s;for(r=t[24],s=0;s<r.length;s+=1){const o=fs(t,r,s);i[s]?(i[s].p(o,n),Et(i[s],1)):(i[s]=Ss(o),i[s].c(),Et(i[s],1),i[s].m(e.parentNode,e))}for(kt(),s=r.length;s<i.length;s+=1)o(s);St()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Et(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Ct(i[t]);n=!1},d(t){I(i,t),t&&L(e)}}}function ks(t){let e;const n=t[83].list,r=p(n,t,t[82],hs);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||16777216&i[0]|1048576&i[2])&&h(r,n,t,t[82],e?g(n,t[82],i,gs):v(t[82]),hs)},i(t){e||(Et(r,t),e=!0)},o(t){Ct(r,t),e=!1},d(t){r&&r.d(t)}}}function Ss(t){let e,n,r,i,l,a,c,u;const d=t[83].item,f=p(d,t,t[82],ms),m=f||function(t){let e,n=t[126]?.[t[12]]+"";return{c(){e=T(n)},m(t,n){P(t,e,n)},p(t,r){16781312&r[0]&&n!==(n=t[126]?.[t[12]]+"")&&F(e,n)},d(t){t&&L(e)}}}(t);function b(){return t[88](t[128])}function w(){return t[89](t[128])}function y(){return t[90](t[126],t[128])}return{c(){e=N("div"),n=N("div"),m&&m.c(),l=A(),_(n,"class","item svelte-82qwg8"),B(n,"list-group-title",t[126].groupHeader),B(n,"active",t[45](t[126],t[3],t[13])),B(n,"first",0===t[128]),B(n,"hover",t[7]===t[128]),B(n,"group-item",t[126].groupItem),B(n,"not-selectable",!1===t[126]?.selectable),_(e,"class","list-item svelte-82qwg8"),_(e,"tabindex","-1"),_(e,"role","none")},m(o,s){P(o,e,s),E(e,n),m&&m.m(n,null),E(e,l),a=!0,c||(u=[$(r=t[46].call(null,n,{scroll:t[45](t[126],t[3],t[13]),listDom:t[30]})),$(i=t[47].call(null,n,{scroll:t[29]===t[128],listDom:t[30]})),M(e,"mouseover",b),M(e,"focus",w),M(e,"click",q(y)),M(e,"keydown",q(j(t[87])))],c=!0)},p(e,o){t=e,f?f.p&&(!a||16777216&o[0]|1048576&o[2])&&h(f,d,t,t[82],a?g(d,t[82],o,ps):v(t[82]),ms):m&&m.p&&(!a||16781312&o[0])&&m.p(t,a?o:[-1,-1,-1,-1,-1]),r&&s(r.update)&&1090527240&o[0]&&r.update.call(null,{scroll:t[45](t[126],t[3],t[13]),listDom:t[30]}),i&&s(i.update)&&1610612736&o[0]&&i.update.call(null,{scroll:t[29]===t[128],listDom:t[30]}),(!a||16777216&o[0])&&B(n,"list-group-title",t[126].groupHeader),(!a||16785416&o[0]|16384&o[1])&&B(n,"active",t[45](t[126],t[3],t[13])),(!a||128&o[0])&&B(n,"hover",t[7]===t[128]),(!a||16777216&o[0])&&B(n,"group-item",t[126].groupItem),(!a||16777216&o[0])&&B(n,"not-selectable",!1===t[126]?.selectable)},i(t){a||(Et(m,t),a=!0)},o(t){Ct(m,t),a=!1},d(t){t&&L(e),m&&m.d(t),c=!1,o(u)}}}function Es(t){let e;const n=t[83]["list-append"],r=p(n,t,t[82],cs);return{c(){r&&r.c()},m(t,n){r&&r.m(t,n),e=!0},p(t,i){r&&r.p&&(!e||1048576&i[2])&&h(r,n,t,t[82],e?g(n,t[82],i,as):v(t[82]),cs)},i(t){e||(Et(r,t),e=!0)},o(t){Ct(r,t),e=!1},d(t){r&&r.d(t)}}}function Cs(t){let e,n,r,i,o;return{c(){e=N("span"),n=T(t[32]),r=A(),i=N("span"),o=T(t[31]),_(e,"id","aria-selection"),_(e,"class","svelte-82qwg8"),_(i,"id","aria-context"),_(i,"class","svelte-82qwg8")},m(t,s){P(t,e,s),E(e,n),P(t,r,s),P(t,i,s),E(i,o)},p(t,e){2&e[1]&&F(n,t[32]),1&e[1]&&F(o,t[31])},d(t){t&&L(e),t&&L(r),t&&L(i)}}}function Os(t){let e,n,r,i;const o=[Ls,Ps],s=[];function l(t,e){return t[9]?0:1}return e=l(t),n=s[e]=o[e](t),{c(){n.c(),r=V()},m(t,n){s[e].m(t,n),P(t,r,n),i=!0},p(t,i){let a=e;e=l(t),e===a?s[e].p(t,i):(kt(),Ct(s[a],1,1,(()=>{s[a]=null})),St(),n=s[e],n?n.p(t,i):(n=s[e]=o[e](t),n.c()),Et(n,1),n.m(r.parentNode,r))},i(t){i||(Et(n),i=!0)},o(t){Ct(n),i=!1},d(t){s[e].d(t),t&&L(r)}}}function Ps(t){let e,n;const r=t[83].selection,i=p(r,t,t[82],ts),o=i||function(t){let e,n=t[3][t[12]]+"";return{c(){e=T(n)},m(t,n){P(t,e,n)},p(t,r){4104&r[0]&&n!==(n=t[3][t[12]]+"")&&F(e,n)},d(t){t&&L(e)}}}(t);return{c(){e=N("div"),o&&o.c(),_(e,"class","selected-item svelte-82qwg8"),B(e,"hide-selected-item",t[35])},m(t,r){P(t,e,r),o&&o.m(e,null),n=!0},p(t,s){i?i.p&&(!n||8&s[0]|1048576&s[2])&&h(i,r,t,t[82],n?g(r,t[82],s,Ko):v(t[82]),ts):o&&o.p&&(!n||4104&s[0])&&o.p(t,n?s:[-1,-1,-1,-1,-1]),(!n||16&s[1])&&B(e,"hide-selected-item",t[35])},i(t){n||(Et(o,t),n=!0)},o(t){Ct(o,t),n=!1},d(t){t&&L(e),o&&o.d(t)}}}function Ls(t){let e,n,r=t[3],i=[];for(let e=0;e<r.length;e+=1)i[e]=Ns(es(t,r,e));const o=t=>Ct(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=V()},m(t,r){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,r);P(t,e,r),n=!0},p(t,n){if(67116040&n[0]|32&n[1]|1048576&n[2]){let s;for(r=t[3],s=0;s<r.length;s+=1){const o=es(t,r,s);i[s]?(i[s].p(o,n),Et(i[s],1)):(i[s]=Ns(o),i[s].c(),Et(i[s],1),i[s].m(e.parentNode,e))}for(kt(),s=r.length;s<i.length;s+=1)o(s);St()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Et(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Ct(i[t]);n=!1},d(t){I(i,t),t&&L(e)}}}function Is(t){let e,n,r,i;const o=t[83]["multi-clear-icon"],s=p(o,t,t[82],rs),l=s||function(t){let e,n;return e=new Do({}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}();function a(){return t[92](t[128])}return{c(){e=N("div"),l&&l.c(),_(e,"class","multi-item-clear svelte-82qwg8")},m(t,o){P(t,e,o),l&&l.m(e,null),n=!0,r||(i=M(e,"pointerup",q(j(a))),r=!0)},p(e,r){t=e,s&&s.p&&(!n||1048576&r[2])&&h(s,o,t,t[82],n?g(o,t[82],r,ns):v(t[82]),rs)},i(t){n||(Et(l,t),n=!0)},o(t){Ct(l,t),n=!1},d(t){t&&L(e),l&&l.d(t),r=!1,i()}}}function Ns(t){let e,n,r,i,s,l,a;const c=t[83].selection,u=p(c,t,t[82],os),d=u||function(t){let e,n=t[126][t[12]]+"";return{c(){e=T(n)},m(t,n){P(t,e,n)},p(t,r){4104&r[0]&&n!==(n=t[126][t[12]]+"")&&F(e,n)},d(t){t&&L(e)}}}(t);let f=!t[11]&&!t[10]&&Do&&Is(t);function m(){return t[93](t[128])}return{c(){e=N("div"),n=N("span"),d&&d.c(),r=A(),f&&f.c(),i=A(),_(n,"class","multi-item-text svelte-82qwg8"),_(e,"class","multi-item svelte-82qwg8"),_(e,"role","none"),B(e,"active",t[26]===t[128]),B(e,"disabled",t[11])},m(o,c){P(o,e,c),E(e,n),d&&d.m(n,null),E(e,r),f&&f.m(e,null),E(e,i),s=!0,l||(a=[M(e,"click",j(m)),M(e,"keydown",q(j(t[84])))],l=!0)},p(n,r){t=n,u?u.p&&(!s||8&r[0]|1048576&r[2])&&h(u,c,t,t[82],s?g(c,t[82],r,is):v(t[82]),os):d&&d.p&&(!s||4104&r[0])&&d.p(t,s?r:[-1,-1,-1,-1,-1]),t[11]||t[10]||!Do?f&&(kt(),Ct(f,1,1,(()=>{f=null})),St()):f?(f.p(t,r),3072&r[0]&&Et(f,1)):(f=Is(t),f.c(),Et(f,1),f.m(e,i)),(!s||67108864&r[0])&&B(e,"active",t[26]===t[128]),(!s||2048&r[0])&&B(e,"disabled",t[11])},i(t){s||(Et(d,t),Et(f),s=!0)},o(t){Ct(d,t),Ct(f),s=!1},d(t){t&&L(e),d&&d.d(t),f&&f.d(),l=!1,o(a)}}}function Rs(t){let e,n;const r=t[83]["loading-icon"],i=p(r,t,t[82],Qo),o=i||function(t){let e,n;return e=new Fo({}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}();return{c(){e=N("div"),o&&o.c(),_(e,"class","icon loading svelte-82qwg8"),_(e,"aria-hidden","true")},m(t,r){P(t,e,r),o&&o.m(e,null),n=!0},p(t,e){i&&i.p&&(!n||1048576&e[2])&&h(i,r,t,t[82],n?g(r,t[82],e,Yo):v(t[82]),Qo)},i(t){n||(Et(o,t),n=!0)},o(t){Ct(o,t),n=!1},d(t){t&&L(e),o&&o.d(t)}}}function Ts(t){let e,n,r,i;const o=t[83]["clear-icon"],s=p(o,t,t[82],Zo),l=s||function(t){let e,n;return e=new Do({}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}();return{c(){e=N("button"),l&&l.c(),_(e,"type","button"),_(e,"class","icon clear-select svelte-82qwg8")},m(o,s){P(o,e,s),l&&l.m(e,null),n=!0,r||(i=M(e,"click",t[22]),r=!0)},p(t,e){s&&s.p&&(!n||1048576&e[2])&&h(s,o,t,t[82],n?g(o,t[82],e,Go):v(t[82]),Zo)},i(t){n||(Et(l,t),n=!0)},o(t){Ct(l,t),n=!1},d(t){t&&L(e),l&&l.d(t),r=!1,i()}}}function As(t){let e,n;const r=t[83]["chevron-icon"],i=p(r,t,t[82],Xo),o=i||function(t){let e,n;return e=new qo({}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}();return{c(){e=N("div"),o&&o.c(),_(e,"class","icon chevron svelte-82qwg8"),_(e,"aria-hidden","true")},m(t,r){P(t,e,r),o&&o.m(e,null),n=!0},p(t,e){i&&i.p&&(!n||64&e[0]|1048576&e[2])&&h(i,r,t,t[82],n?g(r,t[82],e,Jo):v(t[82]),Xo)},i(t){n||(Et(o,t),n=!0)},o(t){Ct(o,t),n=!1},d(t){t&&L(e),o&&o.d(t)}}}function Vs(e){let n;const r=e[83].required,i=p(r,e,e[82],zo),o=i||function(e){let n;return{c(){n=N("select"),_(n,"class","required svelte-82qwg8"),n.required=!0,_(n,"tabindex","-1"),_(n,"aria-hidden","true")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}();return{c(){o&&o.c()},m(t,e){o&&o.m(t,e),n=!0},p(t,e){i&&i.p&&(!n||8&e[0]|1048576&e[2])&&h(i,r,t,t[82],n?g(r,t[82],e,Ho):v(t[82]),zo)},i(t){n||(Et(o,t),n=!0)},o(t){Ct(o,t),n=!1},d(t){o&&o.d(t)}}}function Ms(t){let e,r,i,s,l,a,c,u,d,f,m,b,w,y,x,k,S,C,O,I,R=t[6]&&bs(t),T=t[2]&&Cs(t);const V=t[83].prepend,q=p(V,t,t[82],ls);let D=t[25]&&Os(t),F=[{readOnly:f=!t[17]},t[27],{placeholder:t[33]},{style:t[18]},{disabled:t[11]}],z={};for(let t=0;t<F.length;t+=1)z=n(z,F[t]);let W=t[5]&&Rs(t),J=t[34]&&Ts(t),X=t[20]&&As(t);const G=t[83]["input-hidden"],Z=p(G,t,t[82],Wo),Y=Z||function(t){let e,n;return{c(){e=N("input"),_(e,"name",t[8]),_(e,"type","hidden"),e.value=n=t[3]?JSON.stringify(t[3]):null,_(e,"class","svelte-82qwg8")},m(t,n){P(t,e,n)},p(t,r){256&r[0]&&_(e,"name",t[8]),8&r[0]&&n!==(n=t[3]?JSON.stringify(t[3]):null)&&(e.value=n)},d(t){t&&L(e)}}}(t);let Q=t[16]&&(!t[3]||0===t[3].length)&&Vs(t);return{c(){e=N("div"),R&&R.c(),r=A(),i=N("span"),T&&T.c(),s=A(),l=N("div"),q&&q.c(),a=A(),c=N("div"),D&&D.c(),u=A(),d=N("input"),m=A(),b=N("div"),W&&W.c(),w=A(),J&&J.c(),y=A(),X&&X.c(),x=A(),Y&&Y.c(),k=A(),Q&&Q.c(),_(i,"aria-live","polite"),_(i,"aria-atomic","false"),_(i,"aria-relevant","additions text"),_(i,"class","a11y-text svelte-82qwg8"),_(l,"class","prepend svelte-82qwg8"),U(d,z),B(d,"svelte-82qwg8",!0),_(c,"class","value-container svelte-82qwg8"),_(b,"class","indicators svelte-82qwg8"),_(e,"class",S="svelte-select "+t[21]+" svelte-82qwg8"),_(e,"style",t[14]),_(e,"role","none"),B(e,"multi",t[9]),B(e,"disabled",t[11]),B(e,"focused",t[2]),B(e,"list-open",t[6]),B(e,"show-chevron",t[20]),B(e,"error",t[15])},m(n,o){P(n,e,o),R&&R.m(e,null),E(e,r),E(e,i),T&&T.m(i,null),E(e,s),E(e,l),q&&q.m(l,null),E(e,a),E(e,c),D&&D.m(c,null),E(c,u),E(c,d),d.autofocus&&d.focus(),t[94](d),H(d,t[4]),E(e,m),E(e,b),W&&W.m(b,null),E(b,w),J&&J.m(b,null),E(b,y),X&&X.m(b,null),E(e,x),Y&&Y.m(e,null),E(e,k),Q&&Q.m(e,null),t[96](e),C=!0,O||(I=[M(window,"click",t[42]),M(window,"keydown",t[37]),M(d,"keydown",t[37]),M(d,"blur",t[39]),M(d,"focus",t[38]),M(d,"input",t[95]),M(e,"pointerup",j(t[40])),$(t[48].call(null,e))],O=!0)},p(t,n){t[6]?R?(R.p(t,n),64&n[0]&&Et(R,1)):(R=bs(t),R.c(),Et(R,1),R.m(e,r)):R&&(kt(),Ct(R,1,1,(()=>{R=null})),St()),t[2]?T?T.p(t,n):(T=Cs(t),T.c(),T.m(i,null)):T&&(T.d(1),T=null),q&&q.p&&(!C||1048576&n[2])&&h(q,V,t,t[82],C?g(V,t[82],n,ss):v(t[82]),ls),t[25]?D?(D.p(t,n),33554432&n[0]&&Et(D,1)):(D=Os(t),D.c(),Et(D,1),D.m(c,u)):D&&(kt(),Ct(D,1,1,(()=>{D=null})),St()),U(d,z=Tt(F,[(!C||131072&n[0]&&f!==(f=!t[17]))&&{readOnly:f},134217728&n[0]&&t[27],(!C||4&n[1])&&{placeholder:t[33]},(!C||262144&n[0])&&{style:t[18]},(!C||2048&n[0])&&{disabled:t[11]}])),16&n[0]&&d.value!==t[4]&&H(d,t[4]),B(d,"svelte-82qwg8",!0),t[5]?W?(W.p(t,n),32&n[0]&&Et(W,1)):(W=Rs(t),W.c(),Et(W,1),W.m(b,w)):W&&(kt(),Ct(W,1,1,(()=>{W=null})),St()),t[34]?J?(J.p(t,n),8&n[1]&&Et(J,1)):(J=Ts(t),J.c(),Et(J,1),J.m(b,y)):J&&(kt(),Ct(J,1,1,(()=>{J=null})),St()),t[20]?X?(X.p(t,n),1048576&n[0]&&Et(X,1)):(X=As(t),X.c(),Et(X,1),X.m(b,null)):X&&(kt(),Ct(X,1,1,(()=>{X=null})),St()),Z?Z.p&&(!C||8&n[0]|1048576&n[2])&&h(Z,G,t,t[82],C?g(G,t[82],n,Bo):v(t[82]),Wo):Y&&Y.p&&(!C||264&n[0])&&Y.p(t,C?n:[-1,-1,-1,-1,-1]),!t[16]||t[3]&&0!==t[3].length?Q&&(kt(),Ct(Q,1,1,(()=>{Q=null})),St()):Q?(Q.p(t,n),65544&n[0]&&Et(Q,1)):(Q=Vs(t),Q.c(),Et(Q,1),Q.m(e,null)),(!C||2097152&n[0]&&S!==(S="svelte-select "+t[21]+" svelte-82qwg8"))&&_(e,"class",S),(!C||16384&n[0])&&_(e,"style",t[14]),(!C||2097664&n[0])&&B(e,"multi",t[9]),(!C||2099200&n[0])&&B(e,"disabled",t[11]),(!C||2097156&n[0])&&B(e,"focused",t[2]),(!C||2097216&n[0])&&B(e,"list-open",t[6]),(!C||3145728&n[0])&&B(e,"show-chevron",t[20]),(!C||2129920&n[0])&&B(e,"error",t[15])},i(t){C||(Et(R),Et(q,t),Et(D),Et(W),Et(J),Et(X),Et(Y,t),Et(Q),C=!0)},o(t){Ct(R),Ct(q,t),Ct(D),Ct(W),Ct(J),Ct(X),Ct(Y,t),Ct(Q),C=!1},d(n){n&&L(e),R&&R.d(),T&&T.d(),q&&q.d(n),D&&D.d(),t[94](null),W&&W.d(),J&&J.d(),X&&X.d(),Y&&Y.d(n),Q&&Q.d(),t[96](null),O=!1,o(I)}}}function js(t){return t.map(((t,e)=>({index:e,value:t,label:`${t}`})))}function qs(t,e,n){let r,i,o,s,l,a,c,u,d,{$$slots:f={},$$scope:p}=e;const m=function(t){const e={};for(const n in t)e[n]=!0;return e}(f),g=rt();let{justValue:h=null}=e,{filter:v=Vo}=e,{getItems:$=Mo}=e,{id:b=null}=e,{name:w=null}=e,{container:y}=e,{input:x}=e,{multiple:k=!1}=e,{multiFullItemClearable:S=!1}=e,{disabled:E=!1}=e,{focused:C=!1}=e,{value:O=null}=e,{filterText:P=""}=e,{placeholder:L="Please select"}=e,{placeholderAlwaysShow:I=!1}=e,{items:N=null}=e,{label:R="label"}=e,{itemFilter:T=((t,e,n)=>`${t}`.toLowerCase().includes(e.toLowerCase()))}=e,{groupBy:A}=e,{groupFilter:V=(t=>t)}=e,{groupHeaderSelectable:M=!1}=e,{itemId:j="value"}=e,{loadOptions:q}=e,{containerStyles:_=""}=e,{hasError:D=!1}=e,{filterSelectedItems:U=!0}=e,{required:F=!1}=e,{closeListOnChange:H=!0}=e,{clearFilterTextOnBlur:z=!0}=e,{createGroupHeaderItem:B=((t,e)=>({value:t,[R]:t}))}=e;let W,J,X,G,Z,Y,{searchable:Q=!0}=e,{inputStyles:K=""}=e,{clearable:it=!0}=e,{loading:ot=!1}=e,{listOpen:lt=!1}=e,{debounce:ct=((t,e=1)=>{clearTimeout(W),W=setTimeout(t,e)})}=e,{debounceWait:ut=300}=e,{hideEmptyState:dt=!1}=e,{inputAttributes:ft={}}=e,{listAutoWidth:pt=!0}=e,{showChevron:mt=!1}=e,{listOffset:gt=5}=e,{hoverItemIndex:ht=0}=e,{floatingConfig:vt={}}=e,{class:$t=""}=e;function bt(t){const e=[],n={};t.forEach((t=>{const r=A(t);e.includes(r)||(e.push(r),n[r]=[],r&&n[r].push(Object.assign(B(r,t),{id:r,groupHeader:!0,selectable:M}))),n[r].push(Object.assign({groupItem:!!r},t))}));const r=[];return V(e).forEach((t=>{n[t]&&r.push(...n[t])})),r}function wt(t=0,e){n(7,ht=t<0?0:t),!e&&A&&c[ht]&&!c[ht].selectable&&qt(1)}var yt;function xt(){let t=!0;if(O){const e=[],r=[];O.forEach((n=>{e.includes(n[j])?t=!1:(e.push(n[j]),r.push(n))})),t||n(3,O=r)}return t}function kt(t){let e=t?t[j]:O[j];return N.find((t=>t[j]===e))}async function St(t){const e=O[t];1===O.length?n(3,O=void 0):n(3,O=O.filter((t=>t!==e))),g("clear",e)}function Et(t){C&&x===document?.activeElement||(t&&g("focus",t),x?.focus(),n(2,C=!0))}async function Ct(t){At||(lt||C)&&(g("blur",t),Ot(),n(2,C=!1),n(26,J=void 0),x?.blur())}function Ot(){z&&n(4,P=""),n(6,lt=!1)}yt=async()=>{n(78,X=O),n(79,G=P),n(80,Z=k)},tt().$$.before_update.push(yt),et((()=>{lt&&n(2,C=!0),C&&x&&x.focus()}));let{ariaValues:Pt=(t=>`Option ${t}, selected.`)}=e,{ariaListOpen:Lt=((t,e)=>`You are currently focused on option ${t}. There are ${e} results available.`)}=e,{ariaFocused:It=(()=>"Select is focused, type to refine list, press down to open the menu.")}=e;let Nt,Rt=null;function Tt(){clearTimeout(Nt),Nt=setTimeout((()=>{At=!1}),100)}nt((()=>{Rt?.remove()}));let At=!1;function Vt(t){t&&!1!==t.selectable&&function(t){if(t){n(4,P="");const e=Object.assign({},t);if(e.groupHeader&&!e.selectable)return;n(3,O=k?O?O.concat([e]):[e]:n(3,O=e)),setTimeout((()=>{H&&Ot(),n(26,J=void 0),g("change",O),g("select",t)}))}}(t)}function Mt(t){At||n(7,ht=t)}function jt(t){const{item:e,i:r}=t;if(!1!==e?.selectable)return O&&!k&&O[j]===e[j]?Ot():void(function(t){return t.groupHeader&&t.selectable||t.selectable||!t.hasOwnProperty("selectable")}(e)&&(n(7,ht=r),Vt(e)))}function qt(t){if(0===c.filter((t=>!Object.hasOwn(t,"selectable")||!0===t.selectable)).length)return n(7,ht=0);t>0&&ht===c.length-1?n(7,ht=0):n(7,t<0&&0===ht?ht=c.length-1:ht+=t);const e=c[ht];e&&!1===e.selectable&&(1!==t&&-1!==t||qt(t))}const _t=Ut,Dt=Ut;function Ut(t){return{update(e){e.scroll&&(Tt(),t.scrollIntoView({behavior:"auto",block:"nearest"}))}}}let Ft={strategy:"absolute",placement:"bottom-start",middleware:[Io(gt),Ro(),No()],autoUpdate:!1};const[Ht,zt,Bt]=Ao(Ft);let Wt=!0;return t.$$set=t=>{"justValue"in t&&n(52,h=t.justValue),"filter"in t&&n(53,v=t.filter),"getItems"in t&&n(54,$=t.getItems),"id"in t&&n(55,b=t.id),"name"in t&&n(8,w=t.name),"container"in t&&n(0,y=t.container),"input"in t&&n(1,x=t.input),"multiple"in t&&n(9,k=t.multiple),"multiFullItemClearable"in t&&n(10,S=t.multiFullItemClearable),"disabled"in t&&n(11,E=t.disabled),"focused"in t&&n(2,C=t.focused),"value"in t&&n(3,O=t.value),"filterText"in t&&n(4,P=t.filterText),"placeholder"in t&&n(56,L=t.placeholder),"placeholderAlwaysShow"in t&&n(57,I=t.placeholderAlwaysShow),"items"in t&&n(51,N=t.items),"label"in t&&n(12,R=t.label),"itemFilter"in t&&n(58,T=t.itemFilter),"groupBy"in t&&n(59,A=t.groupBy),"groupFilter"in t&&n(60,V=t.groupFilter),"groupHeaderSelectable"in t&&n(61,M=t.groupHeaderSelectable),"itemId"in t&&n(13,j=t.itemId),"loadOptions"in t&&n(62,q=t.loadOptions),"containerStyles"in t&&n(14,_=t.containerStyles),"hasError"in t&&n(15,D=t.hasError),"filterSelectedItems"in t&&n(63,U=t.filterSelectedItems),"required"in t&&n(16,F=t.required),"closeListOnChange"in t&&n(64,H=t.closeListOnChange),"clearFilterTextOnBlur"in t&&n(65,z=t.clearFilterTextOnBlur),"createGroupHeaderItem"in t&&n(66,B=t.createGroupHeaderItem),"searchable"in t&&n(17,Q=t.searchable),"inputStyles"in t&&n(18,K=t.inputStyles),"clearable"in t&&n(68,it=t.clearable),"loading"in t&&n(5,ot=t.loading),"listOpen"in t&&n(6,lt=t.listOpen),"debounce"in t&&n(69,ct=t.debounce),"debounceWait"in t&&n(70,ut=t.debounceWait),"hideEmptyState"in t&&n(19,dt=t.hideEmptyState),"inputAttributes"in t&&n(71,ft=t.inputAttributes),"listAutoWidth"in t&&n(72,pt=t.listAutoWidth),"showChevron"in t&&n(20,mt=t.showChevron),"listOffset"in t&&n(73,gt=t.listOffset),"hoverItemIndex"in t&&n(7,ht=t.hoverItemIndex),"floatingConfig"in t&&n(74,vt=t.floatingConfig),"class"in t&&n(21,$t=t.class),"ariaValues"in t&&n(75,Pt=t.ariaValues),"ariaListOpen"in t&&n(76,Lt=t.ariaListOpen),"ariaFocused"in t&&n(77,It=t.ariaFocused),"$$scope"in t&&n(82,p=t.$$scope)},t.$$.update=()=>{8&t.$$.dirty[0]|1048576&t.$$.dirty[1]&&O&&function(){if("string"==typeof O){let t=(N||[]).find((t=>t[j]===O));n(3,O=t||{[j]:O,label:O})}else k&&Array.isArray(O)&&O.length>0&&n(3,O=O.map((t=>"string"==typeof t?{value:t,label:t}:t)))}(),131072&t.$$.dirty[0]|512&t.$$.dirty[2]&&(!ft&&Q||(n(27,Y=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ft)),b&&n(27,Y.id=b,Y),Q||n(27,Y.readonly=!0,Y))),512&t.$$.dirty[0]&&k&&O&&(Array.isArray(O)?n(3,O=[...O]):n(3,O=[O])),512&t.$$.dirty[0]|262144&t.$$.dirty[2]&&Z&&!k&&O&&n(3,O=null),520&t.$$.dirty[0]&&k&&O&&O.length>1&&xt(),8&t.$$.dirty[0]&&O&&(k?JSON.stringify(O)!==JSON.stringify(X)&&xt()&&g("input",O):X&&JSON.stringify(O[j])===JSON.stringify(X[j])||g("input",O)),520&t.$$.dirty[0]|65536&t.$$.dirty[2]&&!O&&k&&X&&g("input",O),6&t.$$.dirty[0]&&!C&&x&&Ot(),16&t.$$.dirty[0]|131072&t.$$.dirty[2]&&P!==G&&(q||0!==P.length)&&(q?ct((async function(){n(5,ot=!0);let t=await $({dispatch:g,loadOptions:q,convertStringItemsToObjects:js,filterText:P});t?(n(5,ot=t.loading),n(6,lt=lt?t.listOpen:P.length>0),n(2,C=lt&&t.focused),n(51,N=A?bt(t.filteredItems):t.filteredItems)):(n(5,ot=!1),n(2,C=!0),n(6,lt=!0))}),ut):(n(6,lt=!0),k&&n(26,J=void 0))),12824&t.$$.dirty[0]|407896064&t.$$.dirty[1]|3&t.$$.dirty[2]&&n(24,c=v({loadOptions:q,filterText:P,items:N,multiple:k,value:O,itemId:j,groupBy:A,label:R,filterSelectedItems:U,itemFilter:T,convertStringItemsToObjects:js,filterGroupedItems:bt})),16777800&t.$$.dirty[0]&&!k&&lt&&O&&c&&wt(c.findIndex((t=>t[j]===O[j])),!0),576&t.$$.dirty[0]&&lt&&k&&n(7,ht=0),16&t.$$.dirty[0]&&P&&n(7,ht=0),128&t.$$.dirty[0]&&g("hoverItem",ht),520&t.$$.dirty[0]&&n(25,r=k?O&&O.length>0:O),33554448&t.$$.dirty[0]&&n(35,i=r&&P.length>0),33556512&t.$$.dirty[0]|64&t.$$.dirty[2]&&n(34,o=r&&it&&!E&&!ot),520&t.$$.dirty[0]|100663296&t.$$.dirty[1]&&n(33,s=I&&k||k&&0===O?.length?L:O?"":L),520&t.$$.dirty[0]&&n(32,l=O?function(t){let e;return e=t&&O.length>0?O.map((t=>t[R])).join(", "):O[R],Pt(e)}(k):""),16777412&t.$$.dirty[0]&&n(31,a=function(){if(!c||0===c.length)return"";let t=c[ht];if(lt&&t){let e=c?c.length:0;return Lt(t[R],e)}return It()}()),1048576&t.$$.dirty[1]&&function(t){t&&0!==t.length&&!t.some((t=>"object"!=typeof t))&&O&&(k?!O.some((t=>!t||!t[j])):O[j])&&(Array.isArray(O)?n(3,O=O.map((t=>kt(t)||t))):n(3,O=kt()||O))}(N),8712&t.$$.dirty[0]&&n(52,h=k?O?O.map((t=>t[j])):null:O?O[j]:O),520&t.$$.dirty[0]|65536&t.$$.dirty[2]&&(k||!X||O||g("input",O)),16777800&t.$$.dirty[0]&&lt&&c&&!k&&!O&&wt(),16777216&t.$$.dirty[0]&&function(t){lt&&g("filter",t)}(c),1&t.$$.dirty[0]|4096&t.$$.dirty[2]&&y&&void 0===vt?.autoUpdate&&n(81,Ft.autoUpdate=!0,Ft),1&t.$$.dirty[0]|528384&t.$$.dirty[2]&&y&&vt&&Bt(Object.assign(Ft,vt)),8388608&t.$$.dirty[0]&&n(30,u=!!Rt),8388672&t.$$.dirty[0]&&function(t,e){if(!t||!e)return n(28,Wt=!0);setTimeout((()=>{n(28,Wt=!1)}),0)}(Rt,lt),8388673&t.$$.dirty[0]&&lt&&y&&Rt&&function(){const{width:t}=y.getBoundingClientRect();n(23,Rt.style.width=pt?t+"px":"auto",Rt)}(),128&t.$$.dirty[0]&&n(29,d=ht),70&t.$$.dirty[0]&&x&&lt&&!C&&Et()},[y,x,C,O,P,ot,lt,ht,w,k,S,E,R,j,_,D,F,Q,K,dt,mt,$t,function(){g("clear",O),n(3,O=void 0),Ot(),Et()},Rt,c,r,J,Y,Wt,d,u,a,l,s,o,i,St,function(t){if(C)switch(t.stopPropagation(),t.key){case"Escape":t.preventDefault(),Ot();break;case"Enter":if(t.preventDefault(),lt){if(0===c.length)break;const t=c[ht];if(O&&!k&&O[j]===t[j]){Ot();break}Vt(c[ht])}break;case"ArrowDown":t.preventDefault(),lt?qt(1):(n(6,lt=!0),n(26,J=void 0));break;case"ArrowUp":t.preventDefault(),lt?qt(-1):(n(6,lt=!0),n(26,J=void 0));break;case"Tab":if(lt&&C){if(0===c.length||O&&O[j]===c[ht][j])return Ot();t.preventDefault(),Vt(c[ht]),Ot()}break;case"Backspace":if(!k||P.length>0)return;if(k&&O&&O.length>0){if(St(void 0!==J?J:O.length-1),0===J||void 0===J)break;n(26,J=O.length>J?J-1:void 0)}break;case"ArrowLeft":if(!O||!k||P.length>0)return;void 0===J?n(26,J=O.length-1):O.length>J&&0!==J&&n(26,J-=1);break;case"ArrowRight":if(!O||!k||P.length>0||void 0===J)return;J===O.length-1?n(26,J=void 0):J<O.length-1&&n(26,J+=1)}},Et,Ct,function(){if(!E)return P.length>0?n(6,lt=!0):void n(6,lt=!lt)},Tt,function(t){lt||C||!y||y.contains(t.target)||Rt?.contains(t.target)||Ct()},Mt,jt,function(t,e,n){if(!k)return e&&e[n]===t[n]},_t,Dt,Ht,zt,m,N,h,v,$,b,L,I,T,A,V,M,q,U,H,z,B,()=>c,it,ct,ut,ft,pt,gt,vt,Pt,Lt,It,X,G,Z,Ft,p,f,function(e){st.call(this,t,e)},function(e){st.call(this,t,e)},function(e){st.call(this,t,e)},function(e){st.call(this,t,e)},t=>Mt(t),t=>Mt(t),(t,e)=>jt({item:t,i:e}),function(t){at[t?"unshift":"push"]((()=>{Rt=t,n(23,Rt)}))},t=>St(t),t=>S?St(t):{},function(t){at[t?"unshift":"push"]((()=>{x=t,n(1,x)}))},function(){P=this.value,n(4,P)},function(t){at[t?"unshift":"push"]((()=>{y=t,n(0,y)}))}]}class _s extends qt{constructor(t){super(),jt(this,t,qs,Ms,l,{justValue:52,filter:53,getItems:54,id:55,name:8,container:0,input:1,multiple:9,multiFullItemClearable:10,disabled:11,focused:2,value:3,filterText:4,placeholder:56,placeholderAlwaysShow:57,items:51,label:12,itemFilter:58,groupBy:59,groupFilter:60,groupHeaderSelectable:61,itemId:13,loadOptions:62,containerStyles:14,hasError:15,filterSelectedItems:63,required:16,closeListOnChange:64,clearFilterTextOnBlur:65,createGroupHeaderItem:66,getFilteredItems:67,searchable:17,inputStyles:18,clearable:68,loading:5,listOpen:6,debounce:69,debounceWait:70,hideEmptyState:19,inputAttributes:71,listAutoWidth:72,showChevron:20,listOffset:73,hoverItemIndex:7,floatingConfig:74,class:21,handleClear:22,ariaValues:75,ariaListOpen:76,ariaFocused:77},null,[-1,-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[67]}get handleClear(){return this.$$.ctx[22]}}function Ds(t){let e,r,i;const o=[{placeholder:t[0]},{items:t[1]},{searchable:t[3]},{multiple:t[2]},{closeListOnChange:t[4]},t[5]()];let s={};for(let t=0;t<o.length;t+=1)s=n(s,o[t]);return r=new _s({props:s}),{c(){e=N("div"),At(r.$$.fragment)},m(t,n){P(t,e,n),Vt(r,e,null),i=!0},p(t,[e]){const n=63&e?Tt(o,[1&e&&{placeholder:t[0]},2&e&&{items:t[1]},8&e&&{searchable:t[3]},4&e&&{multiple:t[2]},16&e&&{closeListOnChange:t[4]},32&e&&(i=t[5](),"object"==typeof i&&null!==i?i:{})]):{};var i;r.$set(n)},i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(e),Mt(r)}}}function Us(t,e,n){let{placeholder:r=("fr"===Bt?"Sélectionner une valeur":"Select a value")}=e,{items:i}=e,{multiple:o=!1}=e,{searchable:s=!0}=e,{name:l}=e,{closeListOnChange:a=!0}=e;return t.$$set=t=>{"placeholder"in t&&n(0,r=t.placeholder),"items"in t&&n(1,i=t.items),"multiple"in t&&n(2,o=t.multiple),"searchable"in t&&n(3,s=t.searchable),"name"in t&&n(6,l=t.name),"closeListOnChange"in t&&n(4,a=t.closeListOnChange)},[r,i,o,s,a,function(){let t;return o&&(t.groupBy=t=>t.group),l&&(t.name=l),t},l]}class Fs extends qt{constructor(t){super(),jt(this,t,Us,Ds,l,{placeholder:0,items:1,multiple:2,searchable:3,name:6,closeListOnChange:4})}}function Hs(t){let e,n,r,i,o,s,l,a,c,u,d,f,p,m,g,h;return r=new Fs({props:{items:t[0]}}),f=new xi({props:{minVal:t[3][0],maxVal:t[3][1],step:1}}),f.$on("updateRange",t[4]),g=new Ei({props:{checkboxLabel:"Filter by region"}}),g.$on("updateChecked",t[5]),{c(){e=N("div"),n=N("div"),At(r.$$.fragment),i=A(),o=N("div"),s=N("span"),s.innerHTML="<b>Propagation</b>",l=A(),a=N("div"),c=N("div"),u=N("span"),u.textContent=""+("fr"===Bt?"Profondeur de récursion":"Recursion depth"),d=A(),At(f.$$.fragment),p=A(),m=N("div"),At(g.$$.fragment),_(c,"class","depth column is-two-thirds svelte-1q6id9t"),_(m,"class","region column svelte-1q6id9t"),_(a,"class","columns is-flex is-vcentered propagation-ctrl-inputs svelte-1q6id9t"),_(o,"class","propagation-ctrl")},m(t,v){P(t,e,v),E(e,n),Vt(r,n,null),E(e,i),E(e,o),E(o,s),E(o,l),E(o,a),E(a,c),E(c,u),E(c,d),Vt(f,c,null),E(a,p),E(a,m),Vt(g,m,null),h=!0},p(t,[e]){const n={};1&e&&(n.items=t[0]),r.$set(n)},i(t){h||(Et(r.$$.fragment,t),Et(f.$$.fragment,t),Et(g.$$.fragment,t),h=!0)},o(t){Ct(r.$$.fragment,t),Ct(f.$$.fragment,t),Ct(g.$$.fragment,t),h=!1},d(t){t&&L(e),Mt(r),Mt(f),Mt(g)}}}function zs(t,e,n){let r,i,o;const s=Ye.toolbarParams;f(t,s,(t=>n(6,i=t)));const l=Ye.propagateParams;f(t,l,(t=>n(7,o=t)));const a=Ye.allowedPropagateDepthRange;return n(0,r=[{value:1,label:vn,iconSvg:fn},{value:2,label:$n,iconSvg:pn},{value:3,label:bn,iconSvg:mn},{value:4,label:wn,iconSvg:gn},{value:5,label:yn,iconSvg:hn}]),[r,s,l,a,t=>{l.set({recursionDepth:t.detail,filterByRegion:o.filterByRegion}),console.log("setRecursionDepth :: $propagateParams",o),console.log("setRecursionDepth :: $toolbarParams",i)},t=>{l.set({recursionDepth:o.recursionDepth,filterByRegion:t.detail}),console.log("setFilterByRegion :: $propagateParams",o),console.log("setFilterByRegion :: $toolbarParams",i)}]}class Bs extends qt{constructor(t){super(),jt(this,t,zs,Hs,l,{})}}function Ws(e){let n,r,i,o;return n=new gr({}),i=new cr({}),{c(){At(n.$$.fragment),r=A(),At(i.$$.fragment)},m(t,e){Vt(n,t,e),P(t,r,e),Vt(i,t,e),o=!0},p:t,i(t){o||(Et(n.$$.fragment,t),Et(i.$$.fragment,t),o=!0)},o(t){Ct(n.$$.fragment,t),Ct(i.$$.fragment,t),o=!1},d(t){Mt(n,t),t&&L(r),Mt(i,t)}}}function Js(t){let e,n;return e=new tn({props:{$$slots:{default:[Ys]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},p(t,n){const r={};10&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}function Xs(t){let e,n;return e=new tn({props:{$$slots:{default:[Qs]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},p(t,n){const r={};8&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}function Gs(t){let e,n;return{c(){e=T("Erreur lors de la récupération des similarités : "),n=T(t[1])},m(t,r){P(t,e,r),P(t,n,r)},p(t,e){2&e&&F(n,t[1])},d(t){t&&L(e),t&&L(n)}}}function Zs(t){let e,n;return{c(){e=T("Error when retrieving similarities: "),n=T(t[1])},m(t,r){P(t,e,r),P(t,n,r)},p(t,e){2&e&&F(n,t[1])},d(t){t&&L(e),t&&L(n)}}}function Ys(t){let e;let n=("en"===Bt?Zs:Gs)(t);return{c(){e=N("tr"),n.c(),_(e,"class","faded is-center")},m(t,r){P(t,e,r),n.m(e,null)},p(t,e){n.p(t,e)},d(t){t&&L(e),n.d()}}}function Qs(e){let n;return{c(){n=N("tr"),n.textContent=""+("en"===Bt?"Retrieving similarities...":"Récupération des similarités..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function Ks(t){let e,n,r=Gt.includes("similarity"),i=r&&function(t){let e,n,r,i,o,s,l,a;e=new Bs({}),r=new kr({});const c=[Xs,Js,Ws],u=[];function d(t,e){return t[0]?0:t[1]?1:2}return o=d(t),s=u[o]=c[o](t),{c(){At(e.$$.fragment),n=A(),At(r.$$.fragment),i=A(),s.c(),l=V()},m(t,s){Vt(e,t,s),P(t,n,s),Vt(r,t,s),P(t,i,s),u[o].m(t,s),P(t,l,s),a=!0},p(t,e){let n=o;o=d(t),o===n?u[o].p(t,e):(kt(),Ct(u[n],1,1,(()=>{u[n]=null})),St(),s=u[o],s?s.p(t,e):(s=u[o]=c[o](t),s.c()),Et(s,1),s.m(l.parentNode,l))},i(t){a||(Et(e.$$.fragment,t),Et(r.$$.fragment,t),Et(s),a=!0)},o(t){Ct(e.$$.fragment,t),Ct(r.$$.fragment,t),Ct(s),a=!1},d(t){Mt(e,t),t&&L(n),Mt(r,t),t&&L(i),u[o].d(t),t&&L(l)}}}(t);return{c(){i&&i.c(),e=V()},m(t,r){i&&i.m(t,r),P(t,e,r),n=!0},p(t,[e]){r&&i.p(t,e)},i(t){n||(Et(i),n=!0)},o(t){Ct(i),n=!1},d(t){i&&i.d(t),t&&L(e)}}}function tl(t,e,n){let r,i;f(t,ee,(t=>n(0,r=t))),f(t,ne,(t=>n(1,i=t)));const{fetchSimilarity:o}=Ye;return et((()=>{Gt.includes("similarity")&&o()})),[r,i]}class el extends qt{constructor(t){super(),jt(this,t,tl,Ks,l,{})}}function nl(t){let e,n,r,i,o,s,l,a,u,d,f,m,$,b,w,y,x,k;const S=t[4].default,C=p(S,t,t[3],null);return{c(){e=N("tr"),n=N("th"),r=N("div"),i=N("img"),l=A(),a=N("div"),u=N("a"),d=N("i"),f=T("\n                    Page "),m=T(t[0]),b=A(),w=N("td"),y=N("div"),x=N("div"),C&&C.c(),c(i.src,o=le(t[1],"full","250,"))||_(i,"src",o),_(i,"alt",s="Canvas "+t[0]),_(i,"class","mb-3 card"),_(d,"class","fa-solid fa-pen-to-square"),_(u,"class","tag px-2 py-1 is-rounded is-hoverable"),_(u,"href",$=ae(t[2],t[0])),_(u,"target","_blank"),_(a,"class","is-center mb-1"),_(r,"class","content-wrapper py-5"),_(n,"class","is-3 center-flex is-narrow"),z(n,"width","260px"),_(x,"class","grid is-gap-2"),_(y,"class","fixed-grid has-6-cols"),_(w,"class","p-5 is-fullwidth")},m(t,o){P(t,e,o),E(e,n),E(n,r),E(r,i),E(r,l),E(r,a),E(a,u),E(u,d),E(u,f),E(u,m),E(e,b),E(e,w),E(w,y),E(y,x),C&&C.m(x,null),k=!0},p(t,[e]){(!k||2&e&&!c(i.src,o=le(t[1],"full","250,")))&&_(i,"src",o),(!k||1&e&&s!==(s="Canvas "+t[0]))&&_(i,"alt",s),(!k||1&e)&&F(m,t[0]),(!k||1&e&&$!==($=ae(t[2],t[0])))&&_(u,"href",$),C&&C.p&&(!k||8&e)&&h(C,S,t,t[3],k?g(S,t[3],e,null):v(t[3]),null)},i(t){k||(Et(C,t),k=!0)},o(t){Ct(C,t),k=!1},d(t){t&&L(e),C&&C.d(t)}}}function rl(t,e,n){let{$$slots:r={},$$scope:i}=e,{canvasNb:o}=e,{canvasImg:s}=e;const l=ot("manifest");return t.$$set=t=>{"canvasNb"in t&&n(0,o=t.canvasNb),"canvasImg"in t&&n(1,s=t.canvasImg),"$$scope"in t&&n(3,i=t.$$scope)},[o,s,l,i,r]}class il extends qt{constructor(t){super(),jt(this,t,rl,nl,l,{canvasNb:0,canvasImg:1})}}function ol(t,e,n){const r=t.slice();return r[9]=e[n][0],r[10]=e[n][1],r}function sl(t,e,n){const r=t.slice();return r[13]=e[n],r}function ll(e){let n,r,i="en"===Bt?`Error when retrieving paginated regions: ${e[16]}`:`Erreur de récupération des pages : ${e[16]}`;return{c(){n=N("tr"),r=T(i),_(n,"class","faded is-center")},m(t,e){P(t,n,e),E(n,r)},p(t,e){1&e&&i!==(i="en"===Bt?`Error when retrieving paginated regions: ${t[16]}`:`Erreur de récupération des pages : ${t[16]}`)&&F(r,i)},i:t,o:t,d(t){t&&L(n)}}}function al(t){let e,n,r,i,o;const s=[ul,cl],l=[];function a(t,n){return 2&n&&(e=null),null==e&&(e=!!(Object.values(t[1]).length>0)),e?0:1}return n=a(t,-1),r=l[n]=s[n](t),{c(){r.c(),i=V()},m(t,e){l[n].m(t,e),P(t,i,e),o=!0},p(t,e){let o=n;n=a(t,e),n===o?l[n].p(t,e):(kt(),Ct(l[o],1,1,(()=>{l[o]=null})),St(),r=l[n],r?r.p(t,e):(r=l[n]=s[n](t),r.c()),Et(r,1),r.m(i.parentNode,i))},i(t){o||(Et(r),o=!0)},o(t){Ct(r),o=!1},d(t){l[n].d(t),t&&L(i)}}}function cl(e){let n,r,i;return r=new Re({}),{c(){n=N("tr"),At(r.$$.fragment)},m(t,e){P(t,n,e),Vt(r,n,null),i=!0},p:t,i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(n),Mt(r)}}}function ul(t){let e,n,r=Object.entries(t[1]),i=[];for(let e=0;e<r.length;e+=1)i[e]=pl(ol(t,r,e));const o=t=>Ct(i[t],1,1,(()=>{i[t]=null}));return{c(){for(let t=0;t<i.length;t+=1)i[t].c();e=V()},m(t,r){for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(t,r);P(t,e,r),n=!0},p(t,n){if(34&n){let s;for(r=Object.entries(t[1]),s=0;s<r.length;s+=1){const o=ol(t,r,s);i[s]?(i[s].p(o,n),Et(i[s],1)):(i[s]=pl(o),i[s].c(),Et(i[s],1),i[s].m(e.parentNode,e))}for(kt(),s=r.length;s<i.length;s+=1)o(s);St()}},i(t){if(!n){for(let t=0;t<r.length;t+=1)Et(i[t]);n=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)Ct(i[t]);n=!1},d(t){I(i,t),t&&L(e)}}}function dl(t,e){let n,r,i;return r=new Se({props:{item:e[13],isSquare:!1}}),{key:t,first:null,c(){n=V(),At(r.$$.fragment),this.first=n},m(t,e){P(t,n,e),Vt(r,t,e),i=!0},p(t,n){e=t;const i={};2&n&&(i.item=e[13]),r.$set(i)},i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(n),Mt(r,t)}}}function fl(t){let e,n,r=[],i=new Map,o=Object.values(t[10]);const s=t=>t[13].id;for(let e=0;e<o.length;e+=1){let n=sl(t,o,e),l=s(n);i.set(l,r[e]=dl(l,n))}return{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=A()},m(t,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,i);P(t,e,i),n=!0},p(t,n){2&n&&(o=Object.values(t[10]),kt(),r=Rt(r,n,s,1,t,o,i,e.parentNode,Nt,dl,e,sl),St())},i(t){if(!n){for(let t=0;t<o.length;t+=1)Et(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Ct(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&L(e)}}}function pl(t){let e,n;return e=new il({props:{canvasImg:t[5](t[9]),canvasNb:t[9],$$slots:{default:[fl]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment)},m(t,r){Vt(e,t,r),n=!0},p(t,n){const r={};2&n&&(r.canvasImg=t[5](t[9])),2&n&&(r.canvasNb=t[9]),131074&n&&(r.$$scope={dirty:n,ctx:t}),e.$set(r)},i(t){n||(Et(e.$$.fragment,t),n=!0)},o(t){Ct(e.$$.fragment,t),n=!1},d(t){Mt(e,t)}}}function ml(e){let n;return{c(){n=N("tr"),n.textContent=""+("en"===Bt?"Retrieving paginated regions...":"Récupération des pages..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function gl(t){let e,n,r,i={ctx:t,current:null,token:null,hasCatch:!0,pending:ml,then:al,catch:ll,value:8,error:16,blocks:[,,,]};return Lt(n=t[0],i),{c(){e=V(),i.block.c()},m(t,n){P(t,e,n),i.block.m(t,i.anchor=n),i.mount=()=>e.parentNode,i.anchor=e,r=!0},p(e,r){t=e,i.ctx=t,1&r&&n!==(n=t[0])&&Lt(n,i)||It(i,t,r)},i(t){r||(Et(i.block),r=!0)},o(t){for(let t=0;t<3;t+=1){Ct(i.blocks[t])}r=!1},d(t){t&&L(e),i.block.d(t),i.token=null,i=null}}}function hl(t){let e,n,r,i,o,s;return e=new dn({props:{store:fe,nbOfItems:t[4]}}),r=new tn({props:{$$slots:{default:[gl]},$$scope:{ctx:t}}}),o=new dn({props:{store:fe,nbOfItems:t[4]}}),{c(){At(e.$$.fragment),n=A(),At(r.$$.fragment),i=A(),At(o.$$.fragment)},m(t,l){Vt(e,t,l),P(t,n,l),Vt(r,t,l),P(t,i,l),Vt(o,t,l),s=!0},p(t,[e]){const n={};131075&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){s||(Et(e.$$.fragment,t),Et(r.$$.fragment,t),Et(o.$$.fragment,t),s=!0)},o(t){Ct(e.$$.fragment,t),Ct(r.$$.fragment,t),Ct(o.$$.fragment,t),s=!1},d(t){Mt(e,t),t&&L(n),Mt(r,t),t&&L(i),Mt(o,t)}}}function vl(t,e,n){let r,i;const{pageRegions:o,fetchPages:s}=fe;f(t,o,(t=>n(1,i=t))),f(t,s,(t=>n(0,r=t)));const l=ot("nbOfPages"),a=ot("trailingZeros");return[r,i,o,s,l,function(t){return`${imgPrefix}_${e=t,n=a,e.toString().padStart(n,"0")}`;var e,n}]}class $l extends qt{constructor(t){super(),jt(this,t,vl,hl,l,{})}}function bl(e){let n,r,i,o,s,l,a,c="en"===Bt?"Save selection":"Sauvegarder la sélection";return{c(){n=N("button"),r=N("span"),i=N("i"),o=A(),s=T(c),_(i,"class","fa-solid fa-floppy-disk"),_(n,"class","button is-link")},m(t,c){P(t,n,c),E(n,r),E(r,i),E(r,o),E(r,s),l||(a=M(n,"click",e[6]),l=!0)},p:t,d(t){t&&L(n),l=!1,a()}}}function wl(t){let e,n,r,i,o,s,l="en"===Bt?"Go to treatment":"Accéder au traitement";return{c(){e=N("a"),n=N("span"),r=N("i"),i=A(),o=T(l),_(r,"class","fa-solid fa-gear"),_(e,"class","button is-link"),_(e,"href",s="/"+Wt+"/treatment/add/?document_set="+t[2](t[0]).id)},m(t,s){P(t,e,s),E(e,n),E(n,r),E(n,i),E(n,o)},p(t,n){5&n&&s!==(s="/"+Wt+"/treatment/add/?document_set="+t[2](t[0]).id)&&_(e,"href",s)},d(t){t&&L(e)}}}function yl(e){let n,r,i,o,s,l;function a(t,e){return t[1]?wl:bl}let c=a(e),u=c(e);return{c(){n=N("footer"),r=N("div"),i=N("button"),i.textContent=""+("en"===Bt?"Clear selection":"Vider la sélection"),o=A(),u.c(),_(i,"class","button button-close is-link is-light"),_(r,"class","buttons"),_(n,"class","modal-card-foot is-center")},m(t,a){P(t,n,a),E(n,r),E(r,i),E(r,o),u.m(r,null),s||(l=M(i,"click",e[5]),s=!0)},p(t,[e]){c===(c=a(t))&&u?u.p(t,e):(u.d(1),u=c(t),u&&(u.c(),u.m(r,null)))},i:t,o:t,d(t){t&&L(n),u.d(),s=!1,l()}}}function xl(t,e,n){let r,i;const{isSaved:o,selection:s}=de;f(t,o,(t=>n(1,r=t))),f(t,s,(t=>n(2,i=t)));let{isRegion:l=!0}=e;return t.$$set=t=>{"isRegion"in t&&n(0,l=t.isRegion)},[l,r,i,o,s,()=>de.empty(l),()=>de.save(l)]}class kl extends qt{constructor(t){super(),jt(this,t,xl,yl,l,{isRegion:0})}}function Sl(t){let e,n,r,i,s,l,a=t[5](t[0])+"";return{c(){e=N("span"),n=T(a),r=A(),i=N("span"),i.innerHTML='<i class="fas fa-edit"></i>',_(i,"class","pl-3 smaller has-text-link")},m(o,a){P(o,e,a),E(e,n),E(e,r),E(e,i),s||(l=[M(e,"click",t[7]),M(e,"keyup",null)],s=!0)},p(t,e){33&e&&a!==(a=t[5](t[0])+"")&&F(n,a)},d(t){t&&L(e),s=!1,o(l)}}}function El(t){let e,n,r;return{c(){e=N("input"),_(e,"class","input selection-title svelte-sgypdx")},m(i,o){P(i,e,o),t[12](e),H(e,t[4]),n||(r=[M(e,"input",t[13]),M(e,"keydown",t[8]),M(e,"blur",t[9])],n=!0)},p(t,n){16&n&&e.value!==t[4]&&H(e,t[4])},d(i){i&&L(e),t[12](null),n=!1,o(r)}}}function Cl(t){let e,n,r,i,o,s,l,a,c,u,d,f,m,$,b,w,y,x;function k(t,e){return t[2]?El:Sl}let S=k(t),C=S(t);const O=t[11].default,I=p(O,t,t[10],null);return y=new kl({props:{isRegion:t[0]}}),{c(){e=N("div"),n=N("div"),r=A(),i=N("div"),o=N("div"),s=N("div"),l=N("i"),a=A(),C.c(),c=T("\n                ("),u=T(t[1]),d=T(")"),f=A(),m=N("button"),$=A(),b=N("section"),I&&I.c(),w=A(),At(y.$$.fragment),_(n,"class","modal-background"),_(l,"class","fa-solid fa-book-bookmark"),_(s,"class","title is-4 mb-0 media-content"),_(m,"class","delete media-left"),_(m,"aria-label","close"),_(o,"class","modal-card-head media mb-0 is-middle"),_(b,"class","modal-card-body"),_(i,"class","modal-content"),_(e,"id","selection-modal"),_(e,"class","modal fade"),_(e,"tabindex","-1"),_(e,"aria-labelledby","selection-modal-label"),_(e,"aria-hidden","true")},m(t,p){P(t,e,p),E(e,n),E(e,r),E(e,i),E(i,o),E(o,s),E(s,l),E(s,a),C.m(s,null),E(s,c),E(s,u),E(s,d),E(o,f),E(o,m),E(i,$),E(i,b),I&&I.m(b,null),E(i,w),Vt(y,i,null),x=!0},p(t,[e]){S===(S=k(t))&&C?C.p(t,e):(C.d(1),C=S(t),C&&(C.c(),C.m(s,c))),(!x||2&e)&&F(u,t[1]),I&&I.p&&(!x||1024&e)&&h(I,O,t,t[10],x?g(O,t[10],e,null):v(t[10]),null);const n={};1&e&&(n.isRegion=t[0]),y.$set(n)},i(t){x||(Et(I,t),Et(y.$$.fragment,t),x=!0)},o(t){Ct(I,t),Ct(y.$$.fragment,t),x=!1},d(t){t&&L(e),C.d(),I&&I.d(t),Mt(y)}}}function Ol(t,e,n){let r,{$$slots:i={},$$scope:o}=e;const{selectionTitle:s,updateTitle:l,save:a}=de;f(t,s,(t=>n(5,r=t)));let c,u,{isRegion:d=!1}=e,{selectionLength:p=!1}=e,m=!1;function g(){n(2,m=!1),l(u,d),a(d)}return t.$$set=t=>{"isRegion"in t&&n(0,d=t.isRegion),"selectionLength"in t&&n(1,p=t.selectionLength),"$$scope"in t&&n(10,o=t.$$scope)},[d,p,m,c,u,r,s,function(){n(2,m=!0),n(4,u=r(d)),setTimeout((()=>c&&c.focus()),0)},function(t){"Enter"===t.key&&g()},g,o,i,function(t){at[t?"unshift":"push"]((()=>{c=t,n(3,c)}))},function(){u=this.value,n(4,u)}]}class Pl extends qt{constructor(t){super(),jt(this,t,Ol,Cl,l,{isRegion:0,selectionLength:1})}}const Ll=function(){const t=`${window.location.origin}${window.location.pathname}`,e=Ht(1),n=Ht([]),r=Ht([]),i=(async()=>{const e=await fetch(`${t}vectorized-images`).then((t=>t.json())).then((t=>(n.set(t),t))).catch((t=>console.error("Error:",t)));return l(o()),e})(),o=()=>oe(e,"vp"),s=zt(e,(t=>(async()=>function(t){const e=49*(t-1),i=e+49,o=d(n).slice(e,i);return r.set(o),o}(t))()));function l(t){se(t,e,"vp")}return{currentPage:e,pageLength:49,vectImgs:n,fetchVectorization:i,setPageVectImgs:s,pageVectImgs:r,handlePageUpdate:l}}();function Il(t){let e,n;return{c(){e=new J(!1),n=V(),e.a=n},m(r,i){e.m(t[2],r,i),P(r,n,i)},p(t,n){4&n&&e.p(t[2])},d(t){t&&L(n),t&&e.d()}}}function Nl(t){let e,n,r,i,s,l,a,u,d,f,p=!t[1]&&t[2]&&Il(t);return{c(){e=N("div"),n=N("figure"),r=N("div"),p&&p.c(),i=A(),s=N("img"),_(r,"class","svg-container svelte-1egync3"),c(s.src,l=t[4])||_(s,"src",l),_(s,"alt","Extracted region"),_(s,"class","svelte-1egync3"),_(n,"class","image card region-image svelte-1egync3"),z(n,"width",t[0]+"px"),z(n,"aspect-ratio",t[3]?t[3].split(" ")[2]/t[3].split(" ")[3]:1),_(e,"class","svg-regions is-center svelte-1egync3")},m(o,l){P(o,e,l),E(e,n),E(n,r),p&&p.m(r,null),E(n,i),E(n,s),u=!0,d||(f=[M(e,"mouseenter",t[6]),M(e,"mouseleave",t[7])],d=!0)},p(t,[e]){!t[1]&&t[2]?p?p.p(t,e):(p=Il(t),p.c(),p.m(r,null)):p&&(p.d(1),p=null),(!u||1&e)&&z(n,"width",t[0]+"px"),(!u||8&e)&&z(n,"aspect-ratio",t[3]?t[3].split(" ")[2]/t[3].split(" ")[3]:1)},i(t){u||(mt((()=>{u&&(a||(a=Pt(e,Dt,{duration:500},!0)),a.run(1))})),u=!0)},o(t){a||(a=Pt(e,Dt,{duration:500},!1)),a.run(0),u=!1},d(t){t&&L(e),p&&p.d(),t&&a&&a.end(),d=!1,o(f)}}}function Rl(t,e,n){let{svgPath:r}=e,{width:i=200}=e;const[o,s,l,a]=r.replace(".svg","").split("_"),c=le(`${o}_${s}_${l}`,a,`${i},`);let u=!1,d="",f="";et((async()=>{const t=await fetch(`${Kt}svg/${r}`),e=await t.text(),i=(new DOMParser).parseFromString(e,"image/svg+xml"),o=i.querySelector("svg");n(3,f=o.getAttribute("viewBox")||`0 0 ${o.getAttribute("width")} ${o.getAttribute("height")}`),i.querySelectorAll("image").forEach((t=>t.remove())),o.setAttribute("viewBox",f),o.removeAttribute("width"),o.removeAttribute("height"),n(2,d=(new XMLSerializer).serializeToString(i.documentElement))}));return t.$$set=t=>{"svgPath"in t&&n(5,r=t.svgPath),"width"in t&&n(0,i=t.width)},[i,u,d,f,c,r,()=>n(1,u=!0),()=>n(1,u=!1)]}class Tl extends qt{constructor(t){super(),jt(this,t,Rl,Nl,l,{svgPath:5,width:0})}}function Al(e){let n,r,i,o,s,l,a,c="en"===Bt?"Download All":"Tout Télécharger";return{c(){n=N("div"),r=N("button"),i=N("i"),o=A(),s=T(c),_(i,"class","fa-solid fa-download"),_(r,"class","button is-link is-light"),_(n,"class","is-right mb-3")},m(t,c){P(t,n,c),E(n,r),E(r,i),E(r,o),E(r,s),l||(a=M(r,"click",e[0]),l=!0)},p:t,i:t,o:t,d(t){t&&L(n),l=!1,a()}}}function Vl(t){const e=`${window.location.origin}${window.location.pathname}`,n=parseInt(e.split("witness/")[1].replace("/","")),r=parseInt(e.split("regions/")[1].replace("/",""));return[async function(){if(!r&&!n)return void console.error("No Region or Witness");const t=r?`${window.location.origin}/${Wt}/export-regions-imgs-and-svgs/${r}`:`${window.location.origin}/${Wt}/export-all-imgs-and-svgs/${n}`;try{const e=await re((()=>fetch(t,{method:"GET",headers:{"X-CSRFToken":Xt,"Content-Type":"application/json"}})));if(!e.ok)throw new Error(`HTTP error! status: ${e.status}`);ue(await e.blob(),"vectorizations.zip")}catch(t){console.error("Erreur lors du téléchargement des vectorisations:",t)}}]}class Ml extends qt{constructor(t){super(),jt(this,t,Vl,Al,l,{})}}function jl(t,e,n){const r=t.slice();return r[8]=e[n],r}function ql(e){let n;let r=("en"===Bt?Dl:_l)(e);return{c(){n=N("div"),r.c(),_(n,"class","faded is-center")},m(t,e){P(t,n,e),r.m(n,null)},p(t,e){r.p(t,e)},i:t,o:t,d(t){t&&L(n),r.d()}}}function _l(t){let e,n,r=t[11]+"";return{c(){e=T("Erreur lors de la récupération des régions vectorisées : "),n=T(r)},m(t,r){P(t,e,r),P(t,n,r)},p(t,e){2&e&&r!==(r=t[11]+"")&&F(n,r)},d(t){t&&L(e),t&&L(n)}}}function Dl(t){let e,n,r=t[11]+"";return{c(){e=T("Error when retrieving vectorized regions: "),n=T(r)},m(t,r){P(t,e,r),P(t,n,r)},p(t,e){2&e&&r!==(r=t[11]+"")&&F(n,r)},d(t){t&&L(e),t&&L(n)}}}function Ul(t){let e,n,r=[],i=new Map,o=t[2];const s=t=>t[8].id;for(let e=0;e<o.length;e+=1){let n=jl(t,o,e),l=s(n);i.set(l,r[e]=Hl(l,n))}let l=null;return o.length||(l=Fl()),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=V(),l&&l.c()},m(t,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,i);P(t,e,i),l&&l.m(t,i),n=!0},p(t,n){4&n&&(o=t[2],kt(),r=Rt(r,n,s,1,t,o,i,e.parentNode,Nt,Hl,e,jl),St(),!o.length&&l?l.p(t,n):o.length?l&&(l.d(1),l=null):(l=Fl(),l.c(),l.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<o.length;t+=1)Et(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Ct(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&L(e),l&&l.d(t)}}}function Fl(e){let n,r;return{c(){n=N("div"),n.textContent=""+("en"===Bt?"No vectorization":"Pas de vectorisation"),r=A(),_(n,"class","faded is-center")},m(t,e){P(t,n,e),P(t,r,e)},p:t,d(t){t&&L(n),t&&L(r)}}}function Hl(t,e){let n,r,i;return r=new Tl({props:{svgPath:e[8]}}),{key:t,first:null,c(){n=V(),At(r.$$.fragment),this.first=n},m(t,e){P(t,n,e),Vt(r,t,e),i=!0},p(t,n){e=t;const i={};4&n&&(i.svgPath=e[8]),r.$set(i)},i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(n),Mt(r,t)}}}function zl(e){let n;return{c(){n=N("div"),n.textContent=""+("en"===Bt?"Retrieving vectorization page...":"Récupération la page de vectorisation..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function Bl(t){let e,n,r,i,o,s,l,a,c;e=new Ml({}),r=new dn({props:{store:Ll,nbOfItems:t[0].length,pageLength:t[6]}});let u={ctx:t,current:null,token:null,hasCatch:!0,pending:zl,then:Ul,catch:ql,value:7,error:11,blocks:[,,,]};return Lt(s=t[1],u),a=new dn({props:{store:Ll,nbOfItems:t[0].length,pageLength:t[6]}}),{c(){At(e.$$.fragment),n=A(),At(r.$$.fragment),i=A(),o=N("div"),u.block.c(),l=A(),At(a.$$.fragment),_(o,"class","grid is-gap-2 mx-5 svelte-1mje9rl")},m(t,s){Vt(e,t,s),P(t,n,s),Vt(r,t,s),P(t,i,s),P(t,o,s),u.block.m(o,u.anchor=null),u.mount=()=>o,u.anchor=null,P(t,l,s),Vt(a,t,s),c=!0},p(e,[n]){t=e;const i={};1&n&&(i.nbOfItems=t[0].length),r.$set(i),u.ctx=t,2&n&&s!==(s=t[1])&&Lt(s,u)||It(u,t,n);const o={};1&n&&(o.nbOfItems=t[0].length),a.$set(o)},i(t){c||(Et(e.$$.fragment,t),Et(r.$$.fragment,t),Et(u.block),Et(a.$$.fragment,t),c=!0)},o(t){Ct(e.$$.fragment,t),Ct(r.$$.fragment,t);for(let t=0;t<3;t+=1){Ct(u.blocks[t])}Ct(a.$$.fragment,t),c=!1},d(t){Mt(e,t),t&&L(n),Mt(r,t),t&&L(i),t&&L(o),u.block.d(),u.token=null,u=null,t&&L(l),Mt(a,t)}}}function Wl(t,e,n){let r,i,o;const{vectImgs:s,pageVectImgs:l,setPageVectImgs:a,pageLength:c}=Ll;return f(t,s,(t=>n(0,r=t))),f(t,l,(t=>n(2,o=t))),f(t,a,(t=>n(1,i=t))),[r,i,o,s,l,a,c]}class Jl extends qt{constructor(t){super(),jt(this,t,Wl,Bl,l,{})}}function Xl(e){let n;let r=("en"===Bt?Zl:Gl)(e);return{c(){n=N("div"),r.c(),_(n,"class","container faded is-center")},m(t,e){P(t,n,e),r.m(n,null)},p(t,e){r.p(t,e)},i:t,o:t,d(t){t&&L(n),r.d()}}}function Gl(e){let n,r,i=e[2]+"";return{c(){n=T("Erreur lors de la récupération des régions vectorisées : "),r=T(i)},m(t,e){P(t,n,e),P(t,r,e)},p:t,d(t){t&&L(n),t&&L(r)}}}function Zl(e){let n,r,i=e[2]+"";return{c(){n=T("Error when retrieving vectorized regions: "),r=T(i)},m(t,e){P(t,n,e),P(t,r,e)},p:t,d(t){t&&L(n),t&&L(r)}}}function Yl(e){let n,r;return n=new Jl({}),{c(){At(n.$$.fragment)},m(t,e){Vt(n,t,e),r=!0},p:t,i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){Mt(n,t)}}}function Ql(e){let n;return{c(){n=N("div"),n.textContent=""+("en"===Bt?"Retrieving vectorized regions...":"Récupération des régions vectorisées..."),_(n,"class","container faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function Kl(t){let e,n,r=Gt.includes("vectorization"),i=r&&function(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:Ql,then:Yl,catch:Xl,value:1,error:2,blocks:[,,,]};return Lt(t[0],r),{c(){e=V(),r.block.c()},m(t,i){P(t,e,i),r.block.m(t,r.anchor=i),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(e,n){It(r,t=e,n)},i(t){n||(Et(r.block),n=!0)},o(t){for(let t=0;t<3;t+=1)Ct(r.blocks[t]);n=!1},d(t){t&&L(e),r.block.d(t),r.token=null,r=null}}}(t);return{c(){i&&i.c(),e=V()},m(t,r){i&&i.m(t,r),P(t,e,r),n=!0},p(t,[e]){r&&i.p(t,e)},i(t){n||(Et(i),n=!0)},o(t){Ct(i),n=!1},d(t){i&&i.d(t),t&&L(e)}}}function ta(t){const{fetchVectorization:e}=Ll;return[e]}class ea extends qt{constructor(t){super(),jt(this,t,ta,Kl,l,{})}}function na(t,e,n){const r=t.slice();return r[22]=e[n][0],r[23]=e[n][1],r}function ra(t,e,n){const r=t.slice();return r[27]=e[n],r}function ia(t,e,n){const r=t.slice();return r[31]=e[n][0],r[23]=e[n][1],r}function oa(t){let e,n,r,i;return n=new Ze({}),{c(){e=N("div"),At(n.$$.fragment),_(e,"class","cell")},m(t,r){P(t,e,r),Vt(n,e,null),i=!0},i(t){i||(Et(n.$$.fragment,t),mt((()=>{i&&(r||(r=Pt(e,Dt,{duration:500},!0)),r.run(1))})),i=!0)},o(t){Ct(n.$$.fragment,t),r||(r=Pt(e,Dt,{duration:500},!1)),r.run(0),i=!1},d(t){t&&L(e),Mt(n),t&&r&&r.end()}}}function sa(t){let e,n,r,i,s,l,a=t[23].text+"";function c(){return t[20](t[31])}return{c(){e=N("li"),n=N("a"),r=T(a),i=A(),_(n,"href",null),B(e,"is-active",t[31]===t[3])},m(t,o){P(t,e,o),E(e,n),E(n,r),E(e,i),s||(l=[M(e,"click",c),M(e,"keyup",ya)],s=!0)},p(n,i){t=n,4&i[0]&&a!==(a=t[23].text+"")&&F(r,a),12&i[0]&&B(e,"is-active",t[31]===t[3])},d(t){t&&L(e),s=!1,o(l)}}}function la(e){let n,r;return n=new ea({}),{c(){At(n.$$.fragment)},m(t,e){Vt(n,t,e),r=!0},p:t,i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){Mt(n,t)}}}function aa(e){let n,r;return n=new el({}),{c(){At(n.$$.fragment)},m(t,e){Vt(n,t,e),r=!0},p:t,i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){Mt(n,t)}}}function ca(e){let n,r;return n=new $l({}),{c(){At(n.$$.fragment)},m(t,e){Vt(n,t,e),r=!0},p:t,i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){Mt(n,t)}}}function ua(t){let e,n,r={ctx:t,current:null,token:null,hasCatch:!0,pending:ga,then:fa,catch:da,value:26,error:30,blocks:[,,,]};return Lt(t[9],r),{c(){e=N("div"),r.block.c(),_(e,"class","grid is-gap-2")},m(t,i){P(t,e,i),r.block.m(e,r.anchor=null),r.mount=()=>e,r.anchor=null,n=!0},p(e,n){It(r,t=e,n)},i(t){n||(Et(r.block),n=!0)},o(t){for(let t=0;t<3;t+=1){Ct(r.blocks[t])}n=!1},d(t){t&&L(e),r.block.d(),r.token=null,r=null}}}function da(e){let n,r,i,o=e[30]+"";return{c(){n=N("div"),r=T("Error when retrieving regions: "),i=T(o)},m(t,e){P(t,n,e),E(n,r),E(n,i)},p:t,i:t,o:t,d(t){t&&L(n)}}}function fa(t){let e,n,r=[],i=new Map,o=Object.values(t[6]);const s=t=>t[27].id;for(let e=0;e<o.length;e+=1){let n=ra(t,o,e),l=s(n);i.set(l,r[e]=ma(l,n))}let l=null;return o.length||(l=pa(t)),{c(){for(let t=0;t<r.length;t+=1)r[t].c();e=V(),l&&l.c()},m(t,i){for(let e=0;e<r.length;e+=1)r[e]&&r[e].m(t,i);P(t,e,i),l&&l.m(t,i),n=!0},p(t,n){3136&n[0]&&(o=Object.values(t[6]),kt(),r=Rt(r,n,s,1,t,o,i,e.parentNode,Nt,ma,e,ra),St(),!o.length&&l?l.p(t,n):o.length?l&&(kt(),Ct(l,1,1,(()=>{l=null})),St()):(l=pa(t),l.c(),Et(l,1),l.m(e.parentNode,e)))},i(t){if(!n){for(let t=0;t<o.length;t+=1)Et(r[t]);n=!0}},o(t){for(let t=0;t<r.length;t+=1)Ct(r[t]);n=!1},d(t){for(let e=0;e<r.length;e+=1)r[e].d(t);t&&L(e),l&&l.d(t)}}}function pa(e){let n,r;return n=new Re({props:{currentRegionId:e[11],baseUrl:e[10]}}),{c(){At(n.$$.fragment)},m(t,e){Vt(n,t,e),r=!0},p:t,i(t){r||(Et(n.$$.fragment,t),r=!0)},o(t){Ct(n.$$.fragment,t),r=!1},d(t){Mt(n,t)}}}function ma(t,e){let n,r,i;return r=new Se({props:{item:e[27]}}),{key:t,first:null,c(){n=V(),At(r.$$.fragment),this.first=n},m(t,e){P(t,n,e),Vt(r,t,e),i=!0},p(t,n){e=t;const i={};64&n[0]&&(i.item=e[27]),r.$set(i)},i(t){i||(Et(r.$$.fragment,t),i=!0)},o(t){Ct(r.$$.fragment,t),i=!1},d(t){t&&L(n),Mt(r,t)}}}function ga(e){let n;return{c(){n=N("div"),n.textContent=""+("en"===Bt?"Retrieving regions...":"Récupération des régions..."),_(n,"class","faded is-center")},m(t,e){P(t,n,e)},p:t,i:t,o:t,d(t){t&&L(n)}}}function ha(e){let n;return{c(){n=N("div"),n.textContent=""+("en"===Bt?"No regions in selection":"Aucune région sélectionnée")},m(t,e){P(t,n,e)},p:t,d(t){t&&L(n)}}}function va(t){let e,n,r=Object.entries(t[1]),i=[];for(let e=0;e<r.length;e+=1)i[e]=$a(na(t,r,e));return{c(){e=N("div"),n=N("div");for(let t=0;t<i.length;t+=1)i[t].c();_(n,"class","grid is-gap-2"),_(e,"class","fixed-grid has-6-cols")},m(t,r){P(t,e,r),E(e,n);for(let t=0;t<i.length;t+=1)i[t]&&i[t].m(n,null)},p(t,e){if(2&e[0]){let o;for(r=Object.entries(t[1]),o=0;o<r.length;o+=1){const s=na(t,r,o);i[o]?i[o].p(s,e):(i[o]=$a(s),i[o].c(),i[o].m(n,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d(t){t&&L(e),I(i,t)}}}function $a(t){let e,n,r,i,o,s,l,a,u,d,f,p,m,g=t[23].title+"";function h(){return t[21](t[22])}return{c(){e=N("div"),n=N("figure"),r=N("img"),o=A(),s=N("div"),l=N("span"),a=T(g),u=A(),d=N("button"),f=A(),c(r.src,i=le(t[23].img,t[23].xyhw,"96,"))||_(r,"src",i),_(r,"alt","Extracted region"),_(l,"class","overlay-desc"),_(s,"class","overlay is-center svelte-403wty"),_(n,"class","image is-64x64 card"),_(d,"class","delete region-btn"),_(d,"aria-label","remove from selection"),_(e,"class","selection cell svelte-403wty")},m(t,i){P(t,e,i),E(e,n),E(n,r),E(n,o),E(n,s),E(s,l),E(l,a),E(e,u),E(e,d),E(e,f),p||(m=M(d,"click",h),p=!0)},p(e,n){t=e,2&n[0]&&!c(r.src,i=le(t[23].img,t[23].xyhw,"96,"))&&_(r,"src",i),2&n[0]&&g!==(g=t[23].title+"")&&F(a,g)},d(t){t&&L(e),p=!1,m()}}}function ba(t){let e;function n(t,e){return t[4]?va:ha}let r=n(t),i=r(t);return{c(){i.c(),e=V()},m(t,n){i.m(t,n),P(t,e,n)},p(t,o){r===(r=n(t))&&i?i.p(t,o):(i.d(1),i=r(t),i&&(i.c(),i.m(e.parentNode,e)))},d(t){i.d(t),t&&L(e)}}}function wa(t){let e,n,r,i,o,s,l,a,c,u,d,f,p,m,g,h,v,$,b,w,y=["all","page"].includes(t[3]);e=new he({props:{visible:t[5]}}),r=new Le({}),o=new Oe({props:{selectionLength:t[0]}}),u=new Ue({props:{baseUrl:t[10],currentRegionId:t[11],currentLayout:t[3]}});let x=y&&oa(),k=Object.entries(t[2]),S=[];for(let e=0;e<k.length;e+=1)S[e]=sa(ia(t,k,e));const C=[ua,ca,aa,la],O=[];function R(t,e){return"all"===t[3]?0:"page"===t[3]?1:"similarity"===t[3]?2:"vectorization"===t[3]?3:-1}return~(h=R(t))&&(v=O[h]=C[h](t)),b=new Pl({props:{isRegion:!0,selectionLength:t[0],$$slots:{default:[ba]},$$scope:{ctx:t}}}),{c(){At(e.$$.fragment),n=A(),At(r.$$.fragment),i=A(),At(o.$$.fragment),s=A(),l=N("div"),a=N("div"),c=N("div"),At(u.$$.fragment),d=A(),x&&x.c(),f=A(),p=N("div"),m=N("ul");for(let t=0;t<S.length;t+=1)S[t].c();g=A(),v&&v.c(),$=A(),At(b.$$.fragment),_(c,"class","cell is-left is-middle"),_(a,"class","actions grid"),_(m,"class","panel-tabs"),_(p,"class","tabs is-centered"),_(l,"id","nav-actions"),_(l,"class","mb-5 svelte-403wty")},m(t,v){Vt(e,t,v),P(t,n,v),Vt(r,t,v),P(t,i,v),Vt(o,t,v),P(t,s,v),P(t,l,v),E(l,a),E(a,c),Vt(u,c,null),E(a,d),x&&x.m(a,null),E(l,f),E(l,p),E(p,m);for(let t=0;t<S.length;t+=1)S[t]&&S[t].m(m,null);P(t,g,v),~h&&O[h].m(t,v),P(t,$,v),Vt(b,t,v),w=!0},p(t,n){const r={};32&n[0]&&(r.visible=t[5]),e.$set(r);const i={};1&n[0]&&(i.selectionLength=t[0]),o.$set(i);const s={};if(8&n[0]&&(s.currentLayout=t[3]),u.$set(s),8&n[0]&&(y=["all","page"].includes(t[3])),y?x?8&n[0]&&Et(x,1):(x=oa(),x.c(),Et(x,1),x.m(a,null)):x&&(kt(),Ct(x,1,1,(()=>{x=null})),St()),4108&n[0]){let e;for(k=Object.entries(t[2]),e=0;e<k.length;e+=1){const r=ia(t,k,e);S[e]?S[e].p(r,n):(S[e]=sa(r),S[e].c(),S[e].m(m,null))}for(;e<S.length;e+=1)S[e].d(1);S.length=k.length}let l=h;h=R(t),h===l?~h&&O[h].p(t,n):(v&&(kt(),Ct(O[l],1,1,(()=>{O[l]=null})),St()),~h?(v=O[h],v?v.p(t,n):(v=O[h]=C[h](t),v.c()),Et(v,1),v.m($.parentNode,$)):v=null);const c={};1&n[0]&&(c.selectionLength=t[0]),18&n[0]|8&n[1]&&(c.$$scope={dirty:n,ctx:t}),b.$set(c)},i(t){w||(Et(e.$$.fragment,t),Et(r.$$.fragment,t),Et(o.$$.fragment,t),Et(u.$$.fragment,t),Et(x),Et(v),Et(b.$$.fragment,t),w=!0)},o(t){Ct(e.$$.fragment,t),Ct(r.$$.fragment,t),Ct(o.$$.fragment,t),Ct(u.$$.fragment,t),Ct(x),Ct(v),Ct(b.$$.fragment,t),w=!1},d(t){Mt(e,t),t&&L(n),Mt(r,t),t&&L(i),Mt(o,t),t&&L(s),t&&L(l),Mt(u),x&&x.d(),I(S,t),t&&L(g),~h&&O[h].d(t),t&&L($),Mt(b,t)}}}const ya=()=>null;function xa(t,e,n){let r,i,o,s,l,a,c;f(t,ee,(t=>n(5,a=t)));const{selected:u}=de;f(t,u,(t=>n(19,l=t)));const{allRegions:d,fetchAll:p}=fe;f(t,d,(t=>n(6,c=t)));let{manifest:m=""}=e,{isValidated:g=!1}=e,{imgPrefix:h=""}=e,{nbOfPages:v=1}=e,{trailingZeros:$=1}=e,{witness:b={}}=e;it("witness",b),it("nbOfPages",v),it("trailingZeros",$),it("imgPrefix",h),it("manifest",m),it("isValidated",g);const w=`${window.location.origin}${window.location.pathname}`,y=parseInt(w.split("regions/")[1].replace("/","")),x={all:{text:"en"===Bt?"All regions":"Toutes les régions"},page:{text:"en"===Bt?"Per page":"Par page"}};function k(t){n(3,s=t);const e=new URL(window.location);e.searchParams.set("tab",t),window.history.pushState({},"",e)}Gt.includes("similarity")&&(x.similarity={text:"en"===Bt?"Similarity":"Similarité"}),Gt.includes("vectorization")&&(x.vectorization={text:"en"===Bt?"Vectorization":"Vectorisation"});return t.$$set=t=>{"manifest"in t&&n(13,m=t.manifest),"isValidated"in t&&n(14,g=t.isValidated),"imgPrefix"in t&&n(15,h=t.imgPrefix),"nbOfPages"in t&&n(16,v=t.nbOfPages),"trailingZeros"in t&&n(17,$=t.trailingZeros),"witness"in t&&n(18,b=t.witness)},t.$$.update=()=>{524288&t.$$.dirty[0]&&n(1,r=l(!0)),2&t.$$.dirty[0]&&n(0,i=Object.keys(r).length),1&t.$$.dirty[0]&&n(4,o=i>0)},n(3,s=new URLSearchParams(window.location.search).get("tab")??"all"),[i,r,x,s,o,a,c,u,d,p,w,y,k,m,g,h,v,$,b,l,t=>k(t),t=>de.remove(t,Zt)]}return new class extends qt{constructor(t){super(),jt(this,t,xa,wa,l,{manifest:13,isValidated:14,imgPrefix:15,nbOfPages:16,trailingZeros:17,witness:18},null,[-1,-1])}}({target:document.getElementById("region-list"),props:{witness:witness,manifest:manifest,isValidated:isValidated,imgPrefix:imgPrefix,nbOfPages:nbOfPages,trailingZeros:trailingZeros}})}();
//# sourceMappingURL=regionList.js.map

(function(){"use strict";function tA(){}const Wa=e=>e;function Ya(e,A){for(const t in A)e[t]=A[t];return e}function Fg(e){return!!e&&(typeof e=="object"||typeof e=="function")&&typeof e.then=="function"}function za(e){return e()}function ja(){return Object.create(null)}function Ce(e){e.forEach(za)}function Hn(e){return typeof e=="function"}function OA(e,A){return e!=e?A==A:e!==A||e&&typeof e=="object"||typeof e=="function"}let $r;function Ne(e,A){return $r||($r=document.createElement("a")),$r.href=A,e===$r.href}function bg(e){return Object.keys(e).length===0}function Ai(e,...A){if(e==null)return tA;const t=e.subscribe(...A);return t.unsubscribe?()=>t.unsubscribe():t}function be(e){let A;return Ai(e,t=>A=t)(),A}function FA(e,A,t){e.$$.on_destroy.push(Ai(A,t))}function ct(e,A,t,n){if(e){const r=qa(e,A,t,n);return e[0](r)}}function qa(e,A,t,n){return e[1]&&n?Ya(t.ctx.slice(),e[1](n(A))):t.ctx}function ut(e,A,t,n){if(e[2]&&n){const r=e[2](n(t));if(A.dirty===void 0)return r;if(typeof r=="object"){const i=[],s=Math.max(A.dirty.length,r.length);for(let o=0;o<s;o+=1)i[o]=A.dirty[o]|r[o];return i}return A.dirty|r}return A.dirty}function ft(e,A,t,n,r,i){if(r){const s=qa(A,t,n,i);e.p(s,r)}}function ht(e){if(e.ctx.length>32){const A=[],t=e.ctx.length/32;for(let n=0;n<t;n++)A[n]=-1;return A}return-1}function Eg(e){const A={};for(const t in e)A[t]=!0;return A}function ei(e){return e??""}function lr(e){return e&&Hn(e.destroy)?e.destroy:tA}const Za=typeof window<"u";let Ig=Za?()=>window.performance.now():()=>Date.now(),Gs=Za?e=>requestAnimationFrame(e):tA;const Sn=new Set;function $a(e){Sn.forEach(A=>{A.c(e)||(Sn.delete(A),A.f())}),Sn.size!==0&&Gs($a)}function Hg(e){let A;return Sn.size===0&&Gs($a),{promise:new Promise(t=>{Sn.add(A={c:e,f:t})}),abort(){Sn.delete(A)}}}const Al=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function w(e,A){e.appendChild(A)}function el(e){if(!e)return document;const A=e.getRootNode?e.getRootNode():e.ownerDocument;return A&&A.host?A:e.ownerDocument}function Sg(e){const A=C("style");return xg(el(e),A),A.sheet}function xg(e,A){return w(e.head||e,A),A.sheet}function K(e,A,t){e.insertBefore(A,t||null)}function D(e){e.parentNode&&e.parentNode.removeChild(e)}function Se(e,A){for(let t=0;t<e.length;t+=1)e[t]&&e[t].d(A)}function C(e){return document.createElement(e)}function dt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function sA(e){return document.createTextNode(e)}function R(){return sA(" ")}function ke(){return sA("")}function dA(e,A,t,n){return e.addEventListener(A,t,n),()=>e.removeEventListener(A,t,n)}function Mt(e){return function(A){return A.preventDefault(),e.call(this,A)}}function m(e,A,t){t==null?e.removeAttribute(A):e.getAttribute(A)!==t&&e.setAttribute(A,t)}function Lg(e){return Array.from(e.childNodes)}function NA(e,A){A=""+A,e.data!==A&&(e.data=A)}function xn(e,A){e.value=A??""}function TA(e,A,t,n){t==null?e.style.removeProperty(A):e.style.setProperty(A,t,n?"important":"")}function zt(e,A,t){for(let n=0;n<e.options.length;n+=1){const r=e.options[n];if(r.__value===A){r.selected=!0;return}}(!t||A!==void 0)&&(e.selectedIndex=-1)}function ti(e){const A=e.querySelector(":checked");return A&&A.__value}function ZA(e,A,t){e.classList[t?"add":"remove"](A)}function tl(e,A,{bubbles:t=!1,cancelable:n=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t,n,A),r}class kg{constructor(A=!1){this.is_svg=!1,this.is_svg=A,this.e=this.n=null}c(A){this.h(A)}m(A,t,n=null){this.e||(this.is_svg?this.e=dt(t.nodeName):this.e=C(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(A)),this.i(n)}h(A){this.e.innerHTML=A,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(A){for(let t=0;t<this.n.length;t+=1)K(this.t,this.n[t],A)}p(A){this.d(),this.h(A),this.i(this.a)}d(){this.n.forEach(D)}}function Ln(e,A){return new e(A)}const ni=new Map;let ri=0;function Mg(e){let A=5381,t=e.length;for(;t--;)A=(A<<5)-A^e.charCodeAt(t);return A>>>0}function Tg(e,A){const t={stylesheet:Sg(A),rules:{}};return ni.set(e,t),t}function nl(e,A,t,n,r,i,s,o=0){const a=16.666/n;let l=`{
`;for(let B=0;B<=1;B+=a){const p=A+(t-A)*i(B);l+=B*100+`%{${s(p,1-p)}}
`}const c=l+`100% {${s(t,1-t)}}
}`,f=`__svelte_${Mg(c)}_${o}`,u=el(e),{stylesheet:h,rules:d}=ni.get(u)||Tg(u,e);d[f]||(d[f]=!0,h.insertRule(`@keyframes ${f} ${c}`,h.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${f} ${n}ms linear ${r}ms 1 both`,ri+=1,f}function Dg(e,A){const t=(e.style.animation||"").split(", "),n=t.filter(A?i=>i.indexOf(A)<0:i=>i.indexOf("__svelte")===-1),r=t.length-n.length;r&&(e.style.animation=n.join(", "),ri-=r,ri||Kg())}function Kg(){Gs(()=>{ri||(ni.forEach(e=>{const{ownerNode:A}=e.stylesheet;A&&D(A)}),ni.clear())})}let cr;function Tt(e){cr=e}function kn(){if(!cr)throw new Error("Function called outside component initialization");return cr}function gn(e){kn().$$.on_mount.push(e)}function Bn(e){kn().$$.on_destroy.push(e)}function ii(){const e=kn();return(A,t,{cancelable:n=!1}={})=>{const r=e.$$.callbacks[A];if(r){const i=tl(A,t,{cancelable:n});return r.slice().forEach(s=>{s.call(e,i)}),!i.defaultPrevented}return!0}}function Mn(e,A){return kn().$$.context.set(e,A),A}function Je(e){return kn().$$.context.get(e)}const Tn=[],jt=[];let Dn=[];const rl=[],Og=Promise.resolve();let Xs=!1;function Ng(){Xs||(Xs=!0,Og.then(Ws))}function $e(e){Dn.push(e)}const Js=new Set;let Kn=0;function Ws(){if(Kn!==0)return;const e=cr;do{try{for(;Kn<Tn.length;){const A=Tn[Kn];Kn++,Tt(A),Rg(A.$$)}}catch(A){throw Tn.length=0,Kn=0,A}for(Tt(null),Tn.length=0,Kn=0;jt.length;)jt.pop()();for(let A=0;A<Dn.length;A+=1){const t=Dn[A];Js.has(t)||(Js.add(t),t())}Dn.length=0}while(Tn.length);for(;rl.length;)rl.pop()();Xs=!1,Js.clear(),Tt(e)}function Rg(e){if(e.fragment!==null){e.update(),Ce(e.before_update);const A=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,A),e.after_update.forEach($e)}}function Pg(e){const A=[],t=[];Dn.forEach(n=>e.indexOf(n)===-1?A.push(n):t.push(n)),t.forEach(n=>n()),Dn=A}let ur;function Vg(){return ur||(ur=Promise.resolve(),ur.then(()=>{ur=null})),ur}function Ys(e,A,t){e.dispatchEvent(tl(`${A?"intro":"outro"}${t}`))}const si=new Set;let Dt;function $A(){Dt={r:0,c:[],p:Dt}}function Ae(){Dt.r||Ce(Dt.c),Dt=Dt.p}function G(e,A){e&&e.i&&(si.delete(e),e.i(A))}function W(e,A,t,n){if(e&&e.o){if(si.has(e))return;si.add(e),Dt.c.push(()=>{si.delete(e),n&&(t&&e.d(1),n())}),e.o(A)}else n&&n()}const Gg={duration:0};function Ft(e,A,t,n){const r={direction:"both"};let i=A(e,t,r),s=n?0:1,o=null,a=null,l=null;function c(){l&&Dg(e,l)}function f(h,d){const g=h.b-s;return d*=Math.abs(g),{a:s,b:h.b,d:g,duration:d,start:h.start,end:h.start+d,group:h.group}}function u(h){const{delay:d=0,duration:g=300,easing:B=Wa,tick:p=tA,css:Q}=i||Gg,F={start:Ig()+d,b:h};h||(F.group=Dt,Dt.r+=1),o||a?a=F:(Q&&(c(),l=nl(e,s,h,g,d,B,Q)),h&&p(0,1),o=f(F,g),$e(()=>Ys(e,h,"start")),Hg(v=>{if(a&&v>a.start&&(o=f(a,g),a=null,Ys(e,o.b,"start"),Q&&(c(),l=nl(e,s,o.b,o.duration,0,B,i.css))),o){if(v>=o.end)p(s=o.b,1-s),Ys(e,o.b,"end"),a||(o.b?c():--o.group.r||Ce(o.group.c)),o=null;else if(v>=o.start){const y=v-o.start;s=o.a+o.d*B(y/o.duration),p(s,1-s)}}return!!(o||a)}))}return{run(h){Hn(i)?Vg().then(()=>{i=i(r),u(h)}):u(h)},end(){c(),o=a=null}}}function zs(e,A){const t=A.token={};function n(r,i,s,o){if(A.token!==t)return;A.resolved=o;let a=A.ctx;s!==void 0&&(a=a.slice(),a[s]=o);const l=r&&(A.current=r)(a);let c=!1;A.block&&(A.blocks?A.blocks.forEach((f,u)=>{u!==i&&f&&($A(),W(f,1,1,()=>{A.blocks[u]===f&&(A.blocks[u]=null)}),Ae())}):A.block.d(1),l.c(),G(l,1),l.m(A.mount(),A.anchor),c=!0),A.block=l,A.blocks&&(A.blocks[i]=l),c&&Ws()}if(Fg(e)){const r=kn();if(e.then(i=>{Tt(r),n(A.then,1,A.value,i),Tt(null)},i=>{if(Tt(r),n(A.catch,2,A.error,i),Tt(null),!A.hasCatch)throw i}),A.current!==A.pending)return n(A.pending,0),!0}else{if(A.current!==A.then)return n(A.then,1,A.value,e),!0;A.resolved=e}}function il(e,A,t){const n=A.slice(),{resolved:r}=e;e.current===e.then&&(n[e.value]=r),e.current===e.catch&&(n[e.error]=r),e.block.p(n,t)}function sl(e,A){e.d(1),A.delete(e.key)}function js(e,A){W(e,1,1,()=>{A.delete(e.key)})}function fr(e,A,t,n,r,i,s,o,a,l,c,f){let u=e.length,h=i.length,d=u;const g={};for(;d--;)g[e[d].key]=d;const B=[],p=new Map,Q=new Map,F=[];for(d=h;d--;){const S=f(r,i,d),_=t(S);let b=s.get(_);b?n&&F.push(()=>b.p(S,A)):(b=l(_,S),b.c()),p.set(_,B[d]=b),_ in g&&Q.set(_,Math.abs(d-g[_]))}const v=new Set,y=new Set;function U(S){G(S,1),S.m(o,c),s.set(S.key,S),c=S.first,h--}for(;u&&h;){const S=B[h-1],_=e[u-1],b=S.key,T=_.key;S===_?(c=S.first,u--,h--):p.has(T)?!s.has(b)||v.has(b)?U(S):y.has(T)?u--:Q.get(b)>Q.get(T)?(y.add(b),U(S)):(v.add(T),u--):(a(_,s),u--)}for(;u--;){const S=e[u];p.has(S.key)||a(S,s)}for(;h;)U(B[h-1]);return Ce(F),B}function Xg(e,A){const t={},n={},r={$$scope:1};let i=e.length;for(;i--;){const s=e[i],o=A[i];if(o){for(const a in s)a in o||(n[a]=1);for(const a in o)r[a]||(t[a]=o[a],r[a]=1);e[i]=o}else for(const a in s)r[a]=1}for(const s in n)s in t||(t[s]=void 0);return t}function Jg(e){return typeof e=="object"&&e!==null?e:{}}function pA(e){e&&e.c()}function gA(e,A,t,n){const{fragment:r,after_update:i}=e.$$;r&&r.m(A,t),n||$e(()=>{const s=e.$$.on_mount.map(za).filter(Hn);e.$$.on_destroy?e.$$.on_destroy.push(...s):Ce(s),e.$$.on_mount=[]}),i.forEach($e)}function BA(e,A){const t=e.$$;t.fragment!==null&&(Pg(t.after_update),Ce(t.on_destroy),t.fragment&&t.fragment.d(A),t.on_destroy=t.fragment=null,t.ctx=[])}function Wg(e,A){e.$$.dirty[0]===-1&&(Tn.push(e),Ng(),e.$$.dirty.fill(0)),e.$$.dirty[A/31|0]|=1<<A%31}function RA(e,A,t,n,r,i,s,o=[-1]){const a=cr;Tt(e);const l=e.$$={fragment:null,ctx:[],props:i,update:tA,not_equal:r,bound:ja(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(A.context||(a?a.$$.context:[])),callbacks:ja(),dirty:o,skip_bound:!1,root:A.target||a.$$.root};s&&s(l.root);let c=!1;if(l.ctx=t?t(e,A.props||{},(f,u,...h)=>{const d=h.length?h[0]:u;return l.ctx&&r(l.ctx[f],l.ctx[f]=d)&&(!l.skip_bound&&l.bound[f]&&l.bound[f](d),c&&Wg(e,f)),u}):[],l.update(),c=!0,Ce(l.before_update),l.fragment=n?n(l.ctx):!1,A.target){if(A.hydrate){const f=Lg(A.target);l.fragment&&l.fragment.l(f),f.forEach(D)}else l.fragment&&l.fragment.c();A.intro&&G(e.$$.fragment),gA(e,A.target,A.anchor,A.customElement),Ws()}Tt(a)}class PA{$destroy(){BA(this,1),this.$destroy=tA}$on(A,t){if(!Hn(t))return tA;const n=this.$$.callbacks[A]||(this.$$.callbacks[A]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(A){this.$$set&&!bg(A)&&(this.$$.skip_bound=!0,this.$$set(A),this.$$.skip_bound=!1)}}const On=[];function Yg(e,A){return{subscribe:DA(e,A).subscribe}}function DA(e,A=tA){let t;const n=new Set;function r(o){if(OA(e,o)&&(e=o,t)){const a=!On.length;for(const l of n)l[1](),On.push(l,e);if(a){for(let l=0;l<On.length;l+=2)On[l][0](On[l+1]);On.length=0}}}function i(o){r(o(e))}function s(o,a=tA){const l=[o,a];return n.add(l),n.size===1&&(t=A(r)||tA),o(e),()=>{n.delete(l),n.size===0&&t&&(t(),t=null)}}return{set:r,update:i,subscribe:s}}function pe(e,A,t){const n=!Array.isArray(e),r=n?[e]:e,i=A.length<2;return Yg(t,s=>{let o=!1;const a=[];let l=0,c=tA;const f=()=>{if(l)return;c();const h=A(n?a[0]:a,s);i?s(h):c=Hn(h)?h:tA},u=r.map((h,d)=>Ai(h,g=>{a[d]=g,l&=~(1<<d),o&&f()},()=>{l|=1<<d}));return o=!0,f(),function(){Ce(u),c(),o=!1}})}const Y=APP_LANG,wt=APP_NAME;WEBAPP_NAME;const oi=USER_ID,ai=IS_SUPERUSER,qt=CSRF_TOKEN;ADDITIONAL_MODULES;const ol="Region",li=APP_URL,zg=SAS_APP_URL,jg=CANTALOUPE_APP_URL,qg=MEDIA_PATH,Zg=PAGE_LEN,ci={Witness:Y==="en"?"Witness":"Témoin",Work:Y==="en"?"Work":"Œuvre",Series:Y==="en"?"Series":"Série d'imprimés",Regions:Y==="en"?"Region Extraction":"Extraction d'illustrations",User:Y==="en"?"User":"Utilisateur"},hr=DA(!1),$g=DA(""),AB=e=>typeof e=="string"||e instanceof String;async function qs(e){hr.set(!0);try{return await e()}finally{hr.set(!1)}}function Zs(e){return e.match(/\d+/g).toString()}function eB(e){return parseInt(Zs(e),10)}function tB(e,A=100){const t=Math.floor(A*.75);return e.length>A?e.slice(0,t)+"..."+e.slice(-A+t):e}function nB(){return jg??"http://localhost:8182"}function rB(){return zg??"http://localhost:8888"}function $s(e,A){if(typeof window<"u"){const t=parseInt(new URLSearchParams(window.location.search).get(A));if(!isNaN(t))return e.set(t),t}return e.set(1),1}function Ao(e,A,t){if(A.set(e),typeof window<"u"){const n=new URL(window.location.href);n.searchParams.set(t,e),window.history.pushState({},"",n)}}function iB(e=null){if(e)return e=e.split("_"),e.length<3?void 0:`${e.slice(0,3).join("_").replace(".jpg","")}.jpg`}function al(e=null){const A=iB(e);return A===void 0?void 0:`${nB()}/iiif/2/${A}`}function st(e=null,A=null,t="full"){if(A=AB(A)?A.replace(".jpg",""):A,!e)return"https://placehold.co/96x96/png?text=No+image";if(!e.startsWith("wit")){const[i,...s]=e.split("_wit");e=`wit${s}`}const n=al(e);if(n===void 0)return"https://placehold.co/96x96/png?text=No+image";const r=e.split("_");return A||(A=r[r.length-1].includes(",")?r.pop().replace(".jpg",""):"full"),`${n}/${A}/${t}/0/default.jpg`}function sB(e=null){return`${al(e)}/info.json`}function oB(e=null,A=1){return`${rB()}/index.html?iiif-content=${e}&canvas=${A}`}function Re(e,A=null,t=!1){return new Promise(n=>{if(document.getElementById("msg-modal")){t?document.getElementById("modal-footer").hidden=!1:n(void 0),A&&(document.getElementById("modal-title").innerHTML=A),document.getElementById("modal-msg").innerHTML=e,document.getElementById("hidden-msg-btn").click();const i=document.getElementById("cancel-btn"),s=document.getElementById("ok-btn"),o=document.getElementById("modal-bkg"),a=()=>{i.removeEventListener("click",l),o.removeEventListener("click",l),s.removeEventListener("click",c),document.getElementById("modal-footer").hidden=!0},l=()=>{a(),n(!1)},c=()=>{a(),n(!0)};i.addEventListener("click",l),s.addEventListener("click",c)}else t?n(window.confirm(e)):(window.alert(e),n(void 0))})}function ui(){let e,A,t=(n,r)=>n===r;return{set:n=>{A=e,e=n},setCompareFn:n=>t=n,get:()=>e,getNewAndOld:()=>[e,A],same:()=>t(e,A)}}const eo=(e,A)=>Array.isArray(e)&&Array.isArray(A)&&e.length===A.length&&e.every((t,n)=>t===A[n]||void 0);function aB(e){const t=[85,70,60],n=[50,65,40],r=e*137.5%360,i=t[e%t.length],s=n[Math.floor(e/t.length)%n.length];return`hsl(${Math.floor(r)}, ${i}%, ${s}%)`}function ll(e=null){return e<600?1:e<800?2:e<1e3?3:e<1200?4:e<1400?5:e>=1400?6:4}function to(e){const A=e.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button-close"),t=()=>e.classList.remove("is-active");A.forEach(r=>r.addEventListener("click",t));const n=r=>{r.key==="Escape"&&e.classList.contains("is-active")&&t()};return document.addEventListener("keydown",n),{destroy(){A.forEach(r=>r.removeEventListener("click",t)),document.removeEventListener("keydown",n)}}}function cl(e){const A=()=>{const t=document.getElementById(e.dataset.target);t==null||t.classList.add("is-active")};return e.addEventListener("click",A),{destroy(){e.removeEventListener("click",A)}}}function Nn(e,A,t="string",n=null){const r={string:s=>{const o=s.get(A);return o!==null?o:null},array:s=>{const o=s.get(A);return o?o.split(",").map(Number).filter(a=>!isNaN(a)):null},set:s=>{const o=s.get(A);return o?new Set(o.split(",").map(Number).filter(a=>!isNaN(a))):null},number:s=>{const o=s.get(A);return o!==null?Number(o):null},boolean:s=>{const o=s.get(A);return o!==null?o==="true":null}},i={string:(s,o)=>o?s.searchParams.set(A,o):s.searchParams.delete(A),array:(s,o)=>{o!=null&&o.length?s.searchParams.set(A,o.join(",")):s.searchParams.delete(A)},set:(s,o)=>{o!=null&&o.size?s.searchParams.set(A,Array.from(o).join(",")):s.searchParams.delete(A)},number:(s,o)=>{o!=null?s.searchParams.set(A,String(o)):s.searchParams.delete(A)},boolean:(s,o)=>o?s.searchParams.set(A,"true"):s.searchParams.delete(A)};if(typeof window<"u"){const s=new URLSearchParams(window.location.search),o=r[t](s);if(o!==null)e.set(o);else if(n!==null){const a=typeof n=="function"?n():n;e.set(a)}return a=>{const l=new URL(window.location);i[t](l,a),window.history.pushState({},"",l)}}return()=>{}}function lB(e){const A=e-1;return A*A*A+1}function Zt(e,{delay:A=0,duration:t=400,easing:n=Wa}={}){const r=+getComputedStyle(e).opacity;return{delay:A,duration:t,easing:n,css:i=>`opacity: ${i*r}`}}function ul(e,{delay:A=0,duration:t=400,easing:n=lB,axis:r="y"}={}){const i=getComputedStyle(e),s=+i.opacity,o=r==="y"?"height":"width",a=parseFloat(i[o]),l=r==="y"?["top","bottom"]:["left","right"],c=l.map(p=>`${p[0].toUpperCase()}${p.slice(1)}`),f=parseFloat(i[`padding${c[0]}`]),u=parseFloat(i[`padding${c[1]}`]),h=parseFloat(i[`margin${c[0]}`]),d=parseFloat(i[`margin${c[1]}`]),g=parseFloat(i[`border${c[0]}Width`]),B=parseFloat(i[`border${c[1]}Width`]);return{delay:A,duration:t,easing:n,css:p=>`overflow: hidden;opacity: ${Math.min(p*20,1)*s};${o}: ${p*a}px;padding-${l[0]}: ${p*f}px;padding-${l[1]}: ${p*u}px;margin-${l[0]}: ${p*h}px;margin-${l[1]}: ${p*d}px;border-${l[0]}-width: ${p*g}px;border-${l[1]}-width: ${p*B}px;`}}const rH="";function fl(e){let A,t,n;return{c(){A=C("div"),A.innerHTML='<div class="loader svelte-vizlcg"></div>',m(A,"class","bkg-shade svelte-vizlcg")},m(r,i){K(r,A,i),n=!0},i(r){n||($e(()=>{n&&(t||(t=Ft(A,Zt,{duration:150},!0)),t.run(1))}),n=!0)},o(r){t||(t=Ft(A,Zt,{duration:150},!1)),t.run(0),n=!1},d(r){r&&D(A),r&&t&&t.end()}}}function cB(e){let A,t,n=e[0]&&fl();return{c(){n&&n.c(),A=ke()},m(r,i){n&&n.m(r,i),K(r,A,i),t=!0},p(r,[i]){r[0]?n?i&1&&G(n,1):(n=fl(),n.c(),G(n,1),n.m(A.parentNode,A)):n&&($A(),W(n,1,1,()=>{n=null}),Ae())},i(r){t||(G(n),t=!0)},o(r){W(n),t=!1},d(r){n&&n.d(r),r&&D(A)}}}function uB(e,A,t){let n;return FA(e,hr,r=>t(0,n=r)),[n]}class fB extends PA{constructor(A){super(),RA(this,A,uB,cB,OA,{})}}const hB=e=>({}),hl=e=>({});function dB(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y;const U=e[1].content,S=ct(U,e,e[0],hl);return{c(){A=C("button"),t=R(),n=C("div"),r=C("div"),i=R(),s=C("div"),o=C("div"),o.innerHTML=`<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div>
            <button class="delete media-left" aria-label="close"></button>`,a=R(),l=C("section"),c=C("div"),f=R(),u=C("div"),S&&S.c(),h=R(),d=C("footer"),g=C("div"),B=C("button"),B.textContent=`${Y==="en"?"Abort":"Retour"}`,p=R(),Q=C("button"),Q.textContent="OK",m(A,"id","hidden-msg-btn"),m(A,"data-target","msg-modal"),A.hidden=!0,m(r,"id","modal-bkg"),m(r,"class","modal-background"),m(o,"class","modal-card-head media mb-0"),m(c,"id","modal-msg"),m(u,"class","py-3"),m(l,"id","modal-body"),m(l,"class","modal-card-body"),m(B,"id","cancel-btn"),m(B,"class","button is-link is-light button-close"),m(Q,"id","ok-btn"),m(Q,"class","button is-link button-close"),m(g,"class","buttons"),m(d,"id","modal-footer"),m(d,"class","modal-card-foot is-center pt-3"),d.hidden=!0,m(s,"class","modal-content"),m(n,"id","msg-modal"),m(n,"class","modal fade"),m(n,"tabindex","-1"),m(n,"aria-labelledby","selection-modal-label"),m(n,"aria-hidden","true")},m(_,b){K(_,A,b),K(_,t,b),K(_,n,b),w(n,r),w(n,i),w(n,s),w(s,o),w(s,a),w(s,l),w(l,c),w(l,f),w(l,u),S&&S.m(u,null),w(s,h),w(s,d),w(d,g),w(g,B),w(g,p),w(g,Q),F=!0,v||(y=[lr(cl.call(null,A)),lr(to.call(null,n))],v=!0)},p(_,[b]){S&&S.p&&(!F||b&1)&&ft(S,U,_,_[0],F?ut(U,_[0],b,hB):ht(_[0]),hl)},i(_){F||(G(S,_),F=!0)},o(_){W(S,_),F=!1},d(_){_&&D(A),_&&D(t),_&&D(n),S&&S.d(_),v=!1,Ce(y)}}}function gB(e,A,t){let{$$slots:n={},$$scope:r}=A;return e.$$set=i=>{"$$scope"in i&&t(0,r=i.$$scope)},[r,n]}class BB extends PA{constructor(A){super(),RA(this,A,gB,dB,OA,{})}}const iH="",pB=e=>({activeTab:e&8}),dl=e=>({activeTab:e[3]});function gl(e,A,t){const n=e.slice();return n[11]=A[t][0],n[12]=A[t][1],n}const mB=e=>({activeTab:e&8}),Bl=e=>({activeTab:e[3]}),wB=e=>({}),pl=e=>({});function vB(e){let A,t,n=Object.entries(e[2]),r=[];for(let i=0;i<n.length;i+=1)r[i]=ml(gl(e,n,i));return{c(){A=C("div"),t=C("ul");for(let i=0;i<r.length;i+=1)r[i].c();m(A,"class","tabs")},m(i,s){K(i,A,s),w(A,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,s){if(s&28){n=Object.entries(i[2]);let o;for(o=0;o<n.length;o+=1){const a=gl(i,n,o);r[o]?r[o].p(a,s):(r[o]=ml(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},i:tA,o:tA,d(i){i&&D(A),Se(r,i)}}}function CB(e){let A;const t=e[8].tabs,n=ct(t,e,e[7],Bl);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),A=!0},p(r,i){n&&n.p&&(!A||i&136)&&ft(n,t,r,r[7],A?ut(t,r[7],i,mB):ht(r[7]),Bl)},i(r){A||(G(n,r),A=!0)},o(r){W(n,r),A=!1},d(r){n&&n.d(r)}}}function ml(e){let A,t,n=e[12]+"",r,i,s,o;function a(){return e[9](e[11])}return{c(){A=C("li"),t=C("a"),r=sA(n),i=R(),m(t,"href",null),ZA(A,"is-active",e[3]===e[11])},m(l,c){K(l,A,c),w(A,t),w(t,r),w(A,i),s||(o=dA(t,"click",a),s=!0)},p(l,c){e=l,c&4&&n!==(n=e[12]+"")&&NA(r,n),c&12&&ZA(A,"is-active",e[3]===e[11])},d(l){l&&D(A),s=!1,o()}}}function QB(e){let A,t,n,r,i,s,o,a,l,c,f,u,h;A=new fB({});const d=e[8].sidebar,g=ct(d,e,e[7],pl),B=[CB,vB],p=[];function Q(y,U){return U&4&&(a=null),y[5].tabs?0:(a==null&&(a=!!Object.keys(y[2]).length),a?1:-1)}~(l=Q(e,-1))&&(c=p[l]=B[l](e));const F=e[8].content,v=ct(F,e,e[7],dl);return{c(){pA(A.$$.fragment),t=R(),n=C("div"),r=C("aside"),g&&g.c(),i=R(),s=C("main"),o=C("nav"),c&&c.c(),f=R(),u=C("div"),v&&v.c(),m(r,"class","sidebar svelte-jexg"),TA(r,"width",e[0]+"%"),TA(r,"min-height",e[1]),m(o,"id","tabs"),m(o,"class","tabs-bar svelte-jexg"),m(u,"class","content-area pl-5 svelte-jexg"),m(s,"class","main-content svelte-jexg"),TA(s,"width",100-e[0]+"%"),TA(s,"min-height",e[1]),m(n,"class","layout svelte-jexg"),TA(n,"min-height",e[1])},m(y,U){gA(A,y,U),K(y,t,U),K(y,n,U),w(n,r),g&&g.m(r,null),w(n,i),w(n,s),w(s,o),~l&&p[l].m(o,null),w(s,f),w(s,u),v&&v.m(u,null),h=!0},p(y,[U]){g&&g.p&&(!h||U&128)&&ft(g,d,y,y[7],h?ut(d,y[7],U,wB):ht(y[7]),pl),(!h||U&1)&&TA(r,"width",y[0]+"%");let S=l;l=Q(y,U),l===S?~l&&p[l].p(y,U):(c&&($A(),W(p[S],1,1,()=>{p[S]=null}),Ae()),~l?(c=p[l],c?c.p(y,U):(c=p[l]=B[l](y),c.c()),G(c,1),c.m(o,null)):c=null),v&&v.p&&(!h||U&136)&&ft(v,F,y,y[7],h?ut(F,y[7],U,pB):ht(y[7]),dl),(!h||U&1)&&TA(s,"width",100-y[0]+"%")},i(y){h||(G(A.$$.fragment,y),G(g,y),G(c),G(v,y),h=!0)},o(y){W(A.$$.fragment,y),W(g,y),W(c),W(v,y),h=!1},d(y){BA(A,y),y&&D(t),y&&D(n),g&&g.d(y),~l&&p[l].d(),v&&v.d(y)}}}function yB(e=null){e||(e=document.getElementById("navbar")),document.documentElement.style.setProperty("--top-offset",`${e.offsetHeight}px`)}function _B(e,A,t){let n,{$$slots:r={},$$scope:i}=A;const s=Eg(r);let{sidebarWidth:o="25"}=A;const a="90vh";let{tabList:l={}}=A,c=Object.keys(l),{topOffsetElement:f=null}=A;yB(f);function u(d){if(!c.includes(d)){console.warn(`Tab "${d}" is not available.`);return}t(3,n=d);const g=new URL(window.location);g.searchParams.set("tab",d),window.history.pushState({},"",g)}const h=d=>u(d);return e.$$set=d=>{"sidebarWidth"in d&&t(0,o=d.sidebarWidth),"tabList"in d&&t(2,l=d.tabList),"topOffsetElement"in d&&t(6,f=d.topOffsetElement),"$$scope"in d&&t(7,i=d.$$scope)},t(3,n=new URLSearchParams(window.location.search).get("tab")??c[0]??null),[o,a,l,n,u,s,f,i,r,h]}class UB extends PA{constructor(A){super(),RA(this,A,_B,QB,OA,{sidebarWidth:0,layoutHeight:1,tabList:2,topOffsetElement:6})}get layoutHeight(){return this.$$.ctx[1]}}const fi={0:{title:Y==="en"?"no categorization":"aucune catégorisation",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59 59">
        <rect x="1" y="0.62" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
    </svg>`},1:{title:Y==="en"?"overall visual matches":"correspondances visuelles globales",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 68 69">
        <rect x="10" y="10.62" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="1" y="1" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="10" y="10.62" width="46" height="45.71" rx="4.11" ry="4.11" fill="currentColor" stroke="none"/>
    </svg>`},2:{title:Y==="en"?"visual matches on part of the image":"correspondances visuelles sur une partie de l'image",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 71">
        <rect x="12" y="12.43" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M 12 21.43 L 21 12.43" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 12 30 L 30 12.43" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 40 56 L 57 38" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 48.3 56.29 L 57 47" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 12 39 L 39 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 12 48 L 48 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 13 56 L 57 12" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 31 56 L 57 29" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 21 57 L 57 21" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
    </svg>`},3:{title:Y==="en"?"semantic and non-visual matches":"correspondances sémantiques et non-visuelle",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 72 73">
        <rect x="14" y="14.43" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3" stroke-dasharray="9 9"/>
        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
    </svg>`},4:{title:Y==="en"?"regions without match":"régions sans correspondance",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59 59">
        <rect x="1" y="0.62" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M 2.67 54.55 L 55 2" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
        <path d="M 54.37 54.05 L 2.72 2.24" fill="none" stroke="currentColor" stroke-width="3" stroke-miterlimit="10"/>
    </svg>`},5:{title:Y==="en"?"user specific category":"correspondances spécifiques à l'utilisateur",svg:`<svg class="svg-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 59 59">
        <rect x="1" y="0.81" width="55.71" height="55.71" rx="5.01" ry="5.01" fill="none" stroke="currentColor" stroke-width="3"/>
        <path d="M 8.69 55.28 C 9.25 44.15 18.08 35.28 28.86 35.28 C 32.5 35.28 36.07 36.3 39.18 38.25 C 44.96 41.85 48.66 48.3 49.02 55.28 Z M 17.85 21.48 C 17.85 15.37 22.79 10.39 28.86 10.39 C 34.92 10.39 39.86 15.37 39.86 21.48 C 39.86 27.59 34.92 32.56 28.86 32.56 C 22.79 32.56 17.85 27.59 17.85 21.48 Z M 40.37 36.34 C 38.43 35.13 36.32 34.25 34.13 33.7 C 38.82 31.64 42.1 26.94 42.1 21.48 C 42.1 14.13 36.16 8.15 28.86 8.15 C 21.55 8.15 15.61 14.13 15.61 21.48 C 15.61 26.95 18.9 31.66 23.6 33.71 C 13.76 36.18 6.41 45.4 6.41 56.4 C 6.41 57.02 6.92 57.52 7.54 57.52 L 50.17 57.52 C 50.79 57.52 51.3 57.02 51.3 56.4 C 51.3 48.23 47.11 40.54 40.37 36.34 Z" fill="currentColor" stroke="none"/>
    </svg>`}};function FB(e){let A,t=fi[e[2]].svg+"",n,r,i,s;return{c(){A=C("span"),m(A,"class",n="tag py-4 "+e[4]+" "+(e[0]?"is-hoverable":"")),m(A,"title",r=fi[e[2]].title),ZA(A,"is-selected",e[1])},m(o,a){K(o,A,a),A.innerHTML=t,i||(s=[dA(A,"click",e[5]),dA(A,"keyup",null)],i=!0)},p(o,[a]){a&4&&t!==(t=fi[o[2]].svg+"")&&(A.innerHTML=t),a&17&&n!==(n="tag py-4 "+o[4]+" "+(o[0]?"is-hoverable":""))&&m(A,"class",n),a&4&&r!==(r=fi[o[2]].title)&&m(A,"title",r),a&19&&ZA(A,"is-selected",o[1])},i:tA,o:tA,d(o){o&&D(A),i=!1,Ce(s)}}}function bB(e,A,t){let{selectable:n=!0}=A,{isSelected:r=!1}=A,{category:i}=A,{toggle:s=()=>{}}=A,{padding:o="px-2"}=A;const a=()=>s(i);return e.$$set=l=>{"selectable"in l&&t(0,n=l.selectable),"isSelected"in l&&t(1,r=l.isSelected),"category"in l&&t(2,i=l.category),"toggle"in l&&t(3,s=l.toggle),"padding"in l&&t(4,o=l.padding)},[n,r,i,s,o,a]}class Rn extends PA{constructor(A){super(),RA(this,A,bB,FB,OA,{selectable:0,isSelected:1,category:2,toggle:3,padding:4})}}const mH="";function wl(e){let A,t,n=e[3].title+"",r,i;return{c(){A=C("span"),t=C("a"),r=sA(n),m(t,"href",i=`${li}/${wt}/witness/${e[3].witnessId}/regions/${e[1]}`),m(t,"target","_blank"),m(A,"class","legend-label svelte-w1sf17")},m(s,o){K(s,A,o),w(A,t),w(t,r)},p(s,o){o&8&&n!==(n=s[3].title+"")&&NA(r,n),o&10&&i!==(i=`${li}/${wt}/witness/${s[3].witnessId}/regions/${s[1]}`)&&m(t,"href",i)},d(s){s&&D(A)}}}function EB(e){let A,t,n,r,i,s,o,a,l,c=!e[5]&&wl(e);return{c(){A=C("div"),t=C("span"),n=R(),r=C("span"),o=R(),c&&c.c(),m(t,"class","legend-nb svelte-w1sf17"),m(r,"class","legend-color svelte-w1sf17"),m(r,"aria-label",i=e[3].title),m(r,"title",s=e[3].title),TA(r,"background-color",e[0]?e[3].color:"#999"),m(r,"role","button"),m(r,"tabindex","0"),ZA(r,"inactive",!e[0]),ZA(r,"clickable",e[4]),m(A,"class","legend-item svelte-w1sf17"),ZA(A,"inactive",!e[0])},m(f,u){K(f,A,u),w(A,t),w(A,n),w(A,r),w(A,o),c&&c.m(A,null),a||(l=[dA(r,"click",function(){Hn(e[2])&&e[2].apply(this,arguments)}),dA(r,"keydown",null)],a=!0)},p(f,[u]){e=f,u&8&&i!==(i=e[3].title)&&m(r,"aria-label",i),u&8&&s!==(s=e[3].title)&&m(r,"title",s),u&9&&TA(r,"background-color",e[0]?e[3].color:"#999"),u&1&&ZA(r,"inactive",!e[0]),u&16&&ZA(r,"clickable",e[4]),e[5]?c&&(c.d(1),c=null):c?c.p(e,u):(c=wl(e),c.c(),c.m(A,null)),u&1&&ZA(A,"inactive",!e[0])},i:tA,o:tA,d(f){f&&D(A),c&&c.d(),a=!1,Ce(l)}}}function IB(e,A,t){let{isActive:n=!0}=A,{id:r}=A,{toggle:i=()=>{}}=A,{meta:s={title:"Region",color:"#999",witnessId:1}}=A,{clickable:o=!0}=A,{onlyColor:a=!1}=A;return e.$$set=l=>{"isActive"in l&&t(0,n=l.isActive),"id"in l&&t(1,r=l.id),"toggle"in l&&t(2,i=l.toggle),"meta"in l&&t(3,s=l.meta),"clickable"in l&&t(4,o=l.clickable),"onlyColor"in l&&t(5,a=l.onlyColor)},[n,r,i,s,o,a]}class vl extends PA{constructor(A){super(),RA(this,A,IB,EB,OA,{isActive:0,id:1,toggle:2,meta:3,clickable:4,onlyColor:5})}}const wH="";function Cl(e,A,t){const n=e.slice();return n[12]=A[t][0],n[13]=A[t][1],n}function HB(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-down"></i>',m(A,"class","icon is-small")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function SB(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-up"></i>',m(A,"class","icon is-small")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function Ql(e){let A,t;function n(){return e[10](e[12])}return A=new vl({props:{id:e[12],meta:e[13],isActive:e[0].has(parseInt(e[12])),toggle:n,onlyColor:!e[4]}}),{c(){pA(A.$$.fragment)},m(r,i){gA(A,r,i),t=!0},p(r,i){e=r;const s={};i&32&&(s.id=e[12]),i&32&&(s.meta=e[13]),i&33&&(s.isActive=e[0].has(parseInt(e[12]))),i&34&&(s.toggle=n),i&16&&(s.onlyColor=!e[4]),A.$set(s)},i(r){t||(G(A.$$.fragment,r),t=!0)},o(r){W(A.$$.fragment,r),t=!1},d(r){BA(A,r)}}}function xB(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,S,_,b,T,x;function k(O,V){return O[4]?SB:HB}let M=k(e),E=M(e),P=e[5],I=[];for(let O=0;O<P.length;O+=1)I[O]=Ql(Cl(e,P,O));const X=O=>W(I[O],1,1,()=>{I[O]=null});return{c(){A=C("div"),t=C("div"),n=C("div"),r=C("div"),i=C("h3"),i.textContent=`${Y==="en"?"Visible documents":"Documents visibles"}`,s=R(),o=C("div"),a=C("div"),l=C("p"),c=C("span"),f=C("select"),u=C("option"),u.textContent="ID",h=C("option"),h.textContent=`${ci.Witness}`,d=C("option"),d.textContent=`${Y==="en"?"Title":"Titre"}`,g=R(),B=C("p"),p=C("button"),p.innerHTML='<span class="icon is-small has-text-link pl-2"><i class="fas fa-check"></i></span>',Q=R(),F=C("div"),v=C("button"),E.c(),S=R(),_=C("div");for(let O=0;O<I.length;O+=1)I[O].c();m(i,"class","title mb-0"),m(r,"class","level-item"),m(n,"class","level-left"),u.__value="id",u.value=u.__value,h.__value="witnessId",h.value=h.__value,d.__value="title",d.value=d.__value,e[3]===void 0&&$e(()=>e[7].call(f)),m(c,"class","select is-small"),m(l,"class","control mb-0"),m(l,"title",Y==="en"?"Sort documents by":"Trier les documents par"),m(p,"class","button is-small is-shadowless"),m(B,"class","control"),m(B,"title",Y==="en"?"Select all documents":"Sélectionner tous les documents"),m(a,"class","level-item mb-0 field has-addons is-small"),m(v,"class","button is-small is-ghost"),m(v,"aria-label",y=e[4]?"Minify legend":"Expand legend"),m(F,"class","level-item"),m(F,"title",U=e[4]?"Minify legend":"Expand legend"),m(o,"class","level-right"),m(t,"class","level is-mobile mb-3"),m(_,"class","svelte-13ym7ov"),ZA(_,"is-condensed",!e[4]),ZA(_,"is-expanded",e[4])},m(O,V){K(O,A,V),w(A,t),w(t,n),w(n,r),w(r,i),w(t,s),w(t,o),w(o,a),w(a,l),w(l,c),w(c,f),w(f,u),w(f,h),w(f,d),zt(f,e[3],!0),w(a,g),w(a,B),w(B,p),w(o,Q),w(o,F),w(F,v),E.m(v,null),w(A,S),w(A,_);for(let J=0;J<I.length;J+=1)I[J]&&I[J].m(_,null);b=!0,T||(x=[dA(f,"change",e[7]),dA(p,"click",e[8]),dA(v,"click",e[9])],T=!0)},p(O,[V]){if(V&8&&zt(f,O[3]),M!==(M=k(O))&&(E.d(1),E=M(O),E&&(E.c(),E.m(v,null))),(!b||V&16&&y!==(y=O[4]?"Minify legend":"Expand legend"))&&m(v,"aria-label",y),(!b||V&16&&U!==(U=O[4]?"Minify legend":"Expand legend"))&&m(F,"title",U),V&51){P=O[5];let J;for(J=0;J<P.length;J+=1){const eA=Cl(O,P,J);I[J]?(I[J].p(eA,V),G(I[J],1)):(I[J]=Ql(eA),I[J].c(),G(I[J],1),I[J].m(_,null))}for($A(),J=P.length;J<I.length;J+=1)X(J);Ae()}(!b||V&16)&&ZA(_,"is-condensed",!O[4]),(!b||V&16)&&ZA(_,"is-expanded",O[4])},i(O){if(!b){for(let V=0;V<P.length;V+=1)G(I[V]);b=!0}},o(O){I=I.filter(Boolean);for(let V=0;V<I.length;V+=1)W(I[V]);b=!1},d(O){O&&D(A),E.d(),Se(I,O),T=!1,Ce(x)}}}function LB(e,A,t){let n,{documentNodes:r}=A,{selectedRegions:i}=A,{toggleRegion:s}=A,{selectAllRegions:o}=A,a=!0,l="id";const c={id:(g,B)=>g[0]-B[0],witnessId:(g,B)=>(g[1].witnessId||0)-(B[1].witnessId||0),title:(g,B)=>(g[1].title||"").localeCompare(B[1].title||"")};function f(){l=ti(this),t(3,l)}const u=()=>o(),h=()=>t(4,a=!a),d=g=>s(parseInt(g));return e.$$set=g=>{"documentNodes"in g&&t(6,r=g.documentNodes),"selectedRegions"in g&&t(0,i=g.selectedRegions),"toggleRegion"in g&&t(1,s=g.toggleRegion),"selectAllRegions"in g&&t(2,o=g.selectAllRegions)},e.$$.update=()=>{e.$$.dirty&72&&t(5,n=Array.from(r||new Map).sort(c[l]))},[i,s,o,l,a,n,r,f,u,h,d]}class kB extends PA{constructor(A){super(),RA(this,A,LB,xB,OA,{documentNodes:6,selectedRegions:0,toggleRegion:1,selectAllRegions:2})}}var $t;(function(e){e.Range="range",e.Steps="steps",e.Positions="positions",e.Count="count",e.Values="values"})($t||($t={}));var We;(function(e){e[e.None=-1]="None",e[e.NoValue=0]="NoValue",e[e.LargeValue=1]="LargeValue",e[e.SmallValue=2]="SmallValue"})(We||(We={}));function MB(e){return hi(e)&&typeof e.from=="function"}function hi(e){return typeof e=="object"&&typeof e.to=="function"}function yl(e){e.parentElement.removeChild(e)}function no(e){return e!=null}function _l(e){e.preventDefault()}function TB(e){return e.filter(function(A){return this[A]?!1:this[A]=!0},{})}function DB(e,A){return Math.round(e/A)*A}function KB(e,A){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.documentElement,i=bl(n);return/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(i.x=0),A?t.top+i.y-r.clientTop:t.left+i.x-r.clientLeft}function vt(e){return typeof e=="number"&&!isNaN(e)&&isFinite(e)}function Ul(e,A,t){t>0&&(Pe(e,A),setTimeout(function(){gi(e,A)},t))}function Fl(e){return Math.max(Math.min(e,100),0)}function di(e){return Array.isArray(e)?e:[e]}function OB(e){e=String(e);var A=e.split(".");return A.length>1?A[1].length:0}function Pe(e,A){e.classList&&!/\s/.test(A)?e.classList.add(A):e.className+=" "+A}function gi(e,A){e.classList&&!/\s/.test(A)?e.classList.remove(A):e.className=e.className.replace(new RegExp("(^|\\b)"+A.split(" ").join("|")+"(\\b|$)","gi")," ")}function NB(e,A){return e.classList?e.classList.contains(A):new RegExp("\\b"+A+"\\b").test(e.className)}function bl(e){var A=window.pageXOffset!==void 0,t=(e.compatMode||"")==="CSS1Compat",n=A?window.pageXOffset:t?e.documentElement.scrollLeft:e.body.scrollLeft,r=A?window.pageYOffset:t?e.documentElement.scrollTop:e.body.scrollTop;return{x:n,y:r}}function RB(){return window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"}}function PB(){var e=!1;try{var A=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,A)}catch{}return e}function VB(){return window.CSS&&CSS.supports&&CSS.supports("touch-action","none")}function ro(e,A){return 100/(A-e)}function io(e,A,t){return A*100/(e[t+1]-e[t])}function GB(e,A){return io(e,e[0]<0?A+Math.abs(e[0]):A-e[0],0)}function XB(e,A){return A*(e[1]-e[0])/100+e[0]}function dr(e,A){for(var t=1;e>=A[t];)t+=1;return t}function JB(e,A,t){if(t>=e.slice(-1)[0])return 100;var n=dr(t,e),r=e[n-1],i=e[n],s=A[n-1],o=A[n];return s+GB([r,i],t)/ro(s,o)}function WB(e,A,t){if(t>=100)return e.slice(-1)[0];var n=dr(t,A),r=e[n-1],i=e[n],s=A[n-1],o=A[n];return XB([r,i],(t-s)*ro(s,o))}function YB(e,A,t,n){if(n===100)return n;var r=dr(n,e),i=e[r-1],s=e[r];return t?n-i>(s-i)/2?s:i:A[r-1]?e[r-1]+DB(n-e[r-1],A[r-1]):n}var El=function(){function e(A,t,n){this.xPct=[],this.xVal=[],this.xSteps=[],this.xNumSteps=[],this.xHighestCompleteStep=[],this.xSteps=[n||!1],this.xNumSteps=[!1],this.snap=t;var r,i=[];for(Object.keys(A).forEach(function(s){i.push([di(A[s]),s])}),i.sort(function(s,o){return s[0][0]-o[0][0]}),r=0;r<i.length;r++)this.handleEntryPoint(i[r][1],i[r][0]);for(this.xNumSteps=this.xSteps.slice(0),r=0;r<this.xNumSteps.length;r++)this.handleStepPoint(r,this.xNumSteps[r])}return e.prototype.getDistance=function(A){for(var t=[],n=0;n<this.xNumSteps.length-1;n++)t[n]=io(this.xVal,A,n);return t},e.prototype.getAbsoluteDistance=function(A,t,n){var r=0;if(A<this.xPct[this.xPct.length-1])for(;A>this.xPct[r+1];)r++;else A===this.xPct[this.xPct.length-1]&&(r=this.xPct.length-2);!n&&A===this.xPct[r+1]&&r++,t===null&&(t=[]);var i,s=1,o=t[r],a=0,l=0,c=0,f=0;for(n?i=(A-this.xPct[r])/(this.xPct[r+1]-this.xPct[r]):i=(this.xPct[r+1]-A)/(this.xPct[r+1]-this.xPct[r]);o>0;)a=this.xPct[r+1+f]-this.xPct[r+f],t[r+f]*s+100-i*100>100?(l=a*i,s=(o-100*i)/t[r+f],i=1):(l=t[r+f]*a/100*s,s=0),n?(c=c-l,this.xPct.length+f>=1&&f--):(c=c+l,this.xPct.length-f>=1&&f++),o=t[r+f]*s;return A+c},e.prototype.toStepping=function(A){return A=JB(this.xVal,this.xPct,A),A},e.prototype.fromStepping=function(A){return WB(this.xVal,this.xPct,A)},e.prototype.getStep=function(A){return A=YB(this.xPct,this.xSteps,this.snap,A),A},e.prototype.getDefaultStep=function(A,t,n){var r=dr(A,this.xPct);return(A===100||t&&A===this.xPct[r-1])&&(r=Math.max(r-1,1)),(this.xVal[r]-this.xVal[r-1])/n},e.prototype.getNearbySteps=function(A){var t=dr(A,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},e.prototype.countStepDecimals=function(){var A=this.xNumSteps.map(OB);return Math.max.apply(null,A)},e.prototype.hasNoSize=function(){return this.xVal[0]===this.xVal[this.xVal.length-1]},e.prototype.convert=function(A){return this.getStep(this.toStepping(A))},e.prototype.handleEntryPoint=function(A,t){var n;if(A==="min"?n=0:A==="max"?n=100:n=parseFloat(A),!vt(n)||!vt(t[0]))throw new Error("noUiSlider: 'range' value isn't numeric.");this.xPct.push(n),this.xVal.push(t[0]);var r=Number(t[1]);n?this.xSteps.push(isNaN(r)?!1:r):isNaN(r)||(this.xSteps[0]=r),this.xHighestCompleteStep.push(0)},e.prototype.handleStepPoint=function(A,t){if(t){if(this.xVal[A]===this.xVal[A+1]){this.xSteps[A]=this.xHighestCompleteStep[A]=this.xVal[A];return}this.xSteps[A]=io([this.xVal[A],this.xVal[A+1]],t,0)/ro(this.xPct[A],this.xPct[A+1]);var n=(this.xVal[A+1]-this.xVal[A])/this.xNumSteps[A],r=Math.ceil(Number(n.toFixed(3))-1),i=this.xVal[A]+this.xNumSteps[A]*r;this.xHighestCompleteStep[A]=i}},e}(),Il={to:function(e){return e===void 0?"":e.toFixed(2)},from:Number},Hl={target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",textDirectionLtr:"txt-dir-ltr",textDirectionRtl:"txt-dir-rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"},An={tooltips:".__tooltips",aria:".__aria"};function zB(e,A){if(!vt(A))throw new Error("noUiSlider: 'step' is not numeric.");e.singleStep=A}function jB(e,A){if(!vt(A))throw new Error("noUiSlider: 'keyboardPageMultiplier' is not numeric.");e.keyboardPageMultiplier=A}function qB(e,A){if(!vt(A))throw new Error("noUiSlider: 'keyboardMultiplier' is not numeric.");e.keyboardMultiplier=A}function ZB(e,A){if(!vt(A))throw new Error("noUiSlider: 'keyboardDefaultStep' is not numeric.");e.keyboardDefaultStep=A}function $B(e,A){if(typeof A!="object"||Array.isArray(A))throw new Error("noUiSlider: 'range' is not an object.");if(A.min===void 0||A.max===void 0)throw new Error("noUiSlider: Missing 'min' or 'max' in 'range'.");e.spectrum=new El(A,e.snap||!1,e.singleStep)}function Ap(e,A){if(A=di(A),!Array.isArray(A)||!A.length)throw new Error("noUiSlider: 'start' option is incorrect.");e.handles=A.length,e.start=A}function ep(e,A){if(typeof A!="boolean")throw new Error("noUiSlider: 'snap' option must be a boolean.");e.snap=A}function tp(e,A){if(typeof A!="boolean")throw new Error("noUiSlider: 'animate' option must be a boolean.");e.animate=A}function np(e,A){if(typeof A!="number")throw new Error("noUiSlider: 'animationDuration' option must be a number.");e.animationDuration=A}function Sl(e,A){var t=[!1],n;if(A==="lower"?A=[!0,!1]:A==="upper"&&(A=[!1,!0]),A===!0||A===!1){for(n=1;n<e.handles;n++)t.push(A);t.push(!1)}else{if(!Array.isArray(A)||!A.length||A.length!==e.handles+1)throw new Error("noUiSlider: 'connect' option doesn't match handle count.");t=A}e.connect=t}function rp(e,A){switch(A){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider: 'orientation' option is invalid.")}}function xl(e,A){if(!vt(A))throw new Error("noUiSlider: 'margin' option must be numeric.");A!==0&&(e.margin=e.spectrum.getDistance(A))}function ip(e,A){if(!vt(A))throw new Error("noUiSlider: 'limit' option must be numeric.");if(e.limit=e.spectrum.getDistance(A),!e.limit||e.handles<2)throw new Error("noUiSlider: 'limit' option is only supported on linear sliders with 2 or more handles.")}function sp(e,A){var t;if(!vt(A)&&!Array.isArray(A))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(A)&&!(A.length===2||vt(A[0])||vt(A[1])))throw new Error("noUiSlider: 'padding' option must be numeric or array of exactly 2 numbers.");if(A!==0){for(Array.isArray(A)||(A=[A,A]),e.padding=[e.spectrum.getDistance(A[0]),e.spectrum.getDistance(A[1])],t=0;t<e.spectrum.xNumSteps.length-1;t++)if(e.padding[0][t]<0||e.padding[1][t]<0)throw new Error("noUiSlider: 'padding' option must be a positive number(s).");var n=A[0]+A[1],r=e.spectrum.xVal[0],i=e.spectrum.xVal[e.spectrum.xVal.length-1];if(n/(i-r)>1)throw new Error("noUiSlider: 'padding' option must not exceed 100% of the range.")}}function op(e,A){switch(A){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider: 'direction' option was not recognized.")}}function ap(e,A){if(typeof A!="string")throw new Error("noUiSlider: 'behaviour' must be a string containing options.");var t=A.indexOf("tap")>=0,n=A.indexOf("drag")>=0,r=A.indexOf("fixed")>=0,i=A.indexOf("snap")>=0,s=A.indexOf("hover")>=0,o=A.indexOf("unconstrained")>=0,a=A.indexOf("invert-connects")>=0,l=A.indexOf("drag-all")>=0,c=A.indexOf("smooth-steps")>=0;if(r){if(e.handles!==2)throw new Error("noUiSlider: 'fixed' behaviour must be used with 2 handles");xl(e,e.start[1]-e.start[0])}if(a&&e.handles!==2)throw new Error("noUiSlider: 'invert-connects' behaviour must be used with 2 handles");if(o&&(e.margin||e.limit))throw new Error("noUiSlider: 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:t||i,drag:n,dragAll:l,smoothSteps:c,fixed:r,snap:i,hover:s,unconstrained:o,invertConnects:a}}function lp(e,A){if(A!==!1)if(A===!0||hi(A)){e.tooltips=[];for(var t=0;t<e.handles;t++)e.tooltips.push(A)}else{if(A=di(A),A.length!==e.handles)throw new Error("noUiSlider: must pass a formatter for all handles.");A.forEach(function(n){if(typeof n!="boolean"&&!hi(n))throw new Error("noUiSlider: 'tooltips' must be passed a formatter or 'false'.")}),e.tooltips=A}}function cp(e,A){if(A.length!==e.handles)throw new Error("noUiSlider: must pass a attributes for all handles.");e.handleAttributes=A}function up(e,A){if(!hi(A))throw new Error("noUiSlider: 'ariaFormat' requires 'to' method.");e.ariaFormat=A}function fp(e,A){if(!MB(A))throw new Error("noUiSlider: 'format' requires 'to' and 'from' methods.");e.format=A}function hp(e,A){if(typeof A!="boolean")throw new Error("noUiSlider: 'keyboardSupport' option must be a boolean.");e.keyboardSupport=A}function dp(e,A){e.documentElement=A}function gp(e,A){if(typeof A!="string"&&A!==!1)throw new Error("noUiSlider: 'cssPrefix' must be a string or `false`.");e.cssPrefix=A}function Bp(e,A){if(typeof A!="object")throw new Error("noUiSlider: 'cssClasses' must be an object.");typeof e.cssPrefix=="string"?(e.cssClasses={},Object.keys(A).forEach(function(t){e.cssClasses[t]=e.cssPrefix+A[t]})):e.cssClasses=A}function Ll(e){var A={margin:null,limit:null,padding:null,animate:!0,animationDuration:300,ariaFormat:Il,format:Il},t={step:{r:!1,t:zB},keyboardPageMultiplier:{r:!1,t:jB},keyboardMultiplier:{r:!1,t:qB},keyboardDefaultStep:{r:!1,t:ZB},start:{r:!0,t:Ap},connect:{r:!0,t:Sl},direction:{r:!0,t:op},snap:{r:!1,t:ep},animate:{r:!1,t:tp},animationDuration:{r:!1,t:np},range:{r:!0,t:$B},orientation:{r:!1,t:rp},margin:{r:!1,t:xl},limit:{r:!1,t:ip},padding:{r:!1,t:sp},behaviour:{r:!0,t:ap},ariaFormat:{r:!1,t:up},format:{r:!1,t:fp},tooltips:{r:!1,t:lp},keyboardSupport:{r:!0,t:hp},documentElement:{r:!1,t:dp},cssPrefix:{r:!0,t:gp},cssClasses:{r:!0,t:Bp},handleAttributes:{r:!1,t:cp}},n={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:Hl,keyboardPageMultiplier:5,keyboardMultiplier:1,keyboardDefaultStep:10};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(t).forEach(function(a){if(!no(e[a])&&n[a]===void 0){if(t[a].r)throw new Error("noUiSlider: '"+a+"' is required.");return}t[a].t(A,no(e[a])?e[a]:n[a])}),A.pips=e.pips;var r=document.createElement("div"),i=r.style.msTransform!==void 0,s=r.style.transform!==void 0;A.transformRule=s?"transform":i?"msTransform":"webkitTransform";var o=[["left","top"],["right","bottom"]];return A.style=o[A.dir][A.ort],A}function pp(e,A,t){var n=RB(),r=VB(),i=r&&PB(),s=e,o,a,l,c,f,u,h=A.spectrum,d=[],g=[],B=[],p=0,Q={},F=!1,v=e.ownerDocument,y=A.documentElement||v.documentElement,U=v.body,S=v.dir==="rtl"||A.ort===1?0:100;function _(H,L){var N=v.createElement("div");return L&&Pe(N,L),H.appendChild(N),N}function b(H,L){var N=_(H,A.cssClasses.origin),$=_(N,A.cssClasses.handle);if(_($,A.cssClasses.touchArea),$.setAttribute("data-handle",String(L)),A.keyboardSupport&&($.setAttribute("tabindex","0"),$.addEventListener("keydown",function(rA){return WA(rA,L)})),A.handleAttributes!==void 0){var AA=A.handleAttributes[L];Object.keys(AA).forEach(function(rA){$.setAttribute(rA,AA[rA])})}return $.setAttribute("role","slider"),$.setAttribute("aria-orientation",A.ort?"vertical":"horizontal"),L===0?Pe($,A.cssClasses.handleLower):L===A.handles-1&&Pe($,A.cssClasses.handleUpper),N.handle=$,N}function T(H,L){return L?_(H,A.cssClasses.connect):!1}function x(H,L){a=_(L,A.cssClasses.connects),l=[],c=[],c.push(T(a,H[0]));for(var N=0;N<A.handles;N++)l.push(b(L,N)),B[N]=N,c.push(T(a,H[N+1]))}function k(H){Pe(H,A.cssClasses.target),A.dir===0?Pe(H,A.cssClasses.ltr):Pe(H,A.cssClasses.rtl),A.ort===0?Pe(H,A.cssClasses.horizontal):Pe(H,A.cssClasses.vertical);var L=getComputedStyle(H).direction;return L==="rtl"?Pe(H,A.cssClasses.textDirectionRtl):Pe(H,A.cssClasses.textDirectionLtr),_(H,A.cssClasses.base)}function M(H,L){return!A.tooltips||!A.tooltips[L]?!1:_(H.firstChild,A.cssClasses.tooltip)}function E(){return s.hasAttribute("disabled")}function P(H){var L=l[H];return L.hasAttribute("disabled")}function I(H){H!=null?(l[H].setAttribute("disabled",""),l[H].handle.removeAttribute("tabindex")):(s.setAttribute("disabled",""),l.forEach(function(L){L.handle.removeAttribute("tabindex")}))}function X(H){H!=null?(l[H].removeAttribute("disabled"),l[H].handle.setAttribute("tabindex","0")):(s.removeAttribute("disabled"),l.forEach(function(L){L.removeAttribute("disabled"),L.handle.setAttribute("tabindex","0")}))}function O(){u&&(de("update"+An.tooltips),u.forEach(function(H){H&&yl(H)}),u=null)}function V(){O(),u=l.map(M),me("update"+An.tooltips,function(H,L,N){if(!(!u||!A.tooltips)&&u[L]!==!1){var $=H[L];A.tooltips[L]!==!0&&($=A.tooltips[L].to(N[L])),u[L].innerHTML=$}})}function J(){de("update"+An.aria),me("update"+An.aria,function(H,L,N,$,AA){B.forEach(function(rA){var vA=l[rA],uA=Te(g,rA,0,!0,!0,!0),ie=Te(g,rA,100,!0,!0,!0),se=AA[rA],fe=String(A.ariaFormat.to(N[rA]));uA=h.fromStepping(uA).toFixed(1),ie=h.fromStepping(ie).toFixed(1),se=h.fromStepping(se).toFixed(1),vA.children[0].setAttribute("aria-valuemin",uA),vA.children[0].setAttribute("aria-valuemax",ie),vA.children[0].setAttribute("aria-valuenow",se),vA.children[0].setAttribute("aria-valuetext",fe)})})}function eA(H){if(H.mode===$t.Range||H.mode===$t.Steps)return h.xVal;if(H.mode===$t.Count){if(H.values<2)throw new Error("noUiSlider: 'values' (>= 2) required for mode 'count'.");for(var L=H.values-1,N=100/L,$=[];L--;)$[L]=L*N;return $.push(100),oA($,H.stepped)}return H.mode===$t.Positions?oA(H.values,H.stepped):H.mode===$t.Values?H.stepped?H.values.map(function(AA){return h.fromStepping(h.getStep(h.toStepping(AA)))}):H.values:[]}function oA(H,L){return H.map(function(N){return h.fromStepping(L?h.getStep(N):N)})}function wA(H){function L(se,fe){return Number((se+fe).toFixed(7))}var N=eA(H),$={},AA=h.xVal[0],rA=h.xVal[h.xVal.length-1],vA=!1,uA=!1,ie=0;return N=TB(N.slice().sort(function(se,fe){return se-fe})),N[0]!==AA&&(N.unshift(AA),vA=!0),N[N.length-1]!==rA&&(N.push(rA),uA=!0),N.forEach(function(se,fe){var he,QA,re,hA=se,IA=N[fe+1],HA,rt,it,Yt,dn,In,_g,Ug=H.mode===$t.Steps;for(Ug&&(he=h.xNumSteps[fe]),he||(he=IA-hA),IA===void 0&&(IA=hA),he=Math.max(he,1e-7),QA=hA;QA<=IA;QA=L(QA,he)){for(HA=h.toStepping(QA),rt=HA-ie,dn=rt/(H.density||1),In=Math.round(dn),_g=rt/In,re=1;re<=In;re+=1)it=ie+re*_g,$[it.toFixed(5)]=[h.fromStepping(it),0];Yt=N.indexOf(QA)>-1?We.LargeValue:Ug?We.SmallValue:We.NoValue,!fe&&vA&&QA!==IA&&(Yt=0),QA===IA&&uA||($[HA.toFixed(5)]=[QA,Yt]),ie=HA}}),$}function cA(H,L,N){var $,AA,rA=v.createElement("div"),vA=($={},$[We.None]="",$[We.NoValue]=A.cssClasses.valueNormal,$[We.LargeValue]=A.cssClasses.valueLarge,$[We.SmallValue]=A.cssClasses.valueSub,$),uA=(AA={},AA[We.None]="",AA[We.NoValue]=A.cssClasses.markerNormal,AA[We.LargeValue]=A.cssClasses.markerLarge,AA[We.SmallValue]=A.cssClasses.markerSub,AA),ie=[A.cssClasses.valueHorizontal,A.cssClasses.valueVertical],se=[A.cssClasses.markerHorizontal,A.cssClasses.markerVertical];Pe(rA,A.cssClasses.pips),Pe(rA,A.ort===0?A.cssClasses.pipsHorizontal:A.cssClasses.pipsVertical);function fe(QA,re){var hA=re===A.cssClasses.value,IA=hA?ie:se,HA=hA?vA:uA;return re+" "+IA[A.ort]+" "+HA[QA]}function he(QA,re,hA){if(hA=L?L(re,hA):hA,hA!==We.None){var IA=_(rA,!1);IA.className=fe(hA,A.cssClasses.marker),IA.style[A.style]=QA+"%",hA>We.NoValue&&(IA=_(rA,!1),IA.className=fe(hA,A.cssClasses.value),IA.setAttribute("data-value",String(re)),IA.style[A.style]=QA+"%",IA.innerHTML=String(N.to(re)))}}return Object.keys(H).forEach(function(QA){he(QA,H[QA][0],H[QA][1])}),rA}function yA(){f&&(yl(f),f=null)}function xA(H){yA();var L=wA(H),N=H.filter,$=H.format||{to:function(AA){return String(Math.round(AA))}};return f=s.appendChild(cA(L,N,$)),f}function _A(){var H=o.getBoundingClientRect(),L="offset"+["Width","Height"][A.ort];return A.ort===0?H.width||o[L]:H.height||o[L]}function Z(H,L,N,$){var AA=function(vA){var uA=aA(vA,$.pageOffset,$.target||L);if(!uA||E()&&!$.doNotReject||NB(s,A.cssClasses.tap)&&!$.doNotReject||H===n.start&&uA.buttons!==void 0&&uA.buttons>1||$.hover&&uA.buttons)return!1;i||uA.preventDefault(),uA.calcPoint=uA.points[A.ort],N(uA,$)},rA=[];return H.split(" ").forEach(function(vA){L.addEventListener(vA,AA,i?{passive:!0}:!1),rA.push([vA,AA])}),rA}function aA(H,L,N){var $=H.type.indexOf("touch")===0,AA=H.type.indexOf("mouse")===0,rA=H.type.indexOf("pointer")===0,vA=0,uA=0;if(H.type.indexOf("MSPointer")===0&&(rA=!0),H.type==="mousedown"&&!H.buttons&&!H.touches)return!1;if($){var ie=function(he){var QA=he.target;return QA===N||N.contains(QA)||H.composed&&H.composedPath().shift()===N};if(H.type==="touchstart"){var se=Array.prototype.filter.call(H.touches,ie);if(se.length>1)return!1;vA=se[0].pageX,uA=se[0].pageY}else{var fe=Array.prototype.find.call(H.changedTouches,ie);if(!fe)return!1;vA=fe.pageX,uA=fe.pageY}}return L=L||bl(v),(AA||rA)&&(vA=H.clientX+L.x,uA=H.clientY+L.y),H.pageOffset=L,H.points=[vA,uA],H.cursor=AA||rA,H}function iA(H){var L=H-KB(o,A.ort),N=L*100/_A();return N=Fl(N),A.dir?100-N:N}function j(H){var L=100,N=!1;return l.forEach(function($,AA){if(!P(AA)){var rA=g[AA],vA=Math.abs(rA-H),uA=vA===100&&L===100,ie=vA<L,se=vA<=L&&H>rA;(ie||se||uA)&&(N=AA,L=vA)}}),N}function nA(H,L){H.type==="mouseout"&&H.target.nodeName==="HTML"&&H.relatedTarget===null&&LA(H,L)}function mA(H,L){if(navigator.appVersion.indexOf("MSIE 9")===-1&&H.buttons===0&&L.buttonsProperty!==0)return LA(H,L);var N=(A.dir?-1:1)*(H.calcPoint-L.startCalcPoint),$=N*100/L.baseSize;te(N>0,$,L.locations,L.handleNumbers,L.connect)}function LA(H,L){L.handle&&(gi(L.handle,A.cssClasses.active),p-=1),L.listeners.forEach(function(N){y.removeEventListener(N[0],N[1])}),p===0&&(gi(s,A.cssClasses.drag),Ie(),H.cursor&&(U.style.cursor="",U.removeEventListener("selectstart",_l))),A.events.smoothSteps&&(L.handleNumbers.forEach(function(N){He(N,g[N],!0,!0,!1,!1)}),L.handleNumbers.forEach(function(N){qA("update",N)})),L.handleNumbers.forEach(function(N){qA("change",N),qA("set",N),qA("end",N)})}function XA(H,L){if(!L.handleNumbers.some(P)){var N;if(L.handleNumbers.length===1){var $=l[L.handleNumbers[0]];N=$.children[0],p+=1,Pe(N,A.cssClasses.active)}H.stopPropagation();var AA=[],rA=Z(n.move,y,mA,{target:H.target,handle:N,connect:L.connect,listeners:AA,startCalcPoint:H.calcPoint,baseSize:_A(),pageOffset:H.pageOffset,handleNumbers:L.handleNumbers,buttonsProperty:H.buttons,locations:g.slice()}),vA=Z(n.end,y,LA,{target:H.target,handle:N,listeners:AA,doNotReject:!0,handleNumbers:L.handleNumbers}),uA=Z("mouseout",y,nA,{target:H.target,handle:N,listeners:AA,doNotReject:!0,handleNumbers:L.handleNumbers});AA.push.apply(AA,rA.concat(vA,uA)),H.cursor&&(U.style.cursor=getComputedStyle(H.target).cursor,l.length>1&&Pe(s,A.cssClasses.drag),U.addEventListener("selectstart",_l,!1)),L.handleNumbers.forEach(function(ie){qA("start",ie)})}}function JA(H){H.stopPropagation();var L=iA(H.calcPoint),N=j(L);N!==!1&&(A.events.snap||Ul(s,A.cssClasses.tap,A.animationDuration),He(N,L,!0,!0),Ie(),qA("slide",N,!0),qA("update",N,!0),A.events.snap?XA(H,{handleNumbers:[N]}):(qA("change",N,!0),qA("set",N,!0)))}function KA(H){var L=iA(H.calcPoint),N=h.getStep(L),$=h.fromStepping(N);Object.keys(Q).forEach(function(AA){AA.split(".")[0]==="hover"&&Q[AA].forEach(function(rA){rA.call(Be,$)})})}function WA(H,L){if(E()||P(L))return!1;var N=["Left","Right"],$=["Down","Up"],AA=["PageDown","PageUp"],rA=["Home","End"];A.dir&&!A.ort?N.reverse():A.ort&&!A.dir&&($.reverse(),AA.reverse());var vA=H.key.replace("Arrow",""),uA=vA===AA[0],ie=vA===AA[1],se=vA===$[0]||vA===N[0]||uA,fe=vA===$[1]||vA===N[1]||ie,he=vA===rA[0],QA=vA===rA[1];if(!se&&!fe&&!he&&!QA)return!0;H.preventDefault();var re;if(fe||se){var hA=se?0:1,IA=MA(L),HA=IA[hA];if(HA===null)return!1;HA===!1&&(HA=h.getDefaultStep(g[L],se,A.keyboardDefaultStep)),ie||uA?HA*=A.keyboardPageMultiplier:HA*=A.keyboardMultiplier,HA=Math.max(HA,1e-7),HA=(se?-1:1)*HA,re=d[L]+HA}else QA?re=A.spectrum.xVal[A.spectrum.xVal.length-1]:re=A.spectrum.xVal[0];return He(L,h.toStepping(re),!0,!0),qA("slide",L),qA("update",L),qA("change",L),qA("set",L),!1}function oe(H){H.fixed||l.forEach(function(L,N){Z(n.start,L.children[0],XA,{handleNumbers:[N]})}),H.tap&&Z(n.start,o,JA,{}),H.hover&&Z(n.move,o,KA,{hover:!0}),H.drag&&c.forEach(function(L,N){if(!(L===!1||N===0||N===c.length-1)){var $=l[N-1],AA=l[N],rA=[L],vA=[$,AA],uA=[N-1,N];Pe(L,A.cssClasses.draggable),H.fixed&&(rA.push($.children[0]),rA.push(AA.children[0])),H.dragAll&&(vA=l,uA=B),rA.forEach(function(ie){Z(n.start,ie,XA,{handles:vA,handleNumbers:uA,connect:L})})}})}function me(H,L){Q[H]=Q[H]||[],Q[H].push(L),H.split(".")[0]==="update"&&l.forEach(function(N,$){qA("update",$)})}function ye(H){return H===An.aria||H===An.tooltips}function de(H){var L=H&&H.split(".")[0],N=L?H.substring(L.length):H;Object.keys(Q).forEach(function($){var AA=$.split(".")[0],rA=$.substring(AA.length);(!L||L===AA)&&(!N||N===rA)&&(!ye(rA)||N===rA)&&delete Q[$]})}function qA(H,L,N){Object.keys(Q).forEach(function($){var AA=$.split(".")[0];H===AA&&Q[$].forEach(function(rA){rA.call(Be,d.map(A.format.to),L,d.slice(),N||!1,g.slice(),Be)})})}function Te(H,L,N,$,AA,rA,vA){var uA;return l.length>1&&!A.events.unconstrained&&($&&L>0&&(uA=h.getAbsoluteDistance(H[L-1],A.margin,!1),N=Math.max(N,uA)),AA&&L<l.length-1&&(uA=h.getAbsoluteDistance(H[L+1],A.margin,!0),N=Math.min(N,uA))),l.length>1&&A.limit&&($&&L>0&&(uA=h.getAbsoluteDistance(H[L-1],A.limit,!1),N=Math.min(N,uA)),AA&&L<l.length-1&&(uA=h.getAbsoluteDistance(H[L+1],A.limit,!0),N=Math.max(N,uA))),A.padding&&(L===0&&(uA=h.getAbsoluteDistance(0,A.padding[0],!1),N=Math.max(N,uA)),L===l.length-1&&(uA=h.getAbsoluteDistance(100,A.padding[1],!0),N=Math.min(N,uA))),vA||(N=h.getStep(N)),N=Fl(N),N===H[L]&&!rA?!1:N}function YA(H,L){var N=A.ort;return(N?L:H)+", "+(N?H:L)}function te(H,L,N,$,AA){var rA=N.slice(),vA=$[0],uA=A.events.smoothSteps,ie=[!H,H],se=[H,!H];$=$.slice(),H&&$.reverse(),$.length>1?$.forEach(function(he,QA){var re=Te(rA,he,rA[he]+L,ie[QA],se[QA],!1,uA);re===!1?L=0:(L=re-rA[he],rA[he]=re)}):ie=se=[!0];var fe=!1;$.forEach(function(he,QA){fe=He(he,N[he]+L,ie[QA],se[QA],!1,uA)||fe}),fe&&($.forEach(function(he){qA("update",he),qA("slide",he)}),AA!=null&&qA("drag",vA))}function ne(H,L){return A.dir?100-H-L:H}function Ze(H,L){g[H]=L,d[H]=h.fromStepping(L);var N=ne(L,0)-S,$="translate("+YA(N+"%","0")+")";if(l[H].style[A.transformRule]=$,A.events.invertConnects&&g.length>1){var AA=g.every(function(rA,vA,uA){return vA===0||rA>=uA[vA-1]});if(F!==!AA){UA();return}}z(H),z(H+1),F&&(z(H-1),z(H+2))}function Ie(){B.forEach(function(H){var L=g[H]>50?-1:1,N=3+(l.length+L*H);l[H].style.zIndex=String(N)})}function He(H,L,N,$,AA,rA){return AA||(L=Te(g,H,L,N,$,!1,rA)),L===!1?!1:(Ze(H,L),!0)}function z(H){if(c[H]){var L=g.slice();F&&L.sort(function(uA,ie){return uA-ie});var N=0,$=100;H!==0&&(N=L[H-1]),H!==c.length-1&&($=L[H]);var AA=$-N,rA="translate("+YA(ne(N,AA)+"%","0")+")",vA="scale("+YA(AA/100,"1")+")";c[H].style[A.transformRule]=rA+" "+vA}}function bA(H,L){return H===null||H===!1||H===void 0||(typeof H=="number"&&(H=String(H)),H=A.format.from(H),H!==!1&&(H=h.toStepping(H)),H===!1||isNaN(H))?g[L]:H}function zA(H,L,N){var $=di(H),AA=g[0]===void 0;L=L===void 0?!0:L,A.animate&&!AA&&Ul(s,A.cssClasses.tap,A.animationDuration),B.forEach(function(uA){He(uA,bA($[uA],uA),!0,!1,N)});var rA=B.length===1?0:1;if(AA&&h.hasNoSize()&&(N=!0,g[0]=0,B.length>1)){var vA=100/(B.length-1);B.forEach(function(uA){g[uA]=uA*vA})}for(;rA<B.length;++rA)B.forEach(function(uA){He(uA,g[uA],!0,!0,N)});Ie(),B.forEach(function(uA){qA("update",uA),$[uA]!==null&&L&&qA("set",uA)})}function jA(H){zA(A.start,H)}function le(H,L,N,$){if(H=Number(H),!(H>=0&&H<B.length))throw new Error("noUiSlider: invalid handle number, got: "+H);He(H,bA(L,H),!0,!0,$),qA("update",H),N&&qA("set",H)}function kA(H){if(H===void 0&&(H=!1),H)return d.length===1?d[0]:d.slice(0);var L=d.map(A.format.to);return L.length===1?L[0]:L}function ve(){for(de(An.aria),de(An.tooltips),Object.keys(A.cssClasses).forEach(function(H){gi(s,A.cssClasses[H])});s.firstChild;)s.removeChild(s.firstChild);delete s.noUiSlider}function MA(H){var L=g[H],N=h.getNearbySteps(L),$=d[H],AA=N.thisStep.step,rA=null;if(A.snap)return[$-N.stepBefore.startValue||null,N.stepAfter.startValue-$||null];AA!==!1&&$+AA>N.stepAfter.startValue&&(AA=N.stepAfter.startValue-$),$>N.thisStep.startValue?rA=N.thisStep.step:N.stepBefore.step===!1?rA=!1:rA=$-N.stepBefore.highestStep,L===100?AA=null:L===0&&(rA=null);var vA=h.countStepDecimals();return AA!==null&&AA!==!1&&(AA=Number(AA.toFixed(vA))),rA!==null&&rA!==!1&&(rA=Number(rA.toFixed(vA))),[rA,AA]}function GA(){return B.map(MA)}function EA(H,L){var N=kA(),$=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips","connect"];$.forEach(function(rA){H[rA]!==void 0&&(t[rA]=H[rA])});var AA=Ll(t);$.forEach(function(rA){H[rA]!==void 0&&(A[rA]=AA[rA])}),h=AA.spectrum,A.margin=AA.margin,A.limit=AA.limit,A.padding=AA.padding,A.pips?xA(A.pips):yA(),A.tooltips?V():O(),g=[],zA(no(H.start)?H.start:N,L),H.connect&&q()}function q(){for(;a.firstChild;)a.removeChild(a.firstChild);for(var H=0;H<=A.handles;H++)c[H]=T(a,A.connect[H]),z(H);oe({drag:A.events.drag,fixed:!0})}function UA(){F=!F,Sl(A,A.connect.map(function(H){return!H})),q()}function CA(){o=k(s),x(A.connect,o),oe(A.events),zA(A.start),A.pips&&xA(A.pips),A.tooltips&&V(),J()}CA();var Be={destroy:ve,steps:GA,on:me,off:de,get:kA,set:zA,setHandle:le,reset:jA,disable:I,enable:X,__moveHandles:function(H,L,N){te(H,L,g,N)},options:t,updateOptions:EA,target:s,removePips:yA,removeTooltips:O,getPositions:function(){return g.slice()},getTooltips:function(){return u},getOrigins:function(){return l},pips:xA};return Be}function mp(e,A){if(!e||!e.nodeName)throw new Error("noUiSlider: create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider: Slider was already initialized.");var t=Ll(A),n=pp(e,t,A);return e.noUiSlider=n,n}const wp={__spectrum:El,cssClasses:Hl,create:mp},vH="",CH="";function vp(e){let A,t,n;return{c(){A=C("span"),t=sA(e[0]),m(A,"id",e[3]),m(A,"class",n="tooltip "+e[2]+" "+(e[1]?"display":"")+" svelte-1am23me")},m(r,i){K(r,A,i),w(A,t)},p(r,[i]){i&1&&NA(t,r[0]),i&6&&n!==(n="tooltip "+r[2]+" "+(r[1]?"display":"")+" svelte-1am23me")&&m(A,"class",n)},i:tA,o:tA,d(r){r&&D(A)}}}function Cp(e,A,t){let n,r,i,s,{tooltipText:o}=A,{targetHtmlId:a}=A;const l=`tooltip-generic-${window.crypto.randomUUID()}`,c=()=>t(1,s=!0),f=()=>t(1,s=!1),u=()=>t(1,s=!s);return gn(()=>{i=a?document.getElementById(a):document.getElementById(l).parentElement,a&&!i&&(console.error(`TooltipGeneric: element with ID ${a} not found, defaulting to the parent element`),i=document.getElementById(l).targetElement),i.addEventListener("mouseover",c),i.addEventListener("mouseout",f),i.addEventListener("click",u)}),Bn(()=>{i.removeEventListener("mouseover",c),i.removeEventListener("mouseout",f),i.removeEventListener("click",u)}),e.$$set=h=>{"tooltipText"in h&&t(0,o=h.tooltipText),"targetHtmlId"in h&&t(4,a=h.targetHtmlId)},e.$$.update=()=>{e.$$.dirty&33&&t(2,n=r(o))},t(5,r=h=>t(2,n=h.length>100?"tooltip-wide":h.length>20?"tooltip-mid":"tooltip-thin")),i=void 0,t(1,s=!1),[o,s,n,l,a,r]}class Bi extends PA{constructor(A){super(),RA(this,A,Cp,vp,OA,{tooltipText:0,targetHtmlId:4})}}const QH="";function Qp(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B;return{c(){A=C("div"),t=C("span"),n=sA(e[2]),r=sA(" ("),i=sA(e[3]),s=sA(")"),o=R(),a=C("div"),l=C("span"),c=sA(e[0]),f=R(),u=C("div"),h=C("div"),d=R(),g=C("span"),B=sA(e[1]),m(l,"class","range-marker svelte-216mtn"),m(h,"class","slider"),m(h,"id",e[4]),m(u,"class","slider-wrapper svelte-216mtn"),m(g,"class","range-marker svelte-216mtn"),m(a,"class","slider-outer-wrapper is-flex flex-direction-row svelte-216mtn")},m(p,Q){K(p,A,Q),w(A,t),w(t,n),w(t,r),w(t,i),w(t,s),w(A,o),w(A,a),w(a,l),w(l,c),w(a,f),w(a,u),w(u,h),w(a,d),w(a,g),w(g,B)},p(p,[Q]){Q&4&&NA(n,p[2]),Q&8&&NA(i,p[3]),Q&1&&NA(c,p[0]),Q&2&&NA(B,p[1])},i:tA,o:tA,d(p){p&&D(A)}}}function yp(e,A,t){let n,{minVal:r}=A,{maxVal:i}=A,{start:s}=A,{step:o=void 0}=A,{roundTo:a=2}=A,{title:l=""}=A,{emitOnUpdate:c=!1}=A;const f=ii(),u=`slider-${window.crypto.randomUUID()}`,h=Array.isArray(s)&&s.length===2&&s.every(_=>!isNaN(parseFloat(_))),d=[],g=h?[`noUi-handle-${window.crypto.randomUUID()}`,`noUi-handle-${window.crypto.randomUUID()}`]:[`noUi-handle-${window.crypto.randomUUID()}`],B=ui();B.setCompareFn(h?eo:(_,b)=>Q(_)===Q(b)),B.set(s);const p=Je("resetTrigger")||void 0;p==null||p.subscribe(y);const Q=_=>Number(_.toFixed(a)),F=(_,b)=>{_=Array.isArray(_)?_.map(Q):Q(_),t(3,n=_),(b==="set"||b==="update"&&c)&&(B.set(_),B.same()||f("updateSlider",B.get()))};function v(_){d.length&&d.map((b,T)=>b.$set({tooltipText:h?_[T]:_}))}function y(){const _=document.getElementById(u);_!=null&&_.noUiSlider&&_.noUiSlider.reset()}function U(){const _=document.getElementById(u);let b;wp.create(_,{start:s,step:o,connect:h?!0:"lower",range:{min:r,max:i},handleAttributes:g.map(T=>({id:T}))}),_.noUiSlider.on("update",()=>{b=_.noUiSlider.get(!0),F(b,"update")}),_.noUiSlider.on("set",()=>{b=_.noUiSlider.get(!0),F(b,"set")})}function S(){g.map((_,b)=>{d.push(new Bi({target:document.getElementById(_),props:h?{tooltipText:n[b]}:{tooltipText:n}}))})}return gn(()=>{U(),S()}),Bn(()=>{document.getElementById(u)&&(document.getElementById(u).innerHTML="")}),e.$$set=_=>{"minVal"in _&&t(0,r=_.minVal),"maxVal"in _&&t(1,i=_.maxVal),"start"in _&&t(5,s=_.start),"step"in _&&t(6,o=_.step),"roundTo"in _&&t(7,a=_.roundTo),"title"in _&&t(2,l=_.title),"emitOnUpdate"in _&&t(8,c=_.emitOnUpdate)},e.$$.update=()=>{e.$$.dirty&32&&t(3,n=s),e.$$.dirty&8&&v(n)},[r,i,l,n,u,s,o,a,c]}class pn extends PA{constructor(A){super(),RA(this,A,yp,Qp,OA,{minVal:0,maxVal:1,start:5,step:6,roundTo:7,title:2,emitOnUpdate:8})}}const _p=e=>({}),kl=e=>({});function Ml(e,A,t){const n=e.slice();return n[44]=A[t],n}function Tl(e,A,t){const n=e.slice();return n[47]=A[t],n}function Dl(e,A,t){const n=e.slice();return n[44]=A[t],n}function Kl(e,A,t){const n=e.slice();n[52]=A[t];const r=Object.keys(n[28][n[52]]||{});return n[53]=r,n}function Ol(e){var EA;let A,t,n,r=((EA=e[0])==null?void 0:EA.title)+"",i,s,o,a,l,c,f,u,h,d=(e[3].pairs||0)+"",g,B,p,Q,F,v,y,U=(e[3].images||0)+"",S,_,b,T,x,k,M,E=(e[4]||0)+"",P,I,X,O,V,J,eA,oA,wA,cA,yA,xA,_A,Z,aA,iA,j,nA,mA,LA,XA,JA,KA,WA,oe,me,ye,de,qA,Te,YA,te=["Series","Witness","Work"],ne=[];for(let q=0;q<3;q+=1)ne[q]=Nl(Kl(e,te,q));V=new kB({props:{documentNodes:e[5],selectedRegions:e[6],toggleRegion:e[18],selectAllRegions:e[17]}});let Ze=["all","filtered"],Ie=[];for(let q=0;q<2;q+=1)Ie[q]=Rl(Dl(e,Ze,q));let He=e[29],z=[];for(let q=0;q<He.length;q+=1)z[q]=Pl(Tl(e,He,q));const bA=q=>W(z[q],1,1,()=>{z[q]=null});let zA=["threshold","topk"],jA=[];for(let q=0;q<2;q+=1)jA[q]=Vl(Ml(e,zA,q));const le=[bp,Fp],kA=[];function ve(q,UA){return q[7]==="threshold"?0:1}KA=ve(e),WA=kA[KA]=le[KA](e);const MA=e[35].datavizInfo,GA=ct(MA,e,e[34],kl);return{c(){A=C("div"),t=C("div"),n=C("h1"),i=sA(r),s=R(),o=C("div");for(let q=0;q<3;q+=1)ne[q].c();a=R(),l=C("div"),c=C("div"),f=C("p"),f.textContent=`${Y==="en"?"Pairs":"Paires"}`,u=R(),h=C("p"),g=sA(d),B=R(),p=C("div"),Q=C("div"),F=C("p"),F.textContent="Images",v=R(),y=C("p"),S=sA(U),_=R(),b=C("div"),T=C("div"),x=C("p"),x.textContent="Clusters",k=R(),M=C("p"),P=sA(E),I=R(),X=C("hr"),O=R(),pA(V.$$.fragment),J=R(),eA=C("hr"),oA=R(),wA=C("div"),cA=C("h3"),cA.textContent=`${Y==="en"?"Similarity categories":"Catégories de similarité"}`,yA=R(),xA=C("div");for(let q=0;q<2;q+=1)Ie[q].c();_A=R(),Z=C("div");for(let q=0;q<z.length;q+=1)z[q].c();aA=R(),iA=C("hr"),j=R(),nA=C("div"),mA=C("h3"),mA.textContent=`${Y==="en"?"Similarity score":"Score de similarité"}`,LA=R(),XA=C("div");for(let q=0;q<2;q+=1)jA[q].c();JA=R(),WA.c(),oe=R(),me=C("hr"),ye=R(),de=C("div"),qA=C("h3"),qA.textContent=`${Y==="en"?"Visualisation information":"Informations sur la visualisation"}`,Te=R(),GA&&GA.c(),m(n,"class","title"),m(f,"class","heading"),m(h,"class","title is-5"),m(l,"class","level-item has-text-centered"),m(F,"class","heading"),m(y,"class","title is-5"),m(p,"class","level-item has-text-centered"),m(x,"class","heading"),m(M,"class","title is-5"),m(b,"class","level-item has-text-centered"),m(o,"class","level"),m(t,"class","pb-2"),m(cA,"class","title"),m(xA,"class","buttons mb-3"),m(Z,"class","level"),ZA(Z,"is-disabled",e[1]==="all"),m(wA,"class","pt-2"),m(mA,"class","title"),m(XA,"class","buttons mb-3"),m(nA,"class","pt-2"),m(qA,"class","title"),m(de,"class","py-2"),m(A,"class","content is-small mt-4")},m(q,UA){K(q,A,UA),w(A,t),w(t,n),w(n,i),w(t,s),w(t,o);for(let CA=0;CA<3;CA+=1)ne[CA]&&ne[CA].m(o,null);w(o,a),w(o,l),w(l,c),w(c,f),w(c,u),w(c,h),w(h,g),w(o,B),w(o,p),w(p,Q),w(Q,F),w(Q,v),w(Q,y),w(y,S),w(o,_),w(o,b),w(b,T),w(T,x),w(T,k),w(T,M),w(M,P),w(A,I),w(A,X),w(A,O),gA(V,A,null),w(A,J),w(A,eA),w(A,oA),w(A,wA),w(wA,cA),w(wA,yA),w(wA,xA);for(let CA=0;CA<2;CA+=1)Ie[CA]&&Ie[CA].m(xA,null);w(wA,_A),w(wA,Z);for(let CA=0;CA<z.length;CA+=1)z[CA]&&z[CA].m(Z,null);w(A,aA),w(A,iA),w(A,j),w(A,nA),w(nA,mA),w(nA,LA),w(nA,XA);for(let CA=0;CA<2;CA+=1)jA[CA]&&jA[CA].m(XA,null);w(nA,JA),kA[KA].m(nA,null),w(A,oe),w(A,me),w(A,ye),w(A,de),w(de,qA),w(de,Te),GA&&GA.m(de,null),YA=!0},p(q,UA){var H;if((!YA||UA[0]&1)&&r!==(r=((H=q[0])==null?void 0:H.title)+"")&&NA(i,r),UA[0]&268435456){te=["Series","Witness","Work"];let L;for(L=0;L<3;L+=1){const N=Kl(q,te,L);ne[L]?ne[L].p(N,UA):(ne[L]=Nl(N),ne[L].c(),ne[L].m(o,a))}for(;L<3;L+=1)ne[L].d(1)}(!YA||UA[0]&8)&&d!==(d=(q[3].pairs||0)+"")&&NA(g,d),(!YA||UA[0]&8)&&U!==(U=(q[3].images||0)+"")&&NA(S,U),(!YA||UA[0]&16)&&E!==(E=(q[4]||0)+"")&&NA(P,E);const CA={};if(UA[0]&32&&(CA.documentNodes=q[5]),UA[0]&64&&(CA.selectedRegions=q[6]),V.$set(CA),UA[0]&1073741826){Ze=["all","filtered"];let L;for(L=0;L<2;L+=1){const N=Dl(q,Ze,L);Ie[L]?Ie[L].p(N,UA):(Ie[L]=Rl(N),Ie[L].c(),Ie[L].m(xA,null))}for(;L<2;L+=1)Ie[L].d(1)}if(UA[0]&536903694){He=q[29];let L;for(L=0;L<He.length;L+=1){const N=Tl(q,He,L);z[L]?(z[L].p(N,UA),G(z[L],1)):(z[L]=Pl(N),z[L].c(),G(z[L],1),z[L].m(Z,null))}for($A(),L=He.length;L<z.length;L+=1)bA(L);Ae()}if((!YA||UA[0]&2)&&ZA(Z,"is-disabled",q[1]==="all"),UA[0]&128|UA[1]&1){zA=["threshold","topk"];let L;for(L=0;L<2;L+=1){const N=Ml(q,zA,L);jA[L]?jA[L].p(N,UA):(jA[L]=Vl(N),jA[L].c(),jA[L].m(XA,null))}for(;L<2;L+=1)jA[L].d(1)}let Be=KA;KA=ve(q),KA===Be?kA[KA].p(q,UA):($A(),W(kA[Be],1,1,()=>{kA[Be]=null}),Ae(),WA=kA[KA],WA?WA.p(q,UA):(WA=kA[KA]=le[KA](q),WA.c()),G(WA,1),WA.m(nA,null)),GA&&GA.p&&(!YA||UA[1]&8)&&ft(GA,MA,q,q[34],YA?ut(MA,q[34],UA,_p):ht(q[34]),kl)},i(q){if(!YA){G(V.$$.fragment,q);for(let UA=0;UA<He.length;UA+=1)G(z[UA]);G(WA),G(GA,q),YA=!0}},o(q){W(V.$$.fragment,q),z=z.filter(Boolean);for(let UA=0;UA<z.length;UA+=1)W(z[UA]);W(WA),W(GA,q),YA=!1},d(q){q&&D(A),Se(ne,q),BA(V),Se(Ie,q),Se(z,q),Se(jA,q),kA[KA].d(),GA&&GA.d(q)}}}function Up(e){let A,t,n,r=ci[e[52]]+"",i,s,o,a=(e[53].length||0)+"",l;return{c(){A=C("div"),t=C("div"),n=C("p"),i=sA(r),s=R(),o=C("p"),l=sA(a),m(n,"class","heading"),m(o,"class","title is-5"),m(A,"class","level-item has-text-centered")},m(c,f){K(c,A,f),w(A,t),w(t,n),w(n,i),w(t,s),w(t,o),w(o,l)},p:tA,d(c){c&&D(A)}}}function Nl(e){let A,t=e[53].length>0&&Up(e);return{c(){t&&t.c(),A=ke()},m(n,r){t&&t.m(n,r),K(n,A,r)},p(n,r){n[53].length>0&&t.p(n,r)},d(n){t&&t.d(n),n&&D(A)}}}function Rl(e){let A,t=e[44]==="all"?Y==="en"?"All pairs":"Toutes les paires":Y==="en"?"Filter by category":"Filtrer par catégorie",n,r,i,s;function o(){return e[36](e[44])}return{c(){A=C("button"),n=sA(t),r=R(),m(A,"class","button is-small is-flex-grow-1"),ZA(A,"is-link",e[1]===e[44]),ZA(A,"is-contrasted",e[1]!==e[44])},m(a,l){K(a,A,l),w(A,n),w(A,r),i||(s=dA(A,"click",o),i=!0)},p(a,l){e=a,l[0]&2&&ZA(A,"is-link",e[1]===e[44]),l[0]&2&&ZA(A,"is-contrasted",e[1]!==e[44])},d(a){a&&D(A),i=!1,s()}}}function Pl(e){let A,t,n,r,i,s=(e[3].categories[e[47]]||0)+"",o,a,l;return n=new Rn({props:{category:e[47],isSelected:e[2].includes(e[47]),toggle:e[37],selectable:e[1]==="filtered"}}),{c(){A=C("div"),t=C("div"),pA(n.$$.fragment),r=R(),i=C("p"),o=sA(s),a=R(),m(i,"class","is-size-7 mt-1"),m(A,"class","level-item has-text-centered")},m(c,f){K(c,A,f),w(A,t),gA(n,t,null),w(t,r),w(t,i),w(i,o),w(A,a),l=!0},p(c,f){const u={};f[0]&4&&(u.isSelected=c[2].includes(c[47])),f[0]&2&&(u.toggle=c[37]),f[0]&2&&(u.selectable=c[1]==="filtered"),n.$set(u),(!l||f[0]&8)&&s!==(s=(c[3].categories[c[47]]||0)+"")&&NA(o,s)},i(c){l||(G(n.$$.fragment,c),l=!0)},o(c){W(n.$$.fragment,c),l=!1},d(c){c&&D(A),BA(n)}}}function Vl(e){let A,t=e[44]==="threshold"?Y==="en"?"Score threshold":"Seuil de score":Y==="en"?"Top K pairs":"Top K paires",n,r,i,s;function o(){return e[38](e[44])}return{c(){A=C("button"),n=sA(t),r=R(),m(A,"class","button is-small is-flex-grow-1"),ZA(A,"is-link",e[7]===e[44]),ZA(A,"is-contrasted",e[7]!==e[44])},m(a,l){K(a,A,l),w(A,n),w(A,r),i||(s=dA(A,"click",o),i=!0)},p(a,l){e=a,l[0]&128&&ZA(A,"is-link",e[7]===e[44]),l[0]&128&&ZA(A,"is-contrasted",e[7]!==e[44])},d(a){a&&D(A),i=!1,s()}}}function Fp(e){let A,t,n,r,i,s,o,a,l,c,f,u;return n=new pn({props:{minVal:1,maxVal:5,start:e[10]||3,step:1,roundTo:0,title:"K"}}),n.$on("updateSlider",e[40]),{c(){A=C("div"),t=C("div"),pA(n.$$.fragment),r=R(),i=C("div"),s=C("label"),o=C("input"),a=R(),l=C("span"),l.textContent=`${Y==="en"?"Mutual top K":"Top K mutuel"}`,m(t,"class","column is-two-thirds pl-4"),o.checked=e[11],m(o,"type","checkbox"),m(o,"class","mr-2"),m(l,"class","is-size-7"),m(s,"class","checkbox mt-3 is-flex is-align-items-center"),m(i,"class","column mt-2"),m(A,"class","columns mt-2")},m(h,d){K(h,A,d),w(A,t),gA(n,t,null),w(A,r),w(A,i),w(i,s),w(s,o),w(s,a),w(s,l),c=!0,f||(u=dA(o,"change",e[41]),f=!0)},p(h,d){const g={};d[0]&1024&&(g.start=h[10]||3),n.$set(g),(!c||d[0]&2048)&&(o.checked=h[11])},i(h){c||(G(n.$$.fragment,h),c=!0)},o(h){W(n.$$.fragment,h),c=!1},d(h){h&&D(A),BA(n),f=!1,u()}}}function bp(e){var n,r;let A,t;return A=new pn({props:{minVal:((n=e[8].scoreRange)==null?void 0:n.min)||0,maxVal:((r=e[8].scoreRange)==null?void 0:r.max)||1,start:e[9],step:.01,roundTo:2,title:Y==="en"?"Minimum score":"Score minimum"}}),A.$on("updateSlider",e[39]),{c(){pA(A.$$.fragment)},m(i,s){gA(A,i,s),t=!0},p(i,s){var a,l;const o={};s[0]&256&&(o.minVal=((a=i[8].scoreRange)==null?void 0:a.min)||0),s[0]&256&&(o.maxVal=((l=i[8].scoreRange)==null?void 0:l.max)||1),s[0]&512&&(o.start=i[9]),A.$set(o)},i(i){t||(G(A.$$.fragment,i),t=!0)},o(i){W(A.$$.fragment,i),t=!1},d(i){BA(A,i)}}}function Ep(e){let A,t,n=e[3]&&Ol(e);return{c(){A=C("div"),n&&n.c(),m(A,"class","m-4 py-5 px-4")},m(r,i){K(r,A,i),n&&n.m(A,null),t=!0},p(r,i){r[3]?n?(n.p(r,i),i[0]&8&&G(n,1)):(n=Ol(r),n.c(),G(n,1),n.m(A,null)):n&&($A(),W(n,1,1,()=>{n=null}),Ae())},i(r){t||(G(n),t=!0)},o(r){W(n),t=!1},d(r){r&&D(A),n&&n.d()}}}function Ip(e,A,t){let n,r,i,s,o,a,l,c,f,u,{$$slots:h={},$$scope:d}=A,{docSet:g=null}=A,{documentSetStore:B}=A,{clusterStore:p}=A;const{docSetNumber:Q,documentNodes:F,selectedCategories:v,toggleCategory:y,selectedRegions:U,selectAllRegions:S,toggleRegion:_,threshold:b,setThreshold:T,topK:x,setTopK:k,mutualTopK:M,setMutualTopK:E,scoreMode:P,setScoreMode:I,pairStats:X}=B;FA(e,Q,j=>t(3,r=j)),FA(e,F,j=>t(5,s=j)),FA(e,v,j=>t(2,n=j)),FA(e,U,j=>t(6,o=j)),FA(e,b,j=>t(9,c=j)),FA(e,x,j=>t(10,f=j)),FA(e,M,j=>t(11,u=j)),FA(e,P,j=>t(7,a=j)),FA(e,X,j=>t(8,l=j));const{clusterNb:O,handlePageUpdate:V}=p;FA(e,O,j=>t(4,i=j));const J=Je("selectedDocuments"),eA=[0,1,2,3,5];let oA="filtered";function wA(j){t(1,oA=j),j==="all"&&n.length!==eA.length&&v.set(eA)}function cA(j){V(1),I(j)}const yA=j=>wA(j),xA=j=>oA==="filtered"?y(j):null,_A=j=>cA(j),Z=j=>T(j.detail),aA=j=>k(j.detail),iA=()=>E(!u);return e.$$set=j=>{"docSet"in j&&t(0,g=j.docSet),"documentSetStore"in j&&t(32,B=j.documentSetStore),"clusterStore"in j&&t(33,p=j.clusterStore),"$$scope"in j&&t(34,d=j.$$scope)},[g,oA,n,r,i,s,o,a,l,c,f,u,Q,F,v,y,U,S,_,b,T,x,k,M,E,P,X,O,J,eA,wA,cA,B,p,d,h,yA,xA,_A,Z,aA,iA]}class Hp extends PA{constructor(A){super(),RA(this,A,Ip,Ep,OA,{docSet:0,documentSetStore:32,clusterStore:33},null,[-1,-1])}}function pi(e,A){return e==null||A==null?NaN:e<A?-1:e>A?1:e>=A?0:NaN}function Sp(e,A){return e==null||A==null?NaN:A<e?-1:A>e?1:A>=e?0:NaN}function Gl(e){let A,t,n;e.length!==2?(A=pi,t=(o,a)=>pi(e(o),a),n=(o,a)=>e(o)-a):(A=e===pi||e===Sp?e:xp,t=e,n=e);function r(o,a,l=0,c=o.length){if(l<c){if(A(a,a)!==0)return c;do{const f=l+c>>>1;t(o[f],a)<0?l=f+1:c=f}while(l<c)}return l}function i(o,a,l=0,c=o.length){if(l<c){if(A(a,a)!==0)return c;do{const f=l+c>>>1;t(o[f],a)<=0?l=f+1:c=f}while(l<c)}return l}function s(o,a,l=0,c=o.length){const f=r(o,a,l,c-1);return f>l&&n(o[f-1],a)>-n(o[f],a)?f-1:f}return{left:r,center:s,right:i}}function xp(){return 0}function Lp(e){return e===null?NaN:+e}const kp=Gl(pi).right;Gl(Lp).center;const Mp=kp;class Xl extends Map{constructor(A,t=Kp){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),A!=null)for(const[n,r]of A)this.set(n,r)}get(A){return super.get(Jl(this,A))}has(A){return super.has(Jl(this,A))}set(A,t){return super.set(Tp(this,A),t)}delete(A){return super.delete(Dp(this,A))}}function Jl({_intern:e,_key:A},t){const n=A(t);return e.has(n)?e.get(n):t}function Tp({_intern:e,_key:A},t){const n=A(t);return e.has(n)?e.get(n):(e.set(n,t),t)}function Dp({_intern:e,_key:A},t){const n=A(t);return e.has(n)&&(t=e.get(n),e.delete(n)),t}function Kp(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Op=Math.sqrt(50),Np=Math.sqrt(10),Rp=Math.sqrt(2);function mi(e,A,t){const n=(A-e)/Math.max(0,t),r=Math.floor(Math.log10(n)),i=n/Math.pow(10,r),s=i>=Op?10:i>=Np?5:i>=Rp?2:1;let o,a,l;return r<0?(l=Math.pow(10,-r)/s,o=Math.round(e*l),a=Math.round(A*l),o/l<e&&++o,a/l>A&&--a,l=-l):(l=Math.pow(10,r)*s,o=Math.round(e/l),a=Math.round(A/l),o*l<e&&++o,a*l>A&&--a),a<o&&.5<=t&&t<2?mi(e,A,t*2):[o,a,l]}function Pp(e,A,t){if(A=+A,e=+e,t=+t,!(t>0))return[];if(e===A)return[e];const n=A<e,[r,i,s]=n?mi(A,e,t):mi(e,A,t);if(!(i>=r))return[];const o=i-r+1,a=new Array(o);if(n)if(s<0)for(let l=0;l<o;++l)a[l]=(i-l)/-s;else for(let l=0;l<o;++l)a[l]=(i-l)*s;else if(s<0)for(let l=0;l<o;++l)a[l]=(r+l)/-s;else for(let l=0;l<o;++l)a[l]=(r+l)*s;return a}function so(e,A,t){return A=+A,e=+e,t=+t,mi(e,A,t)[2]}function Vp(e,A,t){A=+A,e=+e,t=+t;const n=A<e,r=n?so(A,e,t):so(e,A,t);return(n?-1:1)*(r<0?1/-r:r)}function wi(e,A,t){e=+e,A=+A,t=(r=arguments.length)<2?(A=e,e=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((A-e)/t))|0,i=new Array(r);++n<r;)i[n]=e+n*t;return i}function Gp(e){return e}var vi=1,oo=2,Wl=3,gr=4,Yl=1e-6;function Xp(e){return"translate("+e+",0)"}function Jp(e){return"translate(0,"+e+")"}function Wp(e){return A=>+e(A)}function Yp(e,A){return A=Math.max(0,e.bandwidth()-A*2)/2,e.round()&&(A=Math.round(A)),t=>+e(t)+A}function zp(){return!this.__axis}function zl(e,A){var t=[],n=null,r=null,i=6,s=6,o=3,a=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===vi||e===gr?-1:1,c=e===gr||e===oo?"x":"y",f=e===vi||e===Wl?Xp:Jp;function u(h){var d=n??(A.ticks?A.ticks.apply(A,t):A.domain()),g=r??(A.tickFormat?A.tickFormat.apply(A,t):Gp),B=Math.max(i,0)+o,p=A.range(),Q=+p[0]+a,F=+p[p.length-1]+a,v=(A.bandwidth?Yp:Wp)(A.copy(),a),y=h.selection?h.selection():h,U=y.selectAll(".domain").data([null]),S=y.selectAll(".tick").data(d,A).order(),_=S.exit(),b=S.enter().append("g").attr("class","tick"),T=S.select("line"),x=S.select("text");U=U.merge(U.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(b),T=T.merge(b.append("line").attr("stroke","currentColor").attr(c+"2",l*i)),x=x.merge(b.append("text").attr("fill","currentColor").attr(c,l*B).attr("dy",e===vi?"0em":e===Wl?"0.71em":"0.32em")),h!==y&&(U=U.transition(h),S=S.transition(h),T=T.transition(h),x=x.transition(h),_=_.transition(h).attr("opacity",Yl).attr("transform",function(k){return isFinite(k=v(k))?f(k+a):this.getAttribute("transform")}),b.attr("opacity",Yl).attr("transform",function(k){var M=this.parentNode.__axis;return f((M&&isFinite(M=M(k))?M:v(k))+a)})),_.remove(),U.attr("d",e===gr||e===oo?s?"M"+l*s+","+Q+"H"+a+"V"+F+"H"+l*s:"M"+a+","+Q+"V"+F:s?"M"+Q+","+l*s+"V"+a+"H"+F+"V"+l*s:"M"+Q+","+a+"H"+F),S.attr("opacity",1).attr("transform",function(k){return f(v(k)+a)}),T.attr(c+"2",l*i),x.attr(c,l*B).text(g),y.filter(zp).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===oo?"start":e===gr?"end":"middle"),y.each(function(){this.__axis=v})}return u.scale=function(h){return arguments.length?(A=h,u):A},u.ticks=function(){return t=Array.from(arguments),u},u.tickArguments=function(h){return arguments.length?(t=h==null?[]:Array.from(h),u):t.slice()},u.tickValues=function(h){return arguments.length?(n=h==null?null:Array.from(h),u):n&&n.slice()},u.tickFormat=function(h){return arguments.length?(r=h,u):r},u.tickSize=function(h){return arguments.length?(i=s=+h,u):i},u.tickSizeInner=function(h){return arguments.length?(i=+h,u):i},u.tickSizeOuter=function(h){return arguments.length?(s=+h,u):s},u.tickPadding=function(h){return arguments.length?(o=+h,u):o},u.offset=function(h){return arguments.length?(a=+h,u):a},u}function jl(e){return zl(vi,e)}function ql(e){return zl(gr,e)}var jp={value:()=>{}};function Br(){for(var e=0,A=arguments.length,t={},n;e<A;++e){if(!(n=arguments[e]+"")||n in t||/[\s.]/.test(n))throw new Error("illegal type: "+n);t[n]=[]}return new Ci(t)}function Ci(e){this._=e}function qp(e,A){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!A.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}Ci.prototype=Br.prototype={constructor:Ci,on:function(e,A){var t=this._,n=qp(e+"",t),r,i=-1,s=n.length;if(arguments.length<2){for(;++i<s;)if((r=(e=n[i]).type)&&(r=Zp(t[r],e.name)))return r;return}if(A!=null&&typeof A!="function")throw new Error("invalid callback: "+A);for(;++i<s;)if(r=(e=n[i]).type)t[r]=Zl(t[r],e.name,A);else if(A==null)for(r in t)t[r]=Zl(t[r],e.name,null);return this},copy:function(){var e={},A=this._;for(var t in A)e[t]=A[t].slice();return new Ci(e)},call:function(e,A){if((r=arguments.length-2)>0)for(var t=new Array(r),n=0,r,i;n<r;++n)t[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(i=this._[e],n=0,r=i.length;n<r;++n)i[n].value.apply(A,t)},apply:function(e,A,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,i=n.length;r<i;++r)n[r].value.apply(A,t)}};function Zp(e,A){for(var t=0,n=e.length,r;t<n;++t)if((r=e[t]).name===A)return r.value}function Zl(e,A,t){for(var n=0,r=e.length;n<r;++n)if(e[n].name===A){e[n]=jp,e=e.slice(0,n).concat(e.slice(n+1));break}return t!=null&&e.push({name:A,value:t}),e}var ao="http://www.w3.org/1999/xhtml";const $l={svg:"http://www.w3.org/2000/svg",xhtml:ao,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Qi(e){var A=e+="",t=A.indexOf(":");return t>=0&&(A=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),$l.hasOwnProperty(A)?{space:$l[A],local:e}:e}function $p(e){return function(){var A=this.ownerDocument,t=this.namespaceURI;return t===ao&&A.documentElement.namespaceURI===ao?A.createElement(e):A.createElementNS(t,e)}}function Am(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Ac(e){var A=Qi(e);return(A.local?Am:$p)(A)}function em(){}function lo(e){return e==null?em:function(){return this.querySelector(e)}}function tm(e){typeof e!="function"&&(e=lo(e));for(var A=this._groups,t=A.length,n=new Array(t),r=0;r<t;++r)for(var i=A[r],s=i.length,o=n[r]=new Array(s),a,l,c=0;c<s;++c)(a=i[c])&&(l=e.call(a,a.__data__,c,i))&&("__data__"in a&&(l.__data__=a.__data__),o[c]=l);return new ot(n,this._parents)}function nm(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function rm(){return[]}function ec(e){return e==null?rm:function(){return this.querySelectorAll(e)}}function im(e){return function(){return nm(e.apply(this,arguments))}}function sm(e){typeof e=="function"?e=im(e):e=ec(e);for(var A=this._groups,t=A.length,n=[],r=[],i=0;i<t;++i)for(var s=A[i],o=s.length,a,l=0;l<o;++l)(a=s[l])&&(n.push(e.call(a,a.__data__,l,s)),r.push(a));return new ot(n,r)}function tc(e){return function(){return this.matches(e)}}function nc(e){return function(A){return A.matches(e)}}var om=Array.prototype.find;function am(e){return function(){return om.call(this.children,e)}}function lm(){return this.firstElementChild}function cm(e){return this.select(e==null?lm:am(typeof e=="function"?e:nc(e)))}var um=Array.prototype.filter;function fm(){return Array.from(this.children)}function hm(e){return function(){return um.call(this.children,e)}}function dm(e){return this.selectAll(e==null?fm:hm(typeof e=="function"?e:nc(e)))}function gm(e){typeof e!="function"&&(e=tc(e));for(var A=this._groups,t=A.length,n=new Array(t),r=0;r<t;++r)for(var i=A[r],s=i.length,o=n[r]=[],a,l=0;l<s;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&o.push(a);return new ot(n,this._parents)}function rc(e){return new Array(e.length)}function Bm(){return new ot(this._enter||this._groups.map(rc),this._parents)}function yi(e,A){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=A}yi.prototype={constructor:yi,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,A){return this._parent.insertBefore(e,A)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function pm(e){return function(){return e}}function mm(e,A,t,n,r,i){for(var s=0,o,a=A.length,l=i.length;s<l;++s)(o=A[s])?(o.__data__=i[s],n[s]=o):t[s]=new yi(e,i[s]);for(;s<a;++s)(o=A[s])&&(r[s]=o)}function wm(e,A,t,n,r,i,s){var o,a,l=new Map,c=A.length,f=i.length,u=new Array(c),h;for(o=0;o<c;++o)(a=A[o])&&(u[o]=h=s.call(a,a.__data__,o,A)+"",l.has(h)?r[o]=a:l.set(h,a));for(o=0;o<f;++o)h=s.call(e,i[o],o,i)+"",(a=l.get(h))?(n[o]=a,a.__data__=i[o],l.delete(h)):t[o]=new yi(e,i[o]);for(o=0;o<c;++o)(a=A[o])&&l.get(u[o])===a&&(r[o]=a)}function vm(e){return e.__data__}function Cm(e,A){if(!arguments.length)return Array.from(this,vm);var t=A?wm:mm,n=this._parents,r=this._groups;typeof e!="function"&&(e=pm(e));for(var i=r.length,s=new Array(i),o=new Array(i),a=new Array(i),l=0;l<i;++l){var c=n[l],f=r[l],u=f.length,h=Qm(e.call(c,c&&c.__data__,l,n)),d=h.length,g=o[l]=new Array(d),B=s[l]=new Array(d),p=a[l]=new Array(u);t(c,f,g,B,p,h,A);for(var Q=0,F=0,v,y;Q<d;++Q)if(v=g[Q]){for(Q>=F&&(F=Q+1);!(y=B[F])&&++F<d;);v._next=y||null}}return s=new ot(s,n),s._enter=o,s._exit=a,s}function Qm(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function ym(){return new ot(this._exit||this._groups.map(rc),this._parents)}function _m(e,A,t){var n=this.enter(),r=this,i=this.exit();return typeof e=="function"?(n=e(n),n&&(n=n.selection())):n=n.append(e+""),A!=null&&(r=A(r),r&&(r=r.selection())),t==null?i.remove():t(i),n&&r?n.merge(r).order():r}function Um(e){for(var A=e.selection?e.selection():e,t=this._groups,n=A._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var l=t[a],c=n[a],f=l.length,u=o[a]=new Array(f),h,d=0;d<f;++d)(h=l[d]||c[d])&&(u[d]=h);for(;a<r;++a)o[a]=t[a];return new ot(o,this._parents)}function Fm(){for(var e=this._groups,A=-1,t=e.length;++A<t;)for(var n=e[A],r=n.length-1,i=n[r],s;--r>=0;)(s=n[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function bm(e){e||(e=Em);function A(f,u){return f&&u?e(f.__data__,u.__data__):!f-!u}for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i){for(var s=t[i],o=s.length,a=r[i]=new Array(o),l,c=0;c<o;++c)(l=s[c])&&(a[c]=l);a.sort(A)}return new ot(r,this._parents).order()}function Em(e,A){return e<A?-1:e>A?1:e>=A?0:NaN}function Im(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Hm(){return Array.from(this)}function Sm(){for(var e=this._groups,A=0,t=e.length;A<t;++A)for(var n=e[A],r=0,i=n.length;r<i;++r){var s=n[r];if(s)return s}return null}function xm(){let e=0;for(const A of this)++e;return e}function Lm(){return!this.node()}function km(e){for(var A=this._groups,t=0,n=A.length;t<n;++t)for(var r=A[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&e.call(o,o.__data__,i,r);return this}function Mm(e){return function(){this.removeAttribute(e)}}function Tm(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Dm(e,A){return function(){this.setAttribute(e,A)}}function Km(e,A){return function(){this.setAttributeNS(e.space,e.local,A)}}function Om(e,A){return function(){var t=A.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function Nm(e,A){return function(){var t=A.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function Rm(e,A){var t=Qi(e);if(arguments.length<2){var n=this.node();return t.local?n.getAttributeNS(t.space,t.local):n.getAttribute(t)}return this.each((A==null?t.local?Tm:Mm:typeof A=="function"?t.local?Nm:Om:t.local?Km:Dm)(t,A))}function ic(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Pm(e){return function(){this.style.removeProperty(e)}}function Vm(e,A,t){return function(){this.style.setProperty(e,A,t)}}function Gm(e,A,t){return function(){var n=A.apply(this,arguments);n==null?this.style.removeProperty(e):this.style.setProperty(e,n,t)}}function Xm(e,A,t){return arguments.length>1?this.each((A==null?Pm:typeof A=="function"?Gm:Vm)(e,A,t??"")):Pn(this.node(),e)}function Pn(e,A){return e.style.getPropertyValue(A)||ic(e).getComputedStyle(e,null).getPropertyValue(A)}function Jm(e){return function(){delete this[e]}}function Wm(e,A){return function(){this[e]=A}}function Ym(e,A){return function(){var t=A.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function zm(e,A){return arguments.length>1?this.each((A==null?Jm:typeof A=="function"?Ym:Wm)(e,A)):this.node()[e]}function sc(e){return e.trim().split(/^|\s+/)}function co(e){return e.classList||new oc(e)}function oc(e){this._node=e,this._names=sc(e.getAttribute("class")||"")}oc.prototype={add:function(e){var A=this._names.indexOf(e);A<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var A=this._names.indexOf(e);A>=0&&(this._names.splice(A,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ac(e,A){for(var t=co(e),n=-1,r=A.length;++n<r;)t.add(A[n])}function lc(e,A){for(var t=co(e),n=-1,r=A.length;++n<r;)t.remove(A[n])}function jm(e){return function(){ac(this,e)}}function qm(e){return function(){lc(this,e)}}function Zm(e,A){return function(){(A.apply(this,arguments)?ac:lc)(this,e)}}function $m(e,A){var t=sc(e+"");if(arguments.length<2){for(var n=co(this.node()),r=-1,i=t.length;++r<i;)if(!n.contains(t[r]))return!1;return!0}return this.each((typeof A=="function"?Zm:A?jm:qm)(t,A))}function Aw(){this.textContent=""}function ew(e){return function(){this.textContent=e}}function tw(e){return function(){var A=e.apply(this,arguments);this.textContent=A??""}}function nw(e){return arguments.length?this.each(e==null?Aw:(typeof e=="function"?tw:ew)(e)):this.node().textContent}function rw(){this.innerHTML=""}function iw(e){return function(){this.innerHTML=e}}function sw(e){return function(){var A=e.apply(this,arguments);this.innerHTML=A??""}}function ow(e){return arguments.length?this.each(e==null?rw:(typeof e=="function"?sw:iw)(e)):this.node().innerHTML}function aw(){this.nextSibling&&this.parentNode.appendChild(this)}function lw(){return this.each(aw)}function cw(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uw(){return this.each(cw)}function fw(e){var A=typeof e=="function"?e:Ac(e);return this.select(function(){return this.appendChild(A.apply(this,arguments))})}function hw(){return null}function dw(e,A){var t=typeof e=="function"?e:Ac(e),n=A==null?hw:typeof A=="function"?A:lo(A);return this.select(function(){return this.insertBefore(t.apply(this,arguments),n.apply(this,arguments)||null)})}function gw(){var e=this.parentNode;e&&e.removeChild(this)}function Bw(){return this.each(gw)}function pw(){var e=this.cloneNode(!1),A=this.parentNode;return A?A.insertBefore(e,this.nextSibling):e}function mw(){var e=this.cloneNode(!0),A=this.parentNode;return A?A.insertBefore(e,this.nextSibling):e}function ww(e){return this.select(e?mw:pw)}function vw(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Cw(e){return function(A){e.call(this,A,this.__data__)}}function Qw(e){return e.trim().split(/^|\s+/).map(function(A){var t="",n=A.indexOf(".");return n>=0&&(t=A.slice(n+1),A=A.slice(0,n)),{type:A,name:t}})}function yw(e){return function(){var A=this.__on;if(A){for(var t=0,n=-1,r=A.length,i;t<r;++t)i=A[t],(!e.type||i.type===e.type)&&i.name===e.name?this.removeEventListener(i.type,i.listener,i.options):A[++n]=i;++n?A.length=n:delete this.__on}}}function _w(e,A,t){return function(){var n=this.__on,r,i=Cw(A);if(n){for(var s=0,o=n.length;s<o;++s)if((r=n[s]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=t),r.value=A;return}}this.addEventListener(e.type,i,t),r={type:e.type,name:e.name,value:A,listener:i,options:t},n?n.push(r):this.__on=[r]}}function Uw(e,A,t){var n=Qw(e+""),r,i=n.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var a=0,l=o.length,c;a<l;++a)for(r=0,c=o[a];r<i;++r)if((s=n[r]).type===c.type&&s.name===c.name)return c.value}return}for(o=A?_w:yw,r=0;r<i;++r)this.each(o(n[r],A,t));return this}function cc(e,A,t){var n=ic(e),r=n.CustomEvent;typeof r=="function"?r=new r(A,t):(r=n.document.createEvent("Event"),t?(r.initEvent(A,t.bubbles,t.cancelable),r.detail=t.detail):r.initEvent(A,!1,!1)),e.dispatchEvent(r)}function Fw(e,A){return function(){return cc(this,e,A)}}function bw(e,A){return function(){return cc(this,e,A.apply(this,arguments))}}function Ew(e,A){return this.each((typeof A=="function"?bw:Fw)(e,A))}function*Iw(){for(var e=this._groups,A=0,t=e.length;A<t;++A)for(var n=e[A],r=0,i=n.length,s;r<i;++r)(s=n[r])&&(yield s)}var uc=[null];function ot(e,A){this._groups=e,this._parents=A}function pr(){return new ot([[document.documentElement]],uc)}function Hw(){return this}ot.prototype=pr.prototype={constructor:ot,select:tm,selectAll:sm,selectChild:cm,selectChildren:dm,filter:gm,data:Cm,enter:Bm,exit:ym,join:_m,merge:Um,selection:Hw,order:Fm,sort:bm,call:Im,nodes:Hm,node:Sm,size:xm,empty:Lm,each:km,attr:Rm,style:Xm,property:zm,classed:$m,text:nw,html:ow,raise:lw,lower:uw,append:fw,insert:dw,remove:Bw,clone:ww,datum:vw,on:Uw,dispatch:Ew,[Symbol.iterator]:Iw};function Qe(e){return typeof e=="string"?new ot([[document.querySelector(e)]],[document.documentElement]):new ot([[e]],uc)}function Sw(e){let A;for(;A=e.sourceEvent;)e=A;return e}function xe(e,A){if(e=Sw(e),A===void 0&&(A=e.currentTarget),A){var t=A.ownerSVGElement||A;if(t.createSVGPoint){var n=t.createSVGPoint();return n.x=e.clientX,n.y=e.clientY,n=n.matrixTransform(A.getScreenCTM().inverse()),[n.x,n.y]}if(A.getBoundingClientRect){var r=A.getBoundingClientRect();return[e.clientX-r.left-A.clientLeft,e.clientY-r.top-A.clientTop]}}return[e.pageX,e.pageY]}const xw={passive:!1},mr={capture:!0,passive:!1};function uo(e){e.stopImmediatePropagation()}function Vn(e){e.preventDefault(),e.stopImmediatePropagation()}function fc(e){var A=e.document.documentElement,t=Qe(e).on("dragstart.drag",Vn,mr);"onselectstart"in A?t.on("selectstart.drag",Vn,mr):(A.__noselect=A.style.MozUserSelect,A.style.MozUserSelect="none")}function hc(e,A){var t=e.document.documentElement,n=Qe(e).on("dragstart.drag",null);A&&(n.on("click.drag",Vn,mr),setTimeout(function(){n.on("click.drag",null)},0)),"onselectstart"in t?n.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}const _i=e=>()=>e;function fo(e,{sourceEvent:A,subject:t,target:n,identifier:r,active:i,x:s,y:o,dx:a,dy:l,dispatch:c}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:A,enumerable:!0,configurable:!0},subject:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:o,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:c}})}fo.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Lw(e){return!e.ctrlKey&&!e.button}function kw(){return this.parentNode}function Mw(e,A){return A??{x:e.x,y:e.y}}function Tw(){return navigator.maxTouchPoints||"ontouchstart"in this}function Dw(){var e=Lw,A=kw,t=Mw,n=Tw,r={},i=Br("start","drag","end"),s=0,o,a,l,c,f=0;function u(v){v.on("mousedown.drag",h).filter(n).on("touchstart.drag",B).on("touchmove.drag",p,xw).on("touchend.drag touchcancel.drag",Q).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(v,y){if(!(c||!e.call(this,v,y))){var U=F(this,A.call(this,v,y),v,y,"mouse");U&&(Qe(v.view).on("mousemove.drag",d,mr).on("mouseup.drag",g,mr),fc(v.view),uo(v),l=!1,o=v.clientX,a=v.clientY,U("start",v))}}function d(v){if(Vn(v),!l){var y=v.clientX-o,U=v.clientY-a;l=y*y+U*U>f}r.mouse("drag",v)}function g(v){Qe(v.view).on("mousemove.drag mouseup.drag",null),hc(v.view,l),Vn(v),r.mouse("end",v)}function B(v,y){if(e.call(this,v,y)){var U=v.changedTouches,S=A.call(this,v,y),_=U.length,b,T;for(b=0;b<_;++b)(T=F(this,S,v,y,U[b].identifier,U[b]))&&(uo(v),T("start",v,U[b]))}}function p(v){var y=v.changedTouches,U=y.length,S,_;for(S=0;S<U;++S)(_=r[y[S].identifier])&&(Vn(v),_("drag",v,y[S]))}function Q(v){var y=v.changedTouches,U=y.length,S,_;for(c&&clearTimeout(c),c=setTimeout(function(){c=null},500),S=0;S<U;++S)(_=r[y[S].identifier])&&(uo(v),_("end",v,y[S]))}function F(v,y,U,S,_,b){var T=i.copy(),x=xe(b||U,y),k,M,E;if((E=t.call(v,new fo("beforestart",{sourceEvent:U,target:u,identifier:_,active:s,x:x[0],y:x[1],dx:0,dy:0,dispatch:T}),S))!=null)return k=E.x-x[0]||0,M=E.y-x[1]||0,function P(I,X,O){var V=x,J;switch(I){case"start":r[_]=P,J=s++;break;case"end":delete r[_],--s;case"drag":x=xe(O||X,y),J=s;break}T.call(I,v,new fo(I,{sourceEvent:X,subject:E,target:u,identifier:_,active:J,x:x[0]+k,y:x[1]+M,dx:x[0]-V[0],dy:x[1]-V[1],dispatch:T}),S)}}return u.filter=function(v){return arguments.length?(e=typeof v=="function"?v:_i(!!v),u):e},u.container=function(v){return arguments.length?(A=typeof v=="function"?v:_i(v),u):A},u.subject=function(v){return arguments.length?(t=typeof v=="function"?v:_i(v),u):t},u.touchable=function(v){return arguments.length?(n=typeof v=="function"?v:_i(!!v),u):n},u.on=function(){var v=i.on.apply(i,arguments);return v===i?u:v},u.clickDistance=function(v){return arguments.length?(f=(v=+v)*v,u):Math.sqrt(f)},u}function ho(e,A,t){e.prototype=A.prototype=t,t.constructor=e}function dc(e,A){var t=Object.create(e.prototype);for(var n in A)t[n]=A[n];return t}function wr(){}var vr=.7,Ui=1/vr,Gn="\\s*([+-]?\\d+)\\s*",Cr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",bt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kw=/^#([0-9a-f]{3,8})$/,Ow=new RegExp(`^rgb\\(${Gn},${Gn},${Gn}\\)$`),Nw=new RegExp(`^rgb\\(${bt},${bt},${bt}\\)$`),Rw=new RegExp(`^rgba\\(${Gn},${Gn},${Gn},${Cr}\\)$`),Pw=new RegExp(`^rgba\\(${bt},${bt},${bt},${Cr}\\)$`),Vw=new RegExp(`^hsl\\(${Cr},${bt},${bt}\\)$`),Gw=new RegExp(`^hsla\\(${Cr},${bt},${bt},${Cr}\\)$`),gc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ho(wr,mn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Bc,formatHex:Bc,formatHex8:Xw,formatHsl:Jw,formatRgb:pc,toString:pc});function Bc(){return this.rgb().formatHex()}function Xw(){return this.rgb().formatHex8()}function Jw(){return Qc(this).formatHsl()}function pc(){return this.rgb().formatRgb()}function mn(e){var A,t;return e=(e+"").trim().toLowerCase(),(A=Kw.exec(e))?(t=A[1].length,A=parseInt(A[1],16),t===6?mc(A):t===3?new At(A>>8&15|A>>4&240,A>>4&15|A&240,(A&15)<<4|A&15,1):t===8?Fi(A>>24&255,A>>16&255,A>>8&255,(A&255)/255):t===4?Fi(A>>12&15|A>>8&240,A>>8&15|A>>4&240,A>>4&15|A&240,((A&15)<<4|A&15)/255):null):(A=Ow.exec(e))?new At(A[1],A[2],A[3],1):(A=Nw.exec(e))?new At(A[1]*255/100,A[2]*255/100,A[3]*255/100,1):(A=Rw.exec(e))?Fi(A[1],A[2],A[3],A[4]):(A=Pw.exec(e))?Fi(A[1]*255/100,A[2]*255/100,A[3]*255/100,A[4]):(A=Vw.exec(e))?Cc(A[1],A[2]/100,A[3]/100,1):(A=Gw.exec(e))?Cc(A[1],A[2]/100,A[3]/100,A[4]):gc.hasOwnProperty(e)?mc(gc[e]):e==="transparent"?new At(NaN,NaN,NaN,0):null}function mc(e){return new At(e>>16&255,e>>8&255,e&255,1)}function Fi(e,A,t,n){return n<=0&&(e=A=t=NaN),new At(e,A,t,n)}function Ww(e){return e instanceof wr||(e=mn(e)),e?(e=e.rgb(),new At(e.r,e.g,e.b,e.opacity)):new At}function go(e,A,t,n){return arguments.length===1?Ww(e):new At(e,A,t,n??1)}function At(e,A,t,n){this.r=+e,this.g=+A,this.b=+t,this.opacity=+n}ho(At,go,dc(wr,{brighter(e){return e=e==null?Ui:Math.pow(Ui,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new At(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new At(wn(this.r),wn(this.g),wn(this.b),bi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wc,formatHex:wc,formatHex8:Yw,formatRgb:vc,toString:vc}));function wc(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}`}function Yw(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}${vn((isNaN(this.opacity)?1:this.opacity)*255)}`}function vc(){const e=bi(this.opacity);return`${e===1?"rgb(":"rgba("}${wn(this.r)}, ${wn(this.g)}, ${wn(this.b)}${e===1?")":`, ${e})`}`}function bi(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function wn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function vn(e){return e=wn(e),(e<16?"0":"")+e.toString(16)}function Cc(e,A,t,n){return n<=0?e=A=t=NaN:t<=0||t>=1?e=A=NaN:A<=0&&(e=NaN),new Ct(e,A,t,n)}function Qc(e){if(e instanceof Ct)return new Ct(e.h,e.s,e.l,e.opacity);if(e instanceof wr||(e=mn(e)),!e)return new Ct;if(e instanceof Ct)return e;e=e.rgb();var A=e.r/255,t=e.g/255,n=e.b/255,r=Math.min(A,t,n),i=Math.max(A,t,n),s=NaN,o=i-r,a=(i+r)/2;return o?(A===i?s=(t-n)/o+(t<n)*6:t===i?s=(n-A)/o+2:s=(A-t)/o+4,o/=a<.5?i+r:2-i-r,s*=60):o=a>0&&a<1?0:s,new Ct(s,o,a,e.opacity)}function Ei(e,A,t,n){return arguments.length===1?Qc(e):new Ct(e,A,t,n??1)}function Ct(e,A,t,n){this.h=+e,this.s=+A,this.l=+t,this.opacity=+n}ho(Ct,Ei,dc(wr,{brighter(e){return e=e==null?Ui:Math.pow(Ui,e),new Ct(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?vr:Math.pow(vr,e),new Ct(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,A=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*A,r=2*t-n;return new At(Bo(e>=240?e-240:e+120,r,n),Bo(e,r,n),Bo(e<120?e+240:e-120,r,n),this.opacity)},clamp(){return new Ct(yc(this.h),Ii(this.s),Ii(this.l),bi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=bi(this.opacity);return`${e===1?"hsl(":"hsla("}${yc(this.h)}, ${Ii(this.s)*100}%, ${Ii(this.l)*100}%${e===1?")":`, ${e})`}`}}));function yc(e){return e=(e||0)%360,e<0?e+360:e}function Ii(e){return Math.max(0,Math.min(1,e||0))}function Bo(e,A,t){return(e<60?A+(t-A)*e/60:e<180?t:e<240?A+(t-A)*(240-e)/60:A)*255}const po=e=>()=>e;function zw(e,A){return function(t){return e+t*A}}function jw(e,A,t){return e=Math.pow(e,t),A=Math.pow(A,t)-e,t=1/t,function(n){return Math.pow(e+n*A,t)}}function qw(e){return(e=+e)==1?_c:function(A,t){return t-A?jw(A,t,e):po(isNaN(A)?t:A)}}function _c(e,A){var t=A-e;return t?zw(e,t):po(isNaN(e)?A:e)}const Hi=function e(A){var t=qw(A);function n(r,i){var s=t((r=go(r)).r,(i=go(i)).r),o=t(r.g,i.g),a=t(r.b,i.b),l=_c(r.opacity,i.opacity);return function(c){return r.r=s(c),r.g=o(c),r.b=a(c),r.opacity=l(c),r+""}}return n.gamma=e,n}(1);function Zw(e,A){A||(A=[]);var t=e?Math.min(A.length,e.length):0,n=A.slice(),r;return function(i){for(r=0;r<t;++r)n[r]=e[r]*(1-i)+A[r]*i;return n}}function $w(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function A0(e,A){var t=A?A.length:0,n=e?Math.min(t,e.length):0,r=new Array(n),i=new Array(t),s;for(s=0;s<n;++s)r[s]=vo(e[s],A[s]);for(;s<t;++s)i[s]=A[s];return function(o){for(s=0;s<n;++s)i[s]=r[s](o);return i}}function e0(e,A){var t=new Date;return e=+e,A=+A,function(n){return t.setTime(e*(1-n)+A*n),t}}function Qt(e,A){return e=+e,A=+A,function(t){return e*(1-t)+A*t}}function t0(e,A){var t={},n={},r;(e===null||typeof e!="object")&&(e={}),(A===null||typeof A!="object")&&(A={});for(r in A)r in e?t[r]=vo(e[r],A[r]):n[r]=A[r];return function(i){for(r in t)n[r]=t[r](i);return n}}var mo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wo=new RegExp(mo.source,"g");function n0(e){return function(){return e}}function r0(e){return function(A){return e(A)+""}}function Uc(e,A){var t=mo.lastIndex=wo.lastIndex=0,n,r,i,s=-1,o=[],a=[];for(e=e+"",A=A+"";(n=mo.exec(e))&&(r=wo.exec(A));)(i=r.index)>t&&(i=A.slice(t,i),o[s]?o[s]+=i:o[++s]=i),(n=n[0])===(r=r[0])?o[s]?o[s]+=r:o[++s]=r:(o[++s]=null,a.push({i:s,x:Qt(n,r)})),t=wo.lastIndex;return t<A.length&&(i=A.slice(t),o[s]?o[s]+=i:o[++s]=i),o.length<2?a[0]?r0(a[0].x):n0(A):(A=a.length,function(l){for(var c=0,f;c<A;++c)o[(f=a[c]).i]=f.x(l);return o.join("")})}function vo(e,A){var t=typeof A,n;return A==null||t==="boolean"?po(A):(t==="number"?Qt:t==="string"?(n=mn(A))?(A=n,Hi):Uc:A instanceof mn?Hi:A instanceof Date?e0:$w(A)?Zw:Array.isArray(A)?A0:typeof A.valueOf!="function"&&typeof A.toString!="function"||isNaN(A)?t0:Qt)(e,A)}function i0(e,A){return e=+e,A=+A,function(t){return Math.round(e*(1-t)+A*t)}}var Fc=180/Math.PI,Co={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function bc(e,A,t,n,r,i){var s,o,a;return(s=Math.sqrt(e*e+A*A))&&(e/=s,A/=s),(a=e*t+A*n)&&(t-=e*a,n-=A*a),(o=Math.sqrt(t*t+n*n))&&(t/=o,n/=o,a/=o),e*n<A*t&&(e=-e,A=-A,a=-a,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(A,e)*Fc,skewX:Math.atan(a)*Fc,scaleX:s,scaleY:o}}var Si;function s0(e){const A=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return A.isIdentity?Co:bc(A.a,A.b,A.c,A.d,A.e,A.f)}function o0(e){return e==null||(Si||(Si=document.createElementNS("http://www.w3.org/2000/svg","g")),Si.setAttribute("transform",e),!(e=Si.transform.baseVal.consolidate()))?Co:(e=e.matrix,bc(e.a,e.b,e.c,e.d,e.e,e.f))}function Ec(e,A,t,n){function r(l){return l.length?l.pop()+" ":""}function i(l,c,f,u,h,d){if(l!==f||c!==u){var g=h.push("translate(",null,A,null,t);d.push({i:g-4,x:Qt(l,f)},{i:g-2,x:Qt(c,u)})}else(f||u)&&h.push("translate("+f+A+u+t)}function s(l,c,f,u){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),u.push({i:f.push(r(f)+"rotate(",null,n)-2,x:Qt(l,c)})):c&&f.push(r(f)+"rotate("+c+n)}function o(l,c,f,u){l!==c?u.push({i:f.push(r(f)+"skewX(",null,n)-2,x:Qt(l,c)}):c&&f.push(r(f)+"skewX("+c+n)}function a(l,c,f,u,h,d){if(l!==f||c!==u){var g=h.push(r(h)+"scale(",null,",",null,")");d.push({i:g-4,x:Qt(l,f)},{i:g-2,x:Qt(c,u)})}else(f!==1||u!==1)&&h.push(r(h)+"scale("+f+","+u+")")}return function(l,c){var f=[],u=[];return l=e(l),c=e(c),i(l.translateX,l.translateY,c.translateX,c.translateY,f,u),s(l.rotate,c.rotate,f,u),o(l.skewX,c.skewX,f,u),a(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,u),l=c=null,function(h){for(var d=-1,g=u.length,B;++d<g;)f[(B=u[d]).i]=B.x(h);return f.join("")}}}var a0=Ec(s0,"px, ","px)","deg)"),l0=Ec(o0,", ",")",")"),c0=1e-12;function Ic(e){return((e=Math.exp(e))+1/e)/2}function u0(e){return((e=Math.exp(e))-1/e)/2}function f0(e){return((e=Math.exp(2*e))-1)/(e+1)}const h0=function e(A,t,n){function r(i,s){var o=i[0],a=i[1],l=i[2],c=s[0],f=s[1],u=s[2],h=c-o,d=f-a,g=h*h+d*d,B,p;if(g<c0)p=Math.log(u/l)/A,B=function(S){return[o+S*h,a+S*d,l*Math.exp(A*S*p)]};else{var Q=Math.sqrt(g),F=(u*u-l*l+n*g)/(2*l*t*Q),v=(u*u-l*l-n*g)/(2*u*t*Q),y=Math.log(Math.sqrt(F*F+1)-F),U=Math.log(Math.sqrt(v*v+1)-v);p=(U-y)/A,B=function(S){var _=S*p,b=Ic(y),T=l/(t*Q)*(b*f0(A*_+y)-u0(y));return[o+T*h,a+T*d,l*b/Ic(A*_+y)]}}return B.duration=p*1e3*A/Math.SQRT2,B}return r.rho=function(i){var s=Math.max(.001,+i),o=s*s,a=o*o;return e(s,o,a)},r}(Math.SQRT2,2,4);var Xn=0,Qr=0,yr=0,Hc=1e3,xi,_r,Li=0,Cn=0,ki=0,Ur=typeof performance=="object"&&performance.now?performance:Date,Sc=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Qo(){return Cn||(Sc(d0),Cn=Ur.now()+ki)}function d0(){Cn=0}function Mi(){this._call=this._time=this._next=null}Mi.prototype=yo.prototype={constructor:Mi,restart:function(e,A,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?Qo():+t)+(A==null?0:+A),!this._next&&_r!==this&&(_r?_r._next=this:xi=this,_r=this),this._call=e,this._time=t,_o()},stop:function(){this._call&&(this._call=null,this._time=1/0,_o())}};function yo(e,A,t){var n=new Mi;return n.restart(e,A,t),n}function g0(){Qo(),++Xn;for(var e=xi,A;e;)(A=Cn-e._time)>=0&&e._call.call(void 0,A),e=e._next;--Xn}function xc(){Cn=(Li=Ur.now())+ki,Xn=Qr=0;try{g0()}finally{Xn=0,p0(),Cn=0}}function B0(){var e=Ur.now(),A=e-Li;A>Hc&&(ki-=A,Li=e)}function p0(){for(var e,A=xi,t,n=1/0;A;)A._call?(n>A._time&&(n=A._time),e=A,A=A._next):(t=A._next,A._next=null,A=e?e._next=t:xi=t);_r=e,_o(n)}function _o(e){if(!Xn){Qr&&(Qr=clearTimeout(Qr));var A=e-Cn;A>24?(e<1/0&&(Qr=setTimeout(xc,e-Ur.now()-ki)),yr&&(yr=clearInterval(yr))):(yr||(Li=Ur.now(),yr=setInterval(B0,Hc)),Xn=1,Sc(xc))}}function Lc(e,A,t){var n=new Mi;return A=A==null?0:+A,n.restart(r=>{n.stop(),e(r+A)},A,t),n}var m0=Br("start","end","cancel","interrupt"),w0=[],kc=0,Mc=1,Uo=2,Ti=3,Tc=4,Fo=5,Di=6;function Ki(e,A,t,n,r,i){var s=e.__transition;if(!s)e.__transition={};else if(t in s)return;v0(e,t,{name:A,index:n,group:r,on:m0,tween:w0,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:kc})}function bo(e,A){var t=yt(e,A);if(t.state>kc)throw new Error("too late; already scheduled");return t}function Et(e,A){var t=yt(e,A);if(t.state>Ti)throw new Error("too late; already running");return t}function yt(e,A){var t=e.__transition;if(!t||!(t=t[A]))throw new Error("transition not found");return t}function v0(e,A,t){var n=e.__transition,r;n[A]=t,t.timer=yo(i,0,t.time);function i(l){t.state=Mc,t.timer.restart(s,t.delay,t.time),t.delay<=l&&s(l-t.delay)}function s(l){var c,f,u,h;if(t.state!==Mc)return a();for(c in n)if(h=n[c],h.name===t.name){if(h.state===Ti)return Lc(s);h.state===Tc?(h.state=Di,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete n[c]):+c<A&&(h.state=Di,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete n[c])}if(Lc(function(){t.state===Ti&&(t.state=Tc,t.timer.restart(o,t.delay,t.time),o(l))}),t.state=Uo,t.on.call("start",e,e.__data__,t.index,t.group),t.state===Uo){for(t.state=Ti,r=new Array(u=t.tween.length),c=0,f=-1;c<u;++c)(h=t.tween[c].value.call(e,e.__data__,t.index,t.group))&&(r[++f]=h);r.length=f+1}}function o(l){for(var c=l<t.duration?t.ease.call(null,l/t.duration):(t.timer.restart(a),t.state=Fo,1),f=-1,u=r.length;++f<u;)r[f].call(e,c);t.state===Fo&&(t.on.call("end",e,e.__data__,t.index,t.group),a())}function a(){t.state=Di,t.timer.stop(),delete n[A];for(var l in n)return;delete e.__transition}}function Oi(e,A){var t=e.__transition,n,r,i=!0,s;if(t){A=A==null?null:A+"";for(s in t){if((n=t[s]).name!==A){i=!1;continue}r=n.state>Uo&&n.state<Fo,n.state=Di,n.timer.stop(),n.on.call(r?"interrupt":"cancel",e,e.__data__,n.index,n.group),delete t[s]}i&&delete e.__transition}}function C0(e){return this.each(function(){Oi(this,e)})}function Q0(e,A){var t,n;return function(){var r=Et(this,e),i=r.tween;if(i!==t){n=t=i;for(var s=0,o=n.length;s<o;++s)if(n[s].name===A){n=n.slice(),n.splice(s,1);break}}r.tween=n}}function y0(e,A,t){var n,r;if(typeof t!="function")throw new Error;return function(){var i=Et(this,e),s=i.tween;if(s!==n){r=(n=s).slice();for(var o={name:A,value:t},a=0,l=r.length;a<l;++a)if(r[a].name===A){r[a]=o;break}a===l&&r.push(o)}i.tween=r}}function _0(e,A){var t=this._id;if(e+="",arguments.length<2){for(var n=yt(this.node(),t).tween,r=0,i=n.length,s;r<i;++r)if((s=n[r]).name===e)return s.value;return null}return this.each((A==null?Q0:y0)(t,e,A))}function Eo(e,A,t){var n=e._id;return e.each(function(){var r=Et(this,n);(r.value||(r.value={}))[A]=t.apply(this,arguments)}),function(r){return yt(r,n).value[A]}}function Dc(e,A){var t;return(typeof A=="number"?Qt:A instanceof mn?Hi:(t=mn(A))?(A=t,Hi):Uc)(e,A)}function U0(e){return function(){this.removeAttribute(e)}}function F0(e){return function(){this.removeAttributeNS(e.space,e.local)}}function b0(e,A,t){var n,r=t+"",i;return function(){var s=this.getAttribute(e);return s===r?null:s===n?i:i=A(n=s,t)}}function E0(e,A,t){var n,r=t+"",i;return function(){var s=this.getAttributeNS(e.space,e.local);return s===r?null:s===n?i:i=A(n=s,t)}}function I0(e,A,t){var n,r,i;return function(){var s,o=t(this),a;return o==null?void this.removeAttribute(e):(s=this.getAttribute(e),a=o+"",s===a?null:s===n&&a===r?i:(r=a,i=A(n=s,o)))}}function H0(e,A,t){var n,r,i;return function(){var s,o=t(this),a;return o==null?void this.removeAttributeNS(e.space,e.local):(s=this.getAttributeNS(e.space,e.local),a=o+"",s===a?null:s===n&&a===r?i:(r=a,i=A(n=s,o)))}}function S0(e,A){var t=Qi(e),n=t==="transform"?l0:Dc;return this.attrTween(e,typeof A=="function"?(t.local?H0:I0)(t,n,Eo(this,"attr."+e,A)):A==null?(t.local?F0:U0)(t):(t.local?E0:b0)(t,n,A))}function x0(e,A){return function(t){this.setAttribute(e,A.call(this,t))}}function L0(e,A){return function(t){this.setAttributeNS(e.space,e.local,A.call(this,t))}}function k0(e,A){var t,n;function r(){var i=A.apply(this,arguments);return i!==n&&(t=(n=i)&&L0(e,i)),t}return r._value=A,r}function M0(e,A){var t,n;function r(){var i=A.apply(this,arguments);return i!==n&&(t=(n=i)&&x0(e,i)),t}return r._value=A,r}function T0(e,A){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(A==null)return this.tween(t,null);if(typeof A!="function")throw new Error;var n=Qi(e);return this.tween(t,(n.local?k0:M0)(n,A))}function D0(e,A){return function(){bo(this,e).delay=+A.apply(this,arguments)}}function K0(e,A){return A=+A,function(){bo(this,e).delay=A}}function O0(e){var A=this._id;return arguments.length?this.each((typeof e=="function"?D0:K0)(A,e)):yt(this.node(),A).delay}function N0(e,A){return function(){Et(this,e).duration=+A.apply(this,arguments)}}function R0(e,A){return A=+A,function(){Et(this,e).duration=A}}function P0(e){var A=this._id;return arguments.length?this.each((typeof e=="function"?N0:R0)(A,e)):yt(this.node(),A).duration}function V0(e,A){if(typeof A!="function")throw new Error;return function(){Et(this,e).ease=A}}function G0(e){var A=this._id;return arguments.length?this.each(V0(A,e)):yt(this.node(),A).ease}function X0(e,A){return function(){var t=A.apply(this,arguments);if(typeof t!="function")throw new Error;Et(this,e).ease=t}}function J0(e){if(typeof e!="function")throw new Error;return this.each(X0(this._id,e))}function W0(e){typeof e!="function"&&(e=tc(e));for(var A=this._groups,t=A.length,n=new Array(t),r=0;r<t;++r)for(var i=A[r],s=i.length,o=n[r]=[],a,l=0;l<s;++l)(a=i[l])&&e.call(a,a.__data__,l,i)&&o.push(a);return new Kt(n,this._parents,this._name,this._id)}function Y0(e){if(e._id!==this._id)throw new Error;for(var A=this._groups,t=e._groups,n=A.length,r=t.length,i=Math.min(n,r),s=new Array(n),o=0;o<i;++o)for(var a=A[o],l=t[o],c=a.length,f=s[o]=new Array(c),u,h=0;h<c;++h)(u=a[h]||l[h])&&(f[h]=u);for(;o<n;++o)s[o]=A[o];return new Kt(s,this._parents,this._name,this._id)}function z0(e){return(e+"").trim().split(/^|\s+/).every(function(A){var t=A.indexOf(".");return t>=0&&(A=A.slice(0,t)),!A||A==="start"})}function j0(e,A,t){var n,r,i=z0(A)?bo:Et;return function(){var s=i(this,e),o=s.on;o!==n&&(r=(n=o).copy()).on(A,t),s.on=r}}function q0(e,A){var t=this._id;return arguments.length<2?yt(this.node(),t).on.on(e):this.each(j0(t,e,A))}function Z0(e){return function(){var A=this.parentNode;for(var t in this.__transition)if(+t!==e)return;A&&A.removeChild(this)}}function $0(){return this.on("end.remove",Z0(this._id))}function Av(e){var A=this._name,t=this._id;typeof e!="function"&&(e=lo(e));for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var o=n[s],a=o.length,l=i[s]=new Array(a),c,f,u=0;u<a;++u)(c=o[u])&&(f=e.call(c,c.__data__,u,o))&&("__data__"in c&&(f.__data__=c.__data__),l[u]=f,Ki(l[u],A,t,u,l,yt(c,t)));return new Kt(i,this._parents,A,t)}function ev(e){var A=this._name,t=this._id;typeof e!="function"&&(e=ec(e));for(var n=this._groups,r=n.length,i=[],s=[],o=0;o<r;++o)for(var a=n[o],l=a.length,c,f=0;f<l;++f)if(c=a[f]){for(var u=e.call(c,c.__data__,f,a),h,d=yt(c,t),g=0,B=u.length;g<B;++g)(h=u[g])&&Ki(h,A,t,g,u,d);i.push(u),s.push(c)}return new Kt(i,s,A,t)}var tv=pr.prototype.constructor;function nv(){return new tv(this._groups,this._parents)}function rv(e,A){var t,n,r;return function(){var i=Pn(this,e),s=(this.style.removeProperty(e),Pn(this,e));return i===s?null:i===t&&s===n?r:r=A(t=i,n=s)}}function Kc(e){return function(){this.style.removeProperty(e)}}function iv(e,A,t){var n,r=t+"",i;return function(){var s=Pn(this,e);return s===r?null:s===n?i:i=A(n=s,t)}}function sv(e,A,t){var n,r,i;return function(){var s=Pn(this,e),o=t(this),a=o+"";return o==null&&(a=o=(this.style.removeProperty(e),Pn(this,e))),s===a?null:s===n&&a===r?i:(r=a,i=A(n=s,o))}}function ov(e,A){var t,n,r,i="style."+A,s="end."+i,o;return function(){var a=Et(this,e),l=a.on,c=a.value[i]==null?o||(o=Kc(A)):void 0;(l!==t||r!==c)&&(n=(t=l).copy()).on(s,r=c),a.on=n}}function av(e,A,t){var n=(e+="")=="transform"?a0:Dc;return A==null?this.styleTween(e,rv(e,n)).on("end.style."+e,Kc(e)):typeof A=="function"?this.styleTween(e,sv(e,n,Eo(this,"style."+e,A))).each(ov(this._id,e)):this.styleTween(e,iv(e,n,A),t).on("end.style."+e,null)}function lv(e,A,t){return function(n){this.style.setProperty(e,A.call(this,n),t)}}function cv(e,A,t){var n,r;function i(){var s=A.apply(this,arguments);return s!==r&&(n=(r=s)&&lv(e,s,t)),n}return i._value=A,i}function uv(e,A,t){var n="style."+(e+="");if(arguments.length<2)return(n=this.tween(n))&&n._value;if(A==null)return this.tween(n,null);if(typeof A!="function")throw new Error;return this.tween(n,cv(e,A,t??""))}function fv(e){return function(){this.textContent=e}}function hv(e){return function(){var A=e(this);this.textContent=A??""}}function dv(e){return this.tween("text",typeof e=="function"?hv(Eo(this,"text",e)):fv(e==null?"":e+""))}function gv(e){return function(A){this.textContent=e.call(this,A)}}function Bv(e){var A,t;function n(){var r=e.apply(this,arguments);return r!==t&&(A=(t=r)&&gv(r)),A}return n._value=e,n}function pv(e){var A="text";if(arguments.length<1)return(A=this.tween(A))&&A._value;if(e==null)return this.tween(A,null);if(typeof e!="function")throw new Error;return this.tween(A,Bv(e))}function mv(){for(var e=this._name,A=this._id,t=Oc(),n=this._groups,r=n.length,i=0;i<r;++i)for(var s=n[i],o=s.length,a,l=0;l<o;++l)if(a=s[l]){var c=yt(a,A);Ki(a,e,t,l,s,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Kt(n,this._parents,e,t)}function wv(){var e,A,t=this,n=t._id,r=t.size();return new Promise(function(i,s){var o={value:s},a={value:function(){--r===0&&i()}};t.each(function(){var l=Et(this,n),c=l.on;c!==e&&(A=(e=c).copy(),A._.cancel.push(o),A._.interrupt.push(o),A._.end.push(a)),l.on=A}),r===0&&i()})}var vv=0;function Kt(e,A,t,n){this._groups=e,this._parents=A,this._name=t,this._id=n}function Oc(){return++vv}var Ot=pr.prototype;Kt.prototype={constructor:Kt,select:Av,selectAll:ev,selectChild:Ot.selectChild,selectChildren:Ot.selectChildren,filter:W0,merge:Y0,selection:nv,transition:mv,call:Ot.call,nodes:Ot.nodes,node:Ot.node,size:Ot.size,empty:Ot.empty,each:Ot.each,on:q0,attr:S0,attrTween:T0,style:av,styleTween:uv,text:dv,textTween:pv,remove:$0,tween:_0,delay:O0,duration:P0,ease:G0,easeVarying:J0,end:wv,[Symbol.iterator]:Ot[Symbol.iterator]};function Cv(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Qv={time:null,delay:0,duration:250,ease:Cv};function yv(e,A){for(var t;!(t=e.__transition)||!(t=t[A]);)if(!(e=e.parentNode))throw new Error(`transition ${A} not found`);return t}function _v(e){var A,t;e instanceof Kt?(A=e._id,e=e._name):(A=Oc(),(t=Qv).time=Qo(),e=e==null?null:e+"");for(var n=this._groups,r=n.length,i=0;i<r;++i)for(var s=n[i],o=s.length,a,l=0;l<o;++l)(a=s[l])&&Ki(a,e,A,l,s,t||yv(a,A));return new Kt(n,this._parents,e,A)}pr.prototype.interrupt=C0,pr.prototype.transition=_v;function Nc(e,A){var t,n=1;e==null&&(e=0),A==null&&(A=0);function r(){var i,s=t.length,o,a=0,l=0;for(i=0;i<s;++i)o=t[i],a+=o.x,l+=o.y;for(a=(a/s-e)*n,l=(l/s-A)*n,i=0;i<s;++i)o=t[i],o.x-=a,o.y-=l}return r.initialize=function(i){t=i},r.x=function(i){return arguments.length?(e=+i,r):e},r.y=function(i){return arguments.length?(A=+i,r):A},r.strength=function(i){return arguments.length?(n=+i,r):n},r}function Uv(e){const A=+this._x.call(null,e),t=+this._y.call(null,e);return Rc(this.cover(A,t),A,t,e)}function Rc(e,A,t,n){if(isNaN(A)||isNaN(t))return e;var r,i=e._root,s={data:n},o=e._x0,a=e._y0,l=e._x1,c=e._y1,f,u,h,d,g,B,p,Q;if(!i)return e._root=s,e;for(;i.length;)if((g=A>=(f=(o+l)/2))?o=f:l=f,(B=t>=(u=(a+c)/2))?a=u:c=u,r=i,!(i=i[p=B<<1|g]))return r[p]=s,e;if(h=+e._x.call(null,i.data),d=+e._y.call(null,i.data),A===h&&t===d)return s.next=i,r?r[p]=s:e._root=s,e;do r=r?r[p]=new Array(4):e._root=new Array(4),(g=A>=(f=(o+l)/2))?o=f:l=f,(B=t>=(u=(a+c)/2))?a=u:c=u;while((p=B<<1|g)===(Q=(d>=u)<<1|h>=f));return r[Q]=i,r[p]=s,e}function Fv(e){var A,t,n=e.length,r,i,s=new Array(n),o=new Array(n),a=1/0,l=1/0,c=-1/0,f=-1/0;for(t=0;t<n;++t)isNaN(r=+this._x.call(null,A=e[t]))||isNaN(i=+this._y.call(null,A))||(s[t]=r,o[t]=i,r<a&&(a=r),r>c&&(c=r),i<l&&(l=i),i>f&&(f=i));if(a>c||l>f)return this;for(this.cover(a,l).cover(c,f),t=0;t<n;++t)Rc(this,s[t],o[t],e[t]);return this}function bv(e,A){if(isNaN(e=+e)||isNaN(A=+A))return this;var t=this._x0,n=this._y0,r=this._x1,i=this._y1;if(isNaN(t))r=(t=Math.floor(e))+1,i=(n=Math.floor(A))+1;else{for(var s=r-t||1,o=this._root,a,l;t>e||e>=r||n>A||A>=i;)switch(l=(A<n)<<1|e<t,a=new Array(4),a[l]=o,o=a,s*=2,l){case 0:r=t+s,i=n+s;break;case 1:t=r-s,i=n+s;break;case 2:r=t+s,n=i-s;break;case 3:t=r-s,n=i-s;break}this._root&&this._root.length&&(this._root=o)}return this._x0=t,this._y0=n,this._x1=r,this._y1=i,this}function Ev(){var e=[];return this.visit(function(A){if(!A.length)do e.push(A.data);while(A=A.next)}),e}function Iv(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ye(e,A,t,n,r){this.node=e,this.x0=A,this.y0=t,this.x1=n,this.y1=r}function Hv(e,A,t){var n,r=this._x0,i=this._y0,s,o,a,l,c=this._x1,f=this._y1,u=[],h=this._root,d,g;for(h&&u.push(new Ye(h,r,i,c,f)),t==null?t=1/0:(r=e-t,i=A-t,c=e+t,f=A+t,t*=t);d=u.pop();)if(!(!(h=d.node)||(s=d.x0)>c||(o=d.y0)>f||(a=d.x1)<r||(l=d.y1)<i))if(h.length){var B=(s+a)/2,p=(o+l)/2;u.push(new Ye(h[3],B,p,a,l),new Ye(h[2],s,p,B,l),new Ye(h[1],B,o,a,p),new Ye(h[0],s,o,B,p)),(g=(A>=p)<<1|e>=B)&&(d=u[u.length-1],u[u.length-1]=u[u.length-1-g],u[u.length-1-g]=d)}else{var Q=e-+this._x.call(null,h.data),F=A-+this._y.call(null,h.data),v=Q*Q+F*F;if(v<t){var y=Math.sqrt(t=v);r=e-y,i=A-y,c=e+y,f=A+y,n=h.data}}return n}function Sv(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var A,t=this._root,n,r,i,s=this._x0,o=this._y0,a=this._x1,l=this._y1,c,f,u,h,d,g,B,p;if(!t)return this;if(t.length)for(;;){if((d=c>=(u=(s+a)/2))?s=u:a=u,(g=f>=(h=(o+l)/2))?o=h:l=h,A=t,!(t=t[B=g<<1|d]))return this;if(!t.length)break;(A[B+1&3]||A[B+2&3]||A[B+3&3])&&(n=A,p=B)}for(;t.data!==e;)if(r=t,!(t=t.next))return this;return(i=t.next)&&delete t.next,r?(i?r.next=i:delete r.next,this):A?(i?A[B]=i:delete A[B],(t=A[0]||A[1]||A[2]||A[3])&&t===(A[3]||A[2]||A[1]||A[0])&&!t.length&&(n?n[p]=t:this._root=t),this):(this._root=i,this)}function xv(e){for(var A=0,t=e.length;A<t;++A)this.remove(e[A]);return this}function Lv(){return this._root}function kv(){var e=0;return this.visit(function(A){if(!A.length)do++e;while(A=A.next)}),e}function Mv(e){var A=[],t,n=this._root,r,i,s,o,a;for(n&&A.push(new Ye(n,this._x0,this._y0,this._x1,this._y1));t=A.pop();)if(!e(n=t.node,i=t.x0,s=t.y0,o=t.x1,a=t.y1)&&n.length){var l=(i+o)/2,c=(s+a)/2;(r=n[3])&&A.push(new Ye(r,l,c,o,a)),(r=n[2])&&A.push(new Ye(r,i,c,l,a)),(r=n[1])&&A.push(new Ye(r,l,s,o,c)),(r=n[0])&&A.push(new Ye(r,i,s,l,c))}return this}function Tv(e){var A=[],t=[],n;for(this._root&&A.push(new Ye(this._root,this._x0,this._y0,this._x1,this._y1));n=A.pop();){var r=n.node;if(r.length){var i,s=n.x0,o=n.y0,a=n.x1,l=n.y1,c=(s+a)/2,f=(o+l)/2;(i=r[0])&&A.push(new Ye(i,s,o,c,f)),(i=r[1])&&A.push(new Ye(i,c,o,a,f)),(i=r[2])&&A.push(new Ye(i,s,f,c,l)),(i=r[3])&&A.push(new Ye(i,c,f,a,l))}t.push(n)}for(;n=t.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function Dv(e){return e[0]}function Kv(e){return arguments.length?(this._x=e,this):this._x}function Ov(e){return e[1]}function Nv(e){return arguments.length?(this._y=e,this):this._y}function Io(e,A,t){var n=new Ho(A??Dv,t??Ov,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function Ho(e,A,t,n,r,i){this._x=e,this._y=A,this._x0=t,this._y0=n,this._x1=r,this._y1=i,this._root=void 0}function Pc(e){for(var A={data:e.data},t=A;e=e.next;)t=t.next={data:e.data};return A}var ze=Io.prototype=Ho.prototype;ze.copy=function(){var e=new Ho(this._x,this._y,this._x0,this._y0,this._x1,this._y1),A=this._root,t,n;if(!A)return e;if(!A.length)return e._root=Pc(A),e;for(t=[{source:A,target:e._root=new Array(4)}];A=t.pop();)for(var r=0;r<4;++r)(n=A.source[r])&&(n.length?t.push({source:n,target:A.target[r]=new Array(4)}):A.target[r]=Pc(n));return e},ze.add=Uv,ze.addAll=Fv,ze.cover=bv,ze.data=Ev,ze.extent=Iv,ze.find=Hv,ze.remove=Sv,ze.removeAll=xv,ze.root=Lv,ze.size=kv,ze.visit=Mv,ze.visitAfter=Tv,ze.x=Kv,ze.y=Nv;function je(e){return function(){return e}}function en(e){return(e()-.5)*1e-6}function Rv(e){return e.x+e.vx}function Pv(e){return e.y+e.vy}function Vc(e){var A,t,n,r=1,i=1;typeof e!="function"&&(e=je(e==null?1:+e));function s(){for(var l,c=A.length,f,u,h,d,g,B,p=0;p<i;++p)for(f=Io(A,Rv,Pv).visitAfter(o),l=0;l<c;++l)u=A[l],g=t[u.index],B=g*g,h=u.x+u.vx,d=u.y+u.vy,f.visit(Q);function Q(F,v,y,U,S){var _=F.data,b=F.r,T=g+b;if(_){if(_.index>u.index){var x=h-_.x-_.vx,k=d-_.y-_.vy,M=x*x+k*k;M<T*T&&(x===0&&(x=en(n),M+=x*x),k===0&&(k=en(n),M+=k*k),M=(T-(M=Math.sqrt(M)))/M*r,u.vx+=(x*=M)*(T=(b*=b)/(B+b)),u.vy+=(k*=M)*T,_.vx-=x*(T=1-T),_.vy-=k*T)}return}return v>h+T||U<h-T||y>d+T||S<d-T}}function o(l){if(l.data)return l.r=t[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function a(){if(A){var l,c=A.length,f;for(t=new Array(c),l=0;l<c;++l)f=A[l],t[f.index]=+e(f,l,A)}}return s.initialize=function(l,c){A=l,n=c,a()},s.iterations=function(l){return arguments.length?(i=+l,s):i},s.strength=function(l){return arguments.length?(r=+l,s):r},s.radius=function(l){return arguments.length?(e=typeof l=="function"?l:je(+l),a(),s):e},s}function Vv(e){return e.index}function Gc(e,A){var t=e.get(A);if(!t)throw new Error("node not found: "+A);return t}function Xc(e){var A=Vv,t=f,n,r=je(30),i,s,o,a,l,c=1;e==null&&(e=[]);function f(B){return 1/Math.min(o[B.source.index],o[B.target.index])}function u(B){for(var p=0,Q=e.length;p<c;++p)for(var F=0,v,y,U,S,_,b,T;F<Q;++F)v=e[F],y=v.source,U=v.target,S=U.x+U.vx-y.x-y.vx||en(l),_=U.y+U.vy-y.y-y.vy||en(l),b=Math.sqrt(S*S+_*_),b=(b-i[F])/b*B*n[F],S*=b,_*=b,U.vx-=S*(T=a[F]),U.vy-=_*T,y.vx+=S*(T=1-T),y.vy+=_*T}function h(){if(s){var B,p=s.length,Q=e.length,F=new Map(s.map((y,U)=>[A(y,U,s),y])),v;for(B=0,o=new Array(p);B<Q;++B)v=e[B],v.index=B,typeof v.source!="object"&&(v.source=Gc(F,v.source)),typeof v.target!="object"&&(v.target=Gc(F,v.target)),o[v.source.index]=(o[v.source.index]||0)+1,o[v.target.index]=(o[v.target.index]||0)+1;for(B=0,a=new Array(Q);B<Q;++B)v=e[B],a[B]=o[v.source.index]/(o[v.source.index]+o[v.target.index]);n=new Array(Q),d(),i=new Array(Q),g()}}function d(){if(s)for(var B=0,p=e.length;B<p;++B)n[B]=+t(e[B],B,e)}function g(){if(s)for(var B=0,p=e.length;B<p;++B)i[B]=+r(e[B],B,e)}return u.initialize=function(B,p){s=B,l=p,h()},u.links=function(B){return arguments.length?(e=B,h(),u):e},u.id=function(B){return arguments.length?(A=B,u):A},u.iterations=function(B){return arguments.length?(c=+B,u):c},u.strength=function(B){return arguments.length?(t=typeof B=="function"?B:je(+B),d(),u):t},u.distance=function(B){return arguments.length?(r=typeof B=="function"?B:je(+B),g(),u):r},u}const Gv=1664525,Xv=1013904223,Jc=4294967296;function Jv(){let e=1;return()=>(e=(Gv*e+Xv)%Jc)/Jc}function Wv(e){return e.x}function Yv(e){return e.y}var zv=10,jv=Math.PI*(3-Math.sqrt(5));function Wc(e){var A,t=1,n=.001,r=1-Math.pow(n,1/300),i=0,s=.6,o=new Map,a=yo(f),l=Br("tick","end"),c=Jv();e==null&&(e=[]);function f(){u(),l.call("tick",A),t<n&&(a.stop(),l.call("end",A))}function u(g){var B,p=e.length,Q;g===void 0&&(g=1);for(var F=0;F<g;++F)for(t+=(i-t)*r,o.forEach(function(v){v(t)}),B=0;B<p;++B)Q=e[B],Q.fx==null?Q.x+=Q.vx*=s:(Q.x=Q.fx,Q.vx=0),Q.fy==null?Q.y+=Q.vy*=s:(Q.y=Q.fy,Q.vy=0);return A}function h(){for(var g=0,B=e.length,p;g<B;++g){if(p=e[g],p.index=g,p.fx!=null&&(p.x=p.fx),p.fy!=null&&(p.y=p.fy),isNaN(p.x)||isNaN(p.y)){var Q=zv*Math.sqrt(.5+g),F=g*jv;p.x=Q*Math.cos(F),p.y=Q*Math.sin(F)}(isNaN(p.vx)||isNaN(p.vy))&&(p.vx=p.vy=0)}}function d(g){return g.initialize&&g.initialize(e,c),g}return h(),A={tick:u,restart:function(){return a.restart(f),A},stop:function(){return a.stop(),A},nodes:function(g){return arguments.length?(e=g,h(),o.forEach(d),A):e},alpha:function(g){return arguments.length?(t=+g,A):t},alphaMin:function(g){return arguments.length?(n=+g,A):n},alphaDecay:function(g){return arguments.length?(r=+g,A):+r},alphaTarget:function(g){return arguments.length?(i=+g,A):i},velocityDecay:function(g){return arguments.length?(s=1-g,A):1-s},randomSource:function(g){return arguments.length?(c=g,o.forEach(d),A):c},force:function(g,B){return arguments.length>1?(B==null?o.delete(g):o.set(g,d(B)),A):o.get(g)},find:function(g,B,p){var Q=0,F=e.length,v,y,U,S,_;for(p==null?p=1/0:p*=p,Q=0;Q<F;++Q)S=e[Q],v=g-S.x,y=B-S.y,U=v*v+y*y,U<p&&(_=S,p=U);return _},on:function(g,B){return arguments.length>1?(l.on(g,B),A):l.on(g)}}}function Yc(){var e,A,t,n,r=je(-30),i,s=1,o=1/0,a=.81;function l(h){var d,g=e.length,B=Io(e,Wv,Yv).visitAfter(f);for(n=h,d=0;d<g;++d)A=e[d],B.visit(u)}function c(){if(e){var h,d=e.length,g;for(i=new Array(d),h=0;h<d;++h)g=e[h],i[g.index]=+r(g,h,e)}}function f(h){var d=0,g,B,p=0,Q,F,v;if(h.length){for(Q=F=v=0;v<4;++v)(g=h[v])&&(B=Math.abs(g.value))&&(d+=g.value,p+=B,Q+=B*g.x,F+=B*g.y);h.x=Q/p,h.y=F/p}else{g=h,g.x=g.data.x,g.y=g.data.y;do d+=i[g.data.index];while(g=g.next)}h.value=d}function u(h,d,g,B){if(!h.value)return!0;var p=h.x-A.x,Q=h.y-A.y,F=B-d,v=p*p+Q*Q;if(F*F/a<v)return v<o&&(p===0&&(p=en(t),v+=p*p),Q===0&&(Q=en(t),v+=Q*Q),v<s&&(v=Math.sqrt(s*v)),A.vx+=p*h.value*n/v,A.vy+=Q*h.value*n/v),!0;if(h.length||v>=o)return;(h.data!==A||h.next)&&(p===0&&(p=en(t),v+=p*p),Q===0&&(Q=en(t),v+=Q*Q),v<s&&(v=Math.sqrt(s*v)));do h.data!==A&&(F=i[h.data.index]*n/v,A.vx+=p*F,A.vy+=Q*F);while(h=h.next)}return l.initialize=function(h,d){e=h,t=d,c()},l.strength=function(h){return arguments.length?(r=typeof h=="function"?h:je(+h),c(),l):r},l.distanceMin=function(h){return arguments.length?(s=h*h,l):Math.sqrt(s)},l.distanceMax=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.theta=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l}function zc(e){var A=je(.1),t,n,r;typeof e!="function"&&(e=je(e==null?0:+e));function i(o){for(var a=0,l=t.length,c;a<l;++a)c=t[a],c.vx+=(r[a]-c.x)*n[a]*o}function s(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+A(t[o],o,t)}}return i.initialize=function(o){t=o,s()},i.strength=function(o){return arguments.length?(A=typeof o=="function"?o:je(+o),s(),i):A},i.x=function(o){return arguments.length?(e=typeof o=="function"?o:je(+o),s(),i):e},i}function jc(e){var A=je(.1),t,n,r;typeof e!="function"&&(e=je(e==null?0:+e));function i(o){for(var a=0,l=t.length,c;a<l;++a)c=t[a],c.vy+=(r[a]-c.y)*n[a]*o}function s(){if(t){var o,a=t.length;for(n=new Array(a),r=new Array(a),o=0;o<a;++o)n[o]=isNaN(r[o]=+e(t[o],o,t))?0:+A(t[o],o,t)}}return i.initialize=function(o){t=o,s()},i.strength=function(o){return arguments.length?(A=typeof o=="function"?o:je(+o),s(),i):A},i.y=function(o){return arguments.length?(e=typeof o=="function"?o:je(+o),s(),i):e},i}function qv(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Ni(e,A){if((t=(e=A?e.toExponential(A-1):e.toExponential()).indexOf("e"))<0)return null;var t,n=e.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+e.slice(t+1)]}function Jn(e){return e=Ni(Math.abs(e)),e?e[1]:NaN}function Zv(e,A){return function(t,n){for(var r=t.length,i=[],s=0,o=e[0],a=0;r>0&&o>0&&(a+o+1>n&&(o=Math.max(1,n-a)),i.push(t.substring(r-=o,r+o)),!((a+=o+1)>n));)o=e[s=(s+1)%e.length];return i.reverse().join(A)}}function $v(e){return function(A){return A.replace(/[0-9]/g,function(t){return e[+t]})}}var AC=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ri(e){if(!(A=AC.exec(e)))throw new Error("invalid format: "+e);var A;return new So({fill:A[1],align:A[2],sign:A[3],symbol:A[4],zero:A[5],width:A[6],comma:A[7],precision:A[8]&&A[8].slice(1),trim:A[9],type:A[10]})}Ri.prototype=So.prototype;function So(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}So.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function eC(e){A:for(var A=e.length,t=1,n=-1,r;t<A;++t)switch(e[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+e[t])break A;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(r+1):e}var qc;function tC(e,A){var t=Ni(e,A);if(!t)return e+"";var n=t[0],r=t[1],i=r-(qc=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,s=n.length;return i===s?n:i>s?n+new Array(i-s+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+Ni(e,Math.max(0,A+i-1))[0]}function Zc(e,A){var t=Ni(e,A);if(!t)return e+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const $c={"%":(e,A)=>(e*100).toFixed(A),b:e=>Math.round(e).toString(2),c:e=>e+"",d:qv,e:(e,A)=>e.toExponential(A),f:(e,A)=>e.toFixed(A),g:(e,A)=>e.toPrecision(A),o:e=>Math.round(e).toString(8),p:(e,A)=>Zc(e*100,A),r:Zc,s:tC,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Au(e){return e}var eu=Array.prototype.map,tu=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function nC(e){var A=e.grouping===void 0||e.thousands===void 0?Au:Zv(eu.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",r=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Au:$v(eu.call(e.numerals,String)),s=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",a=e.nan===void 0?"NaN":e.nan+"";function l(f){f=Ri(f);var u=f.fill,h=f.align,d=f.sign,g=f.symbol,B=f.zero,p=f.width,Q=f.comma,F=f.precision,v=f.trim,y=f.type;y==="n"?(Q=!0,y="g"):$c[y]||(F===void 0&&(F=12),v=!0,y="g"),(B||u==="0"&&h==="=")&&(B=!0,u="0",h="=");var U=g==="$"?t:g==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",S=g==="$"?n:/[%p]/.test(y)?s:"",_=$c[y],b=/[defgprs%]/.test(y);F=F===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,F)):Math.max(0,Math.min(20,F));function T(x){var k=U,M=S,E,P,I;if(y==="c")M=_(x)+M,x="";else{x=+x;var X=x<0||1/x<0;if(x=isNaN(x)?a:_(Math.abs(x),F),v&&(x=eC(x)),X&&+x==0&&d!=="+"&&(X=!1),k=(X?d==="("?d:o:d==="-"||d==="("?"":d)+k,M=(y==="s"?tu[8+qc/3]:"")+M+(X&&d==="("?")":""),b){for(E=-1,P=x.length;++E<P;)if(I=x.charCodeAt(E),48>I||I>57){M=(I===46?r+x.slice(E+1):x.slice(E))+M,x=x.slice(0,E);break}}}Q&&!B&&(x=A(x,1/0));var O=k.length+x.length+M.length,V=O<p?new Array(p-O+1).join(u):"";switch(Q&&B&&(x=A(V+x,V.length?p-M.length:1/0),V=""),h){case"<":x=k+x+M+V;break;case"=":x=k+V+x+M;break;case"^":x=V.slice(0,O=V.length>>1)+k+x+M+V.slice(O);break;default:x=V+k+x+M;break}return i(x)}return T.toString=function(){return f+""},T}function c(f,u){var h=l((f=Ri(f),f.type="f",f)),d=Math.max(-8,Math.min(8,Math.floor(Jn(u)/3)))*3,g=Math.pow(10,-d),B=tu[8+d/3];return function(p){return h(g*p)+B}}return{format:l,formatPrefix:c}}var Pi,nu,ru;rC({thousands:",",grouping:[3],currency:["$",""]});function rC(e){return Pi=nC(e),nu=Pi.format,ru=Pi.formatPrefix,Pi}function iC(e){return Math.max(0,-Jn(Math.abs(e)))}function sC(e,A){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jn(A)/3)))*3-Jn(Math.abs(e)))}function oC(e,A){return e=Math.abs(e),A=Math.abs(A)-e,Math.max(0,Jn(A)-Jn(e))+1}function xo(e,A){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(A).domain(e);break}return this}const iu=Symbol("implicit");function su(){var e=new Xl,A=[],t=[],n=iu;function r(i){let s=e.get(i);if(s===void 0){if(n!==iu)return n;e.set(i,s=A.push(i)-1)}return t[s%t.length]}return r.domain=function(i){if(!arguments.length)return A.slice();A=[],e=new Xl;for(const s of i)e.has(s)||e.set(s,A.push(s)-1);return r},r.range=function(i){return arguments.length?(t=Array.from(i),r):t.slice()},r.unknown=function(i){return arguments.length?(n=i,r):n},r.copy=function(){return su(A,t).unknown(n)},xo.apply(r,arguments),r}function ou(){var e=su().unknown(void 0),A=e.domain,t=e.range,n=0,r=1,i,s,o=!1,a=0,l=0,c=.5;delete e.unknown;function f(){var u=A().length,h=r<n,d=h?r:n,g=h?n:r;i=(g-d)/Math.max(1,u-a+l*2),o&&(i=Math.floor(i)),d+=(g-d-i*(u-a))*c,s=i*(1-a),o&&(d=Math.round(d),s=Math.round(s));var B=wi(u).map(function(p){return d+i*p});return t(h?B.reverse():B)}return e.domain=function(u){return arguments.length?(A(u),f()):A()},e.range=function(u){return arguments.length?([n,r]=u,n=+n,r=+r,f()):[n,r]},e.rangeRound=function(u){return[n,r]=u,n=+n,r=+r,o=!0,f()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(u){return arguments.length?(o=!!u,f()):o},e.padding=function(u){return arguments.length?(a=Math.min(1,l=+u),f()):a},e.paddingInner=function(u){return arguments.length?(a=Math.min(1,u),f()):a},e.paddingOuter=function(u){return arguments.length?(l=+u,f()):l},e.align=function(u){return arguments.length?(c=Math.max(0,Math.min(1,u)),f()):c},e.copy=function(){return ou(A(),[n,r]).round(o).paddingInner(a).paddingOuter(l).align(c)},xo.apply(f(),arguments)}function aC(e){return function(){return e}}function lC(e){return+e}var au=[0,1];function Wn(e){return e}function Lo(e,A){return(A-=e=+e)?function(t){return(t-e)/A}:aC(isNaN(A)?NaN:.5)}function cC(e,A){var t;return e>A&&(t=e,e=A,A=t),function(n){return Math.max(e,Math.min(A,n))}}function uC(e,A,t){var n=e[0],r=e[1],i=A[0],s=A[1];return r<n?(n=Lo(r,n),i=t(s,i)):(n=Lo(n,r),i=t(i,s)),function(o){return i(n(o))}}function fC(e,A,t){var n=Math.min(e.length,A.length)-1,r=new Array(n),i=new Array(n),s=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),A=A.slice().reverse());++s<n;)r[s]=Lo(e[s],e[s+1]),i[s]=t(A[s],A[s+1]);return function(o){var a=Mp(e,o,1,n)-1;return i[a](r[a](o))}}function hC(e,A){return A.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dC(){var e=au,A=au,t=vo,n,r,i,s=Wn,o,a,l;function c(){var u=Math.min(e.length,A.length);return s!==Wn&&(s=cC(e[0],e[u-1])),o=u>2?fC:uC,a=l=null,f}function f(u){return u==null||isNaN(u=+u)?i:(a||(a=o(e.map(n),A,t)))(n(s(u)))}return f.invert=function(u){return s(r((l||(l=o(A,e.map(n),Qt)))(u)))},f.domain=function(u){return arguments.length?(e=Array.from(u,lC),c()):e.slice()},f.range=function(u){return arguments.length?(A=Array.from(u),c()):A.slice()},f.rangeRound=function(u){return A=Array.from(u),t=i0,c()},f.clamp=function(u){return arguments.length?(s=u?!0:Wn,c()):s!==Wn},f.interpolate=function(u){return arguments.length?(t=u,c()):t},f.unknown=function(u){return arguments.length?(i=u,f):i},function(u,h){return n=u,r=h,c()}}function gC(){return dC()(Wn,Wn)}function BC(e,A,t,n){var r=Vp(e,A,t),i;switch(n=Ri(n??",f"),n.type){case"s":{var s=Math.max(Math.abs(e),Math.abs(A));return n.precision==null&&!isNaN(i=sC(r,s))&&(n.precision=i),ru(n,s)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=oC(r,Math.max(Math.abs(e),Math.abs(A))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=iC(r))&&(n.precision=i-(n.type==="%")*2);break}}return nu(n)}function pC(e){var A=e.domain;return e.ticks=function(t){var n=A();return Pp(n[0],n[n.length-1],t??10)},e.tickFormat=function(t,n){var r=A();return BC(r[0],r[r.length-1],t??10,n)},e.nice=function(t){t==null&&(t=10);var n=A(),r=0,i=n.length-1,s=n[r],o=n[i],a,l,c=10;for(o<s&&(l=s,s=o,o=l,l=r,r=i,i=l);c-- >0;){if(l=so(s,o,t),l===a)return n[r]=s,n[i]=o,A(n);if(l>0)s=Math.floor(s/l)*l,o=Math.ceil(o/l)*l;else if(l<0)s=Math.ceil(s*l)/l,o=Math.floor(o*l)/l;else break;a=l}return e},e}function Fr(){var e=gC();return e.copy=function(){return hC(e,Fr())},xo.apply(e,arguments),pC(e)}const Vi=e=>()=>e;function mC(e,{sourceEvent:A,target:t,transform:n,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:A,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},transform:{value:n,enumerable:!0,configurable:!0},_:{value:r}})}function Nt(e,A,t){this.k=e,this.x=A,this.y=t}Nt.prototype={constructor:Nt,scale:function(e){return e===1?this:new Nt(this.k*e,this.x,this.y)},translate:function(e,A){return e===0&A===0?this:new Nt(this.k,this.x+this.k*e,this.y+this.k*A)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ko=new Nt(1,0,0);Nt.prototype;function Mo(e){e.stopImmediatePropagation()}function br(e){e.preventDefault(),e.stopImmediatePropagation()}function wC(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vC(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function lu(){return this.__zoom||ko}function CC(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function QC(){return navigator.maxTouchPoints||"ontouchstart"in this}function yC(e,A,t){var n=e.invertX(A[0][0])-t[0][0],r=e.invertX(A[1][0])-t[1][0],i=e.invertY(A[0][1])-t[0][1],s=e.invertY(A[1][1])-t[1][1];return e.translate(r>n?(n+r)/2:Math.min(0,n)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function cu(){var e=wC,A=vC,t=yC,n=CC,r=QC,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],o=250,a=h0,l=Br("start","zoom","end"),c,f,u,h=500,d=150,g=0,B=10;function p(E){E.property("__zoom",lu).on("wheel.zoom",_,{passive:!1}).on("mousedown.zoom",b).on("dblclick.zoom",T).filter(r).on("touchstart.zoom",x).on("touchmove.zoom",k).on("touchend.zoom touchcancel.zoom",M).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}p.transform=function(E,P,I,X){var O=E.selection?E.selection():E;O.property("__zoom",lu),E!==O?y(E,P,I,X):O.interrupt().each(function(){U(this,arguments).event(X).start().zoom(null,typeof P=="function"?P.apply(this,arguments):P).end()})},p.scaleBy=function(E,P,I,X){p.scaleTo(E,function(){var O=this.__zoom.k,V=typeof P=="function"?P.apply(this,arguments):P;return O*V},I,X)},p.scaleTo=function(E,P,I,X){p.transform(E,function(){var O=A.apply(this,arguments),V=this.__zoom,J=I==null?v(O):typeof I=="function"?I.apply(this,arguments):I,eA=V.invert(J),oA=typeof P=="function"?P.apply(this,arguments):P;return t(F(Q(V,oA),J,eA),O,s)},I,X)},p.translateBy=function(E,P,I,X){p.transform(E,function(){return t(this.__zoom.translate(typeof P=="function"?P.apply(this,arguments):P,typeof I=="function"?I.apply(this,arguments):I),A.apply(this,arguments),s)},null,X)},p.translateTo=function(E,P,I,X,O){p.transform(E,function(){var V=A.apply(this,arguments),J=this.__zoom,eA=X==null?v(V):typeof X=="function"?X.apply(this,arguments):X;return t(ko.translate(eA[0],eA[1]).scale(J.k).translate(typeof P=="function"?-P.apply(this,arguments):-P,typeof I=="function"?-I.apply(this,arguments):-I),V,s)},X,O)};function Q(E,P){return P=Math.max(i[0],Math.min(i[1],P)),P===E.k?E:new Nt(P,E.x,E.y)}function F(E,P,I){var X=P[0]-I[0]*E.k,O=P[1]-I[1]*E.k;return X===E.x&&O===E.y?E:new Nt(E.k,X,O)}function v(E){return[(+E[0][0]+ +E[1][0])/2,(+E[0][1]+ +E[1][1])/2]}function y(E,P,I,X){E.on("start.zoom",function(){U(this,arguments).event(X).start()}).on("interrupt.zoom end.zoom",function(){U(this,arguments).event(X).end()}).tween("zoom",function(){var O=this,V=arguments,J=U(O,V).event(X),eA=A.apply(O,V),oA=I==null?v(eA):typeof I=="function"?I.apply(O,V):I,wA=Math.max(eA[1][0]-eA[0][0],eA[1][1]-eA[0][1]),cA=O.__zoom,yA=typeof P=="function"?P.apply(O,V):P,xA=a(cA.invert(oA).concat(wA/cA.k),yA.invert(oA).concat(wA/yA.k));return function(_A){if(_A===1)_A=yA;else{var Z=xA(_A),aA=wA/Z[2];_A=new Nt(aA,oA[0]-Z[0]*aA,oA[1]-Z[1]*aA)}J.zoom(null,_A)}})}function U(E,P,I){return!I&&E.__zooming||new S(E,P)}function S(E,P){this.that=E,this.args=P,this.active=0,this.sourceEvent=null,this.extent=A.apply(E,P),this.taps=0}S.prototype={event:function(E){return E&&(this.sourceEvent=E),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(E,P){return this.mouse&&E!=="mouse"&&(this.mouse[1]=P.invert(this.mouse[0])),this.touch0&&E!=="touch"&&(this.touch0[1]=P.invert(this.touch0[0])),this.touch1&&E!=="touch"&&(this.touch1[1]=P.invert(this.touch1[0])),this.that.__zoom=P,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(E){var P=Qe(this.that).datum();l.call(E,this.that,new mC(E,{sourceEvent:this.sourceEvent,target:p,type:E,transform:this.that.__zoom,dispatch:l}),P)}};function _(E,...P){if(!e.apply(this,arguments))return;var I=U(this,P).event(E),X=this.__zoom,O=Math.max(i[0],Math.min(i[1],X.k*Math.pow(2,n.apply(this,arguments)))),V=xe(E);if(I.wheel)(I.mouse[0][0]!==V[0]||I.mouse[0][1]!==V[1])&&(I.mouse[1]=X.invert(I.mouse[0]=V)),clearTimeout(I.wheel);else{if(X.k===O)return;I.mouse=[V,X.invert(V)],Oi(this),I.start()}br(E),I.wheel=setTimeout(J,d),I.zoom("mouse",t(F(Q(X,O),I.mouse[0],I.mouse[1]),I.extent,s));function J(){I.wheel=null,I.end()}}function b(E,...P){if(u||!e.apply(this,arguments))return;var I=E.currentTarget,X=U(this,P,!0).event(E),O=Qe(E.view).on("mousemove.zoom",oA,!0).on("mouseup.zoom",wA,!0),V=xe(E,I),J=E.clientX,eA=E.clientY;fc(E.view),Mo(E),X.mouse=[V,this.__zoom.invert(V)],Oi(this),X.start();function oA(cA){if(br(cA),!X.moved){var yA=cA.clientX-J,xA=cA.clientY-eA;X.moved=yA*yA+xA*xA>g}X.event(cA).zoom("mouse",t(F(X.that.__zoom,X.mouse[0]=xe(cA,I),X.mouse[1]),X.extent,s))}function wA(cA){O.on("mousemove.zoom mouseup.zoom",null),hc(cA.view,X.moved),br(cA),X.event(cA).end()}}function T(E,...P){if(e.apply(this,arguments)){var I=this.__zoom,X=xe(E.changedTouches?E.changedTouches[0]:E,this),O=I.invert(X),V=I.k*(E.shiftKey?.5:2),J=t(F(Q(I,V),X,O),A.apply(this,P),s);br(E),o>0?Qe(this).transition().duration(o).call(y,J,X,E):Qe(this).call(p.transform,J,X,E)}}function x(E,...P){if(e.apply(this,arguments)){var I=E.touches,X=I.length,O=U(this,P,E.changedTouches.length===X).event(E),V,J,eA,oA;for(Mo(E),J=0;J<X;++J)eA=I[J],oA=xe(eA,this),oA=[oA,this.__zoom.invert(oA),eA.identifier],O.touch0?!O.touch1&&O.touch0[2]!==oA[2]&&(O.touch1=oA,O.taps=0):(O.touch0=oA,V=!0,O.taps=1+!!c);c&&(c=clearTimeout(c)),V&&(O.taps<2&&(f=oA[0],c=setTimeout(function(){c=null},h)),Oi(this),O.start())}}function k(E,...P){if(this.__zooming){var I=U(this,P).event(E),X=E.changedTouches,O=X.length,V,J,eA,oA;for(br(E),V=0;V<O;++V)J=X[V],eA=xe(J,this),I.touch0&&I.touch0[2]===J.identifier?I.touch0[0]=eA:I.touch1&&I.touch1[2]===J.identifier&&(I.touch1[0]=eA);if(J=I.that.__zoom,I.touch1){var wA=I.touch0[0],cA=I.touch0[1],yA=I.touch1[0],xA=I.touch1[1],_A=(_A=yA[0]-wA[0])*_A+(_A=yA[1]-wA[1])*_A,Z=(Z=xA[0]-cA[0])*Z+(Z=xA[1]-cA[1])*Z;J=Q(J,Math.sqrt(_A/Z)),eA=[(wA[0]+yA[0])/2,(wA[1]+yA[1])/2],oA=[(cA[0]+xA[0])/2,(cA[1]+xA[1])/2]}else if(I.touch0)eA=I.touch0[0],oA=I.touch0[1];else return;I.zoom("touch",t(F(J,eA,oA),I.extent,s))}}function M(E,...P){if(this.__zooming){var I=U(this,P).event(E),X=E.changedTouches,O=X.length,V,J;for(Mo(E),u&&clearTimeout(u),u=setTimeout(function(){u=null},h),V=0;V<O;++V)J=X[V],I.touch0&&I.touch0[2]===J.identifier?delete I.touch0:I.touch1&&I.touch1[2]===J.identifier&&delete I.touch1;if(I.touch1&&!I.touch0&&(I.touch0=I.touch1,delete I.touch1),I.touch0)I.touch0[1]=this.__zoom.invert(I.touch0[0]);else if(I.end(),I.taps===2&&(J=xe(J,this),Math.hypot(f[0]-J[0],f[1]-J[1])<B)){var eA=Qe(this).on("dblclick.zoom");eA&&eA.apply(this,arguments)}}}return p.wheelDelta=function(E){return arguments.length?(n=typeof E=="function"?E:Vi(+E),p):n},p.filter=function(E){return arguments.length?(e=typeof E=="function"?E:Vi(!!E),p):e},p.touchable=function(E){return arguments.length?(r=typeof E=="function"?E:Vi(!!E),p):r},p.extent=function(E){return arguments.length?(A=typeof E=="function"?E:Vi([[+E[0][0],+E[0][1]],[+E[1][0],+E[1][1]]]),p):A},p.scaleExtent=function(E){return arguments.length?(i[0]=+E[0],i[1]=+E[1],p):[i[0],i[1]]},p.translateExtent=function(E){return arguments.length?(s[0][0]=+E[0][0],s[1][0]=+E[1][0],s[0][1]=+E[0][1],s[1][1]=+E[1][1],p):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},p.constrain=function(E){return arguments.length?(t=E,p):t},p.duration=function(E){return arguments.length?(o=+E,p):o},p.interpolate=function(E){return arguments.length?(a=E,p):a},p.on=function(){var E=l.on.apply(l,arguments);return E===l?p:E},p.clickDistance=function(E){return arguments.length?(g=(E=+E)*E,p):Math.sqrt(g)},p.tapDistance=function(E){return arguments.length?(B=+E,p):B},p}function _C(e,A,t=null,n,r=null){const i=Qe(e);i.selectAll("*").remove();const s=i.node(),o=s.getBoundingClientRect();let a=o.width||800,l=o.height||600;const c=a/2,f=l/2,u=i.append("canvas").attr("class","network-canvas").attr("width",a).attr("height",l).style("width",a+"px").style("height",l+"px").style("cursor","default"),h=u.node().getContext("2d",{alpha:!1});let d=ko;const g=new Set,B={current:null};function p(){const x=s.getBoundingClientRect(),k=x.width||800,M=x.height||600;(k!==a||M!==l)&&(a=k,l=M,u.attr("width",a).attr("height",l).style("width",a+"px").style("height",l+"px"),T())}const Q=new ResizeObserver(p);Q.observe(s);const F=Wc(A).force("link",Xc(t).id(x=>x.id).distance(x=>x.distance)).force("charge",Yc().strength(-250)).force("center",Nc(c,f).strength(.7)).force("collide",Vc(x=>x.radius+10).strength(.5)).force("x",zc(c).strength(.025)).force("y",jc(f).strength(.025)).alphaDecay(.05).velocityDecay(.6);let v=null;F.on("tick",()=>{v||(v=requestAnimationFrame(()=>{T(),v=null}))}),F.tick(100);for(let x=0;x<100;x++)F.tick();F.alphaTarget(0);const y=UC({canvas:u,nodes:A,transform:()=>d,hoveredNode:B,onSelectionChange:(x,k)=>{g.clear(),x.forEach(E=>g.add(E));const M=bC(A,x,k);n(M),T()},render:()=>T()}),U=cu().scaleExtent([.1,10]).filter(x=>!y.isSelectionMode()||x.type==="wheel").on("zoom",({transform:x})=>{d=x,T()});u.call(U);const{dragstarted:S,dragged:_,dragended:b}=FC(u,A,F,()=>d,B,()=>!y.isSelectionMode(),T);y.setupInteractions(u,{start:S,drag:_,end:b});function T(){h.save(),h.fillRect(0,0,a,l),h.translate(d.x,d.y),h.scale(d.k,d.k),h.strokeStyle="#8a8a8a",h.lineWidth=1/d.k,t.forEach(k=>{const M=k.source.x,E=k.source.y,P=k.target.x,I=k.target.y;h.globalAlpha=Math.max(.2,k.strength),h.lineWidth=k.width/d.k,h.beginPath(),h.moveTo(M,E),h.lineTo(P,I),h.stroke()}),h.globalAlpha=1,A.forEach(k=>{const M=g.has(k.id);h.fillStyle=k.color,h.beginPath(),h.arc(k.x,k.y,k.radius,0,2*Math.PI),h.fill(),M&&(h.strokeStyle="#0f2bff",h.lineWidth=3/d.k,h.stroke())});const x=y.getSelectionRect();if(x){h.strokeStyle="#0f2bff",h.fillStyle="rgba(15, 43, 255, 0.2)",h.lineWidth=2/d.k;const k=Math.min(x.x1,x.x2),M=Math.min(x.y1,x.y2),E=Math.abs(x.x2-x.x1),P=Math.abs(x.y2-x.y1);h.fillRect(k,M,E,P),h.strokeRect(k,M,E,P)}h.restore()}return T(),{destroy:()=>{v&&cancelAnimationFrame(v),F.stop(),Q.disconnect(),u.remove()},toggleSelectionMode:()=>{const x=y.toggleSelectionMode();return r&&r(x),T(),x}}}function UC(e){const{canvas:A,nodes:t,transform:n,hoveredNode:r,onSelectionChange:i,render:s}=e,o=new Set,a=[];let l=!1,c=null;function f(){return l=!l,A.style("cursor",l?"crosshair":"default"),l}function u(g){if(o.has(g)){o.delete(g);const B=a.indexOf(g);B>-1&&a.splice(B,1)}else o.add(g),a.push(g);i(o,a)}function h(g,B){const p=n(),Q=(g-p.x)/p.k,F=(B-p.y)/p.k;for(let v=t.length-1;v>=0;v--){const y=t[v],U=Q-y.x,S=F-y.y;if(Math.sqrt(U*U+S*S)<y.radius)return y}return null}function d(g,B){let p=null;g.on("mousedown",function(Q){const[F,v]=xe(Q),y=h(F,v);if(l){const U=n(),S=(F-U.x)/U.k,_=(v-U.y)/U.k;c={x1:S,y1:_,x2:S,y2:_},s()}else y&&(p=y,B.start(Q,y))}),g.on("mousemove",function(Q){const[F,v]=xe(Q);if(l){if(c){const y=n(),U=(F-y.x)/y.k,S=(v-y.y)/y.k;c.x2=U,c.y2=S,s()}}else if(p)B.drag(Q,p,F,v);else{const y=h(F,v);r.current!==y&&(r.current=y,g.style("cursor",y?"pointer":"default"),s())}}),g.on("mouseup",function(Q){if(l){if(c){const F=Math.min(c.x1,c.x2),v=Math.min(c.y1,c.y2),y=Math.max(c.x1,c.x2),U=Math.max(c.y1,c.y2);o.clear(),a.length=0;const S=[];t.forEach(_=>{_.x>=F&&_.x<=y&&_.y>=v&&_.y<=U&&S.push({id:_.id,y:_.y})}),S.sort((_,b)=>_.y-b.y),S.forEach(({id:_})=>{o.add(_),a.push(_)}),i(o,a),c=null,s()}}else if(p)B.end(Q,p),p=null;else{const[F,v]=xe(Q),y=h(F,v);y&&u(y.id)}})}return{toggleSelectionMode:f,isSelectionMode:()=>l,setupInteractions:d,getSelectionRect:()=>c}}function FC(e,A,t,n,r,i,s){let o=null;function a(f,u){i()&&(f.active||t.alphaTarget(.3).restart(),o=u,u.fx=u.x,u.fy=u.y)}function l(f,u,h,d){if(!o||!i())return;const g=n();u.fx=(h-g.x)/g.k,u.fy=(d-g.y)/g.k,s()}function c(f,u){!o||!i()||(f.active||t.alphaTarget(0),u.fx=null,u.fy=null,o=null)}return{dragstarted:a,dragged:l,dragended:c}}function bC(e,A,t){const n=new Map(e.map(r=>[r.id,r]));return t.map(r=>n.get(r)).filter(Boolean)}const uu=8,EC=1.5,IC=50,fu=.5,HC=800,SC=600;function xC(e,A,t=null,n=null,r=null){const i=HC/2,s=SC/2,a=Qe(e).append("svg").attr("class","network-svg"),l=a.append("g"),c=l.append("g").selectAll("line").data(t).join("line").attr("class","link").attr("stroke-width",d=>d.width||EC).attr("stroke-opacity",d=>Math.max(.2,d.strength||fu)),f=l.append("g").selectAll("circle").data(A).join("circle").attr("class","node").attr("r",d=>d.radius||uu).attr("fill",d=>d.color);f.append("title").text(d=>d.label);const u=Wc(A).force("link",Xc(t).id(d=>d.id).distance(d=>d.distance||IC)).force("charge",Yc().strength(-250)).force("center",Nc(i,s).strength(.7)).force("collide",Vc(d=>(d.radius||uu)+10).strength(fu)).force("x",zc(i).strength(.025)).force("y",jc(s).strength(.025));let h=null;if(n){h=LC({svg:a,g:l,nodes:A,onSelectionChange:(p,Q)=>{f.classed("selected",v=>p.has(v.id));const F=MC(A,p,Q);n(F)}}),a.call(cu().scaleExtent([.1,10]).filter(p=>!h.isSelectionMode()||p.type==="wheel").on("zoom",({transform:p})=>l.attr("transform",p)));const{dragstarted:d,dragged:g,dragended:B}=kC(u,c,f);h.setupNodeClick(f),h.setupDrag(f,{start:d,drag:g,end:B})}return{destroy:()=>{u.stop(),a.remove()},toggleSelectionMode:()=>{if(h){const d=h.toggleSelectionMode();return r&&r(d),d}}}}function LC(e){const{svg:A,g:t,nodes:n,onSelectionChange:r,getNodePosition:i=g=>({x:g.x,y:g.y}),getNodeId:s=g=>g.id}=e,o=new Set,a=[];let l=!1;function c(){return l=!l,A.style("cursor",l?"crosshair":"default"),l}function f(g){if(o.has(g)){o.delete(g);const B=a.indexOf(g);B>-1&&a.splice(B,1)}else o.add(g),a.push(g);r(o,a)}function u(){o.clear(),a.length=0,r(o,a)}let h=null,d=null;return A.on("mousedown",function(g){if(!l)return;g.preventDefault();const[B,p]=xe(g,t.node());h={x:B,y:p},d=t.append("rect").attr("class","selection-rect").attr("x",B).attr("y",p).attr("width",0).attr("height",0)}).on("mousemove",function(g){if(!l||!d)return;const[B,p]=xe(g,t.node()),Q=B-h.x,F=p-h.y;d.attr("x",Q<0?B:h.x).attr("y",F<0?p:h.y).attr("width",Math.abs(Q)).attr("height",Math.abs(F))}).on("mouseup",function(g){if(!l||!d)return;const[B,p]=xe(g,t.node()),Q=Math.min(h.x,B),F=Math.min(h.y,p),v=Math.max(h.x,B),y=Math.max(h.y,p);o.clear(),a.length=0;const U=[];n.forEach(S=>{const _=i(S);_.x>=Q&&_.x<=v&&_.y>=F&&_.y<=y&&U.push({id:s(S),y:_.y})}),U.sort((S,_)=>S.y-_.y),U.forEach(({id:S})=>{o.add(S),a.push(S)}),r(o,a),d.remove(),d=null,h=null}),{toggleSelectionMode:c,toggleNode:f,clearSelection:u,isSelectionMode:()=>l,getSelectedNodes:()=>o,getSelectionOrder:()=>a,setupNodeClick:g=>{g.on("click",function(B,p){B.stopPropagation(),f(s(p))})},setupDrag:(g,B)=>{g.call(Dw().filter(()=>!l).on("start",B.start).on("drag",B.drag).on("end",B.end))}}}function kC(e,A,t){e.on("tick",()=>{A.attr("x1",s=>s.source.x).attr("y1",s=>s.source.y).attr("x2",s=>s.target.x).attr("y2",s=>s.target.y),t.attr("cx",s=>s.x).attr("cy",s=>s.y)});function n(s){s.active||e.alphaTarget(.3).restart(),s.subject.fx=s.subject.x,s.subject.fy=s.subject.y}function r(s){s.subject.fx=s.x,s.subject.fy=s.y}function i(s){s.active||e.alphaTarget(0),s.subject.fx=null,s.subject.fy=null}return{dragstarted:n,dragged:r,dragended:i}}function MC(e,A,t){const n=new Map(e.map(r=>[r.id,r]));return t.map(r=>n.get(r)).filter(Boolean)}const TC="modulepreload",DC=function(e){return"/"+e},hu={},Gi=function(A,t,n){return A()};function To(e){const{type:A,modelName:t,title:n,extractMeta:r=h=>h}=e,i={id:null,type:A,title:n,is_public:!1,selected:{}},s=JSON.parse(localStorage.getItem(A))||i,o=DA(s),a=DA(!1);function l(h,d=!1){a.set(d),localStorage.setItem(A,JSON.stringify(h))}function c(){o.update(h=>{if(A!=="documentSet")return console.error("Document set management is the only type currently supported for saving."),h;const d=Object.fromEntries(Object.entries(h.selected).map(([B,p])=>[B,Object.keys(p)])),g=h.id?`${h.id}/edit`:"new";return fetch(`${window.location.origin}/${t}/${g}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify({title:h.title,is_public:h.is_public,selection:h,...d})}).then(B=>B.json()).then(B=>{if(!(B!=null&&B.document_set_id))throw new Error("Failed to save");o.update(p=>(p.id=B.document_set_id,p.title=B.document_set_title,p.is_public=B.is_public,l(p,!0),p))}).catch(B=>console.error("Error:",B)),h})}const f=h=>o.update(()=>{const d=h.selection.id?h.selection:{...h.selection,id:h.id};return l(d),d}),u=()=>o.update(()=>{const h={...i,selected:{}};return l(h),h});return{type:A,subscribe:o.subscribe,add:h=>o.update(d=>(d.selected[h.class]={...d.selected[h.class]||{},[h.id]:r(h)},l(d),d)),addAll:h=>o.update(d=>(h.forEach(g=>{d.selected[g.class]={...d.selected[g.class]||{},[g.id]:r(g)}}),l(d),d)),remove:(h,d)=>o.update(g=>{const{[h]:B,...p}=g.selected[d];return g.selected[d]=p,l(g),g}),removeAll:(h,d)=>o.update(g=>(h.forEach(B=>{var p;return(p=g.selected[d])==null?!0:delete p[B]}),l(g),g)),toggle:h=>o.update(d=>{var g;if((g=d.selected[h.class])!=null&&g[h.id]){const{[h.id]:B,...p}=d.selected[h.class];d.selected[h.class]=p}else d.selected[h.class]={...d.selected[h.class]||{},[h.id]:r(h)};return l(d),d}),toggleSet:h=>{be(o).id===h.id?u():f(h)},empty:()=>o.update(h=>(h.id=null,h.title=n,h.selected={},l(h,!0),h)),updateTitle:h=>o.update(d=>(d.title=h,l(d,!0),d)),updatePublic:h=>o.update(d=>(d.is_public=h,l(d,!0),d)),save:c,isSaved:a,selection:o,selectionTitle:pe(o,h=>h.title),isSelected:pe(o,h=>d=>{var g;return((g=h.selected[d.class])==null?void 0:g[d.id])||!1}),selected:pe(o,h=>h.selected),nbSelected:pe(o,h=>Object.entries(h.selected).reduce((d,[g,B])=>g==="User"?d:d+Object.keys(B).length,0)),isSetSelected:pe(o,h=>d=>h.id===d.id)}}const KC=To({type:"documentSet",modelName:"document-set",title:Y==="en"?"Document set":"Set de documents",extractMeta:e=>({title:e.title,url:e.url})}),du=To({type:"regionsSet",modelName:"regions-set",title:Y==="en"?"Regions set":"Set de régions",extractMeta:e=>e});function OC(e){if(!e.startsWith("wit"))return e;const[A,...t]=e.split("_wit");return`wit${t}`}const Xi=To({type:"clusterSet",modelName:"cluster-set",title:Y==="en"?"Selected regions":"Régions sélectionnées",extractMeta:e=>({imgRef:e.id,clusterId:e.clusterId,title:e.title,xywh:e.xywh,img:OC(e.id)})});function NC(){const e=`${window.location.origin}${window.location.pathname}`,A=DA(1),t=DA({}),n=DA({}),r=DA("");$s(A,"p");function i(c){r.update(f=>{const u=f===c?"":c;return navigator.clipboard.writeText(u).then(h=>""),u})}const s=(async()=>{try{const c=await fetch(`${e}canvas`);if(!c.ok)return{};const f=await c.json();let u={};return Object.values(f).forEach(h=>{Object.entries(h).forEach(([d,g])=>{u[d]=g})}),t.set(u),f}catch{return{}}})(),o=pe(A,c=>(async()=>{const u=await(await fetch(`${e}canvas?p=${c}`)).json();return n.set(u),u})());function a(c){Ao(c,A,"p")}function l(c){t.update(f=>(delete f[c],{...f})),n.update(f=>{for(const u in f)if(f[u][c]){const{[c]:h,...d}=f[u];return f[u]=d,f}return f})}return{currentPage:A,pageRegions:n,allRegions:t,fetchPages:o,fetchAll:s,handlePageUpdate:a,remove:l,clipBoard:r,copyRef:i}}const gu=NC();class Bu{constructor(A){this.id=A.id,this.img=A.img??A.ref,this.title=A.title,this.xywh=A.xywh,this.canvas=A.canvas,this.ref=A.ref,this.type=ol}url(A=null,t=null){return st(this.img,A??this.xywh??"full",t??"full")}}const _H="";function RC(e){let A;return{c(){A=dt("path"),m(A,"d","M384 336H192c-8.8 0-16-7.2-16-16V64c0-8.8 7.2-16 16-16l140.1 0L400 115.9V320c0 8.8-7.2 16-16 16zM192 384H384c35.3 0 64-28.7 64-64V115.9c0-12.7-5.1-24.9-14.1-33.9L366.1 14.1c-9-9-21.2-14.1-33.9-14.1H192c-35.3 0-64 28.7-64 64V320c0 35.3 28.7 64 64 64zM64 128c-35.3 0-64 28.7-64 64V448c0 35.3 28.7 64 64 64H256c35.3 0 64-28.7 64-64V416H272v32c0 8.8-7.2 16-16 16H64c-8.8 0-16-7.2-16-16V192c0-8.8 7.2-16 16-16H96V128H64z"),m(A,"class","svelte-1829hp2")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function PC(e){let A;return{c(){A=dt("path"),m(A,"d","M208 0H332.1c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9V336c0 26.5-21.5 48-48 48H208c-26.5 0-48-21.5-48-48V48c0-26.5 21.5-48 48-48zM48 128h80v64H64V448H256V416h64v48c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V176c0-26.5 21.5-48 48-48z"),m(A,"class","svelte-1829hp2")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function VC(e){let A=Y==="en"?"Copy ID":"Copier l'ID",t;return{c(){t=sA(A)},m(n,r){K(n,t,r)},p:tA,d(n){n&&D(t)}}}function GC(e){let A=Y==="en"?"Copied!":"Copié !",t;return{c(){t=sA(A)},m(n,r){K(n,t,r)},p:tA,d(n){n&&D(t)}}}function pu(e){let A,t,n;var r=e[9];function i(s){return{props:{mainImgItem:s[0],compareImgItem:s[16],items:s[2],index:s[3]}}}return r&&(A=Ln(r,i(e))),{c(){A&&pA(A.$$.fragment),t=ke()},m(s,o){A&&gA(A,s,o),K(s,t,o),n=!0},p(s,o){const a={};if(o&1&&(a.mainImgItem=s[0]),o&4&&(a.items=s[2]),o&8&&(a.index=s[3]),o&512&&r!==(r=s[9])){if(A){$A();const l=A;W(l.$$.fragment,1,0,()=>{BA(l,1)}),Ae()}r?(A=Ln(r,i(s)),pA(A.$$.fragment),G(A.$$.fragment,1),gA(A,t.parentNode,t)):A=null}else r&&A.$set(a)},i(s){n||(A&&G(A.$$.fragment,s),n=!0)},o(s){A&&W(A.$$.fragment,s),n=!1},d(s){s&&D(t),A&&BA(A,s)}}}function XC(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,S;function _(P,I){return P[10]?PC:RC}let b=_(e),T=b(e);function x(P,I){return P[10]?GC:VC}let k=x(e),M=k(e),E=e[9]&&pu(e);return{c(){A=C("div"),t=C("figure"),n=C("img"),i=R(),s=C("div"),o=C("span"),c=R(),f=C("div"),u=C("button"),h=dt("svg"),T.c(),d=R(),g=C("span"),M.c(),p=R(),E&&E.c(),m(n,"class","region-img svelte-1829hp2"),Ne(n.src,r=e[11])||m(n,"src",r),m(n,"alt","Extracted region"),m(o,"class","overlay-desc"),m(s,"class","overlay is-center svelte-1829hp2"),m(t,"class",a="image card region-image "+(e[1]?"is-96x96":"")+" svelte-1829hp2"),m(t,"tabindex","-1"),m(t,"style",l=(e[4]==="full"?"height: 100%":`height: ${e[4]}px; min-width: ${e[4]}px`)+"; "+(e[5]?`border: 5px solid ${e[5]};`:"")),m(h,"xmlns","http://www.w3.org/2000/svg"),m(h,"viewBox","0 0 384 512"),m(h,"class","svelte-1829hp2"),m(g,"class","tooltip svelte-1829hp2"),m(u,"class","button tag svelte-1829hp2"),m(u,"style",B=e[8]?"":"display: none;"),m(f,"class","region-btn ml-1 svelte-1829hp2"),m(A,"class",Q="region is-center "+(e[7]&&e[13](e[0])?"checked":"")+" svelte-1829hp2"),m(A,"style",F=e[4]==="full"?"height: 100%":"")},m(P,I){K(P,A,I),w(A,t),w(t,n),w(t,i),w(t,s),w(s,o),o.innerHTML=e[12],w(A,c),w(A,f),w(f,u),w(u,h),T.m(h,null),w(u,d),w(u,g),M.m(g,null),w(f,p),E&&E.m(f,null),y=!0,U||(S=[dA(t,"click",e[21]),dA(t,"keyup",JC),dA(u,"click",e[22])],U=!0)},p(P,[I]){e=P,(!y||I&2048&&!Ne(n.src,r=e[11]))&&m(n,"src",r),(!y||I&4096)&&(o.innerHTML=e[12]),(!y||I&2&&a!==(a="image card region-image "+(e[1]?"is-96x96":"")+" svelte-1829hp2"))&&m(t,"class",a),(!y||I&48&&l!==(l=(e[4]==="full"?"height: 100%":`height: ${e[4]}px; min-width: ${e[4]}px`)+"; "+(e[5]?`border: 5px solid ${e[5]};`:"")))&&m(t,"style",l),b!==(b=_(e))&&(T.d(1),T=b(e),T&&(T.c(),T.m(h,null))),k===(k=x(e))&&M?M.p(e,I):(M.d(1),M=k(e),M&&(M.c(),M.m(g,null))),(!y||I&256&&B!==(B=e[8]?"":"display: none;"))&&m(u,"style",B),e[9]?E?(E.p(e,I),I&512&&G(E,1)):(E=pu(e),E.c(),G(E,1),E.m(f,null)):E&&($A(),W(E,1,1,()=>{E=null}),Ae()),(!y||I&8321&&Q!==(Q="region is-center "+(e[7]&&e[13](e[0])?"checked":"")+" svelte-1829hp2"))&&m(A,"class",Q),(!y||I&16&&F!==(F=e[4]==="full"?"height: 100%":""))&&m(A,"style",F)},i(P){y||(G(E),$e(()=>{y&&(v||(v=Ft(A,Zt,{duration:e[17]},!0)),v.run(1))}),y=!0)},o(P){W(E),v||(v=Ft(A,Zt,{duration:e[17]},!1)),v.run(0),y=!1},d(P){P&&D(A),T.d(),M.d(),E&&E.d(),P&&v&&v.end(),U=!1,Ce(S)}}}const JC=()=>null;function WC(e,A,t){let n,r,i,s,o,{selectionStore:a}=A;a||(a=du);const{isSelected:l}=a;FA(e,l,x=>t(13,o=x));const{clipBoard:c}=gu;FA(e,c,x=>t(20,s=x));let{item:f}=A,{items:u=null}=A,{index:h=null}=A,{descPromise:d=void 0}=A,{isSquare:g=!0}=A,{height:B=g?96:140}=A;B==="full"&&(g=!1);let{borderColor:p=null}=A,{toggleSelection:Q=a.toggle}=A;const F=Je("qImgMetadata")||void 0,v=Je("isInModal")||!1,y=v?0:500;let U;v||Gi(()=>Promise.resolve().then(()=>Td),void 0).then(x=>t(9,U=x.default));let{selectable:S=!v}=A,{copyable:_=!0}=A;f=new Bu(f);const b=()=>S?Q(f):null,T=()=>_?gu.copyRef(f.ref):null;return e.$$set=x=>{"selectionStore"in x&&t(18,a=x.selectionStore),"item"in x&&t(0,f=x.item),"items"in x&&t(2,u=x.items),"index"in x&&t(3,h=x.index),"descPromise"in x&&t(19,d=x.descPromise),"isSquare"in x&&t(1,g=x.isSquare),"height"in x&&t(4,B=x.height),"borderColor"in x&&t(5,p=x.borderColor),"toggleSelection"in x&&t(6,Q=x.toggleSelection),"selectable"in x&&t(7,S=x.selectable),"copyable"in x&&t(8,_=x.copyable)},e.$$.update=()=>{e.$$.dirty&1&&t(12,n=f.title),e.$$.dirty&524288&&d&&d.then(x=>t(12,n=x)),e.$$.dirty&19&&t(11,r=f.url(null,B==="full"?B:g?`${B},`:`,${B}`)),e.$$.dirty&1048577&&t(10,i=f.ref===s)},[f,g,u,h,B,p,Q,S,_,U,i,r,n,o,l,c,F,y,a,d,s,b,T]}class Yn extends PA{constructor(A){super(),RA(this,A,WC,XC,OA,{selectionStore:18,item:0,items:2,index:3,descPromise:19,isSquare:1,height:4,borderColor:5,toggleSelection:6,selectable:7,copyable:8})}}const UH="";function mu(e,A,t){const n=e.slice();return n[11]=A[t],n}function wu(e,A,t){const n=e.slice();return n[14]=A[t],n}function Do(e){const A=e.slice(),t=A[2].get(A[11][A[14]].id);return A[17]=t,A}function vu(e,A,t){const n=e.slice();return n[14]=A[t],n}function Cu(e){let A,t,n,r,i,s,o,a,l,c,f=e[0].regions,u=[];for(let p=0;p<f.length;p+=1)u[p]=Qu(vu(e,f,p));const h=p=>W(u[p],1,1,()=>{u[p]=null});let d=e[0].rows,g=[];for(let p=0;p<d.length;p+=1)g[p]=Uu(mu(e,d,p));const B=p=>W(g[p],1,1,()=>{g[p]=null});return{c(){A=C("div"),t=C("h3"),t.textContent="Aligned Documents",n=R(),r=C("div"),i=C("table"),s=C("thead"),o=C("tr");for(let p=0;p<u.length;p+=1)u[p].c();a=R(),l=C("tbody");for(let p=0;p<g.length;p+=1)g[p].c();m(t,"class","title is-5"),m(s,"class","region-header svelte-1hxxzoa"),m(i,"class","table is-fullwidth svelte-1hxxzoa"),m(r,"class","table-container svelte-1hxxzoa"),m(A,"class","box mt-4")},m(p,Q){K(p,A,Q),w(A,t),w(A,n),w(A,r),w(r,i),w(i,s),w(s,o);for(let F=0;F<u.length;F+=1)u[F]&&u[F].m(o,null);w(i,a),w(i,l);for(let F=0;F<g.length;F+=1)g[F]&&g[F].m(l,null);c=!0},p(p,Q){if(Q&3){f=p[0].regions;let F;for(F=0;F<f.length;F+=1){const v=vu(p,f,F);u[F]?(u[F].p(v,Q),G(u[F],1)):(u[F]=Qu(v),u[F].c(),G(u[F],1),u[F].m(o,null))}for($A(),F=f.length;F<u.length;F+=1)h(F);Ae()}if(Q&77){d=p[0].rows;let F;for(F=0;F<d.length;F+=1){const v=mu(p,d,F);g[F]?(g[F].p(v,Q),G(g[F],1)):(g[F]=Uu(v),g[F].c(),G(g[F],1),g[F].m(l,null))}for($A(),F=d.length;F<g.length;F+=1)B(F);Ae()}},i(p){if(!c){for(let Q=0;Q<f.length;Q+=1)G(u[Q]);for(let Q=0;Q<d.length;Q+=1)G(g[Q]);c=!0}},o(p){u=u.filter(Boolean);for(let Q=0;Q<u.length;Q+=1)W(u[Q]);g=g.filter(Boolean);for(let Q=0;Q<g.length;Q+=1)W(g[Q]);c=!1},d(p){p&&D(A),Se(u,p),Se(g,p)}}}function Qu(e){let A,t,n,r;return t=new vl({props:{id:e[14],meta:e[1].get(e[14])||{},clickable:!1}}),{c(){A=C("th"),pA(t.$$.fragment),n=R(),m(A,"class","is-vcentered")},m(i,s){K(i,A,s),gA(t,A,null),w(A,n),r=!0},p(i,s){const o={};s&1&&(o.id=i[14]),s&3&&(o.meta=i[1].get(i[14])||{}),t.$set(o)},i(i){r||(G(t.$$.fragment,i),r=!0)},o(i){W(t.$$.fragment,i),r=!1},d(i){i&&D(A),BA(t)}}}function yu(e){let A,t,n,r,i=e[11][e[14]].page+"",s,o;return A=new Yn({props:{item:e[17],selectable:!1,copyable:!1,isSquare:!1,borderColor:e[6](e[11][e[14]],e[3])}}),{c(){pA(A.$$.fragment),t=R(),n=C("div"),r=sA("Page "),s=sA(i),m(n,"class","has-text-grey-dark mt-2")},m(a,l){gA(A,a,l),K(a,t,l),K(a,n,l),w(n,r),w(n,s),o=!0},p(a,l){const c={};l&5&&(c.item=a[17]),l&9&&(c.borderColor=a[6](a[11][a[14]],a[3])),A.$set(c),(!o||l&1)&&i!==(i=a[11][a[14]].page+"")&&NA(s,i)},i(a){o||(G(A.$$.fragment,a),o=!0)},o(a){W(A.$$.fragment,a),o=!1},d(a){BA(A,a),a&&D(t),a&&D(n)}}}function _u(e){let A,t,n=e[11][e[14]]&&yu(Do(e));return{c(){A=C("td"),n&&n.c(),m(A,"class","has-text-centered"),TA(A,"vertical-align","top")},m(r,i){K(r,A,i),n&&n.m(A,null),t=!0},p(r,i){r[11][r[14]]?n?(n.p(Do(r),i),i&1&&G(n,1)):(n=yu(Do(r)),n.c(),G(n,1),n.m(A,null)):n&&($A(),W(n,1,1,()=>{n=null}),Ae())},i(r){t||(G(n),t=!0)},o(r){W(n),t=!1},d(r){r&&D(A),n&&n.d()}}}function Uu(e){let A,t,n,r=e[0].regions,i=[];for(let o=0;o<r.length;o+=1)i[o]=_u(wu(e,r,o));const s=o=>W(i[o],1,1,()=>{i[o]=null});return{c(){A=C("tr");for(let o=0;o<i.length;o+=1)i[o].c();t=R()},m(o,a){K(o,A,a);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(A,null);w(A,t),n=!0},p(o,a){if(a&77){r=o[0].regions;let l;for(l=0;l<r.length;l+=1){const c=wu(o,r,l);i[l]?(i[l].p(c,a),G(i[l],1)):(i[l]=_u(c),i[l].c(),G(i[l],1),i[l].m(A,t))}for($A(),l=r.length;l<i.length;l+=1)s(l);Ae()}},i(o){if(!n){for(let a=0;a<r.length;a+=1)G(i[a]);n=!0}},o(o){i=i.filter(Boolean);for(let a=0;a<i.length;a+=1)W(i[a]);n=!1},d(o){o&&D(A),Se(i,o)}}}function YC(e){let A,t,n=e[0]&&Cu(e);return{c(){n&&n.c(),A=ke()},m(r,i){n&&n.m(r,i),K(r,A,i),t=!0},p(r,[i]){r[0]?n?(n.p(r,i),i&1&&G(n,1)):(n=Cu(r),n.c(),G(n,1),n.m(A.parentNode,A)):n&&($A(),W(n,1,1,()=>{n=null}),Ae())},i(r){t||(G(n),t=!0)},o(r){W(n),t=!1},d(r){n&&n.d(r),r&&D(A)}}}function zC(e){let A=0;for(let s=0;s<e.length;s++)A=e.charCodeAt(s)+((A<<5)-A),A=A&A;const n=A*.618033988749895%1*360,r=65+A%20,i=80+A%10;return`hsl(${Math.floor(n)}, ${r}%, ${i}%)`}function jC(e,A,t){let n,r,i,{selectedDocuments:s=[]}=A,{documentSetStore:o}=A;const{buildAlignedImageMatrix:a,documentNodes:l,imageNodes:c}=o;FA(e,l,d=>t(1,r=d)),FA(e,c,d=>t(2,i=d));let f=null;function u(d,g){if(!d)return;const B=d.id;if(g.get(B)!==1)return h.has(B)||h.set(B,zC(B)),h.get(B)}const h=new Map;return e.$$set=d=>{"selectedDocuments"in d&&t(7,s=d.selectedDocuments),"documentSetStore"in d&&t(8,o=d.documentSetStore)},e.$$.update=()=>{if(e.$$.dirty&134)if(s.length>0&&i&&r){const d=s.map(g=>g.id);t(0,f=a(d))}else t(0,f=null);e.$$.dirty&1&&t(3,n=f?(()=>{const d=new Map;return f.rows.forEach(g=>{Object.values(g).forEach(B=>{d.set(B.id,(d.get(B.id)||0)+1)})}),d})():new Map)},[f,r,i,n,l,c,u,s,o]}class qC extends PA{constructor(A){super(),RA(this,A,jC,YC,OA,{selectedDocuments:7,documentSetStore:8})}}const FH="";function Fu(e,A,t){const n=e.slice();return n[15]=A[t],n[17]=t,n}function ZC(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-crop-alt"></i>',m(A,"class","icon px-4")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function $C(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-hand-pointer"></i>',m(A,"class","icon px-4")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function bu(e){let A,t,n,r;const i=[e1,A1],s=[];function o(a,l){return a[0]==="img"?0:a[0]==="doc"?1:-1}return~(A=o(e))&&(t=s[A]=i[A](e)),{c(){t&&t.c(),n=ke()},m(a,l){~A&&s[A].m(a,l),K(a,n,l),r=!0},p(a,l){let c=A;A=o(a),A===c?~A&&s[A].p(a,l):(t&&($A(),W(s[c],1,1,()=>{s[c]=null}),Ae()),~A?(t=s[A],t?t.p(a,l):(t=s[A]=i[A](a),t.c()),G(t,1),t.m(n.parentNode,n)):t=null)},i(a){r||(G(t),r=!0)},o(a){W(t),r=!1},d(a){~A&&s[A].d(a),a&&D(n)}}}function A1(e){let A,t;return A=new qC({props:{selectedDocuments:e[5],documentSetStore:e[1]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,r){const i={};r&32&&(i.selectedDocuments=n[5]),r&2&&(i.documentSetStore=n[1]),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function e1(e){let A,t,n=Y==="en"?"Selected regions":"Régions sélectionnées",r,i,s=e[5].length+"",o,a,l,c,f=[],u=new Map,h,d=e[5];const g=B=>B[15].id;for(let B=0;B<d.length;B+=1){let p=Fu(e,d,B),Q=g(p);u.set(Q,f[B]=Eu(Q,p))}return{c(){A=C("div"),t=C("h3"),r=sA(n),i=sA(" ("),o=sA(s),a=sA(")"),l=R(),c=C("div");for(let B=0;B<f.length;B+=1)f[B].c();m(t,"class","title is-5"),m(c,"class","selected-nodes grid is-gap-2 mt-5 svelte-1a3kdxu"),m(A,"class","selected-panel box mt-4 svelte-1a3kdxu")},m(B,p){K(B,A,p),w(A,t),w(t,r),w(t,i),w(t,o),w(t,a),w(A,l),w(A,c);for(let Q=0;Q<f.length;Q+=1)f[Q]&&f[Q].m(c,null);h=!0},p(B,p){(!h||p&32)&&s!==(s=B[5].length+"")&&NA(o,s),p&32&&(d=B[5],$A(),f=fr(f,p,g,1,B,d,u,c,js,Eu,null,Fu),Ae())},i(B){if(!h){for(let p=0;p<d.length;p+=1)G(f[p]);h=!0}},o(B){for(let p=0;p<f.length;p+=1)W(f[p]);h=!1},d(B){B&&D(A);for(let p=0;p<f.length;p+=1)f[p].d()}}}function Eu(e,A){let t,n,r;return n=new Yn({props:{item:A[15],items:A[5],index:A[17],selectable:!1,copyable:!1}}),{key:e,first:null,c(){t=ke(),pA(n.$$.fragment),this.first=t},m(i,s){K(i,t,s),gA(n,i,s),r=!0},p(i,s){A=i;const o={};s&32&&(o.item=A[15]),s&32&&(o.items=A[5]),s&32&&(o.index=A[17]),n.$set(o)},i(i){r||(G(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&D(t),BA(n,i)}}}function t1(e){let A,t,n,r=e[3]?"click":"selection",i,s,o,a,l,c,f,u;function h(p,Q){return p[3]?$C:ZC}let d=h(e),g=d(e),B=e[5].length>0&&bu(e);return{c(){A=C("div"),t=C("button"),g.c(),n=sA(`
        Switch to `),i=sA(r),s=sA(" mode"),o=R(),a=C("div"),l=R(),B&&B.c(),m(t,"class","toggle-button button is-small is-link mb-3"),m(a,"class","visualization-container")},m(p,Q){K(p,A,Q),w(A,t),g.m(t,null),w(t,n),w(t,i),w(t,s),w(A,o),w(A,a),e[9](a),w(A,l),B&&B.m(A,null),c=!0,f||(u=dA(t,"click",e[7]),f=!0)},p(p,[Q]){d!==(d=h(p))&&(g.d(1),g=d(p),g&&(g.c(),g.m(t,n))),(!c||Q&8)&&r!==(r=p[3]?"click":"selection")&&NA(i,r),p[5].length>0?B?(B.p(p,Q),Q&32&&G(B,1)):(B=bu(p),B.c(),G(B,1),B.m(A,null)):B&&($A(),W(B,1,1,()=>{B=null}),Ae())},i(p){c||(G(B),c=!0)},o(p){W(B),c=!1},d(p){p&&D(A),g.d(),e[9](null),B&&B.d(),f=!1,u()}}}const n1=1e3;function r1(e,A,t){let n,r,i=tA,s=()=>(i(),i=Ai(n,v=>t(8,r=v)),n),o;e.$$.on_destroy.push(()=>i());let{type:a="img"}=A,{documentSetStore:l}=A;const{imageNetwork:c,documentNetwork:f,selectedNodes:u,updateSelectedNodes:h}=l;FA(e,u,v=>t(5,o=v));let d,g,B=!1;function p(){d&&(d.destroy(),h([]));function v(U){h(U)}d=(r.nodes.length<n1?xC:_C)(g,r.nodes,r.links,v,U=>{t(3,B=U)}),t(3,B=a==="img"),B&&d.toggleSelectionMode()}function Q(){d&&t(3,B=d.toggleSelectionMode())}Bn(()=>{d==null||d.destroy()});function F(v){jt[v?"unshift":"push"](()=>{g=v,t(2,g)})}return e.$$set=v=>{"type"in v&&t(0,a=v.type),"documentSetStore"in v&&t(1,l=v.documentSetStore)},e.$$.update=()=>{e.$$.dirty&1&&s(t(4,n=a==="img"?c:f)),e.$$.dirty&260&&r&&g&&p()},[a,l,g,B,n,o,u,Q,r,F]}class i1 extends PA{constructor(A){super(),RA(this,A,r1,t1,OA,{type:0,documentSetStore:1})}}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var Ko=function(e,A){return Ko=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Ko(e,A)};function _t(e,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");Ko(e,A);function t(){this.constructor=e}e.prototype=A===null?Object.create(A):(t.prototype=A.prototype,new t)}var Oo=function(){return Oo=Object.assign||function(A){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(A[i]=t[i])}return A},Oo.apply(this,arguments)};function qe(e,A,t,n){function r(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function o(c){try{l(n.next(c))}catch(f){s(f)}}function a(c){try{l(n.throw(c))}catch(f){s(f)}}function l(c){c.done?i(c.value):r(c.value).then(o,a)}l((n=n.apply(e,A||[])).next())})}function Ve(e,A){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,r,i,s;return s={next:o(0),throw:o(1),return:o(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(c){return a([l,c])}}function a(l){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,r&&(i=l[0]&2?r.return:l[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,l[1])).done)return i;switch(r=0,i&&(l=[l[0]&2,i.value]),l[0]){case 0:case 1:i=l;break;case 4:return t.label++,{value:l[1],done:!1};case 5:t.label++,r=l[1],l=[0];continue;case 7:l=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(l[0]===6||l[0]===2)){t=0;continue}if(l[0]===3&&(!i||l[1]>i[0]&&l[1]<i[3])){t.label=l[1];break}if(l[0]===6&&t.label<i[1]){t.label=i[1],i=l;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(l);break}i[2]&&t.ops.pop(),t.trys.pop();continue}l=A.call(e,t)}catch(c){l=[6,c],r=0}finally{n=i=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function Ji(e,A,t){if(t||arguments.length===2)for(var n=0,r=A.length,i;n<r;n++)(i||!(n in A))&&(i||(i=Array.prototype.slice.call(A,0,n)),i[n]=A[n]);return e.concat(i||A)}for(var Rt=function(){function e(A,t,n,r){this.left=A,this.top=t,this.width=n,this.height=r}return e.prototype.add=function(A,t,n,r){return new e(this.left+A,this.top+t,this.width+n,this.height+r)},e.fromClientRect=function(A,t){return new e(t.left+A.windowBounds.left,t.top+A.windowBounds.top,t.width,t.height)},e.fromDOMRectList=function(A,t){var n=Array.from(t).find(function(r){return r.width!==0});return n?new e(n.left+A.windowBounds.left,n.top+A.windowBounds.top,n.width,n.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),Wi=function(e,A){return Rt.fromClientRect(e,A.getBoundingClientRect())},s1=function(e){var A=e.body,t=e.documentElement;if(!A||!t)throw new Error("Unable to get document size");var n=Math.max(Math.max(A.scrollWidth,t.scrollWidth),Math.max(A.offsetWidth,t.offsetWidth),Math.max(A.clientWidth,t.clientWidth)),r=Math.max(Math.max(A.scrollHeight,t.scrollHeight),Math.max(A.offsetHeight,t.offsetHeight),Math.max(A.clientHeight,t.clientHeight));return new Rt(0,0,n,r)},Yi=function(e){for(var A=[],t=0,n=e.length;t<n;){var r=e.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var i=e.charCodeAt(t++);(i&64512)===56320?A.push(((r&1023)<<10)+(i&1023)+65536):(A.push(r),t--)}else A.push(r)}return A},_e=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return"";for(var n=[],r=-1,i="";++r<t;){var s=e[r];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Iu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o1=typeof Uint8Array>"u"?[]:new Uint8Array(256),zi=0;zi<Iu.length;zi++)o1[Iu.charCodeAt(zi)]=zi;for(var Hu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Er=typeof Uint8Array>"u"?[]:new Uint8Array(256),ji=0;ji<Hu.length;ji++)Er[Hu.charCodeAt(ji)]=ji;for(var a1=function(e){var A=e.length*.75,t=e.length,n,r=0,i,s,o,a;e[e.length-1]==="="&&(A--,e[e.length-2]==="="&&A--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)i=Er[e.charCodeAt(n)],s=Er[e.charCodeAt(n+1)],o=Er[e.charCodeAt(n+2)],a=Er[e.charCodeAt(n+3)],c[r++]=i<<2|s>>4,c[r++]=(s&15)<<4|o>>2,c[r++]=(o&3)<<6|a&63;return l},l1=function(e){for(var A=e.length,t=[],n=0;n<A;n+=2)t.push(e[n+1]<<8|e[n]);return t},c1=function(e){for(var A=e.length,t=[],n=0;n<A;n+=4)t.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return t},Qn=5,No=6+5,Ro=2,u1=No-Qn,Su=65536>>Qn,f1=1<<Qn,Po=f1-1,h1=1024>>Qn,d1=Su+h1,g1=d1,B1=32,p1=g1+B1,m1=65536>>No,w1=1<<u1,v1=w1-1,xu=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},C1=function(e,A,t){return e.slice?e.slice(A,t):new Uint32Array(Array.prototype.slice.call(e,A,t))},Q1=function(e,A){var t=a1(e),n=Array.isArray(t)?c1(t):new Uint32Array(t),r=Array.isArray(t)?l1(t):new Uint16Array(t),i=24,s=xu(r,i/2,n[4]/2),o=n[5]===2?xu(r,(i+n[4])/2):C1(n,Math.ceil((i+n[4])/4));return new y1(n[0],n[1],n[2],n[3],s,o)},y1=function(){function e(A,t,n,r,i,s){this.initialValue=A,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=s}return e.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>Qn],t=(t<<Ro)+(A&Po),this.data[t];if(A<=65535)return t=this.index[Su+(A-55296>>Qn)],t=(t<<Ro)+(A&Po),this.data[t];if(A<this.highStart)return t=p1-m1+(A>>No),t=this.index[t],t+=A>>Qn&v1,t=this.index[t],t=(t<<Ro)+(A&Po),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Lu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",_1=typeof Uint8Array>"u"?[]:new Uint8Array(256),qi=0;qi<Lu.length;qi++)_1[Lu.charCodeAt(qi)]=qi;var U1="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",ku=50,F1=1,Mu=2,Tu=3,b1=4,E1=5,Du=7,Ku=8,Ou=9,tn=10,Vo=11,Nu=12,Go=13,I1=14,Ir=15,Xo=16,Zi=17,Hr=18,H1=19,Ru=20,Jo=21,Sr=22,Wo=23,zn=24,at=25,xr=26,Lr=27,jn=28,S1=29,yn=30,x1=31,$i=32,As=33,Yo=34,zo=35,jo=36,kr=37,qo=38,es=39,ts=40,Zo=41,Pu=42,L1=43,k1=[9001,65288],Vu="!",ee="×",ns="÷",$o=Q1(U1),Pt=[yn,jo],Aa=[F1,Mu,Tu,E1],Gu=[tn,Ku],Xu=[Lr,xr],M1=Aa.concat(Gu),Ju=[qo,es,ts,Yo,zo],T1=[Ir,Go],D1=function(e,A){A===void 0&&(A="strict");var t=[],n=[],r=[];return e.forEach(function(i,s){var o=$o.get(i);if(o>ku?(r.push(!0),o-=ku):r.push(!1),["normal","auto","loose"].indexOf(A)!==-1&&[8208,8211,12316,12448].indexOf(i)!==-1)return n.push(s),t.push(Xo);if(o===b1||o===Vo){if(s===0)return n.push(s),t.push(yn);var a=t[s-1];return M1.indexOf(a)===-1?(n.push(n[s-1]),t.push(a)):(n.push(s),t.push(yn))}if(n.push(s),o===x1)return t.push(A==="strict"?Jo:kr);if(o===Pu||o===S1)return t.push(yn);if(o===L1)return i>=131072&&i<=196605||i>=196608&&i<=262141?t.push(kr):t.push(yn);t.push(o)}),[n,t,r]},ea=function(e,A,t,n){var r=n[t];if(Array.isArray(e)?e.indexOf(r)!==-1:e===r)for(var i=t;i<=n.length;){i++;var s=n[i];if(s===A)return!0;if(s!==tn)break}if(r===tn)for(var i=t;i>0;){i--;var o=n[i];if(Array.isArray(e)?e.indexOf(o)!==-1:e===o)for(var a=t;a<=n.length;){a++;var s=n[a];if(s===A)return!0;if(s!==tn)break}if(o!==tn)break}return!1},Wu=function(e,A){for(var t=e;t>=0;){var n=A[t];if(n===tn)t--;else return n}return 0},K1=function(e,A,t,n,r){if(t[n]===0)return ee;var i=n-1;if(Array.isArray(r)&&r[i]===!0)return ee;var s=i-1,o=i+1,a=A[i],l=s>=0?A[s]:0,c=A[o];if(a===Mu&&c===Tu)return ee;if(Aa.indexOf(a)!==-1)return Vu;if(Aa.indexOf(c)!==-1||Gu.indexOf(c)!==-1)return ee;if(Wu(i,A)===Ku)return ns;if($o.get(e[i])===Vo||(a===$i||a===As)&&$o.get(e[o])===Vo||a===Du||c===Du||a===Ou||[tn,Go,Ir].indexOf(a)===-1&&c===Ou||[Zi,Hr,H1,zn,jn].indexOf(c)!==-1||Wu(i,A)===Sr||ea(Wo,Sr,i,A)||ea([Zi,Hr],Jo,i,A)||ea(Nu,Nu,i,A))return ee;if(a===tn)return ns;if(a===Wo||c===Wo)return ee;if(c===Xo||a===Xo)return ns;if([Go,Ir,Jo].indexOf(c)!==-1||a===I1||l===jo&&T1.indexOf(a)!==-1||a===jn&&c===jo||c===Ru||Pt.indexOf(c)!==-1&&a===at||Pt.indexOf(a)!==-1&&c===at||a===Lr&&[kr,$i,As].indexOf(c)!==-1||[kr,$i,As].indexOf(a)!==-1&&c===xr||Pt.indexOf(a)!==-1&&Xu.indexOf(c)!==-1||Xu.indexOf(a)!==-1&&Pt.indexOf(c)!==-1||[Lr,xr].indexOf(a)!==-1&&(c===at||[Sr,Ir].indexOf(c)!==-1&&A[o+1]===at)||[Sr,Ir].indexOf(a)!==-1&&c===at||a===at&&[at,jn,zn].indexOf(c)!==-1)return ee;if([at,jn,zn,Zi,Hr].indexOf(c)!==-1)for(var f=i;f>=0;){var u=A[f];if(u===at)return ee;if([jn,zn].indexOf(u)!==-1)f--;else break}if([Lr,xr].indexOf(c)!==-1)for(var f=[Zi,Hr].indexOf(a)!==-1?s:i;f>=0;){var u=A[f];if(u===at)return ee;if([jn,zn].indexOf(u)!==-1)f--;else break}if(qo===a&&[qo,es,Yo,zo].indexOf(c)!==-1||[es,Yo].indexOf(a)!==-1&&[es,ts].indexOf(c)!==-1||[ts,zo].indexOf(a)!==-1&&c===ts||Ju.indexOf(a)!==-1&&[Ru,xr].indexOf(c)!==-1||Ju.indexOf(c)!==-1&&a===Lr||Pt.indexOf(a)!==-1&&Pt.indexOf(c)!==-1||a===zn&&Pt.indexOf(c)!==-1||Pt.concat(at).indexOf(a)!==-1&&c===Sr&&k1.indexOf(e[o])===-1||Pt.concat(at).indexOf(c)!==-1&&a===Hr)return ee;if(a===Zo&&c===Zo){for(var h=t[i],d=1;h>0&&(h--,A[h]===Zo);)d++;if(d%2!==0)return ee}return a===$i&&c===As?ee:ns},O1=function(e,A){A||(A={lineBreak:"normal",wordBreak:"normal"});var t=D1(e,A.lineBreak),n=t[0],r=t[1],i=t[2];(A.wordBreak==="break-all"||A.wordBreak==="break-word")&&(r=r.map(function(o){return[at,yn,Pu].indexOf(o)!==-1?kr:o}));var s=A.wordBreak==="keep-all"?i.map(function(o,a){return o&&e[a]>=19968&&e[a]<=40959}):void 0;return[n,r,s]},N1=function(){function e(A,t,n,r){this.codePoints=A,this.required=t===Vu,this.start=n,this.end=r}return e.prototype.slice=function(){return _e.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),R1=function(e,A){var t=Yi(e),n=O1(t,A),r=n[0],i=n[1],s=n[2],o=t.length,a=0,l=0;return{next:function(){if(l>=o)return{done:!0,value:null};for(var c=ee;l<o&&(c=K1(t,i,r,++l,s))===ee;);if(c!==ee||l===o){var f=new N1(t,c,a,l);return a=l,{value:f,done:!1}}return{done:!0,value:null}}}},P1=1,V1=2,Mr=4,Yu=8,rs=10,zu=47,Tr=92,G1=9,X1=32,is=34,Dr=61,J1=35,W1=36,Y1=37,ss=39,os=40,Kr=41,z1=95,et=45,j1=33,q1=60,Z1=62,$1=64,AQ=91,eQ=93,tQ=61,nQ=123,as=63,rQ=125,ju=124,iQ=126,sQ=128,qu=65533,ta=42,_n=43,oQ=44,aQ=58,lQ=59,Or=46,cQ=0,uQ=8,fQ=11,hQ=14,dQ=31,gQ=127,It=-1,Zu=48,$u=97,Af=101,BQ=102,pQ=117,mQ=122,ef=65,tf=69,nf=70,wQ=85,vQ=90,Ge=function(e){return e>=Zu&&e<=57},CQ=function(e){return e>=55296&&e<=57343},qn=function(e){return Ge(e)||e>=ef&&e<=nf||e>=$u&&e<=BQ},QQ=function(e){return e>=$u&&e<=mQ},yQ=function(e){return e>=ef&&e<=vQ},_Q=function(e){return QQ(e)||yQ(e)},UQ=function(e){return e>=sQ},ls=function(e){return e===rs||e===G1||e===X1},cs=function(e){return _Q(e)||UQ(e)||e===z1},rf=function(e){return cs(e)||Ge(e)||e===et},FQ=function(e){return e>=cQ&&e<=uQ||e===fQ||e>=hQ&&e<=dQ||e===gQ},nn=function(e,A){return e!==Tr?!1:A!==rs},us=function(e,A,t){return e===et?cs(A)||nn(A,t):cs(e)?!0:!!(e===Tr&&nn(e,A))},na=function(e,A,t){return e===_n||e===et?Ge(A)?!0:A===Or&&Ge(t):Ge(e===Or?A:e)},bQ=function(e){var A=0,t=1;(e[A]===_n||e[A]===et)&&(e[A]===et&&(t=-1),A++);for(var n=[];Ge(e[A]);)n.push(e[A++]);var r=n.length?parseInt(_e.apply(void 0,n),10):0;e[A]===Or&&A++;for(var i=[];Ge(e[A]);)i.push(e[A++]);var s=i.length,o=s?parseInt(_e.apply(void 0,i),10):0;(e[A]===tf||e[A]===Af)&&A++;var a=1;(e[A]===_n||e[A]===et)&&(e[A]===et&&(a=-1),A++);for(var l=[];Ge(e[A]);)l.push(e[A++]);var c=l.length?parseInt(_e.apply(void 0,l),10):0;return t*(r+o*Math.pow(10,-s))*Math.pow(10,a*c)},EQ={type:2},IQ={type:3},HQ={type:4},SQ={type:13},xQ={type:8},LQ={type:21},kQ={type:9},MQ={type:10},TQ={type:11},DQ={type:12},KQ={type:14},fs={type:23},OQ={type:1},NQ={type:25},RQ={type:24},PQ={type:26},VQ={type:27},GQ={type:28},XQ={type:29},JQ={type:31},ra={type:32},sf=function(){function e(){this._value=[]}return e.prototype.write=function(A){this._value=this._value.concat(Yi(A))},e.prototype.read=function(){for(var A=[],t=this.consumeToken();t!==ra;)A.push(t),t=this.consumeToken();return A},e.prototype.consumeToken=function(){var A=this.consumeCodePoint();switch(A){case is:return this.consumeStringToken(is);case J1:var t=this.peekCodePoint(0),n=this.peekCodePoint(1),r=this.peekCodePoint(2);if(rf(t)||nn(n,r)){var i=us(t,n,r)?V1:P1,s=this.consumeName();return{type:5,value:s,flags:i}}break;case W1:if(this.peekCodePoint(0)===Dr)return this.consumeCodePoint(),SQ;break;case ss:return this.consumeStringToken(ss);case os:return EQ;case Kr:return IQ;case ta:if(this.peekCodePoint(0)===Dr)return this.consumeCodePoint(),KQ;break;case _n:if(na(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case oQ:return HQ;case et:var o=A,a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(na(o,a,l))return this.reconsumeCodePoint(A),this.consumeNumericToken();if(us(o,a,l))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();if(a===et&&l===Z1)return this.consumeCodePoint(),this.consumeCodePoint(),RQ;break;case Or:if(na(A,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(A),this.consumeNumericToken();break;case zu:if(this.peekCodePoint(0)===ta)for(this.consumeCodePoint();;){var c=this.consumeCodePoint();if(c===ta&&(c=this.consumeCodePoint(),c===zu))return this.consumeToken();if(c===It)return this.consumeToken()}break;case aQ:return PQ;case lQ:return VQ;case q1:if(this.peekCodePoint(0)===j1&&this.peekCodePoint(1)===et&&this.peekCodePoint(2)===et)return this.consumeCodePoint(),this.consumeCodePoint(),NQ;break;case $1:var f=this.peekCodePoint(0),u=this.peekCodePoint(1),h=this.peekCodePoint(2);if(us(f,u,h)){var s=this.consumeName();return{type:7,value:s}}break;case AQ:return GQ;case Tr:if(nn(A,this.peekCodePoint(0)))return this.reconsumeCodePoint(A),this.consumeIdentLikeToken();break;case eQ:return XQ;case tQ:if(this.peekCodePoint(0)===Dr)return this.consumeCodePoint(),xQ;break;case nQ:return TQ;case rQ:return DQ;case pQ:case wQ:var d=this.peekCodePoint(0),g=this.peekCodePoint(1);return d===_n&&(qn(g)||g===as)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(A),this.consumeIdentLikeToken();case ju:if(this.peekCodePoint(0)===Dr)return this.consumeCodePoint(),kQ;if(this.peekCodePoint(0)===ju)return this.consumeCodePoint(),LQ;break;case iQ:if(this.peekCodePoint(0)===Dr)return this.consumeCodePoint(),MQ;break;case It:return ra}return ls(A)?(this.consumeWhiteSpace(),JQ):Ge(A)?(this.reconsumeCodePoint(A),this.consumeNumericToken()):cs(A)?(this.reconsumeCodePoint(A),this.consumeIdentLikeToken()):{type:6,value:_e(A)}},e.prototype.consumeCodePoint=function(){var A=this._value.shift();return typeof A>"u"?-1:A},e.prototype.reconsumeCodePoint=function(A){this._value.unshift(A)},e.prototype.peekCodePoint=function(A){return A>=this._value.length?-1:this._value[A]},e.prototype.consumeUnicodeRangeToken=function(){for(var A=[],t=this.consumeCodePoint();qn(t)&&A.length<6;)A.push(t),t=this.consumeCodePoint();for(var n=!1;t===as&&A.length<6;)A.push(t),t=this.consumeCodePoint(),n=!0;if(n){var r=parseInt(_e.apply(void 0,A.map(function(a){return a===as?Zu:a})),16),i=parseInt(_e.apply(void 0,A.map(function(a){return a===as?nf:a})),16);return{type:30,start:r,end:i}}var s=parseInt(_e.apply(void 0,A),16);if(this.peekCodePoint(0)===et&&qn(this.peekCodePoint(1))){this.consumeCodePoint(),t=this.consumeCodePoint();for(var o=[];qn(t)&&o.length<6;)o.push(t),t=this.consumeCodePoint();var i=parseInt(_e.apply(void 0,o),16);return{type:30,start:s,end:i}}else return{type:30,start:s,end:s}},e.prototype.consumeIdentLikeToken=function(){var A=this.consumeName();return A.toLowerCase()==="url"&&this.peekCodePoint(0)===os?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===os?(this.consumeCodePoint(),{type:19,value:A}):{type:20,value:A}},e.prototype.consumeUrlToken=function(){var A=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===It)return{type:22,value:""};var t=this.peekCodePoint(0);if(t===ss||t===is){var n=this.consumeStringToken(this.consumeCodePoint());return n.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===Kr)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),fs)}for(;;){var r=this.consumeCodePoint();if(r===It||r===Kr)return{type:22,value:_e.apply(void 0,A)};if(ls(r))return this.consumeWhiteSpace(),this.peekCodePoint(0)===It||this.peekCodePoint(0)===Kr?(this.consumeCodePoint(),{type:22,value:_e.apply(void 0,A)}):(this.consumeBadUrlRemnants(),fs);if(r===is||r===ss||r===os||FQ(r))return this.consumeBadUrlRemnants(),fs;if(r===Tr)if(nn(r,this.peekCodePoint(0)))A.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),fs;else A.push(r)}},e.prototype.consumeWhiteSpace=function(){for(;ls(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var A=this.consumeCodePoint();if(A===Kr||A===It)return;nn(A,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(A){for(var t=5e4,n="";A>0;){var r=Math.min(t,A);n+=_e.apply(void 0,this._value.splice(0,r)),A-=r}return this._value.shift(),n},e.prototype.consumeStringToken=function(A){var t="",n=0;do{var r=this._value[n];if(r===It||r===void 0||r===A)return t+=this.consumeStringSlice(n),{type:0,value:t};if(r===rs)return this._value.splice(0,n),OQ;if(r===Tr){var i=this._value[n+1];i!==It&&i!==void 0&&(i===rs?(t+=this.consumeStringSlice(n),n=-1,this._value.shift()):nn(r,i)&&(t+=this.consumeStringSlice(n),t+=_e(this.consumeEscapedCodePoint()),n=-1))}n++}while(!0)},e.prototype.consumeNumber=function(){var A=[],t=Mr,n=this.peekCodePoint(0);for((n===_n||n===et)&&A.push(this.consumeCodePoint());Ge(this.peekCodePoint(0));)A.push(this.consumeCodePoint());n=this.peekCodePoint(0);var r=this.peekCodePoint(1);if(n===Or&&Ge(r))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Yu;Ge(this.peekCodePoint(0));)A.push(this.consumeCodePoint());n=this.peekCodePoint(0),r=this.peekCodePoint(1);var i=this.peekCodePoint(2);if((n===tf||n===Af)&&((r===_n||r===et)&&Ge(i)||Ge(r)))for(A.push(this.consumeCodePoint(),this.consumeCodePoint()),t=Yu;Ge(this.peekCodePoint(0));)A.push(this.consumeCodePoint());return[bQ(A),t]},e.prototype.consumeNumericToken=function(){var A=this.consumeNumber(),t=A[0],n=A[1],r=this.peekCodePoint(0),i=this.peekCodePoint(1),s=this.peekCodePoint(2);if(us(r,i,s)){var o=this.consumeName();return{type:15,number:t,flags:n,unit:o}}return r===Y1?(this.consumeCodePoint(),{type:16,number:t,flags:n}):{type:17,number:t,flags:n}},e.prototype.consumeEscapedCodePoint=function(){var A=this.consumeCodePoint();if(qn(A)){for(var t=_e(A);qn(this.peekCodePoint(0))&&t.length<6;)t+=_e(this.consumeCodePoint());ls(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(t,16);return n===0||CQ(n)||n>1114111?qu:n}return A===It?qu:A},e.prototype.consumeName=function(){for(var A="";;){var t=this.consumeCodePoint();if(rf(t))A+=_e(t);else if(nn(t,this.peekCodePoint(0)))A+=_e(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(t),A}},e}(),of=function(){function e(A){this._tokens=A}return e.create=function(A){var t=new sf;return t.write(A),new e(t.read())},e.parseValue=function(A){return e.create(A).parseComponentValue()},e.parseValues=function(A){return e.create(A).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var A=this.consumeToken();A.type===31;)A=this.consumeToken();if(A.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(A);var t=this.consumeComponentValue();do A=this.consumeToken();while(A.type===31);if(A.type===32)return t;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var A=[];;){var t=this.consumeComponentValue();if(t.type===32)return A;A.push(t),A.push()}},e.prototype.consumeComponentValue=function(){var A=this.consumeToken();switch(A.type){case 11:case 28:case 2:return this.consumeSimpleBlock(A.type);case 19:return this.consumeFunction(A)}return A},e.prototype.consumeSimpleBlock=function(A){for(var t={type:A,values:[]},n=this.consumeToken();;){if(n.type===32||YQ(n,A))return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue()),n=this.consumeToken()}},e.prototype.consumeFunction=function(A){for(var t={name:A.value,values:[],type:18};;){var n=this.consumeToken();if(n.type===32||n.type===3)return t;this.reconsumeToken(n),t.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var A=this._tokens.shift();return typeof A>"u"?ra:A},e.prototype.reconsumeToken=function(A){this._tokens.unshift(A)},e}(),Nr=function(e){return e.type===15},Zn=function(e){return e.type===17},ce=function(e){return e.type===20},WQ=function(e){return e.type===0},ia=function(e,A){return ce(e)&&e.value===A},af=function(e){return e.type!==31},$n=function(e){return e.type!==31&&e.type!==4},Ht=function(e){var A=[],t=[];return e.forEach(function(n){if(n.type===4){if(t.length===0)throw new Error("Error parsing function args, zero tokens for arg");A.push(t),t=[];return}n.type!==31&&t.push(n)}),t.length&&A.push(t),A},YQ=function(e,A){return A===11&&e.type===12||A===28&&e.type===29?!0:A===2&&e.type===3},rn=function(e){return e.type===17||e.type===15},Ee=function(e){return e.type===16||rn(e)},lf=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},De={type:17,number:0,flags:Mr},sa={type:16,number:50,flags:Mr},sn={type:16,number:100,flags:Mr},Rr=function(e,A,t){var n=e[0],r=e[1];return[ge(n,A),ge(typeof r<"u"?r:n,t)]},ge=function(e,A){if(e.type===16)return e.number/100*A;if(Nr(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},cf="deg",uf="grad",ff="rad",hf="turn",hs={name:"angle",parse:function(e,A){if(A.type===15)switch(A.unit){case cf:return Math.PI*A.number/180;case uf:return Math.PI/200*A.number;case ff:return A.number;case hf:return Math.PI*2*A.number}throw new Error("Unsupported angle type")}},df=function(e){return e.type===15&&(e.unit===cf||e.unit===uf||e.unit===ff||e.unit===hf)},gf=function(e){var A=e.filter(ce).map(function(t){return t.value}).join(" ");switch(A){case"to bottom right":case"to right bottom":case"left top":case"top left":return[De,De];case"to top":case"bottom":return gt(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[De,sn];case"to right":case"left":return gt(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[sn,sn];case"to bottom":case"top":return gt(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[sn,De];case"to left":case"right":return gt(270)}return 0},gt=function(e){return Math.PI*e/180},on={name:"color",parse:function(e,A){if(A.type===18){var t=zQ[A.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported color function "'+A.name+'"');return t(e,A.values)}if(A.type===5){if(A.value.length===3){var n=A.value.substring(0,1),r=A.value.substring(1,2),i=A.value.substring(2,3);return ln(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),1)}if(A.value.length===4){var n=A.value.substring(0,1),r=A.value.substring(1,2),i=A.value.substring(2,3),s=A.value.substring(3,4);return ln(parseInt(n+n,16),parseInt(r+r,16),parseInt(i+i,16),parseInt(s+s,16)/255)}if(A.value.length===6){var n=A.value.substring(0,2),r=A.value.substring(2,4),i=A.value.substring(4,6);return ln(parseInt(n,16),parseInt(r,16),parseInt(i,16),1)}if(A.value.length===8){var n=A.value.substring(0,2),r=A.value.substring(2,4),i=A.value.substring(4,6),s=A.value.substring(6,8);return ln(parseInt(n,16),parseInt(r,16),parseInt(i,16),parseInt(s,16)/255)}}if(A.type===20){var o=Vt[A.value.toUpperCase()];if(typeof o<"u")return o}return Vt.TRANSPARENT}},an=function(e){return(255&e)===0},Me=function(e){var A=255&e,t=255&e>>8,n=255&e>>16,r=255&e>>24;return A<255?"rgba("+r+","+n+","+t+","+A/255+")":"rgb("+r+","+n+","+t+")"},ln=function(e,A,t,n){return(e<<24|A<<16|t<<8|Math.round(n*255)<<0)>>>0},Bf=function(e,A){if(e.type===17)return e.number;if(e.type===16){var t=A===3?1:255;return A===3?e.number/100*t:Math.round(e.number/100*t)}return 0},pf=function(e,A){var t=A.filter($n);if(t.length===3){var n=t.map(Bf),r=n[0],i=n[1],s=n[2];return ln(r,i,s,1)}if(t.length===4){var o=t.map(Bf),r=o[0],i=o[1],s=o[2],a=o[3];return ln(r,i,s,a)}return 0};function oa(e,A,t){return t<0&&(t+=1),t>=1&&(t-=1),t<1/6?(A-e)*t*6+e:t<1/2?A:t<2/3?(A-e)*6*(2/3-t)+e:e}var mf=function(e,A){var t=A.filter($n),n=t[0],r=t[1],i=t[2],s=t[3],o=(n.type===17?gt(n.number):hs.parse(e,n))/(Math.PI*2),a=Ee(r)?r.number/100:0,l=Ee(i)?i.number/100:0,c=typeof s<"u"&&Ee(s)?ge(s,1):1;if(a===0)return ln(l*255,l*255,l*255,1);var f=l<=.5?l*(a+1):l+a-l*a,u=l*2-f,h=oa(u,f,o+1/3),d=oa(u,f,o),g=oa(u,f,o-1/3);return ln(h*255,d*255,g*255,c)},zQ={hsl:mf,hsla:mf,rgb:pf,rgba:pf},Pr=function(e,A){return on.parse(e,of.create(A).parseComponentValue())},Vt={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},jQ={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,A){return A.map(function(t){if(ce(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},qQ={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},ds=function(e,A){var t=on.parse(e,A[0]),n=A[1];return n&&Ee(n)?{color:t,stop:n}:{color:t,stop:null}},wf=function(e,A){var t=e[0],n=e[e.length-1];t.stop===null&&(t.stop=De),n.stop===null&&(n.stop=sn);for(var r=[],i=0,s=0;s<e.length;s++){var o=e[s].stop;if(o!==null){var a=ge(o,A);a>i?r.push(a):r.push(i),i=a}else r.push(null)}for(var l=null,s=0;s<r.length;s++){var c=r[s];if(c===null)l===null&&(l=s);else if(l!==null){for(var f=s-l,u=r[l-1],h=(c-u)/(f+1),d=1;d<=f;d++)r[l+d-1]=h*d;l=null}}return e.map(function(g,B){var p=g.color;return{color:p,stop:Math.max(Math.min(1,r[B]/A),0)}})},ZQ=function(e,A,t){var n=A/2,r=t/2,i=ge(e[0],A)-n,s=r-ge(e[1],t);return(Math.atan2(s,i)+Math.PI*2)%(Math.PI*2)},$Q=function(e,A,t){var n=typeof e=="number"?e:ZQ(e,A,t),r=Math.abs(A*Math.sin(n))+Math.abs(t*Math.cos(n)),i=A/2,s=t/2,o=r/2,a=Math.sin(n-Math.PI/2)*o,l=Math.cos(n-Math.PI/2)*o;return[r,i-l,i+l,s-a,s+a]},Ut=function(e,A){return Math.sqrt(e*e+A*A)},vf=function(e,A,t,n,r){var i=[[0,0],[0,A],[e,0],[e,A]];return i.reduce(function(s,o){var a=o[0],l=o[1],c=Ut(t-a,n-l);return(r?c<s.optimumDistance:c>s.optimumDistance)?{optimumCorner:o,optimumDistance:c}:s},{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},Ay=function(e,A,t,n,r){var i=0,s=0;switch(e.size){case 0:e.shape===0?i=s=Math.min(Math.abs(A),Math.abs(A-n),Math.abs(t),Math.abs(t-r)):e.shape===1&&(i=Math.min(Math.abs(A),Math.abs(A-n)),s=Math.min(Math.abs(t),Math.abs(t-r)));break;case 2:if(e.shape===0)i=s=Math.min(Ut(A,t),Ut(A,t-r),Ut(A-n,t),Ut(A-n,t-r));else if(e.shape===1){var o=Math.min(Math.abs(t),Math.abs(t-r))/Math.min(Math.abs(A),Math.abs(A-n)),a=vf(n,r,A,t,!0),l=a[0],c=a[1];i=Ut(l-A,(c-t)/o),s=o*i}break;case 1:e.shape===0?i=s=Math.max(Math.abs(A),Math.abs(A-n),Math.abs(t),Math.abs(t-r)):e.shape===1&&(i=Math.max(Math.abs(A),Math.abs(A-n)),s=Math.max(Math.abs(t),Math.abs(t-r)));break;case 3:if(e.shape===0)i=s=Math.max(Ut(A,t),Ut(A,t-r),Ut(A-n,t),Ut(A-n,t-r));else if(e.shape===1){var o=Math.max(Math.abs(t),Math.abs(t-r))/Math.max(Math.abs(A),Math.abs(A-n)),f=vf(n,r,A,t,!1),l=f[0],c=f[1];i=Ut(l-A,(c-t)/o),s=o*i}break}return Array.isArray(e.size)&&(i=ge(e.size[0],n),s=e.size.length===2?ge(e.size[1],r):i),[i,s]},ey=function(e,A){var t=gt(180),n=[];return Ht(A).forEach(function(r,i){if(i===0){var s=r[0];if(s.type===20&&s.value==="to"){t=gf(r);return}else if(df(s)){t=hs.parse(e,s);return}}var o=ds(e,r);n.push(o)}),{angle:t,stops:n,type:1}},gs=function(e,A){var t=gt(180),n=[];return Ht(A).forEach(function(r,i){if(i===0){var s=r[0];if(s.type===20&&["top","left","right","bottom"].indexOf(s.value)!==-1){t=gf(r);return}else if(df(s)){t=(hs.parse(e,s)+gt(270))%gt(360);return}}var o=ds(e,r);n.push(o)}),{angle:t,stops:n,type:1}},ty=function(e,A){var t=gt(180),n=[],r=1,i=0,s=3,o=[];return Ht(A).forEach(function(a,l){var c=a[0];if(l===0){if(ce(c)&&c.value==="linear"){r=1;return}else if(ce(c)&&c.value==="radial"){r=2;return}}if(c.type===18){if(c.name==="from"){var f=on.parse(e,c.values[0]);n.push({stop:De,color:f})}else if(c.name==="to"){var f=on.parse(e,c.values[0]);n.push({stop:sn,color:f})}else if(c.name==="color-stop"){var u=c.values.filter($n);if(u.length===2){var f=on.parse(e,u[1]),h=u[0];Zn(h)&&n.push({stop:{type:16,number:h.number*100,flags:h.flags},color:f})}}}}),r===1?{angle:(t+gt(180))%gt(360),stops:n,type:r}:{size:s,shape:i,stops:n,position:o,type:r}},Cf="closest-side",Qf="farthest-side",yf="closest-corner",_f="farthest-corner",Uf="circle",Ff="ellipse",bf="cover",Ef="contain",ny=function(e,A){var t=0,n=3,r=[],i=[];return Ht(A).forEach(function(s,o){var a=!0;if(o===0){var l=!1;a=s.reduce(function(f,u){if(l)if(ce(u))switch(u.value){case"center":return i.push(sa),f;case"top":case"left":return i.push(De),f;case"right":case"bottom":return i.push(sn),f}else(Ee(u)||rn(u))&&i.push(u);else if(ce(u))switch(u.value){case Uf:return t=0,!1;case Ff:return t=1,!1;case"at":return l=!0,!1;case Cf:return n=0,!1;case bf:case Qf:return n=1,!1;case Ef:case yf:return n=2,!1;case _f:return n=3,!1}else if(rn(u)||Ee(u))return Array.isArray(n)||(n=[]),n.push(u),!1;return f},a)}if(a){var c=ds(e,s);r.push(c)}}),{size:n,shape:t,stops:r,position:i,type:2}},Bs=function(e,A){var t=0,n=3,r=[],i=[];return Ht(A).forEach(function(s,o){var a=!0;if(o===0?a=s.reduce(function(c,f){if(ce(f))switch(f.value){case"center":return i.push(sa),!1;case"top":case"left":return i.push(De),!1;case"right":case"bottom":return i.push(sn),!1}else if(Ee(f)||rn(f))return i.push(f),!1;return c},a):o===1&&(a=s.reduce(function(c,f){if(ce(f))switch(f.value){case Uf:return t=0,!1;case Ff:return t=1,!1;case Ef:case Cf:return n=0,!1;case Qf:return n=1,!1;case yf:return n=2,!1;case bf:case _f:return n=3,!1}else if(rn(f)||Ee(f))return Array.isArray(n)||(n=[]),n.push(f),!1;return c},a)),a){var l=ds(e,s);r.push(l)}}),{size:n,shape:t,stops:r,position:i,type:2}},ry=function(e){return e.type===1},iy=function(e){return e.type===2},aa={name:"image",parse:function(e,A){if(A.type===22){var t={url:A.value,type:0};return e.cache.addImage(A.value),t}if(A.type===18){var n=If[A.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported image function "'+A.name+'"');return n(e,A.values)}throw new Error("Unsupported image type "+A.type)}};function sy(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!If[e.name])}var If={"linear-gradient":ey,"-moz-linear-gradient":gs,"-ms-linear-gradient":gs,"-o-linear-gradient":gs,"-webkit-linear-gradient":gs,"radial-gradient":ny,"-moz-radial-gradient":Bs,"-ms-radial-gradient":Bs,"-o-radial-gradient":Bs,"-webkit-radial-gradient":Bs,"-webkit-gradient":ty},oy={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value==="none"?[]:A.filter(function(n){return $n(n)&&sy(n)}).map(function(n){return aa.parse(e,n)})}},ay={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,A){return A.map(function(t){if(ce(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},ly={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,A){return Ht(A).map(function(t){return t.filter(Ee)}).map(lf)}},cy={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,A){return Ht(A).map(function(t){return t.filter(ce).map(function(n){return n.value}).join(" ")}).map(uy)}},uy=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},Ar;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(Ar||(Ar={}));var fy={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,A){return Ht(A).map(function(t){return t.filter(hy)})}},hy=function(e){return ce(e)||Ee(e)},ps=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},dy=ps("top"),gy=ps("right"),By=ps("bottom"),py=ps("left"),ms=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(A,t){return lf(t.filter(Ee))}}},my=ms("top-left"),wy=ms("top-right"),vy=ms("bottom-right"),Cy=ms("bottom-left"),ws=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(A,t){switch(t){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Qy=ws("top"),yy=ws("right"),_y=ws("bottom"),Uy=ws("left"),vs=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(A,t){return Nr(t)?t.number:0}}},Fy=vs("top"),by=vs("right"),Ey=vs("bottom"),Iy=vs("left"),Hy={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},Sy={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,A){switch(A){case"rtl":return 1;case"ltr":default:return 0}}},xy={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,A){return A.filter(ce).reduce(function(t,n){return t|Ly(n.value)},0)}},Ly=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},ky={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},My={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,A){return A.type===20&&A.value==="normal"?0:A.type===17||A.type===15?A.number:0}},Cs;(function(e){e.NORMAL="normal",e.STRICT="strict"})(Cs||(Cs={}));var Ty={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"strict":return Cs.STRICT;case"normal":default:return Cs.NORMAL}}},Dy={name:"line-height",initialValue:"normal",prefix:!1,type:4},Hf=function(e,A){return ce(e)&&e.value==="normal"?1.2*A:e.type===17?A*e.number:Ee(e)?ge(e,A):A},Ky={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,A){return A.type===20&&A.value==="none"?null:aa.parse(e,A)}},Oy={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,A){switch(A){case"inside":return 0;case"outside":default:return 1}}},la={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},Qs=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},Ny=Qs("top"),Ry=Qs("right"),Py=Qs("bottom"),Vy=Qs("left"),Gy={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,A){return A.filter(ce).map(function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},Xy={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"break-word":return"break-word";case"normal":default:return"normal"}}},ys=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},Jy=ys("top"),Wy=ys("right"),Yy=ys("bottom"),zy=ys("left"),jy={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,A){switch(A){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},qy={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,A){switch(A){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Zy={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return A.length===1&&ia(A[0],"none")?[]:Ht(A).map(function(t){for(var n={color:Vt.TRANSPARENT,offsetX:De,offsetY:De,blur:De},r=0,i=0;i<t.length;i++){var s=t[i];rn(s)?(r===0?n.offsetX=s:r===1?n.offsetY=s:n.blur=s,r++):n.color=on.parse(e,s)}return n})}},$y={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},A_={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,A){if(A.type===20&&A.value==="none")return null;if(A.type===18){var t=n_[A.name];if(typeof t>"u")throw new Error('Attempting to parse an unsupported transform function "'+A.name+'"');return t(A.values)}return null}},e_=function(e){var A=e.filter(function(t){return t.type===17}).map(function(t){return t.number});return A.length===6?A:null},t_=function(e){var A=e.filter(function(a){return a.type===17}).map(function(a){return a.number}),t=A[0],n=A[1];A[2],A[3];var r=A[4],i=A[5];A[6],A[7],A[8],A[9],A[10],A[11];var s=A[12],o=A[13];return A[14],A[15],A.length===16?[t,n,r,i,s,o]:null},n_={matrix:e_,matrix3d:t_},Sf={type:16,number:50,flags:Mr},r_=[Sf,Sf],i_={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,A){var t=A.filter(Ee);return t.length!==2?r_:[t[0],t[1]]}},s_={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,A){switch(A){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},Vr;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(Vr||(Vr={}));for(var o_={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"break-all":return Vr.BREAK_ALL;case"keep-all":return Vr.KEEP_ALL;case"normal":default:return Vr.NORMAL}}},a_={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,A){if(A.type===20)return{auto:!0,order:0};if(Zn(A))return{auto:!1,order:A.number};throw new Error("Invalid z-index number parsed")}},xf={name:"time",parse:function(e,A){if(A.type===15)switch(A.unit.toLowerCase()){case"s":return 1e3*A.number;case"ms":return A.number}throw new Error("Unsupported time type")}},l_={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,A){return Zn(A)?A.number:1}},c_={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},u_={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,A){return A.filter(ce).map(function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(t){return t!==0})}},f_={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,A){var t=[],n=[];return A.forEach(function(r){switch(r.type){case 20:case 0:t.push(r.value);break;case 17:t.push(r.number.toString());break;case 4:n.push(t.join(" ")),t.length=0;break}}),t.length&&n.push(t.join(" ")),n.map(function(r){return r.indexOf(" ")===-1?r:"'"+r+"'"})}},h_={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},d_={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,A){if(Zn(A))return A.number;if(ce(A))switch(A.value){case"bold":return 700;case"normal":default:return 400}return 400}},g_={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return A.filter(ce).map(function(t){return t.value})}},B_={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,A){switch(A){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Le=function(e,A){return(e&A)!==0},p_={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,A){if(A.length===0)return[];var t=A[0];return t.type===20&&t.value==="none"?[]:A}},m_={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value==="none")return null;for(var n=[],r=A.filter(af),i=0;i<r.length;i++){var s=r[i],o=r[i+1];if(s.type===20){var a=o&&Zn(o)?o.number:1;n.push({counter:s.value,increment:a})}}return n}},w_={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return[];for(var t=[],n=A.filter(af),r=0;r<n.length;r++){var i=n[r],s=n[r+1];if(ce(i)&&i.value!=="none"){var o=s&&Zn(s)?s.number:0;t.push({counter:i.value,reset:o})}}return t}},v_={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,A){return A.filter(Nr).map(function(t){return xf.parse(e,t)})}},C_={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,A){if(A.length===0)return null;var t=A[0];if(t.type===20&&t.value==="none")return null;var n=[],r=A.filter(WQ);if(r.length%2!==0)return null;for(var i=0;i<r.length;i+=2){var s=r[i].value,o=r[i+1].value;n.push({open:s,close:o})}return n}},Lf=function(e,A,t){if(!e)return"";var n=e[Math.min(A,e.length-1)];return n?t?n.open:n.close:""},Q_={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,A){return A.length===1&&ia(A[0],"none")?[]:Ht(A).map(function(t){for(var n={color:255,offsetX:De,offsetY:De,blur:De,spread:De,inset:!1},r=0,i=0;i<t.length;i++){var s=t[i];ia(s,"inset")?n.inset=!0:rn(s)?(r===0?n.offsetX=s:r===1?n.offsetY=s:r===2?n.blur=s:n.spread=s,r++):n.color=on.parse(e,s)}return n})}},y_={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,A){var t=[0,1,2],n=[];return A.filter(ce).forEach(function(r){switch(r.value){case"stroke":n.push(1);break;case"fill":n.push(0);break;case"markers":n.push(2);break}}),t.forEach(function(r){n.indexOf(r)===-1&&n.push(r)}),n}},__={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},U_={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,A){return Nr(A)?A.number:0}},F_=function(){function e(A,t){var n,r;this.animationDuration=fA(A,v_,t.animationDuration),this.backgroundClip=fA(A,jQ,t.backgroundClip),this.backgroundColor=fA(A,qQ,t.backgroundColor),this.backgroundImage=fA(A,oy,t.backgroundImage),this.backgroundOrigin=fA(A,ay,t.backgroundOrigin),this.backgroundPosition=fA(A,ly,t.backgroundPosition),this.backgroundRepeat=fA(A,cy,t.backgroundRepeat),this.backgroundSize=fA(A,fy,t.backgroundSize),this.borderTopColor=fA(A,dy,t.borderTopColor),this.borderRightColor=fA(A,gy,t.borderRightColor),this.borderBottomColor=fA(A,By,t.borderBottomColor),this.borderLeftColor=fA(A,py,t.borderLeftColor),this.borderTopLeftRadius=fA(A,my,t.borderTopLeftRadius),this.borderTopRightRadius=fA(A,wy,t.borderTopRightRadius),this.borderBottomRightRadius=fA(A,vy,t.borderBottomRightRadius),this.borderBottomLeftRadius=fA(A,Cy,t.borderBottomLeftRadius),this.borderTopStyle=fA(A,Qy,t.borderTopStyle),this.borderRightStyle=fA(A,yy,t.borderRightStyle),this.borderBottomStyle=fA(A,_y,t.borderBottomStyle),this.borderLeftStyle=fA(A,Uy,t.borderLeftStyle),this.borderTopWidth=fA(A,Fy,t.borderTopWidth),this.borderRightWidth=fA(A,by,t.borderRightWidth),this.borderBottomWidth=fA(A,Ey,t.borderBottomWidth),this.borderLeftWidth=fA(A,Iy,t.borderLeftWidth),this.boxShadow=fA(A,Q_,t.boxShadow),this.color=fA(A,Hy,t.color),this.direction=fA(A,Sy,t.direction),this.display=fA(A,xy,t.display),this.float=fA(A,ky,t.cssFloat),this.fontFamily=fA(A,f_,t.fontFamily),this.fontSize=fA(A,h_,t.fontSize),this.fontStyle=fA(A,B_,t.fontStyle),this.fontVariant=fA(A,g_,t.fontVariant),this.fontWeight=fA(A,d_,t.fontWeight),this.letterSpacing=fA(A,My,t.letterSpacing),this.lineBreak=fA(A,Ty,t.lineBreak),this.lineHeight=fA(A,Dy,t.lineHeight),this.listStyleImage=fA(A,Ky,t.listStyleImage),this.listStylePosition=fA(A,Oy,t.listStylePosition),this.listStyleType=fA(A,la,t.listStyleType),this.marginTop=fA(A,Ny,t.marginTop),this.marginRight=fA(A,Ry,t.marginRight),this.marginBottom=fA(A,Py,t.marginBottom),this.marginLeft=fA(A,Vy,t.marginLeft),this.opacity=fA(A,l_,t.opacity);var i=fA(A,Gy,t.overflow);this.overflowX=i[0],this.overflowY=i[i.length>1?1:0],this.overflowWrap=fA(A,Xy,t.overflowWrap),this.paddingTop=fA(A,Jy,t.paddingTop),this.paddingRight=fA(A,Wy,t.paddingRight),this.paddingBottom=fA(A,Yy,t.paddingBottom),this.paddingLeft=fA(A,zy,t.paddingLeft),this.paintOrder=fA(A,y_,t.paintOrder),this.position=fA(A,qy,t.position),this.textAlign=fA(A,jy,t.textAlign),this.textDecorationColor=fA(A,c_,(n=t.textDecorationColor)!==null&&n!==void 0?n:t.color),this.textDecorationLine=fA(A,u_,(r=t.textDecorationLine)!==null&&r!==void 0?r:t.textDecoration),this.textShadow=fA(A,Zy,t.textShadow),this.textTransform=fA(A,$y,t.textTransform),this.transform=fA(A,A_,t.transform),this.transformOrigin=fA(A,i_,t.transformOrigin),this.visibility=fA(A,s_,t.visibility),this.webkitTextStrokeColor=fA(A,__,t.webkitTextStrokeColor),this.webkitTextStrokeWidth=fA(A,U_,t.webkitTextStrokeWidth),this.wordBreak=fA(A,o_,t.wordBreak),this.zIndex=fA(A,a_,t.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return an(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Le(this.display,4)||Le(this.display,33554432)||Le(this.display,268435456)||Le(this.display,536870912)||Le(this.display,67108864)||Le(this.display,134217728)},e}(),b_=function(){function e(A,t){this.content=fA(A,p_,t.content),this.quotes=fA(A,C_,t.quotes)}return e}(),kf=function(){function e(A,t){this.counterIncrement=fA(A,m_,t.counterIncrement),this.counterReset=fA(A,w_,t.counterReset)}return e}(),fA=function(e,A,t){var n=new sf,r=t!==null&&typeof t<"u"?t.toString():A.initialValue;n.write(r);var i=new of(n.read());switch(A.type){case 2:var s=i.parseComponentValue();return A.parse(e,ce(s)?s.value:A.initialValue);case 0:return A.parse(e,i.parseComponentValue());case 1:return A.parse(e,i.parseComponentValues());case 4:return i.parseComponentValue();case 3:switch(A.format){case"angle":return hs.parse(e,i.parseComponentValue());case"color":return on.parse(e,i.parseComponentValue());case"image":return aa.parse(e,i.parseComponentValue());case"length":var o=i.parseComponentValue();return rn(o)?o:De;case"length-percentage":var a=i.parseComponentValue();return Ee(a)?a:De;case"time":return xf.parse(e,i.parseComponentValue())}break}},E_="data-html2canvas-debug",I_=function(e){var A=e.getAttribute(E_);switch(A){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},ca=function(e,A){var t=I_(e);return t===1||A===t},St=function(){function e(A,t){if(this.context=A,this.textNodes=[],this.elements=[],this.flags=0,ca(t,3))debugger;this.styles=new F_(A,window.getComputedStyle(t,null)),_a(t)&&(this.styles.animationDuration.some(function(n){return n>0})&&(t.style.animationDuration="0s"),this.styles.transform!==null&&(t.style.transform="none")),this.bounds=Wi(this.context,t),ca(t,4)&&(this.flags|=16)}return e}(),H_="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",Mf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Gr=typeof Uint8Array>"u"?[]:new Uint8Array(256),_s=0;_s<Mf.length;_s++)Gr[Mf.charCodeAt(_s)]=_s;for(var S_=function(e){var A=e.length*.75,t=e.length,n,r=0,i,s,o,a;e[e.length-1]==="="&&(A--,e[e.length-2]==="="&&A--);var l=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(A):new Array(A),c=Array.isArray(l)?l:new Uint8Array(l);for(n=0;n<t;n+=4)i=Gr[e.charCodeAt(n)],s=Gr[e.charCodeAt(n+1)],o=Gr[e.charCodeAt(n+2)],a=Gr[e.charCodeAt(n+3)],c[r++]=i<<2|s>>4,c[r++]=(s&15)<<4|o>>2,c[r++]=(o&3)<<6|a&63;return l},x_=function(e){for(var A=e.length,t=[],n=0;n<A;n+=2)t.push(e[n+1]<<8|e[n]);return t},L_=function(e){for(var A=e.length,t=[],n=0;n<A;n+=4)t.push(e[n+3]<<24|e[n+2]<<16|e[n+1]<<8|e[n]);return t},Un=5,ua=6+5,fa=2,k_=ua-Un,Tf=65536>>Un,M_=1<<Un,ha=M_-1,T_=1024>>Un,D_=Tf+T_,K_=D_,O_=32,N_=K_+O_,R_=65536>>ua,P_=1<<k_,V_=P_-1,Df=function(e,A,t){return e.slice?e.slice(A,t):new Uint16Array(Array.prototype.slice.call(e,A,t))},G_=function(e,A,t){return e.slice?e.slice(A,t):new Uint32Array(Array.prototype.slice.call(e,A,t))},X_=function(e,A){var t=S_(e),n=Array.isArray(t)?L_(t):new Uint32Array(t),r=Array.isArray(t)?x_(t):new Uint16Array(t),i=24,s=Df(r,i/2,n[4]/2),o=n[5]===2?Df(r,(i+n[4])/2):G_(n,Math.ceil((i+n[4])/4));return new J_(n[0],n[1],n[2],n[3],s,o)},J_=function(){function e(A,t,n,r,i,s){this.initialValue=A,this.errorValue=t,this.highStart=n,this.highValueIndex=r,this.index=i,this.data=s}return e.prototype.get=function(A){var t;if(A>=0){if(A<55296||A>56319&&A<=65535)return t=this.index[A>>Un],t=(t<<fa)+(A&ha),this.data[t];if(A<=65535)return t=this.index[Tf+(A-55296>>Un)],t=(t<<fa)+(A&ha),this.data[t];if(A<this.highStart)return t=N_-R_+(A>>ua),t=this.index[t],t+=A>>Un&V_,t=this.index[t],t=(t<<fa)+(A&ha),this.data[t];if(A<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),Kf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",W_=typeof Uint8Array>"u"?[]:new Uint8Array(256),Us=0;Us<Kf.length;Us++)W_[Kf.charCodeAt(Us)]=Us;var Y_=1,da=2,ga=3,Of=4,Nf=5,z_=7,Rf=8,Ba=9,pa=10,Pf=11,Vf=12,Gf=13,Xf=14,ma=15,j_=function(e){for(var A=[],t=0,n=e.length;t<n;){var r=e.charCodeAt(t++);if(r>=55296&&r<=56319&&t<n){var i=e.charCodeAt(t++);(i&64512)===56320?A.push(((r&1023)<<10)+(i&1023)+65536):(A.push(r),t--)}else A.push(r)}return A},q_=function(){for(var e=[],A=0;A<arguments.length;A++)e[A]=arguments[A];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var t=e.length;if(!t)return"";for(var n=[],r=-1,i="";++r<t;){var s=e[r];s<=65535?n.push(s):(s-=65536,n.push((s>>10)+55296,s%1024+56320)),(r+1===t||n.length>16384)&&(i+=String.fromCharCode.apply(String,n),n.length=0)}return i},Z_=X_(H_),Bt="×",wa="÷",$_=function(e){return Z_.get(e)},AU=function(e,A,t){var n=t-2,r=A[n],i=A[t-1],s=A[t];if(i===da&&s===ga)return Bt;if(i===da||i===ga||i===Of||s===da||s===ga||s===Of)return wa;if(i===Rf&&[Rf,Ba,Pf,Vf].indexOf(s)!==-1||(i===Pf||i===Ba)&&(s===Ba||s===pa)||(i===Vf||i===pa)&&s===pa||s===Gf||s===Nf||s===z_||i===Y_)return Bt;if(i===Gf&&s===Xf){for(;r===Nf;)r=A[--n];if(r===Xf)return Bt}if(i===ma&&s===ma){for(var o=0;r===ma;)o++,r=A[--n];if(o%2===0)return Bt}return wa},eU=function(e){var A=j_(e),t=A.length,n=0,r=0,i=A.map($_);return{next:function(){if(n>=t)return{done:!0,value:null};for(var s=Bt;n<t&&(s=AU(A,i,++n))===Bt;);if(s!==Bt||n===t){var o=q_.apply(null,A.slice(r,n));return r=n,{value:o,done:!1}}return{done:!0,value:null}}}},tU=function(e){for(var A=eU(e),t=[],n;!(n=A.next()).done;)n.value&&t.push(n.value.slice());return t},nU=function(e){var A=123;if(e.createRange){var t=e.createRange();if(t.getBoundingClientRect){var n=e.createElement("boundtest");n.style.height=A+"px",n.style.display="block",e.body.appendChild(n),t.selectNode(n);var r=t.getBoundingClientRect(),i=Math.round(r.height);if(e.body.removeChild(n),i===A)return!0}}return!1},rU=function(e){var A=e.createElement("boundtest");A.style.width="50px",A.style.display="block",A.style.fontSize="12px",A.style.letterSpacing="0px",A.style.wordSpacing="0px",e.body.appendChild(A);var t=e.createRange();A.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var n=A.firstChild,r=Yi(n.data).map(function(a){return _e(a)}),i=0,s={},o=r.every(function(a,l){t.setStart(n,i),t.setEnd(n,i+a.length);var c=t.getBoundingClientRect();i+=a.length;var f=c.x>s.x||c.y>s.y;return s=c,l===0?!0:f});return e.body.removeChild(A),o},iU=function(){return typeof new Image().crossOrigin<"u"},sU=function(){return typeof new XMLHttpRequest().responseType=="string"},oU=function(e){var A=new Image,t=e.createElement("canvas"),n=t.getContext("2d");if(!n)return!1;A.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{n.drawImage(A,0,0),t.toDataURL()}catch{return!1}return!0},Jf=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},aU=function(e){var A=e.createElement("canvas"),t=100;A.width=t,A.height=t;var n=A.getContext("2d");if(!n)return Promise.reject(!1);n.fillStyle="rgb(0, 255, 0)",n.fillRect(0,0,t,t);var r=new Image,i=A.toDataURL();r.src=i;var s=va(t,t,0,0,r);return n.fillStyle="red",n.fillRect(0,0,t,t),Wf(s).then(function(o){n.drawImage(o,0,0);var a=n.getImageData(0,0,t,t).data;n.fillStyle="red",n.fillRect(0,0,t,t);var l=e.createElement("div");return l.style.backgroundImage="url("+i+")",l.style.height=t+"px",Jf(a)?Wf(va(t,t,0,0,l)):Promise.reject(!1)}).then(function(o){return n.drawImage(o,0,0),Jf(n.getImageData(0,0,t,t).data)}).catch(function(){return!1})},va=function(e,A,t,n,r){var i="http://www.w3.org/2000/svg",s=document.createElementNS(i,"svg"),o=document.createElementNS(i,"foreignObject");return s.setAttributeNS(null,"width",e.toString()),s.setAttributeNS(null,"height",A.toString()),o.setAttributeNS(null,"width","100%"),o.setAttributeNS(null,"height","100%"),o.setAttributeNS(null,"x",t.toString()),o.setAttributeNS(null,"y",n.toString()),o.setAttributeNS(null,"externalResourcesRequired","true"),s.appendChild(o),o.appendChild(r),s},Wf=function(e){return new Promise(function(A,t){var n=new Image;n.onload=function(){return A(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},Ke={get SUPPORT_RANGE_BOUNDS(){var e=nU(document);return Object.defineProperty(Ke,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=Ke.SUPPORT_RANGE_BOUNDS&&rU(document);return Object.defineProperty(Ke,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=oU(document);return Object.defineProperty(Ke,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?aU(document):Promise.resolve(!1);return Object.defineProperty(Ke,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=iU();return Object.defineProperty(Ke,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=sU();return Object.defineProperty(Ke,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(Ke,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(Ke,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},Xr=function(){function e(A,t){this.text=A,this.bounds=t}return e}(),lU=function(e,A,t,n){var r=fU(A,t),i=[],s=0;return r.forEach(function(o){if(t.textDecorationLine.length||o.trim().length>0)if(Ke.SUPPORT_RANGE_BOUNDS){var a=Yf(n,s,o.length).getClientRects();if(a.length>1){var l=Ca(o),c=0;l.forEach(function(u){i.push(new Xr(u,Rt.fromDOMRectList(e,Yf(n,c+s,u.length).getClientRects()))),c+=u.length})}else i.push(new Xr(o,Rt.fromDOMRectList(e,a)))}else{var f=n.splitText(o.length);i.push(new Xr(o,cU(e,n))),n=f}else Ke.SUPPORT_RANGE_BOUNDS||(n=n.splitText(o.length));s+=o.length}),i},cU=function(e,A){var t=A.ownerDocument;if(t){var n=t.createElement("html2canvaswrapper");n.appendChild(A.cloneNode(!0));var r=A.parentNode;if(r){r.replaceChild(n,A);var i=Wi(e,n);return n.firstChild&&r.replaceChild(n.firstChild,n),i}}return Rt.EMPTY},Yf=function(e,A,t){var n=e.ownerDocument;if(!n)throw new Error("Node has no owner document");var r=n.createRange();return r.setStart(e,A),r.setEnd(e,A+t),r},Ca=function(e){if(Ke.SUPPORT_NATIVE_TEXT_SEGMENTATION){var A=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(A.segment(e)).map(function(t){return t.segment})}return tU(e)},uU=function(e,A){if(Ke.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return dU(e,A)},fU=function(e,A){return A.letterSpacing!==0?Ca(e):uU(e,A)},hU=[32,160,4961,65792,65793,4153,4241],dU=function(e,A){for(var t=R1(e,{lineBreak:A.lineBreak,wordBreak:A.overflowWrap==="break-word"?"break-word":A.wordBreak}),n=[],r,i=function(){if(r.value){var s=r.value.slice(),o=Yi(s),a="";o.forEach(function(l){hU.indexOf(l)===-1?a+=_e(l):(a.length&&n.push(a),n.push(_e(l)),a="")}),a.length&&n.push(a)}};!(r=t.next()).done;)i();return n},gU=function(){function e(A,t,n){this.text=BU(t.data,n.textTransform),this.textBounds=lU(A,this.text,n,t)}return e}(),BU=function(e,A){switch(A){case 1:return e.toLowerCase();case 3:return e.replace(pU,mU);case 2:return e.toUpperCase();default:return e}},pU=/(^|\s|:|-|\(|\))([a-z])/g,mU=function(e,A,t){return e.length>0?A+t.toUpperCase():e},zf=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.src=n.currentSrc||n.src,r.intrinsicWidth=n.naturalWidth,r.intrinsicHeight=n.naturalHeight,r.context.cache.addImage(r.src),r}return A}(St),jf=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.canvas=n,r.intrinsicWidth=n.width,r.intrinsicHeight=n.height,r}return A}(St),qf=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this,i=new XMLSerializer,s=Wi(t,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),r.svg="data:image/svg+xml,"+encodeURIComponent(i.serializeToString(n)),r.intrinsicWidth=n.width.baseVal.value,r.intrinsicHeight=n.height.baseVal.value,r.context.cache.addImage(r.svg),r}return A}(St),Zf=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return A}(St),Qa=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.start=n.start,r.reversed=typeof n.reversed=="boolean"&&n.reversed===!0,r}return A}(St),wU=[{type:15,flags:0,unit:"px",number:3}],vU=[{type:16,flags:0,number:50}],CU=function(e){return e.width>e.height?new Rt(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new Rt(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},QU=function(e){var A=e.type===yU?new Array(e.value.length+1).join("•"):e.value;return A.length===0?e.placeholder||"":A},Fs="checkbox",bs="radio",yU="password",$f=707406591,ya=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;switch(r.type=n.type.toLowerCase(),r.checked=n.checked,r.value=QU(n),(r.type===Fs||r.type===bs)&&(r.styles.backgroundColor=3739148031,r.styles.borderTopColor=r.styles.borderRightColor=r.styles.borderBottomColor=r.styles.borderLeftColor=2779096575,r.styles.borderTopWidth=r.styles.borderRightWidth=r.styles.borderBottomWidth=r.styles.borderLeftWidth=1,r.styles.borderTopStyle=r.styles.borderRightStyle=r.styles.borderBottomStyle=r.styles.borderLeftStyle=1,r.styles.backgroundClip=[0],r.styles.backgroundOrigin=[0],r.bounds=CU(r.bounds)),r.type){case Fs:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=wU;break;case bs:r.styles.borderTopRightRadius=r.styles.borderTopLeftRadius=r.styles.borderBottomRightRadius=r.styles.borderBottomLeftRadius=vU;break}return r}return A}(St),Ah=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this,i=n.options[n.selectedIndex||0];return r.value=i&&i.text||"",r}return A}(St),eh=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.value=n.value,r}return A}(St),th=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;r.src=n.src,r.width=parseInt(n.width,10)||0,r.height=parseInt(n.height,10)||0,r.backgroundColor=r.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){r.tree=rh(t,n.contentWindow.document.documentElement);var i=n.contentWindow.document.documentElement?Pr(t,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):Vt.TRANSPARENT,s=n.contentWindow.document.body?Pr(t,getComputedStyle(n.contentWindow.document.body).backgroundColor):Vt.TRANSPARENT;r.backgroundColor=an(i)?an(s)?r.styles.backgroundColor:s:i}}catch{}return r}return A}(St),_U=["OL","UL","MENU"],Es=function(e,A,t,n){for(var r=A.firstChild,i=void 0;r;r=i)if(i=r.nextSibling,ih(r)&&r.data.trim().length>0)t.textNodes.push(new gU(e,r,t.styles));else if(er(r))if(uh(r)&&r.assignedNodes)r.assignedNodes().forEach(function(o){return Es(e,o,t,n)});else{var s=nh(e,r);s.styles.isVisible()&&(UU(r,s,n)?s.flags|=4:FU(s.styles)&&(s.flags|=2),_U.indexOf(r.tagName)!==-1&&(s.flags|=8),t.elements.push(s),r.slot,r.shadowRoot?Es(e,r.shadowRoot,s,n):!Hs(r)&&!sh(r)&&!Ss(r)&&Es(e,r,s,n))}},nh=function(e,A){return Fa(A)?new zf(e,A):oh(A)?new jf(e,A):sh(A)?new qf(e,A):bU(A)?new Zf(e,A):EU(A)?new Qa(e,A):IU(A)?new ya(e,A):Ss(A)?new Ah(e,A):Hs(A)?new eh(e,A):lh(A)?new th(e,A):new St(e,A)},rh=function(e,A){var t=nh(e,A);return t.flags|=4,Es(e,A,t,t),t},UU=function(e,A,t){return A.styles.isPositionedWithZIndex()||A.styles.opacity<1||A.styles.isTransformed()||Ua(e)&&t.styles.isTransparent()},FU=function(e){return e.isPositioned()||e.isFloating()},ih=function(e){return e.nodeType===Node.TEXT_NODE},er=function(e){return e.nodeType===Node.ELEMENT_NODE},_a=function(e){return er(e)&&typeof e.style<"u"&&!Is(e)},Is=function(e){return typeof e.className=="object"},bU=function(e){return e.tagName==="LI"},EU=function(e){return e.tagName==="OL"},IU=function(e){return e.tagName==="INPUT"},HU=function(e){return e.tagName==="HTML"},sh=function(e){return e.tagName==="svg"},Ua=function(e){return e.tagName==="BODY"},oh=function(e){return e.tagName==="CANVAS"},ah=function(e){return e.tagName==="VIDEO"},Fa=function(e){return e.tagName==="IMG"},lh=function(e){return e.tagName==="IFRAME"},ch=function(e){return e.tagName==="STYLE"},SU=function(e){return e.tagName==="SCRIPT"},Hs=function(e){return e.tagName==="TEXTAREA"},Ss=function(e){return e.tagName==="SELECT"},uh=function(e){return e.tagName==="SLOT"},fh=function(e){return e.tagName.indexOf("-")>0},xU=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(A){var t=this.counters[A];return t&&t.length?t[t.length-1]:1},e.prototype.getCounterValues=function(A){var t=this.counters[A];return t||[]},e.prototype.pop=function(A){var t=this;A.forEach(function(n){return t.counters[n].pop()})},e.prototype.parse=function(A){var t=this,n=A.counterIncrement,r=A.counterReset,i=!0;n!==null&&n.forEach(function(o){var a=t.counters[o.counter];a&&o.increment!==0&&(i=!1,a.length||a.push(1),a[Math.max(0,a.length-1)]+=o.increment)});var s=[];return i&&r.forEach(function(o){var a=t.counters[o.counter];s.push(o.counter),a||(a=t.counters[o.counter]=[]),a.push(o.reset)}),s},e}(),hh={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},dh={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},LU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},kU={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},tr=function(e,A,t,n,r,i){return e<A||e>t?Wr(e,r,i.length>0):n.integers.reduce(function(s,o,a){for(;e>=o;)e-=o,s+=n.values[a];return s},"")+i},gh=function(e,A,t,n){var r="";do t||e--,r=n(e)+r,e/=A;while(e*A>=A);return r},Ue=function(e,A,t,n,r){var i=t-A+1;return(e<0?"-":"")+(gh(Math.abs(e),i,n,function(s){return _e(Math.floor(s%i)+A)})+r)},Fn=function(e,A,t){t===void 0&&(t=". ");var n=A.length;return gh(Math.abs(e),n,!1,function(r){return A[Math.floor(r%n)]})+t},nr=1,cn=2,un=4,Jr=8,Gt=function(e,A,t,n,r,i){if(e<-9999||e>9999)return Wr(e,4,r.length>0);var s=Math.abs(e),o=r;if(s===0)return A[0]+o;for(var a=0;s>0&&a<=4;a++){var l=s%10;l===0&&Le(i,nr)&&o!==""?o=A[l]+o:l>1||l===1&&a===0||l===1&&a===1&&Le(i,cn)||l===1&&a===1&&Le(i,un)&&e>100||l===1&&a>1&&Le(i,Jr)?o=A[l]+(a>0?t[a-1]:"")+o:l===1&&a>0&&(o=t[a-1]+o),s=Math.floor(s/10)}return(e<0?n:"")+o},Bh="十百千萬",ph="拾佰仟萬",mh="マイナス",ba="마이너스",Wr=function(e,A,t){var n=t?". ":"",r=t?"、":"",i=t?", ":"",s=t?" ":"";switch(A){case 0:return"•"+s;case 1:return"◦"+s;case 2:return"◾"+s;case 5:var o=Ue(e,48,57,!0,n);return o.length<4?"0"+o:o;case 4:return Fn(e,"〇一二三四五六七八九",r);case 6:return tr(e,1,3999,hh,3,n).toLowerCase();case 7:return tr(e,1,3999,hh,3,n);case 8:return Ue(e,945,969,!1,n);case 9:return Ue(e,97,122,!1,n);case 10:return Ue(e,65,90,!1,n);case 11:return Ue(e,1632,1641,!0,n);case 12:case 49:return tr(e,1,9999,dh,3,n);case 35:return tr(e,1,9999,dh,3,n).toLowerCase();case 13:return Ue(e,2534,2543,!0,n);case 14:case 30:return Ue(e,6112,6121,!0,n);case 15:return Fn(e,"子丑寅卯辰巳午未申酉戌亥",r);case 16:return Fn(e,"甲乙丙丁戊己庚辛壬癸",r);case 17:case 48:return Gt(e,"零一二三四五六七八九",Bh,"負",r,cn|un|Jr);case 47:return Gt(e,"零壹貳參肆伍陸柒捌玖",ph,"負",r,nr|cn|un|Jr);case 42:return Gt(e,"零一二三四五六七八九",Bh,"负",r,cn|un|Jr);case 41:return Gt(e,"零壹贰叁肆伍陆柒捌玖",ph,"负",r,nr|cn|un|Jr);case 26:return Gt(e,"〇一二三四五六七八九","十百千万",mh,r,0);case 25:return Gt(e,"零壱弐参四伍六七八九","拾百千万",mh,r,nr|cn|un);case 31:return Gt(e,"영일이삼사오육칠팔구","십백천만",ba,i,nr|cn|un);case 33:return Gt(e,"零一二三四五六七八九","十百千萬",ba,i,0);case 32:return Gt(e,"零壹貳參四五六七八九","拾百千",ba,i,nr|cn|un);case 18:return Ue(e,2406,2415,!0,n);case 20:return tr(e,1,19999,kU,3,n);case 21:return Ue(e,2790,2799,!0,n);case 22:return Ue(e,2662,2671,!0,n);case 22:return tr(e,1,10999,LU,3,n);case 23:return Fn(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Fn(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return Ue(e,3302,3311,!0,n);case 28:return Fn(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",r);case 29:return Fn(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",r);case 34:return Ue(e,3792,3801,!0,n);case 37:return Ue(e,6160,6169,!0,n);case 38:return Ue(e,4160,4169,!0,n);case 39:return Ue(e,2918,2927,!0,n);case 40:return Ue(e,1776,1785,!0,n);case 43:return Ue(e,3046,3055,!0,n);case 44:return Ue(e,3174,3183,!0,n);case 45:return Ue(e,3664,3673,!0,n);case 46:return Ue(e,3872,3881,!0,n);case 3:default:return Ue(e,48,57,!0,n)}},wh="data-html2canvas-ignore",vh=function(){function e(A,t,n){if(this.context=A,this.options=n,this.scrolledElements=[],this.referenceElement=t,this.counters=new xU,this.quoteDepth=0,!t.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(t.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(A,t){var n=this,r=MU(A,t);if(!r.contentWindow)return Promise.reject("Unable to find iframe window");var i=A.defaultView.pageXOffset,s=A.defaultView.pageYOffset,o=r.contentWindow,a=o.document,l=KU(r).then(function(){return qe(n,void 0,void 0,function(){var c,f;return Ve(this,function(u){switch(u.label){case 0:return this.scrolledElements.forEach(PU),o&&(o.scrollTo(t.left,t.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(o.scrollY!==t.top||o.scrollX!==t.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-t.left,o.scrollY-t.top,0,0))),c=this.options.onclone,f=this.clonedReferenceElement,typeof f>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:u.sent(),u.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,DU(a)]:[3,4];case 3:u.sent(),u.label=4;case 4:return typeof c=="function"?[2,Promise.resolve().then(function(){return c(a,f)}).then(function(){return r})]:[2,r]}})})});return a.open(),a.write(NU(document.doctype)+"<html></html>"),RU(this.referenceElement.ownerDocument,i,s),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},e.prototype.createElementClone=function(A){if(ca(A,2))debugger;if(oh(A))return this.createCanvasClone(A);if(ah(A))return this.createVideoClone(A);if(ch(A))return this.createStyleClone(A);var t=A.cloneNode(!1);return Fa(t)&&(Fa(A)&&A.currentSrc&&A.currentSrc!==A.src&&(t.src=A.currentSrc,t.srcset=""),t.loading==="lazy"&&(t.loading="eager")),fh(t)?this.createCustomElementClone(t):t},e.prototype.createCustomElementClone=function(A){var t=document.createElement("html2canvascustomelement");return Ea(A.style,t),t},e.prototype.createStyleClone=function(A){try{var t=A.sheet;if(t&&t.cssRules){var n=[].slice.call(t.cssRules,0).reduce(function(i,s){return s&&typeof s.cssText=="string"?i+s.cssText:i},""),r=A.cloneNode(!1);return r.textContent=n,r}}catch(i){if(this.context.logger.error("Unable to access cssRules property",i),i.name!=="SecurityError")throw i}return A.cloneNode(!1)},e.prototype.createCanvasClone=function(A){var t;if(this.options.inlineImages&&A.ownerDocument){var n=A.ownerDocument.createElement("img");try{return n.src=A.toDataURL(),n}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",A)}}var r=A.cloneNode(!1);try{r.width=A.width,r.height=A.height;var i=A.getContext("2d"),s=r.getContext("2d");if(s)if(!this.options.allowTaint&&i)s.putImageData(i.getImageData(0,0,A.width,A.height),0,0);else{var o=(t=A.getContext("webgl2"))!==null&&t!==void 0?t:A.getContext("webgl");if(o){var a=o.getContextAttributes();(a==null?void 0:a.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",A)}s.drawImage(A,0,0)}return r}catch{this.context.logger.info("Unable to clone canvas as it is tainted",A)}return r},e.prototype.createVideoClone=function(A){var t=A.ownerDocument.createElement("canvas");t.width=A.offsetWidth,t.height=A.offsetHeight;var n=t.getContext("2d");try{return n&&(n.drawImage(A,0,0,t.width,t.height),this.options.allowTaint||n.getImageData(0,0,t.width,t.height)),t}catch{this.context.logger.info("Unable to clone video as it is tainted",A)}var r=A.ownerDocument.createElement("canvas");return r.width=A.offsetWidth,r.height=A.offsetHeight,r},e.prototype.appendChildNode=function(A,t,n){(!er(t)||!SU(t)&&!t.hasAttribute(wh)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(t)))&&(!this.options.copyStyles||!er(t)||!ch(t))&&A.appendChild(this.cloneNode(t,n))},e.prototype.cloneChildNodes=function(A,t,n){for(var r=this,i=A.shadowRoot?A.shadowRoot.firstChild:A.firstChild;i;i=i.nextSibling)if(er(i)&&uh(i)&&typeof i.assignedNodes=="function"){var s=i.assignedNodes();s.length&&s.forEach(function(o){return r.appendChildNode(t,o,n)})}else this.appendChildNode(t,i,n)},e.prototype.cloneNode=function(A,t){if(ih(A))return document.createTextNode(A.data);if(!A.ownerDocument)return A.cloneNode(!1);var n=A.ownerDocument.defaultView;if(n&&er(A)&&(_a(A)||Is(A))){var r=this.createElementClone(A);r.style.transitionProperty="none";var i=n.getComputedStyle(A),s=n.getComputedStyle(A,":before"),o=n.getComputedStyle(A,":after");this.referenceElement===A&&_a(r)&&(this.clonedReferenceElement=r),Ua(r)&&XU(r);var a=this.counters.parse(new kf(this.context,i)),l=this.resolvePseudoContent(A,r,s,Yr.BEFORE);fh(A)&&(t=!0),ah(A)||this.cloneChildNodes(A,r,t),l&&r.insertBefore(l,r.firstChild);var c=this.resolvePseudoContent(A,r,o,Yr.AFTER);return c&&r.appendChild(c),this.counters.pop(a),(i&&(this.options.copyStyles||Is(A))&&!lh(A)||t)&&Ea(i,r),(A.scrollTop!==0||A.scrollLeft!==0)&&this.scrolledElements.push([r,A.scrollLeft,A.scrollTop]),(Hs(A)||Ss(A))&&(Hs(r)||Ss(r))&&(r.value=A.value),r}return A.cloneNode(!1)},e.prototype.resolvePseudoContent=function(A,t,n,r){var i=this;if(n){var s=n.content,o=t.ownerDocument;if(!(!o||!s||s==="none"||s==="-moz-alt-content"||n.display==="none")){this.counters.parse(new kf(this.context,n));var a=new b_(this.context,n),l=o.createElement("html2canvaspseudoelement");Ea(n,l),a.content.forEach(function(f){if(f.type===0)l.appendChild(o.createTextNode(f.value));else if(f.type===22){var u=o.createElement("img");u.src=f.value,u.style.opacity="1",l.appendChild(u)}else if(f.type===18){if(f.name==="attr"){var h=f.values.filter(ce);h.length&&l.appendChild(o.createTextNode(A.getAttribute(h[0].value)||""))}else if(f.name==="counter"){var d=f.values.filter($n),g=d[0],B=d[1];if(g&&ce(g)){var p=i.counters.getCounterValue(g.value),Q=B&&ce(B)?la.parse(i.context,B.value):3;l.appendChild(o.createTextNode(Wr(p,Q,!1)))}}else if(f.name==="counters"){var F=f.values.filter($n),g=F[0],v=F[1],B=F[2];if(g&&ce(g)){var y=i.counters.getCounterValues(g.value),U=B&&ce(B)?la.parse(i.context,B.value):3,S=v&&v.type===0?v.value:"",_=y.map(function(x){return Wr(x,U,!1)}).join(S);l.appendChild(o.createTextNode(_))}}}else if(f.type===20)switch(f.value){case"open-quote":l.appendChild(o.createTextNode(Lf(a.quotes,i.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(Lf(a.quotes,--i.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(f.value))}}),l.className=Ia+" "+Ha;var c=r===Yr.BEFORE?" "+Ia:" "+Ha;return Is(t)?t.className.baseValue+=c:t.className+=c,l}}},e.destroy=function(A){return A.parentNode?(A.parentNode.removeChild(A),!0):!1},e}(),Yr;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(Yr||(Yr={}));var MU=function(e,A){var t=e.createElement("iframe");return t.className="html2canvas-container",t.style.visibility="hidden",t.style.position="fixed",t.style.left="-10000px",t.style.top="0px",t.style.border="0",t.width=A.width.toString(),t.height=A.height.toString(),t.scrolling="no",t.setAttribute(wh,"true"),e.body.appendChild(t),t},TU=function(e){return new Promise(function(A){if(e.complete){A();return}if(!e.src){A();return}e.onload=A,e.onerror=A})},DU=function(e){return Promise.all([].slice.call(e.images,0).map(TU))},KU=function(e){return new Promise(function(A,t){var n=e.contentWindow;if(!n)return t("No window assigned for iframe");var r=n.document;n.onload=e.onload=function(){n.onload=e.onload=null;var i=setInterval(function(){r.body.childNodes.length>0&&r.readyState==="complete"&&(clearInterval(i),A(e))},50)}})},OU=["all","d","content"],Ea=function(e,A){for(var t=e.length-1;t>=0;t--){var n=e.item(t);OU.indexOf(n)===-1&&A.style.setProperty(n,e.getPropertyValue(n))}return A},NU=function(e){var A="";return e&&(A+="<!DOCTYPE ",e.name&&(A+=e.name),e.internalSubset&&(A+=e.internalSubset),e.publicId&&(A+='"'+e.publicId+'"'),e.systemId&&(A+='"'+e.systemId+'"'),A+=">"),A},RU=function(e,A,t){e&&e.defaultView&&(A!==e.defaultView.pageXOffset||t!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(A,t)},PU=function(e){var A=e[0],t=e[1],n=e[2];A.scrollLeft=t,A.scrollTop=n},VU=":before",GU=":after",Ia="___html2canvas___pseudoelement_before",Ha="___html2canvas___pseudoelement_after",Ch=`{
    content: "" !important;
    display: none !important;
}`,XU=function(e){JU(e,"."+Ia+VU+Ch+`
         .`+Ha+GU+Ch)},JU=function(e,A){var t=e.ownerDocument;if(t){var n=t.createElement("style");n.textContent=A,e.appendChild(n)}},Qh=function(){function e(){}return e.getOrigin=function(A){var t=e._link;return t?(t.href=A,t.href=t.href,t.protocol+t.hostname+t.port):"about:blank"},e.isSameOrigin=function(A){return e.getOrigin(A)===e._origin},e.setContext=function(A){e._link=A.document.createElement("a"),e._origin=e.getOrigin(A.location.href)},e._origin="about:blank",e}(),WU=function(){function e(A,t){this.context=A,this._options=t,this._cache={}}return e.prototype.addImage=function(A){var t=Promise.resolve();return this.has(A)||(xa(A)||qU(A))&&(this._cache[A]=this.loadImage(A)).catch(function(){}),t},e.prototype.match=function(A){return this._cache[A]},e.prototype.loadImage=function(A){return qe(this,void 0,void 0,function(){var t,n,r,i,s=this;return Ve(this,function(o){switch(o.label){case 0:return t=Qh.isSameOrigin(A),n=!Sa(A)&&this._options.useCORS===!0&&Ke.SUPPORT_CORS_IMAGES&&!t,r=!Sa(A)&&!t&&!xa(A)&&typeof this._options.proxy=="string"&&Ke.SUPPORT_CORS_XHR&&!n,!t&&this._options.allowTaint===!1&&!Sa(A)&&!xa(A)&&!r&&!n?[2]:(i=A,r?[4,this.proxy(i)]:[3,2]);case 1:i=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+A.substring(0,256)),[4,new Promise(function(a,l){var c=new Image;c.onload=function(){return a(c)},c.onerror=l,(ZU(i)||n)&&(c.crossOrigin="anonymous"),c.src=i,c.complete===!0&&setTimeout(function(){return a(c)},500),s._options.imageTimeout>0&&setTimeout(function(){return l("Timed out ("+s._options.imageTimeout+"ms) loading image")},s._options.imageTimeout)})];case 3:return[2,o.sent()]}})})},e.prototype.has=function(A){return typeof this._cache[A]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(A){var t=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var r=A.substring(0,256);return new Promise(function(i,s){var o=Ke.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(a.status===200)if(o==="text")i(a.response);else{var f=new FileReader;f.addEventListener("load",function(){return i(f.result)},!1),f.addEventListener("error",function(u){return s(u)},!1),f.readAsDataURL(a.response)}else s("Failed to proxy resource "+r+" with status code "+a.status)},a.onerror=s;var l=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+l+"url="+encodeURIComponent(A)+"&responseType="+o),o!=="text"&&a instanceof XMLHttpRequest&&(a.responseType=o),t._options.imageTimeout){var c=t._options.imageTimeout;a.timeout=c,a.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+r)}}a.send()})},e}(),YU=/^data:image\/svg\+xml/i,zU=/^data:image\/.*;base64,/i,jU=/^data:image\/.*/i,qU=function(e){return Ke.SUPPORT_SVG_DRAWING||!$U(e)},Sa=function(e){return jU.test(e)},ZU=function(e){return zU.test(e)},xa=function(e){return e.substr(0,4)==="blob"},$U=function(e){return e.substr(-3).toLowerCase()==="svg"||YU.test(e)},lA=function(){function e(A,t){this.type=0,this.x=A,this.y=t}return e.prototype.add=function(A,t){return new e(this.x+A,this.y+t)},e}(),rr=function(e,A,t){return new lA(e.x+(A.x-e.x)*t,e.y+(A.y-e.y)*t)},xs=function(){function e(A,t,n,r){this.type=1,this.start=A,this.startControl=t,this.endControl=n,this.end=r}return e.prototype.subdivide=function(A,t){var n=rr(this.start,this.startControl,A),r=rr(this.startControl,this.endControl,A),i=rr(this.endControl,this.end,A),s=rr(n,r,A),o=rr(r,i,A),a=rr(s,o,A);return t?new e(this.start,n,s,a):new e(a,o,i,this.end)},e.prototype.add=function(A,t){return new e(this.start.add(A,t),this.startControl.add(A,t),this.endControl.add(A,t),this.end.add(A,t))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),pt=function(e){return e.type===1},AF=function(){function e(A){var t=A.styles,n=A.bounds,r=Rr(t.borderTopLeftRadius,n.width,n.height),i=r[0],s=r[1],o=Rr(t.borderTopRightRadius,n.width,n.height),a=o[0],l=o[1],c=Rr(t.borderBottomRightRadius,n.width,n.height),f=c[0],u=c[1],h=Rr(t.borderBottomLeftRadius,n.width,n.height),d=h[0],g=h[1],B=[];B.push((i+a)/n.width),B.push((d+f)/n.width),B.push((s+g)/n.height),B.push((l+u)/n.height);var p=Math.max.apply(Math,B);p>1&&(i/=p,s/=p,a/=p,l/=p,f/=p,u/=p,d/=p,g/=p);var Q=n.width-a,F=n.height-u,v=n.width-f,y=n.height-g,U=t.borderTopWidth,S=t.borderRightWidth,_=t.borderBottomWidth,b=t.borderLeftWidth,T=ge(t.paddingTop,A.bounds.width),x=ge(t.paddingRight,A.bounds.width),k=ge(t.paddingBottom,A.bounds.width),M=ge(t.paddingLeft,A.bounds.width);this.topLeftBorderDoubleOuterBox=i>0||s>0?we(n.left+b/3,n.top+U/3,i-b/3,s-U/3,ae.TOP_LEFT):new lA(n.left+b/3,n.top+U/3),this.topRightBorderDoubleOuterBox=i>0||s>0?we(n.left+Q,n.top+U/3,a-S/3,l-U/3,ae.TOP_RIGHT):new lA(n.left+n.width-S/3,n.top+U/3),this.bottomRightBorderDoubleOuterBox=f>0||u>0?we(n.left+v,n.top+F,f-S/3,u-_/3,ae.BOTTOM_RIGHT):new lA(n.left+n.width-S/3,n.top+n.height-_/3),this.bottomLeftBorderDoubleOuterBox=d>0||g>0?we(n.left+b/3,n.top+y,d-b/3,g-_/3,ae.BOTTOM_LEFT):new lA(n.left+b/3,n.top+n.height-_/3),this.topLeftBorderDoubleInnerBox=i>0||s>0?we(n.left+b*2/3,n.top+U*2/3,i-b*2/3,s-U*2/3,ae.TOP_LEFT):new lA(n.left+b*2/3,n.top+U*2/3),this.topRightBorderDoubleInnerBox=i>0||s>0?we(n.left+Q,n.top+U*2/3,a-S*2/3,l-U*2/3,ae.TOP_RIGHT):new lA(n.left+n.width-S*2/3,n.top+U*2/3),this.bottomRightBorderDoubleInnerBox=f>0||u>0?we(n.left+v,n.top+F,f-S*2/3,u-_*2/3,ae.BOTTOM_RIGHT):new lA(n.left+n.width-S*2/3,n.top+n.height-_*2/3),this.bottomLeftBorderDoubleInnerBox=d>0||g>0?we(n.left+b*2/3,n.top+y,d-b*2/3,g-_*2/3,ae.BOTTOM_LEFT):new lA(n.left+b*2/3,n.top+n.height-_*2/3),this.topLeftBorderStroke=i>0||s>0?we(n.left+b/2,n.top+U/2,i-b/2,s-U/2,ae.TOP_LEFT):new lA(n.left+b/2,n.top+U/2),this.topRightBorderStroke=i>0||s>0?we(n.left+Q,n.top+U/2,a-S/2,l-U/2,ae.TOP_RIGHT):new lA(n.left+n.width-S/2,n.top+U/2),this.bottomRightBorderStroke=f>0||u>0?we(n.left+v,n.top+F,f-S/2,u-_/2,ae.BOTTOM_RIGHT):new lA(n.left+n.width-S/2,n.top+n.height-_/2),this.bottomLeftBorderStroke=d>0||g>0?we(n.left+b/2,n.top+y,d-b/2,g-_/2,ae.BOTTOM_LEFT):new lA(n.left+b/2,n.top+n.height-_/2),this.topLeftBorderBox=i>0||s>0?we(n.left,n.top,i,s,ae.TOP_LEFT):new lA(n.left,n.top),this.topRightBorderBox=a>0||l>0?we(n.left+Q,n.top,a,l,ae.TOP_RIGHT):new lA(n.left+n.width,n.top),this.bottomRightBorderBox=f>0||u>0?we(n.left+v,n.top+F,f,u,ae.BOTTOM_RIGHT):new lA(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||g>0?we(n.left,n.top+y,d,g,ae.BOTTOM_LEFT):new lA(n.left,n.top+n.height),this.topLeftPaddingBox=i>0||s>0?we(n.left+b,n.top+U,Math.max(0,i-b),Math.max(0,s-U),ae.TOP_LEFT):new lA(n.left+b,n.top+U),this.topRightPaddingBox=a>0||l>0?we(n.left+Math.min(Q,n.width-S),n.top+U,Q>n.width+S?0:Math.max(0,a-S),Math.max(0,l-U),ae.TOP_RIGHT):new lA(n.left+n.width-S,n.top+U),this.bottomRightPaddingBox=f>0||u>0?we(n.left+Math.min(v,n.width-b),n.top+Math.min(F,n.height-_),Math.max(0,f-S),Math.max(0,u-_),ae.BOTTOM_RIGHT):new lA(n.left+n.width-S,n.top+n.height-_),this.bottomLeftPaddingBox=d>0||g>0?we(n.left+b,n.top+Math.min(y,n.height-_),Math.max(0,d-b),Math.max(0,g-_),ae.BOTTOM_LEFT):new lA(n.left+b,n.top+n.height-_),this.topLeftContentBox=i>0||s>0?we(n.left+b+M,n.top+U+T,Math.max(0,i-(b+M)),Math.max(0,s-(U+T)),ae.TOP_LEFT):new lA(n.left+b+M,n.top+U+T),this.topRightContentBox=a>0||l>0?we(n.left+Math.min(Q,n.width+b+M),n.top+U+T,Q>n.width+b+M?0:a-b+M,l-(U+T),ae.TOP_RIGHT):new lA(n.left+n.width-(S+x),n.top+U+T),this.bottomRightContentBox=f>0||u>0?we(n.left+Math.min(v,n.width-(b+M)),n.top+Math.min(F,n.height+U+T),Math.max(0,f-(S+x)),u-(_+k),ae.BOTTOM_RIGHT):new lA(n.left+n.width-(S+x),n.top+n.height-(_+k)),this.bottomLeftContentBox=d>0||g>0?we(n.left+b+M,n.top+y,Math.max(0,d-(b+M)),g-(_+k),ae.BOTTOM_LEFT):new lA(n.left+b+M,n.top+n.height-(_+k))}return e}(),ae;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ae||(ae={}));var we=function(e,A,t,n,r){var i=4*((Math.sqrt(2)-1)/3),s=t*i,o=n*i,a=e+t,l=A+n;switch(r){case ae.TOP_LEFT:return new xs(new lA(e,l),new lA(e,l-o),new lA(a-s,A),new lA(a,A));case ae.TOP_RIGHT:return new xs(new lA(e,A),new lA(e+s,A),new lA(a,l-o),new lA(a,l));case ae.BOTTOM_RIGHT:return new xs(new lA(a,A),new lA(a,A+o),new lA(e+s,l),new lA(e,l));case ae.BOTTOM_LEFT:default:return new xs(new lA(a,l),new lA(a-s,l),new lA(e,A+o),new lA(e,A))}},Ls=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},eF=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},ks=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},tF=function(){function e(A,t,n){this.offsetX=A,this.offsetY=t,this.matrix=n,this.type=0,this.target=6}return e}(),Ms=function(){function e(A,t){this.path=A,this.target=t,this.type=1}return e}(),nF=function(){function e(A){this.opacity=A,this.type=2,this.target=6}return e}(),rF=function(e){return e.type===0},yh=function(e){return e.type===1},iF=function(e){return e.type===2},_h=function(e,A){return e.length===A.length?e.some(function(t,n){return t===A[n]}):!1},sF=function(e,A,t,n,r){return e.map(function(i,s){switch(s){case 0:return i.add(A,t);case 1:return i.add(A+n,t);case 2:return i.add(A+n,t+r);case 3:return i.add(A,t+r)}return i})},Uh=function(){function e(A){this.element=A,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),Fh=function(){function e(A,t){if(this.container=A,this.parent=t,this.effects=[],this.curves=new AF(this.container),this.container.styles.opacity<1&&this.effects.push(new nF(this.container.styles.opacity)),this.container.styles.transform!==null){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,r=this.container.bounds.top+this.container.styles.transformOrigin[1].number,i=this.container.styles.transform;this.effects.push(new tF(n,r,i))}if(this.container.styles.overflowX!==0){var s=Ls(this.curves),o=ks(this.curves);_h(s,o)?this.effects.push(new Ms(s,6)):(this.effects.push(new Ms(s,2)),this.effects.push(new Ms(o,4)))}}return e.prototype.getEffects=function(A){for(var t=[2,3].indexOf(this.container.styles.position)===-1,n=this.parent,r=this.effects.slice(0);n;){var i=n.effects.filter(function(a){return!yh(a)});if(t||n.container.styles.position!==0||!n.parent){if(r.unshift.apply(r,i),t=[2,3].indexOf(n.container.styles.position)===-1,n.container.styles.overflowX!==0){var s=Ls(n.curves),o=ks(n.curves);_h(s,o)||r.unshift(new Ms(o,6))}}else r.unshift.apply(r,i);n=n.parent}return r.filter(function(a){return Le(a.target,A)})},e}(),La=function(e,A,t,n){e.container.elements.forEach(function(r){var i=Le(r.flags,4),s=Le(r.flags,2),o=new Fh(r,e);Le(r.styles.display,2048)&&n.push(o);var a=Le(r.flags,8)?[]:n;if(i||s){var l=i||r.styles.isPositioned()?t:A,c=new Uh(o);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var f=r.styles.zIndex.order;if(f<0){var u=0;l.negativeZIndex.some(function(d,g){return f>d.element.container.styles.zIndex.order?(u=g,!1):u>0}),l.negativeZIndex.splice(u,0,c)}else if(f>0){var h=0;l.positiveZIndex.some(function(d,g){return f>=d.element.container.styles.zIndex.order?(h=g+1,!1):h>0}),l.positiveZIndex.splice(h,0,c)}else l.zeroOrAutoZIndexOrTransformedOrOpacity.push(c)}else r.styles.isFloating()?l.nonPositionedFloats.push(c):l.nonPositionedInlineLevel.push(c);La(o,c,i?c:t,a)}else r.styles.isInlineLevel()?A.inlineLevel.push(o):A.nonInlineLevel.push(o),La(o,A,t,a);Le(r.flags,8)&&bh(r,a)})},bh=function(e,A){for(var t=e instanceof Qa?e.start:1,n=e instanceof Qa?e.reversed:!1,r=0;r<A.length;r++){var i=A[r];i.container instanceof Zf&&typeof i.container.value=="number"&&i.container.value!==0&&(t=i.container.value),i.listValue=Wr(t,i.container.styles.listStyleType,!0),t+=n?-1:1}},oF=function(e){var A=new Fh(e,null),t=new Uh(A),n=[];return La(A,t,t,n),bh(A.container,n),t},Eh=function(e,A){switch(A){case 0:return mt(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return mt(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return mt(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return mt(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},aF=function(e,A){switch(A){case 0:return mt(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return mt(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return mt(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return mt(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},lF=function(e,A){switch(A){case 0:return mt(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return mt(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return mt(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return mt(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},cF=function(e,A){switch(A){case 0:return Ts(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return Ts(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return Ts(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return Ts(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},Ts=function(e,A){var t=[];return pt(e)?t.push(e.subdivide(.5,!1)):t.push(e),pt(A)?t.push(A.subdivide(.5,!0)):t.push(A),t},mt=function(e,A,t,n){var r=[];return pt(e)?r.push(e.subdivide(.5,!1)):r.push(e),pt(t)?r.push(t.subdivide(.5,!0)):r.push(t),pt(n)?r.push(n.subdivide(.5,!0).reverse()):r.push(n),pt(A)?r.push(A.subdivide(.5,!1).reverse()):r.push(A),r},Ih=function(e){var A=e.bounds,t=e.styles;return A.add(t.borderLeftWidth,t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth),-(t.borderTopWidth+t.borderBottomWidth))},Ds=function(e){var A=e.styles,t=e.bounds,n=ge(A.paddingLeft,t.width),r=ge(A.paddingRight,t.width),i=ge(A.paddingTop,t.width),s=ge(A.paddingBottom,t.width);return t.add(n+A.borderLeftWidth,i+A.borderTopWidth,-(A.borderRightWidth+A.borderLeftWidth+n+r),-(A.borderTopWidth+A.borderBottomWidth+i+s))},uF=function(e,A){return e===0?A.bounds:e===2?Ds(A):Ih(A)},fF=function(e,A){return e===0?A.bounds:e===2?Ds(A):Ih(A)},ka=function(e,A,t){var n=uF(sr(e.styles.backgroundOrigin,A),e),r=fF(sr(e.styles.backgroundClip,A),e),i=hF(sr(e.styles.backgroundSize,A),t,n),s=i[0],o=i[1],a=Rr(sr(e.styles.backgroundPosition,A),n.width-s,n.height-o),l=dF(sr(e.styles.backgroundRepeat,A),a,i,n,r),c=Math.round(n.left+a[0]),f=Math.round(n.top+a[1]);return[l,c,f,s,o]},ir=function(e){return ce(e)&&e.value===Ar.AUTO},Ks=function(e){return typeof e=="number"},hF=function(e,A,t){var n=A[0],r=A[1],i=A[2],s=e[0],o=e[1];if(!s)return[0,0];if(Ee(s)&&o&&Ee(o))return[ge(s,t.width),ge(o,t.height)];var a=Ks(i);if(ce(s)&&(s.value===Ar.CONTAIN||s.value===Ar.COVER)){if(Ks(i)){var l=t.width/t.height;return l<i!=(s.value===Ar.COVER)?[t.width,t.width/i]:[t.height*i,t.height]}return[t.width,t.height]}var c=Ks(n),f=Ks(r),u=c||f;if(ir(s)&&(!o||ir(o))){if(c&&f)return[n,r];if(!a&&!u)return[t.width,t.height];if(u&&a){var h=c?n:r*i,d=f?r:n/i;return[h,d]}var g=c?n:t.width,B=f?r:t.height;return[g,B]}if(a){var p=0,Q=0;return Ee(s)?p=ge(s,t.width):Ee(o)&&(Q=ge(o,t.height)),ir(s)?p=Q*i:(!o||ir(o))&&(Q=p/i),[p,Q]}var F=null,v=null;if(Ee(s)?F=ge(s,t.width):o&&Ee(o)&&(v=ge(o,t.height)),F!==null&&(!o||ir(o))&&(v=c&&f?F/n*r:t.height),v!==null&&ir(s)&&(F=c&&f?v/r*n:t.width),F!==null&&v!==null)return[F,v];throw new Error("Unable to calculate background-size for element")},sr=function(e,A){var t=e[A];return typeof t>"u"?e[0]:t},dF=function(e,A,t,n,r){var i=A[0],s=A[1],o=t[0],a=t[1];switch(e){case 2:return[new lA(Math.round(n.left),Math.round(n.top+s)),new lA(Math.round(n.left+n.width),Math.round(n.top+s)),new lA(Math.round(n.left+n.width),Math.round(a+n.top+s)),new lA(Math.round(n.left),Math.round(a+n.top+s))];case 3:return[new lA(Math.round(n.left+i),Math.round(n.top)),new lA(Math.round(n.left+i+o),Math.round(n.top)),new lA(Math.round(n.left+i+o),Math.round(n.height+n.top)),new lA(Math.round(n.left+i),Math.round(n.height+n.top))];case 1:return[new lA(Math.round(n.left+i),Math.round(n.top+s)),new lA(Math.round(n.left+i+o),Math.round(n.top+s)),new lA(Math.round(n.left+i+o),Math.round(n.top+s+a)),new lA(Math.round(n.left+i),Math.round(n.top+s+a))];default:return[new lA(Math.round(r.left),Math.round(r.top)),new lA(Math.round(r.left+r.width),Math.round(r.top)),new lA(Math.round(r.left+r.width),Math.round(r.height+r.top)),new lA(Math.round(r.left),Math.round(r.height+r.top))]}},gF="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",Hh="Hidden Text",BF=function(){function e(A){this._data={},this._document=A}return e.prototype.parseMetrics=function(A,t){var n=this._document.createElement("div"),r=this._document.createElement("img"),i=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=A,n.style.fontSize=t,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),r.src=gF,r.width=1,r.height=1,r.style.margin="0",r.style.padding="0",r.style.verticalAlign="baseline",i.style.fontFamily=A,i.style.fontSize=t,i.style.margin="0",i.style.padding="0",i.appendChild(this._document.createTextNode(Hh)),n.appendChild(i),n.appendChild(r);var o=r.offsetTop-i.offsetTop+2;n.removeChild(i),n.appendChild(this._document.createTextNode(Hh)),n.style.lineHeight="normal",r.style.verticalAlign="super";var a=r.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:a}},e.prototype.getMetrics=function(A,t){var n=A+" "+t;return typeof this._data[n]>"u"&&(this._data[n]=this.parseMetrics(A,t)),this._data[n]},e}(),Sh=function(){function e(A,t){this.context=A,this.options=t}return e}(),pF=1e4,mF=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r._activeEffects=[],r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),n.canvas||(r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px"),r.fontMetrics=new BF(document),r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.ctx.textBaseline="bottom",r._activeEffects=[],r.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),r}return A.prototype.applyEffects=function(t){for(var n=this;this._activeEffects.length;)this.popEffect();t.forEach(function(r){return n.applyEffect(r)})},A.prototype.applyEffect=function(t){this.ctx.save(),iF(t)&&(this.ctx.globalAlpha=t.opacity),rF(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),yh(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},A.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},A.prototype.renderStack=function(t){return qe(this,void 0,void 0,function(){var n;return Ve(this,function(r){switch(r.label){case 0:return n=t.element.container.styles,n.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},A.prototype.renderNode=function(t){return qe(this,void 0,void 0,function(){return Ve(this,function(n){switch(n.label){case 0:if(Le(t.container.flags,16))debugger;return t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return n.sent(),[4,this.renderNodeContent(t)];case 2:n.sent(),n.label=3;case 3:return[2]}})})},A.prototype.renderTextWithLetterSpacing=function(t,n,r){var i=this;if(n===0)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+r);else{var s=Ca(t.text);s.reduce(function(o,a){return i.ctx.fillText(a,o,t.bounds.top+r),o+i.ctx.measureText(a).width},t.bounds.left)}},A.prototype.createFontStyle=function(t){var n=t.fontVariant.filter(function(s){return s==="normal"||s==="small-caps"}).join(""),r=yF(t.fontFamily).join(", "),i=Nr(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,n,t.fontWeight,i,r].join(" "),r,i]},A.prototype.renderTextNode=function(t,n){return qe(this,void 0,void 0,function(){var r,i,s,o,a,l,c,f,u=this;return Ve(this,function(h){return r=this.createFontStyle(n),i=r[0],s=r[1],o=r[2],this.ctx.font=i,this.ctx.direction=n.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",a=this.fontMetrics.getMetrics(s,o),l=a.baseline,c=a.middle,f=n.paintOrder,t.textBounds.forEach(function(d){f.forEach(function(g){switch(g){case 0:u.ctx.fillStyle=Me(n.color),u.renderTextWithLetterSpacing(d,n.letterSpacing,l);var B=n.textShadow;B.length&&d.text.trim().length&&(B.slice(0).reverse().forEach(function(p){u.ctx.shadowColor=Me(p.color),u.ctx.shadowOffsetX=p.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=p.offsetY.number*u.options.scale,u.ctx.shadowBlur=p.blur.number,u.renderTextWithLetterSpacing(d,n.letterSpacing,l)}),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),n.textDecorationLine.length&&(u.ctx.fillStyle=Me(n.textDecorationColor||n.color),n.textDecorationLine.forEach(function(p){switch(p){case 1:u.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top+l),d.bounds.width,1);break;case 2:u.ctx.fillRect(d.bounds.left,Math.round(d.bounds.top),d.bounds.width,1);break;case 3:u.ctx.fillRect(d.bounds.left,Math.ceil(d.bounds.top+c),d.bounds.width,1);break}}));break;case 1:n.webkitTextStrokeWidth&&d.text.trim().length&&(u.ctx.strokeStyle=Me(n.webkitTextStrokeColor),u.ctx.lineWidth=n.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(d.text,d.bounds.left,d.bounds.top+l)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter";break}})}),[2]})})},A.prototype.renderReplacedElement=function(t,n,r){if(r&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var i=Ds(t),s=ks(n);this.path(s),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(r,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},A.prototype.renderNodeContent=function(t){return qe(this,void 0,void 0,function(){var n,r,i,s,o,a,Q,Q,l,c,f,u,v,h,d,y,g,B,p,Q,F,v,y;return Ve(this,function(U){switch(U.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,r=t.curves,i=n.styles,s=0,o=n.textNodes,U.label=1;case 1:return s<o.length?(a=o[s],[4,this.renderTextNode(a,i)]):[3,4];case 2:U.sent(),U.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof zf))return[3,8];U.label=5;case 5:return U.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return Q=U.sent(),this.renderReplacedElement(n,r,Q),[3,8];case 7:return U.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof jf&&this.renderReplacedElement(n,r,n.canvas),!(n instanceof qf))return[3,12];U.label=9;case 9:return U.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return Q=U.sent(),this.renderReplacedElement(n,r,Q),[3,12];case 11:return U.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof th&&n.tree?(l=new A(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=U.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),U.label=14;case 14:if(n instanceof ya&&(f=Math.min(n.bounds.width,n.bounds.height),n.type===Fs?n.checked&&(this.ctx.save(),this.path([new lA(n.bounds.left+f*.39363,n.bounds.top+f*.79),new lA(n.bounds.left+f*.16,n.bounds.top+f*.5549),new lA(n.bounds.left+f*.27347,n.bounds.top+f*.44071),new lA(n.bounds.left+f*.39694,n.bounds.top+f*.5649),new lA(n.bounds.left+f*.72983,n.bounds.top+f*.23),new lA(n.bounds.left+f*.84,n.bounds.top+f*.34085),new lA(n.bounds.left+f*.39363,n.bounds.top+f*.79)]),this.ctx.fillStyle=Me($f),this.ctx.fill(),this.ctx.restore()):n.type===bs&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+f/2,n.bounds.top+f/2,f/4,0,Math.PI*2,!0),this.ctx.fillStyle=Me($f),this.ctx.fill(),this.ctx.restore())),wF(n)&&n.value.length){switch(u=this.createFontStyle(i),v=u[0],h=u[1],d=this.fontMetrics.getMetrics(v,h).baseline,this.ctx.font=v,this.ctx.fillStyle=Me(i.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=CF(n.styles.textAlign),y=Ds(n),g=0,n.styles.textAlign){case 1:g+=y.width/2;break;case 2:g+=y.width;break}B=y.add(g,0,0,-y.height/2+1),this.ctx.save(),this.path([new lA(y.left,y.top),new lA(y.left+y.width,y.top),new lA(y.left+y.width,y.top+y.height),new lA(y.left,y.top+y.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new Xr(n.value,B),i.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Le(n.styles.display,2048))return[3,20];if(n.styles.listStyleImage===null)return[3,19];if(p=n.styles.listStyleImage,p.type!==0)return[3,18];Q=void 0,F=p.url,U.label=15;case 15:return U.trys.push([15,17,,18]),[4,this.context.cache.match(F)];case 16:return Q=U.sent(),this.ctx.drawImage(Q,n.bounds.left-(Q.width+10),n.bounds.top),[3,18];case 17:return U.sent(),this.context.logger.error("Error loading list-style-image "+F),[3,18];case 18:return[3,20];case 19:t.listValue&&n.styles.listStyleType!==-1&&(v=this.createFontStyle(i)[0],this.ctx.font=v,this.ctx.fillStyle=Me(i.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",y=new Rt(n.bounds.left,n.bounds.top+ge(n.styles.paddingTop,n.bounds.width),n.bounds.width,Hf(i.lineHeight,i.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new Xr(t.listValue,y),i.letterSpacing,Hf(i.lineHeight,i.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),U.label=20;case 20:return[2]}})})},A.prototype.renderStackContent=function(t){return qe(this,void 0,void 0,function(){var n,r,p,i,s,p,o,a,p,l,c,p,f,u,p,h,d,p,g,B,p;return Ve(this,function(Q){switch(Q.label){case 0:if(Le(t.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:Q.sent(),n=0,r=t.negativeZIndex,Q.label=2;case 2:return n<r.length?(p=r[n],[4,this.renderStack(p)]):[3,5];case 3:Q.sent(),Q.label=4;case 4:return n++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:Q.sent(),i=0,s=t.nonInlineLevel,Q.label=7;case 7:return i<s.length?(p=s[i],[4,this.renderNode(p)]):[3,10];case 8:Q.sent(),Q.label=9;case 9:return i++,[3,7];case 10:o=0,a=t.nonPositionedFloats,Q.label=11;case 11:return o<a.length?(p=a[o],[4,this.renderStack(p)]):[3,14];case 12:Q.sent(),Q.label=13;case 13:return o++,[3,11];case 14:l=0,c=t.nonPositionedInlineLevel,Q.label=15;case 15:return l<c.length?(p=c[l],[4,this.renderStack(p)]):[3,18];case 16:Q.sent(),Q.label=17;case 17:return l++,[3,15];case 18:f=0,u=t.inlineLevel,Q.label=19;case 19:return f<u.length?(p=u[f],[4,this.renderNode(p)]):[3,22];case 20:Q.sent(),Q.label=21;case 21:return f++,[3,19];case 22:h=0,d=t.zeroOrAutoZIndexOrTransformedOrOpacity,Q.label=23;case 23:return h<d.length?(p=d[h],[4,this.renderStack(p)]):[3,26];case 24:Q.sent(),Q.label=25;case 25:return h++,[3,23];case 26:g=0,B=t.positiveZIndex,Q.label=27;case 27:return g<B.length?(p=B[g],[4,this.renderStack(p)]):[3,30];case 28:Q.sent(),Q.label=29;case 29:return g++,[3,27];case 30:return[2]}})})},A.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},A.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},A.prototype.formatPath=function(t){var n=this;t.forEach(function(r,i){var s=pt(r)?r.start:r;i===0?n.ctx.moveTo(s.x,s.y):n.ctx.lineTo(s.x,s.y),pt(r)&&n.ctx.bezierCurveTo(r.startControl.x,r.startControl.y,r.endControl.x,r.endControl.y,r.end.x,r.end.y)})},A.prototype.renderRepeat=function(t,n,r,i){this.path(t),this.ctx.fillStyle=n,this.ctx.translate(r,i),this.ctx.fill(),this.ctx.translate(-r,-i)},A.prototype.resizeImage=function(t,n,r){var i;if(t.width===n&&t.height===r)return t;var s=(i=this.canvas.ownerDocument)!==null&&i!==void 0?i:document,o=s.createElement("canvas");o.width=Math.max(1,n),o.height=Math.max(1,r);var a=o.getContext("2d");return a.drawImage(t,0,0,t.width,t.height,0,0,n,r),o},A.prototype.renderBackgroundImage=function(t){return qe(this,void 0,void 0,function(){var n,r,i,s,o,a;return Ve(this,function(l){switch(l.label){case 0:n=t.styles.backgroundImage.length-1,r=function(c){var f,u,h,T,I,X,M,E,_,d,T,I,X,M,E,g,B,p,Q,F,v,y,U,S,_,b,T,x,k,M,E,P,I,X,O,V,J,eA,oA,wA,cA,yA;return Ve(this,function(xA){switch(xA.label){case 0:if(c.type!==0)return[3,5];f=void 0,u=c.url,xA.label=1;case 1:return xA.trys.push([1,3,,4]),[4,i.context.cache.match(u)];case 2:return f=xA.sent(),[3,4];case 3:return xA.sent(),i.context.logger.error("Error loading background-image "+u),[3,4];case 4:return f&&(h=ka(t,n,[f.width,f.height,f.width/f.height]),T=h[0],I=h[1],X=h[2],M=h[3],E=h[4],_=i.ctx.createPattern(i.resizeImage(f,M,E),"repeat"),i.renderRepeat(T,_,I,X)),[3,6];case 5:ry(c)?(d=ka(t,n,[null,null,null]),T=d[0],I=d[1],X=d[2],M=d[3],E=d[4],g=$Q(c.angle,M,E),B=g[0],p=g[1],Q=g[2],F=g[3],v=g[4],y=document.createElement("canvas"),y.width=M,y.height=E,U=y.getContext("2d"),S=U.createLinearGradient(p,F,Q,v),wf(c.stops,B).forEach(function(_A){return S.addColorStop(_A.stop,Me(_A.color))}),U.fillStyle=S,U.fillRect(0,0,M,E),M>0&&E>0&&(_=i.ctx.createPattern(y,"repeat"),i.renderRepeat(T,_,I,X))):iy(c)&&(b=ka(t,n,[null,null,null]),T=b[0],x=b[1],k=b[2],M=b[3],E=b[4],P=c.position.length===0?[sa]:c.position,I=ge(P[0],M),X=ge(P[P.length-1],E),O=Ay(c,I,X,M,E),V=O[0],J=O[1],V>0&&J>0&&(eA=i.ctx.createRadialGradient(x+I,k+X,0,x+I,k+X,V),wf(c.stops,V*2).forEach(function(_A){return eA.addColorStop(_A.stop,Me(_A.color))}),i.path(T),i.ctx.fillStyle=eA,V!==J?(oA=t.bounds.left+.5*t.bounds.width,wA=t.bounds.top+.5*t.bounds.height,cA=J/V,yA=1/cA,i.ctx.save(),i.ctx.translate(oA,wA),i.ctx.transform(1,0,0,cA,0,0),i.ctx.translate(-oA,-wA),i.ctx.fillRect(x,yA*(k-wA)+wA,M,E*yA),i.ctx.restore()):i.ctx.fill())),xA.label=6;case 6:return n--,[2]}})},i=this,s=0,o=t.styles.backgroundImage.slice(0).reverse(),l.label=1;case 1:return s<o.length?(a=o[s],[5,r(a)]):[3,4];case 2:l.sent(),l.label=3;case 3:return s++,[3,1];case 4:return[2]}})})},A.prototype.renderSolidBorder=function(t,n,r){return qe(this,void 0,void 0,function(){return Ve(this,function(i){return this.path(Eh(r,n)),this.ctx.fillStyle=Me(t),this.ctx.fill(),[2]})})},A.prototype.renderDoubleBorder=function(t,n,r,i){return qe(this,void 0,void 0,function(){var s,o;return Ve(this,function(a){switch(a.label){case 0:return n<3?[4,this.renderSolidBorder(t,r,i)]:[3,2];case 1:return a.sent(),[2];case 2:return s=aF(i,r),this.path(s),this.ctx.fillStyle=Me(t),this.ctx.fill(),o=lF(i,r),this.path(o),this.ctx.fill(),[2]}})})},A.prototype.renderNodeBackgroundAndBorders=function(t){return qe(this,void 0,void 0,function(){var n,r,i,s,o,a,l,c,f=this;return Ve(this,function(u){switch(u.label){case 0:return this.applyEffects(t.getEffects(2)),n=t.container.styles,r=!an(n.backgroundColor)||n.backgroundImage.length,i=[{style:n.borderTopStyle,color:n.borderTopColor,width:n.borderTopWidth},{style:n.borderRightStyle,color:n.borderRightColor,width:n.borderRightWidth},{style:n.borderBottomStyle,color:n.borderBottomColor,width:n.borderBottomWidth},{style:n.borderLeftStyle,color:n.borderLeftColor,width:n.borderLeftWidth}],s=vF(sr(n.backgroundClip,0),t.curves),r||n.boxShadow.length?(this.ctx.save(),this.path(s),this.ctx.clip(),an(n.backgroundColor)||(this.ctx.fillStyle=Me(n.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:u.sent(),this.ctx.restore(),n.boxShadow.slice(0).reverse().forEach(function(h){f.ctx.save();var d=Ls(t.curves),g=h.inset?0:pF,B=sF(d,-g+(h.inset?1:-1)*h.spread.number,(h.inset?1:-1)*h.spread.number,h.spread.number*(h.inset?-2:2),h.spread.number*(h.inset?-2:2));h.inset?(f.path(d),f.ctx.clip(),f.mask(B)):(f.mask(d),f.ctx.clip(),f.path(B)),f.ctx.shadowOffsetX=h.offsetX.number+g,f.ctx.shadowOffsetY=h.offsetY.number,f.ctx.shadowColor=Me(h.color),f.ctx.shadowBlur=h.blur.number,f.ctx.fillStyle=h.inset?Me(h.color):"rgba(0,0,0,1)",f.ctx.fill(),f.ctx.restore()}),u.label=2;case 2:o=0,a=0,l=i,u.label=3;case 3:return a<l.length?(c=l[a],c.style!==0&&!an(c.color)&&c.width>0?c.style!==2?[3,5]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,2)]:[3,11]):[3,13];case 4:return u.sent(),[3,11];case 5:return c.style!==3?[3,7]:[4,this.renderDashedDottedBorder(c.color,c.width,o,t.curves,3)];case 6:return u.sent(),[3,11];case 7:return c.style!==4?[3,9]:[4,this.renderDoubleBorder(c.color,c.width,o,t.curves)];case 8:return u.sent(),[3,11];case 9:return[4,this.renderSolidBorder(c.color,o,t.curves)];case 10:u.sent(),u.label=11;case 11:o++,u.label=12;case 12:return a++,[3,3];case 13:return[2]}})})},A.prototype.renderDashedDottedBorder=function(t,n,r,i,s){return qe(this,void 0,void 0,function(){var o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,y,U;return Ve(this,function(S){return this.ctx.save(),o=cF(i,r),a=Eh(i,r),s===2&&(this.path(a),this.ctx.clip()),pt(a[0])?(l=a[0].start.x,c=a[0].start.y):(l=a[0].x,c=a[0].y),pt(a[1])?(f=a[1].end.x,u=a[1].end.y):(f=a[1].x,u=a[1].y),r===0||r===2?h=Math.abs(l-f):h=Math.abs(c-u),this.ctx.beginPath(),s===3?this.formatPath(o):this.formatPath(a.slice(0,2)),d=n<3?n*3:n*2,g=n<3?n*2:n,s===3&&(d=n,g=n),B=!0,h<=d*2?B=!1:h<=d*2+g?(p=h/(2*d+g),d*=p,g*=p):(Q=Math.floor((h+g)/(d+g)),F=(h-Q*d)/(Q-1),v=(h-(Q+1)*d)/Q,g=v<=0||Math.abs(g-F)<Math.abs(g-v)?F:v),B&&(s===3?this.ctx.setLineDash([0,d+g]):this.ctx.setLineDash([d,g])),s===3?(this.ctx.lineCap="round",this.ctx.lineWidth=n):this.ctx.lineWidth=n*2+1.1,this.ctx.strokeStyle=Me(t),this.ctx.stroke(),this.ctx.setLineDash([]),s===2&&(pt(a[0])&&(y=a[3],U=a[0],this.ctx.beginPath(),this.formatPath([new lA(y.end.x,y.end.y),new lA(U.start.x,U.start.y)]),this.ctx.stroke()),pt(a[1])&&(y=a[1],U=a[2],this.ctx.beginPath(),this.formatPath([new lA(y.end.x,y.end.y),new lA(U.start.x,U.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},A.prototype.render=function(t){return qe(this,void 0,void 0,function(){var n;return Ve(this,function(r){switch(r.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Me(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),n=oF(t),[4,this.renderStack(n)];case 1:return r.sent(),this.applyEffects([]),[2,this.canvas]}})})},A}(Sh),wF=function(e){return e instanceof eh||e instanceof Ah?!0:e instanceof ya&&e.type!==bs&&e.type!==Fs},vF=function(e,A){switch(e){case 0:return Ls(A);case 2:return eF(A);case 1:default:return ks(A)}},CF=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},QF=["-apple-system","system-ui"],yF=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(A){return QF.indexOf(A)===-1}):e},_F=function(e){_t(A,e);function A(t,n){var r=e.call(this,t,n)||this;return r.canvas=n.canvas?n.canvas:document.createElement("canvas"),r.ctx=r.canvas.getContext("2d"),r.options=n,r.canvas.width=Math.floor(n.width*n.scale),r.canvas.height=Math.floor(n.height*n.scale),r.canvas.style.width=n.width+"px",r.canvas.style.height=n.height+"px",r.ctx.scale(r.options.scale,r.options.scale),r.ctx.translate(-n.x,-n.y),r.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),r}return A.prototype.render=function(t){return qe(this,void 0,void 0,function(){var n,r;return Ve(this,function(i){switch(i.label){case 0:return n=va(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,UF(n)];case 1:return r=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Me(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(r,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},A}(Sh),UF=function(e){return new Promise(function(A,t){var n=new Image;n.onload=function(){A(n)},n.onerror=t,n.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},FF=function(){function e(A){var t=A.id,n=A.enabled;this.id=t,this.enabled=n,this.start=Date.now()}return e.prototype.debug=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,Ji([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,Ji([this.id,this.getTime()+"ms"],A))},e.prototype.warn=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,Ji([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},e.prototype.error=function(){for(var A=[],t=0;t<arguments.length;t++)A[t]=arguments[t];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,Ji([this.id,this.getTime()+"ms"],A)):this.info.apply(this,A))},e.instances={},e}(),bF=function(){function e(A,t){var n;this.windowBounds=t,this.instanceName="#"+e.instanceCount++,this.logger=new FF({id:this.instanceName,enabled:A.logging}),this.cache=(n=A.cache)!==null&&n!==void 0?n:new WU(this,A)}return e.instanceCount=1,e}(),EF=function(e,A){return A===void 0&&(A={}),IF(e,A)};typeof window<"u"&&Qh.setContext(window);var IF=function(e,A){return qe(void 0,void 0,void 0,function(){var t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,S,U,S,_,b,T,x,k,M,E,P,I,X,O,V,J,eA,oA,wA,cA;return Ve(this,function(yA){switch(yA.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(t=e.ownerDocument,!t)throw new Error("Element is not attached to a Document");if(n=t.defaultView,!n)throw new Error("Document is not attached to a Window");return r={allowTaint:(_=A.allowTaint)!==null&&_!==void 0?_:!1,imageTimeout:(b=A.imageTimeout)!==null&&b!==void 0?b:15e3,proxy:A.proxy,useCORS:(T=A.useCORS)!==null&&T!==void 0?T:!1},i=Oo({logging:(x=A.logging)!==null&&x!==void 0?x:!0,cache:A.cache},r),s={windowWidth:(k=A.windowWidth)!==null&&k!==void 0?k:n.innerWidth,windowHeight:(M=A.windowHeight)!==null&&M!==void 0?M:n.innerHeight,scrollX:(E=A.scrollX)!==null&&E!==void 0?E:n.pageXOffset,scrollY:(P=A.scrollY)!==null&&P!==void 0?P:n.pageYOffset},o=new Rt(s.scrollX,s.scrollY,s.windowWidth,s.windowHeight),a=new bF(i,o),l=(I=A.foreignObjectRendering)!==null&&I!==void 0?I:!1,c={allowTaint:(X=A.allowTaint)!==null&&X!==void 0?X:!1,onclone:A.onclone,ignoreElements:A.ignoreElements,inlineImages:l,copyStyles:l},a.logger.debug("Starting document clone with size "+o.width+"x"+o.height+" scrolled to "+-o.left+","+-o.top),f=new vh(a,e,c),u=f.clonedReferenceElement,u?[4,f.toIFrame(t,o)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return h=yA.sent(),d=Ua(u)||HU(u)?s1(u.ownerDocument):Wi(a,u),g=d.width,B=d.height,p=d.left,Q=d.top,F=HF(a,u,A.backgroundColor),v={canvas:A.canvas,backgroundColor:F,scale:(V=(O=A.scale)!==null&&O!==void 0?O:n.devicePixelRatio)!==null&&V!==void 0?V:1,x:((J=A.x)!==null&&J!==void 0?J:0)+p,y:((eA=A.y)!==null&&eA!==void 0?eA:0)+Q,width:(oA=A.width)!==null&&oA!==void 0?oA:Math.ceil(g),height:(wA=A.height)!==null&&wA!==void 0?wA:Math.ceil(B)},l?(a.logger.debug("Document cloned, using foreign object rendering"),S=new _F(a,v),[4,S.render(u)]):[3,3];case 2:return y=yA.sent(),[3,5];case 3:return a.logger.debug("Document cloned, element located at "+p+","+Q+" with size "+g+"x"+B+" using computed rendering"),a.logger.debug("Starting DOM parsing"),U=rh(a,u),F===U.styles.backgroundColor&&(U.styles.backgroundColor=Vt.TRANSPARENT),a.logger.debug("Starting renderer for element at "+v.x+","+v.y+" with size "+v.width+"x"+v.height),S=new mF(a,v),[4,S.render(U)];case 4:y=yA.sent(),yA.label=5;case 5:return(!((cA=A.removeContainer)!==null&&cA!==void 0)||cA)&&(vh.destroy(h)||a.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),a.logger.debug("Finished rendering"),[2,y]}})})},HF=function(e,A,t){var n=A.ownerDocument,r=n.documentElement?Pr(e,getComputedStyle(n.documentElement).backgroundColor):Vt.TRANSPARENT,i=n.body?Pr(e,getComputedStyle(n.body).backgroundColor):Vt.TRANSPARENT,s=typeof t=="string"?Pr(e,t):t===null?Vt.TRANSPARENT:4294967295;return A===n.documentElement?an(r)?an(i)?s:i:r:s};function SF(e){let A,t,n,r;return{c(){A=C("button"),t=C("span"),t.innerHTML='<i class="fas fa-download"></i>',m(t,"class","icon is-small p-0"),m(A,"class","tag is-link"),m(A,"title",Y==="en"?"Download as PNG":"Télécharger en PNG")},m(i,s){K(i,A,s),w(A,t),n||(r=dA(A,"click",e[0]),n=!0)},p:tA,i:tA,o:tA,d(i){i&&D(A),n=!1,r()}}}function xF(e){for(;e&&e!==document.body;){const A=getComputedStyle(e);if(/(auto|scroll|hidden)/.test(A.overflow+A.overflowX+A.overflowY))return e;e=e.parentElement}return null}function LF(e,A,t){let{targetId:n}=A,{filename:r="export.png"}=A;async function i(){await qs(async()=>{const s=document.getElementById(n);if(!s)return;const o=xF(s),a=o?{overflow:o.style.overflow,maxHeight:o.style.maxHeight,height:o.style.height}:null;try{o&&(o.style.overflow="visible",o.style.maxHeight="none",o.style.height="auto");const l=await EF(s,{backgroundColor:null,scale:2,logging:!1,useCORS:!0,scrollX:0,scrollY:0}),c=document.createElement("a");c.download=r,c.href=l.toDataURL("image/png"),c.click()}catch(l){await Re(`Error generating PNG: ${l}`,Y==="en"?"Error":"Erreur")}finally{o&&a&&(o.style.overflow=a.overflow,o.style.maxHeight=a.maxHeight,o.style.height=a.height)}})}return e.$$set=s=>{"targetId"in s&&t(1,n=s.targetId),"filename"in s&&t(2,r=s.filename)},[i,n,r]}class xh extends PA{constructor(A){super(),RA(this,A,LF,SF,OA,{targetId:1,filename:2})}}const bH="",{Map:kF}=Al;function Lh(e,A,t){const n=e.slice();return n[64]=A[t],n[66]=t,n}function kh(e,A,t){const n=e.slice();return n[64]=A[t],n[68]=t,n}function Mh(e,A,t){const n=e.slice();return n[69]=A[t],n}function Th(e,A,t){const n=e.slice();return n[72]=A[t],n}function MF(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q=e[23]("normalize")+"",F,v,y,U,S,_,b,T,x,k,M,E,P,I,X,O,V,J,eA,oA,wA,cA;o=new xh({props:{targetId:"matrix-viz",filename:"document-matrix.png"}});let yA=["col","row"],xA=[];for(let j=0;j<2;j+=1)xA[j]=Kh(Mh(e,yA,j));let _A=e[2]&&Oh(e);function Z(j,nA){return j[2]?KF:DF}let aA=Z(e),iA=aA(e);return{c(){A=C("div"),t=C("div"),n=C("div"),r=C("h4"),r.textContent=`${e[23]("title")}`,i=R(),s=C("div"),pA(o.$$.fragment),a=R(),l=C("div"),c=C("div"),f=C("select"),u=C("option"),u.textContent=`${e[23]("byName")}`,h=C("option"),h.textContent=`${e[23]("byScore")}`,d=R(),g=C("label"),B=C("input"),p=R(),F=sA(Q),v=R(),y=C("div"),U=C("div"),S=C("div"),_=R();for(let j=0;j<2;j+=1)xA[j].c();b=R(),T=C("div"),x=R(),k=C("div"),M=R(),E=C("div"),P=C("div"),I=C("div"),X=C("h4"),X.textContent=`${e[23]("pageByPage")}`,O=R(),V=C("div"),_A&&_A.c(),J=R(),eA=C("div"),iA.c(),m(r,"class","title is-6 mb-0"),u.__value="name",u.value=u.__value,h.__value="score",h.value=h.__value,e[3]===void 0&&$e(()=>e[37].call(f)),m(c,"class","select is-small"),m(l,"class","control"),m(B,"type","checkbox"),B.checked=e[9],m(g,"title",e[23]("normalization")),m(g,"class","checkbox is-size-7"),m(s,"class","is-flex is-align-items-center"),TA(s,"gap","0.5rem"),m(n,"class","is-flex is-justify-content-space-between is-align-items-center mb-3"),TA(n,"flex-wrap","wrap"),TA(n,"gap","0.5rem"),m(S,"class","matrix-corner svelte-15delsq"),m(T,"class","matrix-canvas svelte-15delsq"),m(U,"id","matrix-viz"),m(U,"class","matrix-grid svelte-15delsq"),TA(U,"--cell-size",Xh+"px"),m(y,"class","scroll-area svelte-15delsq"),m(t,"class","box panel-box svelte-15delsq"),m(A,"class","split-panel svelte-15delsq"),TA(A,"width",e[14]+"px"),m(k,"class","split-divider svelte-15delsq"),m(k,"role","separator"),m(k,"tabindex","0"),m(X,"class","title is-6 mb-0"),m(V,"class","is-flex is-align-items-center"),TA(V,"gap","0.5rem"),m(I,"class","is-flex is-justify-content-space-between is-align-items-center mb-3"),TA(I,"flex-wrap","wrap"),TA(I,"gap","0.5rem"),m(eA,"class","scroll-area svelte-15delsq"),m(P,"class","box panel-box svelte-15delsq"),m(E,"class","split-panel svelte-15delsq"),TA(E,"width",e[13]+"px")},m(j,nA){K(j,A,nA),w(A,t),w(t,n),w(n,r),w(n,i),w(n,s),gA(o,s,null),w(s,a),w(s,l),w(l,c),w(c,f),w(f,u),w(f,h),zt(f,e[3],!0),w(s,d),w(s,g),w(g,B),w(g,p),w(g,F),w(t,v),w(t,y),w(y,U),w(U,S),w(U,_);for(let mA=0;mA<2;mA+=1)xA[mA]&&xA[mA].m(U,null);w(U,b),w(U,T),e[39](T),K(j,x,nA),K(j,k,nA),K(j,M,nA),K(j,E,nA),w(E,P),w(P,I),w(I,X),w(I,O),w(I,V),_A&&_A.m(V,null),w(P,J),w(P,eA),iA.m(eA,null),oA=!0,wA||(cA=[dA(f,"change",e[37]),dA(B,"change",e[38]),dA(k,"mousedown",e[25]),dA(k,"touchstart",e[25])],wA=!0)},p(j,nA){if(nA[0]&8&&zt(f,j[3]),(!oA||nA[0]&512)&&(B.checked=j[9]),nA[0]&64){yA=["col","row"];let mA;for(mA=0;mA<2;mA+=1){const LA=Mh(j,yA,mA);xA[mA]?xA[mA].p(LA,nA):(xA[mA]=Kh(LA),xA[mA].c(),xA[mA].m(U,b))}for(;mA<2;mA+=1)xA[mA].d(1)}(!oA||nA[0]&16384)&&TA(A,"width",j[14]+"px"),j[2]?_A?(_A.p(j,nA),nA[0]&4&&G(_A,1)):(_A=Oh(j),_A.c(),G(_A,1),_A.m(V,null)):_A&&($A(),W(_A,1,1,()=>{_A=null}),Ae()),aA===(aA=Z(j))&&iA?iA.p(j,nA):(iA.d(1),iA=aA(j),iA&&(iA.c(),iA.m(eA,null))),(!oA||nA[0]&8192)&&TA(E,"width",j[13]+"px")},i(j){oA||(G(o.$$.fragment,j),G(_A),oA=!0)},o(j){W(o.$$.fragment,j),W(_A),oA=!1},d(j){j&&D(A),BA(o),Se(xA,j),e[39](null),j&&D(x),j&&D(k),j&&D(M),j&&D(E),_A&&_A.d(),iA.d(),wA=!1,Ce(cA)}}}function TF(e){let A;return{c(){A=C("div"),A.textContent=`${e[23]("noDocuments")}`,m(A,"class","notification is-info"),TA(A,"width","100%")},m(t,n){K(t,A,n)},p:tA,i:tA,o:tA,d(t){t&&D(A)}}}function Dh(e,A){let t,n,r;return{key:e,first:null,c(){t=C("div"),n=C("span"),m(n,"class","color-dot svelte-15delsq"),TA(n,"background-color",A[72].color),m(n,"title",r=A[72].title+" "+ci.Witness+" #"+A[72].witnessId),m(t,"class","header-cell svelte-15delsq"),this.first=t},m(i,s){K(i,t,s),w(t,n)},p(i,s){A=i,s[0]&64&&TA(n,"background-color",A[72].color),s[0]&64&&r!==(r=A[72].title+" "+ci.Witness+" #"+A[72].witnessId)&&m(n,"title",r)},d(i){i&&D(t)}}}function Kh(e){let A,t=[],n=new kF,r=e[6].docs;const i=s=>s[72].id;for(let s=0;s<r.length;s+=1){let o=Th(e,r,s),a=i(o);n.set(a,t[s]=Dh(a,o))}return{c(){A=C("div");for(let s=0;s<t.length;s+=1)t[s].c();m(A,"class",e[69]+"-headers svelte-15delsq")},m(s,o){K(s,A,o);for(let a=0;a<t.length;a+=1)t[a]&&t[a].m(A,null)},p(s,o){o[0]&64&&(r=s[6].docs,t=fr(t,o,i,1,s,r,n,A,sl,Dh,null,Th))},d(s){s&&D(A);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Oh(e){let A,t,n,r,i,s,o,a,l,c;return A=new xh({props:{targetId:"scatter-viz",filename:"document-comparison.png"}}),{c(){pA(A.$$.fragment),t=R(),n=C("div"),r=C("div"),i=C("select"),s=C("option"),s.textContent=`${e[23]("byPage")}`,o=C("option"),o.textContent=`${e[23]("byImage")}`,s.__value="page",s.value=s.__value,o.__value="image",o.value=o.__value,e[4]===void 0&&$e(()=>e[40].call(i)),m(r,"class","select is-small"),m(n,"class","control")},m(f,u){gA(A,f,u),K(f,t,u),K(f,n,u),w(n,r),w(r,i),w(i,s),w(i,o),zt(i,e[4],!0),a=!0,l||(c=dA(i,"change",e[40]),l=!0)},p(f,u){u[0]&16&&zt(i,f[4])},i(f){a||(G(A.$$.fragment,f),a=!0)},o(f){W(A.$$.fragment,f),a=!1},d(f){BA(A,f),f&&D(t),f&&D(n),l=!1,c()}}}function DF(e){let A;return{c(){A=C("p"),A.textContent=`${e[23]("selectCell")}`,m(A,"class","has-text-grey is-size-7")},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function KF(e){let A;return{c(){A=C("div"),m(A,"id","scatter-viz"),m(A,"class","scatter-container svelte-15delsq")},m(t,n){K(t,A,n),e[41](A)},p:tA,d(t){t&&D(A),e[41](null)}}}function Nh(e){let A,t,n,r,i,s,o,a=e[12].items,l=[];for(let h=0;h<a.length;h+=1)l[h]=Rh(kh(e,a,h));let c=e[12].score!==void 0&&Ph(e),f=e[12].items,u=[];for(let h=0;h<f.length;h+=1)u[h]=Vh(Lh(e,f,h));return{c(){A=C("table"),t=C("thead"),n=C("tr");for(let h=0;h<l.length;h+=1)l[h].c();r=R(),i=C("tbody"),c&&c.c(),s=R(),o=C("tr");for(let h=0;h<u.length;h+=1)u[h].c();m(A,"class","table is-fullwidth p-3 has-text-centered")},m(h,d){K(h,A,d),w(A,t),w(t,n);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(n,null);w(A,r),w(A,i),c&&c.m(i,null),w(i,s),w(i,o);for(let g=0;g<u.length;g+=1)u[g]&&u[g].m(o,null)},p(h,d){if(d[0]&4096){a=h[12].items;let g;for(g=0;g<a.length;g+=1){const B=kh(h,a,g);l[g]?l[g].p(B,d):(l[g]=Rh(B),l[g].c(),l[g].m(n,null))}for(;g<l.length;g+=1)l[g].d(1);l.length=a.length}if(h[12].score!==void 0?c?c.p(h,d):(c=Ph(h),c.c(),c.m(i,s)):c&&(c.d(1),c=null),d[0]&16781344){f=h[12].items;let g;for(g=0;g<f.length;g+=1){const B=Lh(h,f,g);u[g]?u[g].p(B,d):(u[g]=Vh(B),u[g].c(),u[g].m(o,null))}for(;g<u.length;g+=1)u[g].d(1);u.length=f.length}},d(h){h&&D(A),Se(l,h),c&&c.d(),Se(u,h)}}}function Rh(e){let A,t,n,r,i,s=e[64].doc.title+"",o,a,l,c=e[64].label+"",f,u;return{c(){A=C("th"),t=C("span"),n=sA("●"),r=R(),i=C("strong"),o=sA(s),a=R(),l=C("p"),f=sA(c),u=R(),TA(t,"color",e[64].doc.color),m(l,"class","is-size-7 has-text-grey mt-2"),m(A,"class","doc-title svelte-15delsq")},m(h,d){K(h,A,d),w(A,t),w(t,n),w(A,r),w(A,i),w(i,o),w(A,a),w(A,l),w(l,f),w(A,u)},p(h,d){d[0]&4096&&TA(t,"color",h[64].doc.color),d[0]&4096&&s!==(s=h[64].doc.title+"")&&NA(o,s),d[0]&4096&&c!==(c=h[64].label+"")&&NA(f,c)},d(h){h&&D(A)}}}function Ph(e){let A,t,n,r=e[23]("score")+"",i,s,o=e[12].score.toFixed(2)+"",a;return{c(){A=C("tr"),t=C("td"),n=C("span"),i=sA(r),s=R(),a=sA(o),m(n,"class","tag is-small is-link is-bold"),m(t,"colspan","2"),m(t,"class","has-text-centered")},m(l,c){K(l,A,c),w(A,t),w(t,n),w(n,i),w(n,s),w(n,a)},p(l,c){c[0]&4096&&o!==(o=l[12].score.toFixed(2)+"")&&NA(a,o)},d(l){l&&D(A)}}}function OF(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-left"></i>',m(A,"class","icon is-small p-0")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function NF(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-up"></i>',m(A,"class","icon is-small p-0")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function RF(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-right"></i>',m(A,"class","icon is-small p-0")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function PF(e){let A;return{c(){A=C("span"),A.innerHTML='<i class="fas fa-chevron-down"></i>',m(A,"class","icon is-small p-0")},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function Vh(e){let A,t,n,r,i,s,o,a,l,c,f,u,h;function d(U,S){return U[66]!==0?NF:OF}let B=d(e)(e);function p(){return e[43](e[66])}function Q(U,S){return U[66]!==0?PF:RF}let v=Q(e)(e);function y(){return e[44](e[66])}return{c(){var U;A=C("td"),t=C("div"),n=C("button"),B.c(),r=R(),i=C("figure"),s=C("img"),l=R(),c=C("button"),v.c(),f=R(),m(n,"class","nav-btn "+(e[66]!==0?"nav-up":"nav-left")+" svelte-15delsq"),Ne(s.src,o=e[64].imgUrl)||m(s,"src",o),m(s,"alt",a=(((U=e[5])==null?void 0:U.mode)==="image"?"Image":"Page")+" "+e[64].label),m(s,"class","img-preview svelte-15delsq"),m(i,"class","image"),m(c,"class","nav-btn "+(e[66]!==0?"nav-down":"nav-right")+" svelte-15delsq"),m(t,"class","image-nav-container svelte-15delsq"),m(A,"class","modal-cell svelte-15delsq")},m(U,S){K(U,A,S),w(A,t),w(t,n),B.m(n,null),w(t,r),w(t,i),w(i,s),w(t,l),w(t,c),v.m(c,null),w(A,f),u||(h=[dA(n,"click",p),dA(c,"click",y)],u=!0)},p(U,S){var _;e=U,S[0]&4096&&!Ne(s.src,o=e[64].imgUrl)&&m(s,"src",o),S[0]&4128&&a!==(a=(((_=e[5])==null?void 0:_.mode)==="image"?"Image":"Page")+" "+e[64].label)&&m(s,"alt",a)},d(U){U&&D(A),B.d(),v.d(),u=!1,Ce(h)}}}function VF(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,S;const _=[TF,MF],b=[];function T(k,M){return k[7].length?1:0}f=T(e),u=b[f]=_[f](e);let x=e[12]&&Nh(e);return{c(){A=C("div"),t=C("label"),t.textContent=`${e[23]("filtering")}`,n=R(),r=C("div"),i=C("div"),s=C("select"),o=C("option"),o.textContent=`${e[23]("allPairs")}`,a=C("option"),a.textContent=`${e[23]("filteredPairs")}`,l=R(),c=C("div"),u.c(),h=R(),d=C("div"),g=C("div"),B=R(),p=C("div"),Q=C("div"),x&&x.c(),F=R(),v=C("button"),m(t,"class","label is-small"),m(t,"for","matrix-mode"),o.__value="all",o.value=o.__value,a.__value="filtered",a.value=a.__value,m(s,"id","matrix-mode"),e[8]===void 0&&$e(()=>e[36].call(s)),m(i,"class","select is-small is-fullwidth"),m(r,"class","control"),m(A,"class","field mb-4"),m(c,"class","split-container svelte-15delsq"),m(g,"class","modal-background"),m(Q,"class","box p-5"),m(p,"class","modal-content"),TA(p,"width","auto"),TA(p,"max-width","70vw"),m(v,"class","modal-close is-large"),m(v,"aria-label","close"),m(d,"id","matrix-page-modal"),m(d,"class","modal")},m(k,M){K(k,A,M),w(A,t),w(A,n),w(A,r),w(r,i),w(i,s),w(s,o),w(s,a),zt(s,e[8],!0),K(k,l,M),K(k,c,M),b[f].m(c,null),e[42](c),K(k,h,M),K(k,d,M),w(d,g),w(d,B),w(d,p),w(p,Q),x&&x.m(Q,null),w(d,F),w(d,v),e[45](d),y=!0,U||(S=[dA(s,"change",e[36]),lr(to.call(null,d))],U=!0)},p(k,M){M[0]&256&&zt(s,k[8]);let E=f;f=T(k),f===E?b[f].p(k,M):($A(),W(b[E],1,1,()=>{b[E]=null}),Ae(),u=b[f],u?u.p(k,M):(u=b[f]=_[f](k),u.c()),G(u,1),u.m(c,null)),k[12]?x?x.p(k,M):(x=Nh(k),x.c(),x.m(Q,null)):x&&(x.d(1),x=null)},i(k){y||(G(u),y=!0)},o(k){W(u),y=!1},d(k){k&&D(A),k&&D(l),k&&D(c),b[f].d(),e[42](null),k&&D(h),k&&D(d),x&&x.d(),e[45](null),U=!1,Ce(S)}}}const Gh=300,Xh=30,ue=5;function GF(e){if(e.mode==="image")return{max1:e.images1.length,max2:e.images2.length};const A=Math.max(...e.points.map(n=>n.page1)),t=Math.max(...e.points.map(n=>n.page2));return{max1:A,max2:t}}function XF(e,A,t){const n=new Map;let r=1/0,i=-1/0;for(const o of t){const[a,l,c]=o.regions_id_1===e.id?[o.page_1,o.page_2,o.weightedScore||0]:[o.page_2,o.page_1,o.weightedScore||0],f=`${a}-${l}`;n.has(f)||n.set(f,{page1:a,page2:l,scores:[]}),n.get(f).scores.push(c),c<r&&(r=c),c>i&&(i=c)}return{mode:"page",points:Array.from(n.values()).map(({page1:o,page2:a,scores:l})=>({page1:o,page2:a,score:l.reduce((c,f)=>c+f,0)/l.length,count:l.length})),minScore:r,maxScore:i,doc1:e,doc2:A}}function JF(e,A,t){const n=e.images||[],r=A.images||[];if(!n.length||!r.length)return null;const i=new Map(n.map((c,f)=>[c.id,f])),s=new Map(r.map((c,f)=>[c.id,f])),o=new Map;let a=1/0,l=-1/0;return t.forEach(c=>{const[f,u,h]=c.regions_id_1===e.id?[c.id_1,c.id_2,c.weightedScore||0]:[c.id_2,c.id_1,c.weightedScore||0],d=i.get(f),g=s.get(u);if(d!==void 0&&g!==void 0){const B=`${d}-${g}`;o.set(B,{idx1:d,idx2:g,imgId1:f,imgId2:u,score:h}),h<a&&(a=h),h>l&&(l=h)}}),{mode:"image",images1:n,images2:r,pairScores:o,minScore:a,maxScore:l,doc1:e,doc2:A}}function Jh(e){const A=[];let t=null,n=0;return e.forEach((r,i)=>{r.canvas!==t&&(t!==null&&A.push({start:n,end:i,page:t,count:i-n}),t=r.canvas,n=i)}),t!==null&&A.push({start:n,end:e.length,page:t,count:e.length-n}),A}function WF(e,A,t){let n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,{documentSetStore:Q}=A;const{documentNodes:F,pairIndex:v,activeDocPairStats:y,activeDocStats:U,imageCountMap:S,visiblePairIds:_,matrixMode:b,normalizeByImages:T}=Q;FA(e,F,z=>t(35,p=z)),FA(e,v,z=>t(48,c=z)),FA(e,y,z=>t(34,B=z)),FA(e,U,z=>t(33,g=z)),FA(e,S,z=>t(32,h=z)),FA(e,_,z=>t(31,f=z)),FA(e,b,z=>t(8,u=z)),FA(e,T,z=>t(9,d=z));const x={title:{en:"Document Matrix",fr:"Matrice de documents"},order:{en:"Order",fr:"Ordre"},byName:{en:"By title",fr:"Par titre"},byScore:{en:"By score",fr:"Par score"},noDocuments:{en:"No documents available",fr:"Aucun document disponible"},pageByPage:{en:"Page-by-page similarity",fr:"Similarité page par page"},page:{en:"page",fr:"page"},score:{en:"Score",fr:"Score"},noPairs:{en:"No pairs",fr:"Aucune paire"},selectCell:{en:"Click a cell to view page-by-page similarity",fr:"Cliquez sur une cellule pour voir la similarité page par page"},byPage:{en:"By page",fr:"Par page"},byImage:{en:"By image",fr:"Par image"},image:{en:"image",fr:"image"},normalize:{en:"Normalize",fr:"Normaliser"},normalization:{en:"Normalization by document image counts",fr:"Normalisation par le nombre d'images des documents"},allPairs:{en:"All pairs in the document set",fr:"Toutes les paires du corpus"},filteredPairs:{en:"Filtered pairs",fr:"Paires après filtrage"},filtering:{en:"Source of image pairs for the visualizations",fr:"Source des paires d’images pour les visualisations"}},k=z=>{var bA,zA;return((bA=x[z])==null?void 0:bA[Y])||((zA=x[z])==null?void 0:zA.en)||z};let M,E,P,I,X=null,O="name",V=.5,J=!1,eA=0,oA,wA=null,cA="page";function yA(z,bA){const zA="600,";return st(`wit${z.witnessId}_${z.digitizationRef}_${String(bA).padStart(z.zeros,"0")}`,"full",zA)}function xA(z){var zA;const bA="600,";return st(z.ref,(zA=z.xywh)==null?void 0:zA.join(","),bA)}function _A(z,bA,zA){var GA,EA;if(!z||!bA||!zA)return null;const{doc1:jA,doc2:le}=bA;if(bA.mode==="image"){const q=(GA=bA.images1)==null?void 0:GA[z.idx1],UA=(EA=bA.images2)==null?void 0:EA[z.idx2];if(!q||!UA)return null;const CA=`${z.idx1}-${z.idx2}`,Be=bA.pairScores.get(CA);return{items:[{doc:jA,label:`Canvas ${q.canvas} — Image #${z.idx1+1}`,imgUrl:xA(q)},{doc:le,label:`Canvas ${UA.canvas} — Image #${z.idx2+1}`,imgUrl:xA(UA)}],score:Be==null?void 0:Be.score}}const kA=z.idx1+1,ve=z.idx2+1,MA=bA.points.find(q=>q.page1===kA&&q.page2===ve);return{items:[{doc:jA,label:`Page ${kA}`,imgUrl:yA(jA,kA)},{doc:le,label:`Page ${ve}`,imgUrl:yA(le,ve)}],score:MA==null?void 0:MA.score}}function Z(z,bA){!wA||!i||(z==="horizontal"?t(29,wA.idx1=(wA.idx1+bA+a.max1)%a.max1,wA):t(29,wA.idx2=(wA.idx2+bA+a.max2)%a.max2,wA),t(29,wA))}function aA(z){if(!wA||!(I!=null&&I.classList.contains("is-active")))return;const zA={ArrowUp:["vertical",-1],ArrowDown:["vertical",1],ArrowLeft:["horizontal",-1],ArrowRight:["horizontal",1]}[z.key];zA&&(z.preventDefault(),Z(zA[0],zA[1]))}function iA(z,bA,zA,jA,le,kA){var UA;if(!z.length)return{docs:[],matrix:[],maxScore:0};z.forEach((CA,Be)=>{var H;CA.index=Be,CA.count=((H=zA==null?void 0:zA.get(CA.id))==null?void 0:H.count)||0});const MA={name:wi(z.length).sort((CA,Be)=>z[CA].title.localeCompare(z[Be].title)),score:wi(z.length).sort((CA,Be)=>z[Be].count-z[CA].count)}[jA].map(CA=>z[CA]),GA=MA.length,EA=[];let q=0;for(let CA=0;CA<GA;CA++){const Be=[];for(let H=0;H<GA;H++)if(CA!==H){const L=MA[CA].id<MA[H].id?`${MA[CA].id}-${MA[H].id}`:`${MA[H].id}-${MA[CA].id}`;let N=((UA=bA==null?void 0:bA.get(L))==null?void 0:UA.score)||0;if(le&&N>0){const $=kA.get(MA[CA].id)||1,AA=kA.get(MA[H].id)||1;N/=Math.sqrt($*AA)}N>q&&(q=N),Be.push({x:H,y:CA,z:N,doc1:MA[CA],doc2:MA[H]})}else Be.push({x:H,y:CA,z:0,diagonal:!0});EA.push(Be)}return{docs:MA,matrix:EA,maxScore:q}}function j(z,bA,zA,jA){const{doc1:le,doc2:kA}=z,ve=le.id<kA.id?`${le.id}-${kA.id}`:`${kA.id}-${le.id}`;let MA=c.byDocPair.get(ve)||[];return zA&&jA.size>0&&(MA=MA.filter(GA=>jA.has(`${GA.id_1}-${GA.id_2}`))),MA.length?bA==="image"?JF(le,kA,MA):XF(le,kA,MA):null}function nA(){if(!E||!r.docs.length)return;const{docs:z,matrix:bA,maxScore:zA}=r,jA=z.length*Xh;Qe(E).selectAll("*").remove();const le=Qe(E).append("svg").attr("width",jA).attr("height",jA),kA=ou().range([0,jA]).domain(wi(z.length)).padding(.02),ve=Qe("body").selectAll(".matrix-tooltip").data([0]).join("div").attr("class","matrix-tooltip").style("position","fixed").style("background","var(--bulma-scheme-main)").style("border","1px solid var(--bulma-border)").style("border-radius","4px").style("padding","8px").style("pointer-events","none").style("opacity",0).style("font-size","12px").style("box-shadow","0 2px 4px rgba(0,0,0,0.15)").style("z-index","9999").style("color","var(--bulma-text)");le.selectAll(".row").data(bA).join("g").attr("class","row").attr("transform",(GA,EA)=>`translate(0,${kA(EA)})`).each(function(GA){Qe(this).selectAll(".cell").data(GA.filter(EA=>!EA.diagonal)).join("rect").attr("class","cell").attr("x",EA=>kA(EA.x)).attr("width",kA.bandwidth()).attr("height",kA.bandwidth()).attr("fill",EA=>{if(EA.z===0)return"var(--bulma-text)";const q=Ei(233,.951,.52);return q.opacity=zA>0?.2+.8*(EA.z/zA):.2,q}).attr("stroke",EA=>mA(EA)?"var(--bulma-text)":"var(--bulma-scheme-main)").attr("stroke-width",EA=>mA(EA)?2:.5).style("cursor","pointer").on("mouseover",function(EA,q){mA(q)||Qe(this).attr("stroke","var(--bulma-text)").attr("stroke-width",2),ve.style("opacity",1)}).on("mousemove",function(EA,q){const UA=`<span style="color:${q.doc1.color}">●</span> ${q.doc1.title}<br/>↔<br/><span style="color:${q.doc2.color}">●</span> ${q.doc2.title}`,CA=q.z===0?`${UA}<br/><br/><em>${k("noPairs")}</em>`:`${UA}<br/><br/>${k("score")}: ${q.z.toFixed(2)}`;ve.html(CA).style("left",EA.clientX+15+"px").style("top",EA.clientY+15+"px")}).on("mouseleave",function(EA,q){mA(q)||Qe(this).attr("stroke","var(--bulma-scheme-main)").attr("stroke-width",.5),ve.style("opacity",0)}).on("click",(EA,q)=>{t(2,X={row:q.y,col:q.x,doc1:q.doc1,doc2:q.doc2}),LA()})}),le.selectAll(".row").selectAll(".cell-diagonal").data(GA=>GA.filter(EA=>EA.diagonal)).join("rect").attr("class","cell-diagonal").attr("x",GA=>kA(GA.x)).attr("width",kA.bandwidth()).attr("height",kA.bandwidth()).attr("fill","var(--contrasted)")}function mA(z){return X&&X.doc1.id===z.doc1.id&&X.doc2.id===z.doc2.id}function LA(){E&&Qe(E).selectAll(".cell").attr("stroke",z=>mA(z)?"var(--bulma-text)":"var(--bulma-scheme-main)").attr("stroke-width",z=>mA(z)?2:.5)}function XA(){!P||!i||(Qe(P).selectAll("*").remove(),i.mode==="image"?KA():JA())}function JA(){const{points:z,minScore:bA,maxScore:zA,doc1:jA,doc2:le}=i;if(!z.length)return;const kA={top:65,right:40,bottom:20,left:80},ve=10,MA=Math.max(...z.map(hA=>hA.page1)),GA=Math.max(...z.map(hA=>hA.page2)),EA=MA*ue,q=GA*ue,UA=new Map(z.map(hA=>[`${hA.page1}-${hA.page2}`,hA])),CA=EA+kA.left+kA.right,Be=q+kA.top+kA.bottom,L=Qe(P).append("svg").attr("width",CA).attr("height",Be).append("g").attr("transform",`translate(${kA.left},${kA.top})`),N=Fr().domain([0,MA]).range([0,EA]),$=Fr().domain([0,GA]).range([0,q]),AA=Qe("body").selectAll(".scatter-tooltip").data([0]).join("div").attr("class","scatter-tooltip").style("position","fixed").style("background","var(--bulma-scheme-main)").style("border","1px solid var(--bulma-border)").style("border-radius","4px").style("padding","6px 10px").style("pointer-events","none").style("opacity",0).style("font-size","11px").style("box-shadow","0 2px 4px rgba(0,0,0,0.15)").style("z-index","9999").style("color","var(--bulma-text)"),rA=new Array(MA).fill(0),vA=new Array(GA).fill(0);z.forEach(hA=>{rA[hA.page1-1]++,vA[hA.page2-1]++});const uA=Math.max(...rA),ie=Math.max(...vA),se=L.append("g").attr("transform",`translate(0,${-22-ve})`);rA.forEach((hA,IA)=>{hA!==0&&se.append("rect").attr("x",IA*ue).attr("width",ue).attr("height",ve).attr("fill",jA.color).attr("opacity",.15+.85*(hA/uA)).style("cursor","default").on("mouseover",()=>AA.style("opacity",1)).on("mousemove",HA=>{AA.html(`<strong>${hA}</strong> image${hA>1?"s":""}<br/>${k("page")} ${IA+1}`).style("left",HA.clientX+10+"px").style("top",HA.clientY-30+"px")}).on("mouseleave",()=>AA.style("opacity",0))});const fe=L.append("g").attr("transform","translate(-55,0)");vA.forEach((hA,IA)=>{hA!==0&&fe.append("rect").attr("x",0).attr("y",IA*ue).attr("width",ve).attr("height",ue).attr("fill",le.color).attr("opacity",.15+.85*(hA/ie)).style("cursor","default").on("mouseover",()=>AA.style("opacity",1)).on("mousemove",HA=>{AA.html(`<strong>${hA}</strong> image${hA>1?"s":""}<br/>${k("page")} ${IA+1}`).style("left",HA.clientX+10+"px").style("top",HA.clientY-30+"px")}).on("mouseleave",()=>AA.style("opacity",0))}),L.append("g").call(jl(N).ticks(Math.min(MA,10))),L.append("g").call(ql($).ticks(Math.min(GA,10)));const he=(hA,IA)=>{const HA=Math.floor(IA/6);return hA.length>HA?hA.slice(0,HA-1)+"…":hA},QA=L.append("g").attr("transform",`translate(${EA/2},-50)`);QA.append("circle").attr("r",4).attr("cx",-EA/2+4).attr("fill",jA.color),QA.append("text").attr("x",-EA/2+14).attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size","11px").attr("fill","var(--bulma-text)").text(he(`${jA.title} (${k("page")})`,EA-20));const re=L.append("g").attr("transform",`translate(-68,${q/2}) rotate(-90)`);re.append("circle").attr("r",4).attr("cx",-q/2+4).attr("fill",le.color),re.append("text").attr("x",-q/2+14).attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size","11px").attr("fill","var(--bulma-text)").text(he(`${le.title} (${k("page")})`,q-20)),L.append("rect").attr("class","hover-overlay").attr("width",EA).attr("height",q).attr("fill","transparent").style("cursor","pointer").on("mousemove",hA=>{const[IA,HA]=xe(hA,L.node()),rt=Math.floor(IA/ue)+1,it=Math.floor(HA/ue)+1;if(rt<1||rt>MA||it<1||it>GA){AA.style("opacity",0);return}const Yt=UA.get(`${rt}-${it}`),dn=`<span style="color:${jA.color}">●</span> ${k("page")} ${rt}<br/><span style="color:${le.color}">●</span> ${k("page")} ${it}`,In=Yt?`${dn}<br/>${k("score")}: ${Yt.score.toFixed(2)}`:dn;AA.style("opacity",1).html(In).style("left",hA.clientX+10+"px").style("top",hA.clientY-40+"px")}).on("mouseleave",()=>AA.style("opacity",0)).on("click",hA=>{const[IA,HA]=xe(hA,L.node()),rt=Math.floor(IA/ue)+1,it=Math.floor(HA/ue)+1;rt<1||rt>MA||it<1||it>GA||(t(29,wA={idx1:rt-1,idx2:it-1}),I==null||I.classList.add("is-active"))}),L.selectAll(".cell").data(z).join("rect").attr("class","cell").attr("x",hA=>(hA.page1-1)*ue).attr("y",hA=>(hA.page2-1)*ue).attr("width",ue).attr("height",ue).attr("fill",Ei(233,.951,.52)).attr("opacity",hA=>zA>bA?.2+.8*(hA.score-bA)/(zA-bA):.5).attr("pointer-events","none"),t(1,P.style.width=CA+"px",P),t(1,P.style.height=Be+"px",P)}function KA(){const{images1:z,images2:bA,pairScores:zA,minScore:jA,maxScore:le,doc1:kA,doc2:ve}=i;if(!z.length||!bA.length)return;const MA={top:65,right:40,bottom:20,left:80},GA=10,EA=z.length*ue,q=bA.length*ue,UA=EA+MA.left+MA.right,CA=q+MA.top+MA.bottom,H=Qe(P).append("svg").attr("width",UA).attr("height",CA).append("g").attr("transform",`translate(${MA.left},${MA.top})`),L=Fr().domain([0,z.length]).range([0,EA]),N=Fr().domain([0,bA.length]).range([0,q]),$=Qe("body").selectAll(".scatter-tooltip").data([0]).join("div").attr("class","scatter-tooltip").style("position","fixed").style("background","var(--bulma-scheme-main)").style("border","1px solid var(--bulma-border)").style("border-radius","4px").style("padding","6px 10px").style("pointer-events","none").style("opacity",0).style("font-size","11px").style("box-shadow","0 2px 4px rgba(0,0,0,0.15)").style("z-index","9999").style("color","var(--bulma-text)"),AA=Jh(z),rA=Jh(bA),vA=H.append("g").attr("transform",`translate(0,${-22-GA})`);AA.forEach(({start:QA,end:re,page:hA,count:IA})=>{vA.append("rect").attr("x",QA*ue).attr("width",(re-QA)*ue).attr("height",GA).attr("fill",kA.color).attr("opacity",.5).style("cursor","default").on("mouseover",()=>$.style("opacity",1)).on("mousemove",HA=>{$.html(`${k("page")} ${hA}<br/><strong>${IA}</strong> image${IA>1?"s":""}`).style("left",HA.clientX+10+"px").style("top",HA.clientY-30+"px")}).on("mouseleave",()=>$.style("opacity",0))});const uA=H.append("g").attr("transform","translate(-55,0)");rA.forEach(({start:QA,end:re,page:hA,count:IA})=>{uA.append("rect").attr("x",0).attr("y",QA*ue).attr("width",GA).attr("height",(re-QA)*ue).attr("fill",ve.color).attr("opacity",.5).style("cursor","default").on("mouseover",()=>$.style("opacity",1)).on("mousemove",HA=>{$.html(`${k("page")} ${hA}<br/><strong>${IA}</strong> image${IA>1?"s":""}`).style("left",HA.clientX+10+"px").style("top",HA.clientY-30+"px")}).on("mouseleave",()=>$.style("opacity",0))}),H.append("g").call(jl(L).ticks(Math.min(z.length,10))),H.append("g").call(ql(N).ticks(Math.min(bA.length,10)));const ie=(QA,re)=>{const hA=Math.floor(re/6);return QA.length>hA?QA.slice(0,hA-1)+"…":QA},se=H.append("g").attr("transform",`translate(${EA/2},-50)`);se.append("circle").attr("r",4).attr("cx",-EA/2+4).attr("fill",kA.color),se.append("text").attr("x",-EA/2+14).attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size","11px").attr("fill","var(--bulma-text)").text(ie(`${kA.title} (${k("image")})`,EA-20));const fe=H.append("g").attr("transform",`translate(-68,${q/2}) rotate(-90)`);fe.append("circle").attr("r",4).attr("cx",-q/2+4).attr("fill",ve.color),fe.append("text").attr("x",-q/2+14).attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-size","11px").attr("fill","var(--bulma-text)").text(ie(`${ve.title} (${k("image")})`,q-20)),H.append("rect").attr("class","hover-overlay").attr("width",EA).attr("height",q).attr("fill","transparent").style("cursor","pointer").on("mousemove",QA=>{const[re,hA]=xe(QA,H.node()),IA=Math.floor(re/ue),HA=Math.floor(hA/ue);if(IA<0||IA>=z.length||HA<0||HA>=bA.length){$.style("opacity",0);return}const rt=z[IA],it=bA[HA],Yt=zA.get(`${IA}-${HA}`),dn=`<span style="color:${kA.color}">●</span> ${k("page")} ${rt.canvas}, ${k("image")} ${IA+1}<br/><span style="color:${ve.color}">●</span> ${k("page")} ${it.canvas}, ${k("image")} ${HA+1}`,In=Yt?`${dn}<br/>${k("score")}: ${Yt.score.toFixed(2)}`:dn;$.style("opacity",1).html(In).style("left",QA.clientX+10+"px").style("top",QA.clientY-40+"px")}).on("mouseleave",()=>$.style("opacity",0)).on("click",QA=>{const[re,hA]=xe(QA,H.node()),IA=Math.floor(re/ue),HA=Math.floor(hA/ue);IA>=0&&IA<z.length&&HA>=0&&HA<bA.length&&(t(29,wA={idx1:IA,idx2:HA}),I==null||I.classList.add("is-active"))});const he=Array.from(zA.values());H.selectAll(".cell").data(he).join("rect").attr("class","cell").attr("x",QA=>QA.idx1*ue).attr("y",QA=>QA.idx2*ue).attr("width",ue).attr("height",ue).attr("fill",Ei(233,.951,.52)).attr("opacity",QA=>le>jA?.2+.8*(QA.score-jA)/(le-jA):.5).attr("pointer-events","none"),t(1,P.style.width=UA+"px",P),t(1,P.style.height=CA+"px",P)}function WA(z){J=!0,z.preventDefault()}function oe(z){var jA,le;if(!J||!M)return;const bA=M.getBoundingClientRect(),zA=(z.clientX||((le=(jA=z.touches)==null?void 0:jA[0])==null?void 0:le.clientX))-bA.left;t(27,V=Math.max(.2,Math.min(.8,zA/bA.width)))}function me(){J=!1}gn(()=>{M&&(t(28,eA=M.offsetWidth),oA=new ResizeObserver(z=>{t(28,eA=z[0].contentRect.width)}),oA.observe(M)),window.addEventListener("mousemove",oe),window.addEventListener("mouseup",me),window.addEventListener("touchmove",oe),window.addEventListener("touchend",me),window.addEventListener("keydown",aA)}),Bn(()=>{oA==null||oA.disconnect(),window.removeEventListener("mousemove",oe),window.removeEventListener("mouseup",me),window.removeEventListener("touchmove",oe),window.removeEventListener("touchend",me),window.removeEventListener("keydown",aA)});function ye(){u=ti(this),b.set(u)}function de(){O=ti(this),t(3,O)}const qA=z=>T.set(z.target.checked);function Te(z){jt[z?"unshift":"push"](()=>{E=z,t(0,E)})}function YA(){cA=ti(this),t(4,cA)}function te(z){jt[z?"unshift":"push"](()=>{P=z,t(1,P)})}function ne(z){jt[z?"unshift":"push"](()=>{M=z,t(10,M)})}const Ze=z=>Z(z!==0?"vertical":"horizontal",-1),Ie=z=>Z(z!==0?"vertical":"horizontal",1);function He(z){jt[z?"unshift":"push"](()=>{I=z,t(11,I)})}return e.$$set=z=>{"documentSetStore"in z&&t(26,Q=z.documentSetStore)},e.$$.update=()=>{e.$$.dirty[1]&16&&t(7,n=Array.from((p==null?void 0:p.values())||[])),e.$$.dirty[0]&648|e.$$.dirty[1]&14&&t(6,r=iA(n,B.scoreCount,g.scoreCount,O,d,h)),e.$$.dirty[0]&276|e.$$.dirty[1]&1&&t(5,i=X?j(X,cA,u==="filtered",f):null),e.$$.dirty[0]&402653184&&t(14,s=Math.max(Gh,eA*V-4)),e.$$.dirty[0]&402653184&&t(13,o=Math.max(Gh,eA*(1-V)-4)),e.$$.dirty[0]&32&&t(30,a=i?GF(i):{max1:0,max2:0,pages1:[],pages2:[]}),e.$$.dirty[0]&1610612768&&t(12,l=wA&&i&&a?_A(wA,i,a):null),e.$$.dirty[0]&65&&E&&r.docs.length&&nA(),e.$$.dirty[0]&34&&P&&i&&XA()},[E,P,X,O,cA,i,r,n,u,d,M,I,l,o,s,F,v,y,U,S,_,b,T,k,Z,WA,Q,V,eA,wA,a,f,h,g,B,p,ye,de,qA,Te,YA,te,ne,Ze,Ie,He]}class YF extends PA{constructor(A){super(),RA(this,A,WF,VF,OA,{documentSetStore:26},null,[-1,-1,-1])}}const zF=1e4;async function jF(e,A,t={}){const{onProgress:n,onError:r,signal:i}=t,s=await fetch(e,{signal:i});if(!s.ok){const h=await s.json().catch(()=>({error:s.statusText}));throw new Error(h.error||`HTTP ${s.status}`)}const o=s.body.getReader(),a=new TextDecoder;let l="",c=[],f=0,u=!1;try{for(;;){const{done:h,value:d}=await o.read();if(h){if(l.trim()){const B=Wh(l);B&&c.push(B)}return c.length>0?(f+=c.length,A.postMessage({type:"batch",pairs:c,isLast:!0})):A.postMessage({type:"done"}),n==null||n(f,!0),f}l+=a.decode(d,{stream:!0});const g=l.split(`
`);l=g.pop()||"";for(const B of g){if(!B)continue;const p=Wh(B);p&&(c.push(p),c.length>=zF&&(u||(A.postMessage({type:"init"}),u=!0),f+=c.length,A.postMessage({type:"batch",pairs:c,isLast:!1}),c=[],n==null||n(f,!1)))}}}catch(h){throw h.name==="AbortError"?(A.postMessage({type:"abort"}),h):(r==null||r(h),h)}}function Wh(e){try{return JSON.parse(e)}catch{return console.warn("Parse error:",e.slice(0,50)),null}}const qF=()=>new Worker("/static/js/pairWorker.js",{type:"module"});function ZF(e){const A=DA(null),t=DA(!1),n=DA({loaded:0,done:!1}),r=DA([]),i=DA(new Set),s=DA([]),o=DA(0),a=DA(3),l=DA(!1),c=DA("threshold"),f=DA([]),u=DA(new Map);let h,d=null;const g=DA({byImage:new Map,byDocPair:new Map,byDoc:new Map}),B=DA(new Map),p=DA(new Map),Q=DA({}),F=DA({}),v=DA({}),y=DA({}),U=DA({documents:0,pairs:null,images:0,categories:{}}),S=pe(r,(Z,aA)=>{if(Z.length===0){aA(Promise.resolve(0));return}h&&h.terminate()&&(h=null),d&&d.abort(),d=new AbortController;const iA=new Promise((j,nA)=>{t.set(!0),n.set({loaded:0,done:!1}),A.set(null),(async()=>{try{h=qF(),h.onmessage=async XA=>{const{type:JA}=XA.data;if(JA==="progress"){n.set({loaded:XA.data.count,done:!1});return}if(JA!=="complete")return;const{allPairs:KA,imageNodes:WA,pairIndex:oe,categories:me,stats:ye}=XA.data;g.set(oe),Q.set(ye.pairStats),V(),F.set(ye.documentStats),v.set(ye.imageStats),y.set(ye.docPairStats);const de=Array.from(ye.documentStats.scoreCount.keys());be(i).size===0&&i.set(new Set(de));const qA=await Promise.all(de.map(te=>_(te).then(ne=>({id:te,info:ne})))),Te=new Map;qA.forEach(({id:te,info:ne})=>Te.set(te,ne)),u.set(Te);const YA=new Map;de.forEach((te,ne)=>{const Ze=Te.get(te)||{};YA.set(te,{id:te,title:Ze.title||`Region Extraction ${te}`,color:Ze.color||aB(ne),images:[],...Ze})}),WA.forEach(te=>{const ne=YA.get(te.regionId);ne&&(te.color=ne.color,te.title=`${ne.title} | Page ${te.canvas}`,ne.images.push(te))}),YA.forEach(te=>te.images.sort((ne,Ze)=>{var Ie,He;return ne.canvas!==Ze.canvas?ne.canvas-Ze.canvas:(parseInt((Ie=ne.xywh)==null?void 0:Ie[1])||0)-(parseInt((He=Ze.xywh)==null?void 0:He[1])||0)})),B.set(WA),p.set(YA),U.set({documents:de.length,pairs:KA.length,images:WA.size,categories:me}),f.set(KA),t.set(!1),n.set({loaded:KA.length,done:!0}),h.terminate(),h=null,j(KA.length)},h.onerror=XA=>{console.error("Worker error",XA),A.set(`Worker error: ${XA.message}`),t.set(!1),nA(XA)};const LA=`${li}/document-set/${e}/pairs/stream?category=${Z.join(",")}`;await jF(LA,h,{signal:d.signal,onProgress:(XA,JA)=>{n.set({loaded:XA,done:JA})},onError:XA=>{A.set(`Stream error: ${XA.message}`)}})}catch(LA){if(LA.name==="AbortError"){console.log("Request aborted");return}A.set(`Fetch error: ${LA.message}`),t.set(!1),nA(LA)}})()});aA(iA)});async function _(Z){try{const aA=await fetch(`${li}/search/regions/?id=${Z}`);if(!aA.ok)throw new Error(`HTTP ${aA.status}`);const{results:iA}=await aA.json();if(!(iA!=null&&iA.length))return{title:`Region Extraction ${Z}`};const j=iA[0],[,...nA]=j.title.split(" | "),[mA,LA]=(j.ref||"_").split("_");return{title:nA.join(" | "),ref:j.ref,witnessId:Zs(mA),digitizationRef:LA,zeros:j.zeros,img_nb:j.img_nb,url:j.url}}catch(aA){return A.set(`Error fetching region #${Z}: ${aA.message}`),{title:`Region Extraction ${Z}`}}}const b=pe([f,o,a,l,i],([Z,aA,iA,j,nA])=>{if(!Z)return[];const mA=[],LA=be(c);for(let XA=0;XA<Z.length;XA++){const JA=Z[XA];if(LA==="threshold"&&JA.weightedScore<aA)break;if(!(!nA.has(JA.regions_id_1)||!nA.has(JA.regions_id_2))){if(LA==="topk"&&iA!==null){const KA=JA.rank_1??1/0,WA=JA.rank_2??1/0;if(j){if(KA>iA||WA>iA)continue}else if(KA>iA&&WA>iA)continue}mA.push(JA)}}return mA}),T=pe([b,p],([Z,aA])=>{if(!Z.length||aA.size===0)return[];const iA=new Set;for(const nA of Z)iA.add(nA.regions_id_1),iA.add(nA.regions_id_2);const j=[];return iA.forEach(nA=>{const mA=aA.get(nA);mA&&j.push(mA)}),j.sort((nA,mA)=>mA.id-nA.id)});function x(Z,aA,iA=10,j=200,nA=2,mA=25){if(!aA)return{strength:.5,distance:100,width:2};const{min:LA,_:XA,range:JA}=aA,KA=JA===0?.5:(Z-LA)/JA,WA=j-KA*(j-iA),oe=nA+KA*(mA-nA);return{strength:KA,distance:WA,width:oe}}function k(Z,aA,iA=10,j=60){if(!aA)return iA;const{min:nA,_:mA,range:LA}=aA;return LA===0?(iA+j)/2:iA+(Z-nA)/LA*(j-iA)}const M=pe([b],([Z])=>{var XA;const aA=be(B),iA=be(v),j=be(Q),nA=new Set,mA=[];for(const JA of Z){const{strength:KA,distance:WA,width:oe}=x(JA.weightedScore,j.scoreRange);mA.push({source:JA.id_1,target:JA.id_2,strength:KA,distance:WA,width:oe}),nA.has(JA.id_1)||nA.add(JA.id_1),nA.has(JA.id_2)||nA.add(JA.id_2)}const LA=[];for(const JA of nA){const KA=aA.get(JA);if(KA){const WA=(XA=iA.scoreCount)==null?void 0:XA.get(JA),{count:oe,score:me}=WA;LA.push({...KA,radius:k(me,iA.scoreRange),label:`Region: ${KA.regionId}
Page: ${KA.canvas}
Connections: ${oe}
Total score: ${me.toFixed(2)}`})}}return{nodes:LA,links:mA}}),E=pe(T,Z=>{const aA=be(y),iA=be(F);if(Z.size===0)return{nodes:[],links:[]};const j=Array.from(Z.values()).map(mA=>{var KA;const LA=(KA=iA.scoreCount)==null?void 0:KA.get(mA.id),{count:XA,score:JA}=LA;return{...mA,radius:k(XA,iA.countRange),label:`${mA.title}
Images: ${XA}
Total score: ${JA.toFixed(2)}`}}),nA=Array.from(aA.scoreCount.entries()).map(([mA,LA])=>{const[XA,JA]=mA.split("-").map(Number),{strength:KA,distance:WA,width:oe}=x(LA.score,aA.scoreRange);return{source:XA,target:JA,strength:KA,distance:WA,width:oe}});return{nodes:j,links:nA}});function P(Z){if(!Z.length)return{regions:[],rows:[]};const aA=be(p),iA=be(g),j=Z[0],nA=aA.get(j);if(!(nA!=null&&nA.images))return{regions:Z,rows:[]};const mA=nA.images,LA=(WA,oe,me)=>{const{r1:ye,r2:de}={r1:oe,r2:me},qA=ye<de?`${ye}-${de}`:`${de}-${ye}`;return(iA.byDocPair.get(qA)||[]).map(YA=>YA.id_1===WA&&YA.regions_id_1===oe?{id:YA.id_2,page:YA.page_2}:YA.id_2===WA&&YA.regions_id_2===oe?{id:YA.id_1,page:YA.page_1}:null).filter(Boolean)},XA=[];for(const WA of mA){let oe=[{[j]:{id:WA.id,page:WA.canvas}}];for(let me=1;me<Z.length;me++){const ye=Z[me],de=[];for(const qA of oe){const Te=[];for(let YA=0;YA<me;YA++){const te=Z[YA];if(qA[te]){const ne=LA(qA[te].id,te,ye);Te.push(...ne)}}if(Te.length===0)de.push(qA);else{const YA=new Map;Te.forEach(te=>{YA.has(te.id)||YA.set(te.id,te)});for(const te of YA.values()){const ne={...qA,[ye]:te};de.push(ne)}}}oe=de}XA.push(...oe)}const JA=[],KA=new Set;for(const WA of XA){const oe=Z.map(me=>{var ye;return((ye=WA[me])==null?void 0:ye.id)||""}).join("|");KA.has(oe)||(KA.add(oe),JA.push(WA))}return{regions:Z,rows:JA}}function I(Z){r.update(aA=>aA.indexOf(Z)>-1?aA.filter(j=>j!==Z):[...aA,Z].sort((j,nA)=>j-nA))}function X(Z){i.update(aA=>{const iA=new Set(aA);return iA.has(Z)?iA.delete(Z):iA.add(Z),iA})}function O(){const Z=Array.from(be(p).keys());i.set(new Set(Z))}function V(){if(!be(r).includes(0))return;const{min:Z,max:aA}=be(Q).scoreRange||{};Z==null||aA==null||be(o)===Z&&o.set((Z+aA)/2)}const J=DA("filtered"),eA=DA(!1),oA=pe(b,Z=>{const aA=new Set;for(const iA of Z)aA.add(`${iA.id_1}-${iA.id_2}`);return aA}),wA=pe(b,Z=>{const aA=new Map;if(!(Z!=null&&Z.length))return{scoreCount:aA,scoreRange:{min:0,max:0,range:0}};let iA=1/0,j=-1/0;for(const nA of Z){const mA=nA.regions_id_1<nA.regions_id_2?`${nA.regions_id_1}-${nA.regions_id_2}`:`${nA.regions_id_2}-${nA.regions_id_1}`,LA=aA.get(mA)||{score:0,count:0};LA.score+=nA.weightedScore||0,LA.count++,aA.set(mA,LA)}for(const{score:nA}of aA.values())nA<iA&&(iA=nA),nA>j&&(j=nA);return iA===1/0&&(iA=j=0),{scoreCount:aA,scoreRange:{min:iA,max:j,range:j-iA}}}),cA=pe(b,Z=>{const aA=new Map;if(!(Z!=null&&Z.length))return{scoreCount:aA,countRange:{min:0,max:0,range:0}};for(const nA of Z)for(const mA of[nA.regions_id_1,nA.regions_id_2]){const LA=aA.get(mA)||{score:0,count:0};LA.score+=nA.weightedScore||0,LA.count++,aA.set(mA,LA)}let iA=1/0,j=-1/0;for(const{count:nA}of aA.values())nA<iA&&(iA=nA),nA>j&&(j=nA);return iA===1/0&&(iA=j=0),{scoreCount:aA,countRange:{min:iA,max:j,range:j-iA}}}),yA=pe([J,y,wA],([Z,aA,iA])=>Z==="filtered"?iA:aA),xA=pe([J,F,cA],([Z,aA,iA])=>Z==="filtered"?iA:aA),_A=pe(p,Z=>{var iA;const aA=new Map;for(const[j,nA]of Z)aA.set(j,Math.max(1,((iA=nA.images)==null?void 0:iA.length)||nA.img_nb||1));return aA});return{error:A,loadingProgress:n,cancelLoading:()=>{d&&(d.abort(),t.set(!1))},allPairs:f,visiblePairs:b,pairIndex:g,documentNodes:p,imageNodes:B,fetchPairs:S,imageNetwork:M,documentNetwork:E,selectedCategories:r,pairStats:Q,documentStats:F,imageStats:v,docPairStats:y,docSetNumber:U,selectedNodes:s,selectedRegions:i,updateSelectedNodes:Z=>s.set(Z),toggleCategory:I,toggleRegion:X,selectAllRegions:O,buildAlignedImageMatrix:P,threshold:o,setThreshold:Z=>o.set(Z),topK:a,setTopK:Z=>a.set(Z),mutualTopK:l,setMutualTopK:Z=>l.set(Z),scoreMode:c,setScoreMode:Z=>c.set(Z),matrixMode:J,setMatrixMode:Z=>J.set(Z),normalizeByImages:eA,activeDocPairStats:yA,activeDocStats:xA,imageCountMap:_A,visiblePairIds:oA}}function $F(e){let A,t,n;const r=e[1].default,i=ct(r,e,e[0],null);return{c(){A=C("table"),t=C("tbody"),i&&i.c(),m(A,"class","table is-fullwidth")},m(s,o){K(s,A,o),w(A,t),i&&i.m(t,null),n=!0},p(s,[o]){i&&i.p&&(!n||o&1)&&ft(i,r,s,s[0],n?ut(r,s[0],o,null):ht(s[0]),null)},i(s){n||(G(i,s),n=!0)},o(s){W(i,s),n=!1},d(s){s&&D(A),i&&i.d(s)}}}function Ab(e,A,t){let{$$slots:n={},$$scope:r}=A;return e.$$set=i=>{"$$scope"in i&&t(0,r=i.$$scope)},[r,n]}class eb extends PA{constructor(A){super(),RA(this,A,Ab,$F,OA,{})}}const tb=e=>({}),Yh=e=>({}),nb=e=>({}),zh=e=>({}),rb=e=>({}),jh=e=>({});function ib(e){let A;const t=e[4]["row-body"],n=ct(t,e,e[3],Yh);return{c(){n&&n.c()},m(r,i){n&&n.m(r,i),A=!0},p(r,i){n&&n.p&&(!A||i&8)&&ft(n,t,r,r[3],A?ut(t,r[3],i,tb):ht(r[3]),Yh)},i(r){A||(G(n,r),A=!0)},o(r){W(n,r),A=!1},d(r){n&&n.d(r)}}}function sb(e){let A,t,n,r;const i=e[4]["row-body"],s=ct(i,e,e[3],zh);return{c(){A=C("div"),t=C("div"),s&&s.c(),m(t,"class","grid is-gap-2"),m(A,"class",n="fixed-grid has-"+e[2]+"-cols")},m(o,a){K(o,A,a),w(A,t),s&&s.m(t,null),r=!0},p(o,a){s&&s.p&&(!r||a&8)&&ft(s,i,o,o[3],r?ut(i,o[3],a,nb):ht(o[3]),zh),(!r||a&4&&n!==(n="fixed-grid has-"+o[2]+"-cols"))&&m(A,"class",n)},i(o){r||(G(s,o),r=!0)},o(o){W(s,o),r=!1},d(o){o&&D(A),s&&s.d(o)}}}function ob(e){let A,t,n,r,i,s,o,a,l,c;$e(e[5]);const f=e[4]["row-header"],u=ct(f,e,e[3],jh),h=[sb,ib],d=[];function g(B,p){return B[0]?0:1}return s=g(e),o=d[s]=h[s](e),{c(){A=C("tr"),t=C("th"),n=C("div"),u&&u.c(),r=R(),i=C("td"),o.c(),m(n,"class","content-wrapper py-5"),m(t,"class","is-3 center-flex is-narrow"),TA(t,"width","15vw"),m(i,"class","p-5 is-fullwidth")},m(B,p){K(B,A,p),w(A,t),w(t,n),u&&u.m(n,null),w(A,r),w(A,i),d[s].m(i,null),a=!0,l||(c=dA(window,"resize",e[5]),l=!0)},p(B,[p]){u&&u.p&&(!a||p&8)&&ft(u,f,B,B[3],a?ut(f,B[3],p,rb):ht(B[3]),jh);let Q=s;s=g(B),s===Q?d[s].p(B,p):($A(),W(d[Q],1,1,()=>{d[Q]=null}),Ae(),o=d[s],o?o.p(B,p):(o=d[s]=h[s](B),o.c()),G(o,1),o.m(i,null))},i(B){a||(G(u,B),G(o),a=!0)},o(B){W(u,B),W(o),a=!1},d(B){B&&D(A),u&&u.d(B),d[s].d(),l=!1,c()}}}function ab(e,A,t){let n,{$$slots:r={},$$scope:i}=A,{useGrid:s=!0}=A,o=0;function a(){t(1,o=window.innerWidth)}return e.$$set=l=>{"useGrid"in l&&t(0,s=l.useGrid),"$$scope"in l&&t(3,i=l.$$scope)},e.$$.update=()=>{e.$$.dirty&2&&t(2,n=ll(o))},[s,o,n,i,r,a]}class qh extends PA{constructor(A){super(),RA(this,A,ab,ob,OA,{useGrid:0})}}const EH="",lb=e=>({}),Zh=e=>({}),cb=e=>({}),$h=e=>({});function Ad(e){let A,t,n,r,i,s,o,a,l,c,f,u=e[1]&&ed(e);return a=new Bi({props:{tooltipText:e[2][e[1]][Y]}}),{c(){u&&u.c(),A=R(),t=C("div"),n=C("button"),r=dt("svg"),i=dt("path"),o=R(),pA(a.$$.fragment),m(i,"fill","none"),m(i,"stroke","currentColor"),m(i,"stroke-linecap","round"),m(i,"stroke-linejoin","round"),m(i,"stroke-width","1.5"),m(i,"d","M12 3v18m0 0l8.5-8.5M12 21l-8.5-8.5"),m(r,"style",s=`transform: rotate(${e[1]?"180":"0"}deg)`),m(r,"xmlns","http://www.w3.org/2000/svg"),m(r,"width","24"),m(r,"height","24"),m(r,"viewBox","0 0 24 24"),m(r,"class","svelte-jbs1sd"),m(n,"class","button is-link svelte-jbs1sd"),m(t,"class","ctrl-toggle svelte-jbs1sd")},m(h,d){u&&u.m(h,d),K(h,A,d),K(h,t,d),w(t,n),w(n,r),w(r,i),w(n,o),gA(a,n,null),l=!0,c||(f=dA(n,"click",Mt(e[3])),c=!0)},p(h,d){h[1]?u?(u.p(h,d),d&2&&G(u,1)):(u=ed(h),u.c(),G(u,1),u.m(A.parentNode,A)):u&&($A(),W(u,1,1,()=>{u=null}),Ae()),(!l||d&2&&s!==(s=`transform: rotate(${h[1]?"180":"0"}deg)`))&&m(r,"style",s);const g={};d&2&&(g.tooltipText=h[2][h[1]][Y]),a.$set(g)},i(h){l||(G(u),G(a.$$.fragment,h),l=!0)},o(h){W(u),W(a.$$.fragment,h),l=!1},d(h){u&&u.d(h),h&&D(A),h&&D(t),BA(a),c=!1,f()}}}function ed(e){let A,t,n;const r=e[5]["toolbar-hidden"],i=ct(r,e,e[4],Zh);return{c(){A=C("div"),i&&i.c(),m(A,"class","ctrl-extra")},m(s,o){K(s,A,o),i&&i.m(A,null),n=!0},p(s,o){i&&i.p&&(!n||o&16)&&ft(i,r,s,s[4],n?ut(r,s[4],o,lb):ht(s[4]),Zh)},i(s){n||(G(i,s),$e(()=>{n&&(t||(t=Ft(A,ul,{axis:"y"},!0)),t.run(1))}),n=!0)},o(s){W(i,s),t||(t=Ft(A,ul,{axis:"y"},!1)),t.run(0),n=!1},d(s){s&&D(A),i&&i.d(s),s&&t&&t.end()}}}function ub(e){let A,t,n,r,i,s,o,a;const l=e[5]["toolbar-visible"],c=ct(l,e,e[4],$h);let f=e[0]&&Ad(e);return{c(){A=C("div"),t=C("form"),n=C("div"),r=C("div"),i=C("div"),c&&c.c(),s=R(),f&&f.c(),m(i,"class","ctrl-block svelte-jbs1sd"),m(r,"class","ctrl-block-wrapper svelte-jbs1sd"),m(n,"class","ctrl-base"),m(t,"class","ctrl svelte-jbs1sd"),m(A,"id","toolbar"),m(A,"class",o="ctrl-wrapper is-flex is-justify-content-center is-align-items-center "+(e[1]?"toolbar-expanded":"toolbar-collapsed")+" svelte-jbs1sd")},m(u,h){K(u,A,h),w(A,t),w(t,n),w(n,r),w(r,i),c&&c.m(i,null),w(t,s),f&&f.m(t,null),a=!0},p(u,[h]){c&&c.p&&(!a||h&16)&&ft(c,l,u,u[4],a?ut(l,u[4],h,cb):ht(u[4]),$h),u[0]?f?(f.p(u,h),h&1&&G(f,1)):(f=Ad(u),f.c(),G(f,1),f.m(t,null)):f&&($A(),W(f,1,1,()=>{f=null}),Ae()),(!a||h&2&&o!==(o="ctrl-wrapper is-flex is-justify-content-center is-align-items-center "+(u[1]?"toolbar-expanded":"toolbar-collapsed")+" svelte-jbs1sd"))&&m(A,"class",o)},i(u){a||(G(c,u),G(f),a=!0)},o(u){W(c,u),W(f),a=!1},d(u){u&&D(A),c&&c.d(u),f&&f.d()}}}function fb(e,A,t){let n,{$$slots:r={},$$scope:i}=A,{expandable:s=!0}=A;const o={true:{en:"Collapse the toolbar",fr:"Refermer le menu"},false:{en:"Expand the toolbar",fr:"Ouvrir le menu"}},a=()=>t(1,n=!n);return e.$$set=l=>{"expandable"in l&&t(0,s=l.expandable),"$$scope"in l&&t(4,i=l.$$scope)},t(1,n=!1),[s,n,o,a,i,r]}class hb extends PA{constructor(A){super(),RA(this,A,fb,ub,OA,{expandable:0})}}function td(e){let A,t,n,r,i,s,o,a,l,c=e[5]>1&&nd(e),f=e[5]<e[3]&&sd(e);return{c(){A=C("nav"),t=C("ul"),c&&c.c(),n=R(),r=C("li"),i=C("a"),s=sA(e[5]),o=R(),f&&f.c(),m(i,"class","pagination-link is-current"),m(i,"href",null),m(t,"class","pagination-list ml-0"),m(A,"class","pagination is-centered mb-2"),m(A,"aria-label","pagination")},m(u,h){K(u,A,h),w(A,t),c&&c.m(t,null),w(t,n),w(t,r),w(r,i),w(i,s),w(t,o),f&&f.m(t,null),a||(l=dA(i,"click",Mt(e[9])),a=!0)},p(u,h){u[5]>1?c?c.p(u,h):(c=nd(u),c.c(),c.m(t,n)):c&&(c.d(1),c=null),h&32&&NA(s,u[5]),u[5]<u[3]?f?f.p(u,h):(f=sd(u),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},d(u){u&&D(A),c&&c.d(),f&&f.d(),a=!1,l()}}}function nd(e){let A,t,n,r,i,s,o=e[5]-1>1&&rd(e);return{c(){A=C("li"),t=C("a"),t.textContent="1",n=R(),o&&o.c(),r=ke(),m(t,"class","pagination-link"),m(t,"href",null)},m(a,l){K(a,A,l),w(A,t),K(a,n,l),o&&o.m(a,l),K(a,r,l),i||(s=dA(t,"click",Mt(e[7])),i=!0)},p(a,l){a[5]-1>1?o?o.p(a,l):(o=rd(a),o.c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},d(a){a&&D(A),a&&D(n),o&&o.d(a),a&&D(r),i=!1,s()}}}function rd(e){let A,t,n,r=e[5]-1+"",i,s,o,a=e[5]-1>2&&id();return{c(){a&&a.c(),A=R(),t=C("li"),n=C("a"),i=sA(r),m(n,"class","pagination-link"),m(n,"href",null)},m(l,c){a&&a.m(l,c),K(l,A,c),K(l,t,c),w(t,n),w(n,i),s||(o=dA(n,"click",Mt(e[8])),s=!0)},p(l,c){l[5]-1>2?a||(a=id(),a.c(),a.m(A.parentNode,A)):a&&(a.d(1),a=null),c&32&&r!==(r=l[5]-1+"")&&NA(i,r)},d(l){a&&a.d(l),l&&D(A),l&&D(t),s=!1,o()}}}function id(e){let A;return{c(){A=C("li"),A.innerHTML='<span class="pagination-ellipsis">…</span>'},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function sd(e){let A,t,n,r,i,s,o=e[5]+1<e[3]&&od(e);return{c(){o&&o.c(),A=R(),t=C("li"),n=C("a"),r=sA(e[3]),m(n,"class","pagination-link"),m(n,"href",null)},m(a,l){o&&o.m(a,l),K(a,A,l),K(a,t,l),w(t,n),w(n,r),i||(s=dA(n,"click",Mt(e[11])),i=!0)},p(a,l){a[5]+1<a[3]?o?o.p(a,l):(o=od(a),o.c(),o.m(A.parentNode,A)):o&&(o.d(1),o=null),l&8&&NA(r,a[3])},d(a){o&&o.d(a),a&&D(A),a&&D(t),i=!1,s()}}}function od(e){let A,t,n=e[5]+1+"",r,i,s,o,a,l=e[5]+2<e[3]&&ad();return{c(){A=C("li"),t=C("a"),r=sA(n),i=R(),l&&l.c(),s=ke(),m(t,"class","pagination-link"),m(t,"href",null)},m(c,f){K(c,A,f),w(A,t),w(t,r),K(c,i,f),l&&l.m(c,f),K(c,s,f),o||(a=dA(t,"click",Mt(e[10])),o=!0)},p(c,f){f&32&&n!==(n=c[5]+1+"")&&NA(r,n),c[5]+2<c[3]?l||(l=ad(),l.c(),l.m(s.parentNode,s)):l&&(l.d(1),l=null)},d(c){c&&D(A),c&&D(i),l&&l.d(c),c&&D(s),o=!1,a()}}}function ad(e){let A;return{c(){A=C("li"),A.innerHTML='<span class="pagination-ellipsis">…</span>'},m(t,n){K(t,A,n)},d(t){t&&D(A)}}}function db(e){let A,t,n=e[5]*e[2]-e[2]+1+"",r,i,s=Math.min(e[5]*e[2],e[1])+"",o,a,l,c,f=e[4]&&td(e);return{c(){f&&f.c(),A=R(),t=C("div"),r=sA(n),i=sA(" - "),o=sA(s),a=sA(" / "),l=sA(e[1]),m(t,"class",c="is-size-7 is-center mb-4 "+(e[4]?"":"mt-4"))},m(u,h){f&&f.m(u,h),K(u,A,h),K(u,t,h),w(t,r),w(t,i),w(t,o),w(t,a),w(t,l)},p(u,[h]){u[4]?f?f.p(u,h):(f=td(u),f.c(),f.m(A.parentNode,A)):f&&(f.d(1),f=null),h&36&&n!==(n=u[5]*u[2]-u[2]+1+"")&&NA(r,n),h&38&&s!==(s=Math.min(u[5]*u[2],u[1])+"")&&NA(o,s),h&2&&NA(l,u[1]),h&16&&c!==(c="is-size-7 is-center mb-4 "+(u[4]?"":"mt-4"))&&m(t,"class",c)},i:tA,o:tA,d(u){f&&f.d(u),u&&D(A),u&&D(t)}}}function gb(e,A,t){let n,r,i,{store:s}=A;const{currentPage:o}=s;FA(e,o,g=>t(5,i=g));let{nbOfItems:a}=A,{pageLength:l=Zg}=A;const c=()=>s.handlePageUpdate(1),f=()=>s.handlePageUpdate(i-1),u=()=>s.handlePageUpdate(i),h=()=>s.handlePageUpdate(i+1),d=()=>s.handlePageUpdate(n);return e.$$set=g=>{"store"in g&&t(0,s=g.store),"nbOfItems"in g&&t(1,a=g.nbOfItems),"pageLength"in g&&t(2,l=g.pageLength)},e.$$.update=()=>{e.$$.dirty&6&&t(3,n=l>0?Math.ceil(a/l):1),e.$$.dirty&14&&t(4,r=n>1||a>l)},[s,a,l,n,r,i,o,c,f,u,h,d]}class ld extends PA{constructor(A){super(),RA(this,A,gb,db,OA,{store:0,nbOfItems:1,pageLength:2})}}function Bb(e){let A,t,n,r,i=Y==="en"?"Save selection":"Sauvegarder la sélection",s,o,a;return{c(){A=C("button"),t=C("span"),n=C("i"),r=R(),s=sA(i),m(n,"class","fa-solid fa-floppy-disk"),m(A,"class","button is-link")},m(l,c){K(l,A,c),w(A,t),w(t,n),w(t,r),w(t,s),o||(a=dA(A,"click",e[7]),o=!0)},p:tA,d(l){l&&D(A),o=!1,a()}}}function pb(e){let A,t,n,r,i=Y==="en"?"Go to treatment":"Accéder au traitement",s,o;return{c(){var a;A=C("a"),t=C("span"),n=C("i"),r=R(),s=sA(i),m(n,"class","fa-solid fa-gear"),m(A,"class","button is-link"),m(A,"href",o="/"+wt+"/treatment/add/?document_set="+((a=e[3])==null?void 0:a.id))},m(a,l){K(a,A,l),w(A,t),w(t,n),w(t,r),w(t,s)},p(a,l){var c;l&8&&o!==(o="/"+wt+"/treatment/add/?document_set="+((c=a[3])==null?void 0:c.id))&&m(A,"href",o)},d(a){a&&D(A)}}}function cd(e){let A,t,n,r,i,s,o;return{c(){var a,l;A=C("a"),t=C("span"),t.innerHTML='<i class="fa-solid fa-file-export"></i> JSON',r=R(),i=C("a"),s=C("span"),s.innerHTML='<i class="fa-solid fa-file-zipper"></i> ZIP',m(A,"class","button is-link is-dark"),m(A,"href",n="/"+wt+"/document-set/"+((a=e[3])==null?void 0:a.id)+"/json"),m(A,"target","_blank"),m(i,"class","button is-link is-dark"),m(i,"href",o="/"+wt+"/document-set/"+((l=e[3])==null?void 0:l.id)+"/zip"),m(i,"target","_blank")},m(a,l){K(a,A,l),w(A,t),K(a,r,l),K(a,i,l),w(i,s)},p(a,l){var c,f;l&8&&n!==(n="/"+wt+"/document-set/"+((c=a[3])==null?void 0:c.id)+"/json")&&m(A,"href",n),l&8&&o!==(o="/"+wt+"/document-set/"+((f=a[3])==null?void 0:f.id)+"/zip")&&m(i,"href",o)},d(a){a&&D(A),a&&D(r),a&&D(i)}}}function mb(e){let A,t,n,r,i,s,o;function a(u,h){return u[2]&&!u[1]?pb:Bb}let l=a(e),c=l(e),f=!e[1]&&cd(e);return{c(){A=C("footer"),t=C("div"),n=C("button"),n.textContent=`${Y==="en"?"Clear selection":"Vider la sélection"}`,r=R(),c.c(),i=R(),f&&f.c(),m(n,"class","button button-close is-link is-light"),m(t,"class","buttons"),m(A,"class","modal-card-foot is-center")},m(u,h){K(u,A,h),w(A,t),w(t,n),w(t,r),c.m(t,null),w(t,i),f&&f.m(t,null),s||(o=dA(n,"click",e[6]),s=!0)},p(u,[h]){l===(l=a(u))&&c?c.p(u,h):(c.d(1),c=l(u),c&&(c.c(),c.m(t,i))),u[1]?f&&(f.d(1),f=null):f?f.p(u,h):(f=cd(u),f.c(),f.m(t,null))},i:tA,o:tA,d(u){u&&D(A),c.d(),f&&f.d(),s=!1,o()}}}function wb(e,A,t){let n,r,{selectionStore:i}=A;const{isSaved:s,selection:o}=i;FA(e,s,f=>t(2,n=f)),FA(e,o,f=>t(3,r=f));let{isRegion:a=i.type!=="documentSet"}=A;const l=()=>i.empty(),c=()=>i.save();return e.$$set=f=>{"selectionStore"in f&&t(0,i=f.selectionStore),"isRegion"in f&&t(1,a=f.isRegion)},[i,a,n,r,s,o,l,c]}class vb extends PA{constructor(A){super(),RA(this,A,wb,mb,OA,{selectionStore:0,isRegion:1})}}const IH="";function ud(e,A,t){const n=e.slice();return n[31]=A[t],n}function fd(e,A,t){const n=e.slice();return n[31]=A[t],n}function Cb(e){let A,t,n,r,i,s;return{c(){A=C("span"),t=sA(e[10]),n=R(),r=C("span"),r.innerHTML='<i class="fas fa-edit"></i>',m(r,"class","pl-3 smaller has-text-link")},m(o,a){K(o,A,a),w(A,t),w(A,n),w(A,r),i||(s=[dA(A,"click",e[14]),dA(A,"keyup",null)],i=!0)},p(o,a){a[0]&1024&&NA(t,o[10])},d(o){o&&D(A),i=!1,Ce(s)}}}function Qb(e){let A,t,n;return{c(){A=C("input"),m(A,"class","input selection-title svelte-fumu7c")},m(r,i){K(r,A,i),e[23](A),xn(A,e[5]),t||(n=[dA(A,"input",e[24]),dA(A,"keydown",e[15]),dA(A,"blur",e[16])],t=!0)},p(r,i){i[0]&32&&A.value!==r[5]&&xn(A,r[5])},d(r){r&&D(A),e[23](null),t=!1,Ce(n)}}}function hd(e){let A,t,n;function r(){return e[25](e[31])}return{c(){A=C("button"),m(A,"class","tag is-delete is-link ml-0")},m(i,s){K(i,A,s),t||(n=dA(A,"click",r),t=!0)},p(i,s){e=i},d(i){i&&D(A),t=!1,n()}}}function dd(e,A){let t,n,r=A[31].username+"",i,s,o,a=A[9]&&hd(A);return{key:e,first:null,c(){t=C("div"),n=C("span"),i=sA(r),s=R(),a&&a.c(),o=R(),m(n,"class","tag"),m(t,"class","tags has-addons svelte-fumu7c"),this.first=t},m(l,c){K(l,t,c),w(t,n),w(n,i),w(t,s),a&&a.m(t,null),w(t,o)},p(l,c){A=l,c[0]&256&&r!==(r=A[31].username+"")&&NA(i,r),A[9]?a?a.p(A,c):(a=hd(A),a.c(),a.m(t,o)):a&&(a.d(1),a=null)},d(l){l&&D(t),a&&a.d()}}}function gd(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g=Y==="en"?"Make public":"Rendre public",B,p,Q,F=e[7].length>0&&Bd(e);return{c(){var v;A=C("div"),t=C("div"),n=C("div"),r=C("p"),i=C("input"),s=R(),o=C("span"),o.innerHTML='<i class="fas fa-search"></i>',a=R(),F&&F.c(),l=R(),c=C("div"),f=C("label"),u=C("input"),d=R(),B=sA(g),m(i,"class","input svelte-fumu7c"),m(i,"placeholder","Search users…"),m(o,"class","icon is-small is-right"),m(r,"class","control is-expanded has-icons-right"),m(n,"class","field"),m(t,"class","dropdown-trigger"),m(A,"class","dropdown is-active"),m(u,"type","checkbox"),u.checked=h=(v=e[2])==null?void 0:v.is_public,m(f,"class","checkbox"),m(c,"class","field mt-3 is-right")},m(v,y){K(v,A,y),w(A,t),w(t,n),w(n,r),w(r,i),xn(i,e[6]),w(r,s),w(r,o),w(A,a),F&&F.m(A,null),K(v,l,y),K(v,c,y),w(c,f),w(f,u),w(f,d),w(f,B),p||(Q=[dA(i,"input",e[26]),dA(i,"input",e[17]),dA(u,"change",e[28])],p=!0)},p(v,y){var U;y[0]&64&&i.value!==v[6]&&xn(i,v[6]),v[7].length>0?F?F.p(v,y):(F=Bd(v),F.c(),F.m(A,null)):F&&(F.d(1),F=null),y[0]&4&&h!==(h=(U=v[2])==null?void 0:U.is_public)&&(u.checked=h)},d(v){v&&D(A),F&&F.d(),v&&D(l),v&&D(c),p=!1,Ce(Q)}}}function Bd(e){let A,t,n=e[7],r=[];for(let i=0;i<n.length;i+=1)r[i]=pd(ud(e,n,i));return{c(){A=C("div"),t=C("div");for(let i=0;i<r.length;i+=1)r[i].c();m(t,"class","dropdown-content"),m(A,"class","dropdown-menu"),m(A,"id","dropdown-menu"),m(A,"role","menu")},m(i,s){K(i,A,s),w(A,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,s){if(s[0]&262272){n=i[7];let o;for(o=0;o<n.length;o+=1){const a=ud(i,n,o);r[o]?r[o].p(a,s):(r[o]=pd(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){i&&D(A),Se(r,i)}}}function pd(e){let A,t=e[31].username+"",n,r,i,s;function o(){return e[27](e[31])}return{c(){A=C("div"),n=sA(t),r=R(),m(A,"class","dropdown-item")},m(a,l){K(a,A,l),w(A,n),w(A,r),i||(s=[dA(A,"click",o),dA(A,"keydown",null)],i=!0)},p(a,l){e=a,l[0]&128&&t!==(t=e[31].username+"")&&NA(n,t)},d(a){a&&D(A),i=!1,Ce(s)}}}function yb(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v=[],y=new Map,U,S,_,b,T,x;function k(J,eA){return J[3]?Qb:Cb}let M=k(e),E=M(e);const P=e[22].default,I=ct(P,e,e[21],null);let X=e[8];const O=J=>J[31].id;for(let J=0;J<X.length;J+=1){let eA=fd(e,X,J),oA=O(eA);y.set(oA,v[J]=dd(oA,eA))}let V=e[9]&&gd(e);return _=new vb({props:{selectionStore:e[0]}}),{c(){A=C("div"),t=C("div"),n=R(),r=C("div"),i=C("div"),s=C("div"),o=C("i"),a=R(),E.c(),l=sA(`

                (`),c=sA(e[1]),f=sA(")"),u=R(),h=C("button"),d=R(),g=C("section"),I&&I.c(),B=R(),p=C("h4"),p.textContent=`${Y==="en"?"Shared with":"Partagé avec"}`,Q=R(),F=C("div");for(let J=0;J<v.length;J+=1)v[J].c();U=R(),V&&V.c(),S=R(),pA(_.$$.fragment),m(t,"class","modal-background"),m(o,"class","fa-solid fa-book-bookmark"),m(s,"class","title is-4 mb-0 media-content"),m(h,"class","delete media-left"),m(h,"aria-label","close"),m(i,"class","modal-card-head media mb-0 is-middle"),m(F,"class","field is-grouped is-grouped-multiline"),m(g,"class","modal-card-body"),m(r,"class","modal-content"),m(A,"id","selection-modal"),m(A,"class","modal fade"),m(A,"tabindex","-1"),m(A,"aria-labelledby","selection-modal-label"),m(A,"aria-hidden","true")},m(J,eA){K(J,A,eA),w(A,t),w(A,n),w(A,r),w(r,i),w(i,s),w(s,o),w(s,a),E.m(s,null),w(s,l),w(s,c),w(s,f),w(i,u),w(i,h),w(r,d),w(r,g),I&&I.m(g,null),w(g,B),w(g,p),w(g,Q),w(g,F);for(let oA=0;oA<v.length;oA+=1)v[oA]&&v[oA].m(F,null);w(g,U),V&&V.m(g,null),w(r,S),gA(_,r,null),b=!0,T||(x=lr(to.call(null,A)),T=!0)},p(J,eA){M===(M=k(J))&&E?E.p(J,eA):(E.d(1),E=M(J),E&&(E.c(),E.m(s,l))),(!b||eA[0]&2)&&NA(c,J[1]),I&&I.p&&(!b||eA[0]&2097152)&&ft(I,P,J,J[21],b?ut(P,J[21],eA,null):ht(J[21]),null),eA[0]&525056&&(X=J[8],v=fr(v,eA,O,1,J,X,y,F,sl,dd,null,fd)),J[9]?V?V.p(J,eA):(V=gd(J),V.c(),V.m(g,null)):V&&(V.d(1),V=null);const oA={};eA[0]&1&&(oA.selectionStore=J[0]),_.$set(oA)},i(J){b||(G(I,J),G(_.$$.fragment,J),b=!0)},o(J){W(I,J),W(_.$$.fragment,J),b=!1},d(J){J&&D(A),E.d(),I&&I.d(J);for(let eA=0;eA<v.length;eA+=1)v[eA].d();V&&V.d(),BA(_),T=!1,x()}}}function _b(e,A,t){let n,r,i,s,o,{$$slots:a={},$$scope:l}=A;const{selected:c}=KC;FA(e,c,O=>t(2,s=O));let{selectionStore:f}=A,{selectionLength:u=!1}=A;const{selectionTitle:h,updateTitle:d,updatePublic:g,save:B}=f;FA(e,h,O=>t(10,o=O));let p=!1,Q,F;function v(){t(3,p=!0),t(5,F=o),setTimeout(()=>Q==null?void 0:Q.focus(),0)}function y(O){O.key==="Enter"&&U()}function U(){t(3,p=!1),d(F),B()}let S="",_=[];async function b(){if(S.trim().length<1){t(7,_=[]);return}const V=await(await fetch(`${window.location.origin}/search/user?q=${encodeURIComponent(S)}`)).json();t(7,_=V.users||[])}function T(O){f.add({id:O.id,class:"User",title:O.username}),t(6,S=""),t(7,_=[])}function x(O){f.remove(O,"User")}function k(O){jt[O?"unshift":"push"](()=>{Q=O,t(4,Q)})}function M(){F=this.value,t(5,F)}const E=O=>x(O.id);function P(){S=this.value,t(6,S)}const I=O=>T(O),X=O=>g(O.target.checked);return e.$$set=O=>{"selectionStore"in O&&t(0,f=O.selectionStore),"selectionLength"in O&&t(1,u=O.selectionLength),"$$scope"in O&&t(21,l=O.$$scope)},e.$$.update=()=>{e.$$.dirty[0]&4&&t(20,n=s==null?void 0:s.owner_id),e.$$.dirty[0]&1048576&&t(9,r=ai||n===oi),e.$$.dirty[0]&4&&t(8,i=Object.entries((s==null?void 0:s.User)||{}).map(([O,V])=>({id:Number(O),username:V.title})))},[f,u,s,p,Q,F,S,_,i,r,o,c,h,g,v,y,U,b,T,x,n,l,a,k,M,E,P,I,X]}class Ub extends PA{constructor(A){super(),RA(this,A,_b,yb,OA,{selectionStore:0,selectionLength:1},null,[-1,-1])}}const HH="";function Fb(e){let A,t,n,r,i,s=Y==="en"?"Selection":"Sélection",o,a,l,c,f,u;return{c(){A=C("div"),t=C("button"),n=C("span"),r=C("i"),i=R(),o=sA(s),a=sA(`
            (`),l=sA(e[0]),c=sA(")"),m(r,"class","fa-solid fa-book-bookmark"),m(n,"id","btn-content"),m(t,"id","set-btn"),m(t,"class","button px-5 py-4 is-link svelte-gmt9z5"),m(t,"data-target","selection-modal"),m(A,"class","set-container svelte-gmt9z5")},m(h,d){K(h,A,d),w(A,t),w(t,n),w(n,r),w(n,i),w(n,o),w(n,a),w(n,l),w(n,c),f||(u=lr(cl.call(null,t)),f=!0)},p(h,[d]){d&1&&NA(l,h[0])},i:tA,o:tA,d(h){h&&D(A),f=!1,u()}}}function bb(e,A,t){let{selectionLength:n=0}=A,r=n;return e.$$set=i=>{"selectionLength"in i&&t(0,n=i.selectionLength)},e.$$.update=()=>{if(e.$$.dirty&3&&n!==r){const i=n>r;t(1,r=n);const s=document.getElementById("btn-content");s&&s.animate([{transform:i?"translateY(-7px)":"translateX(-5px)"},{transform:i?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[n,r]}class Eb extends PA{constructor(A){super(),RA(this,A,bb,Fb,OA,{selectionLength:0})}}const SH="";function md(e,A,t){const n=e.slice();return n[7]=A[t][0],n[8]=A[t][1],n}function Ib(e){let A;return{c(){A=C("div"),A.textContent=`${Y==="en"?"No regions in selection":"Aucune région sélectionnée"}`},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function Hb(e){let A,t,n=Object.entries(e[2]),r=[];for(let i=0;i<n.length;i+=1)r[i]=wd(md(e,n,i));return{c(){A=C("div"),t=C("div");for(let i=0;i<r.length;i+=1)r[i].c();m(t,"class","grid is-gap-2"),m(A,"class","fixed-grid has-6-cols")},m(i,s){K(i,A,s),w(A,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,s){if(s&13){n=Object.entries(i[2]);let o;for(o=0;o<n.length;o+=1){const a=md(i,n,o);r[o]?r[o].p(a,s):(r[o]=wd(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){i&&D(A),Se(r,i)}}}function wd(e){let A,t,n,r,i,s,o,a=e[8].title+"",l,c,f,u,h,d;function g(){return e[6](e[7])}return{c(){A=C("div"),t=C("figure"),n=C("img"),i=R(),s=C("div"),o=C("span"),l=sA(a),c=R(),f=C("button"),u=R(),Ne(n.src,r=st(e[8].img,e[8].xywh,"96,"))||m(n,"src",r),m(n,"alt","Extracted region"),m(o,"class","overlay-desc"),m(s,"class","overlay is-center svelte-g8ij5d"),m(t,"class","image is-64x64 card"),m(f,"class","delete region-btn svelte-g8ij5d"),m(f,"aria-label","remove from selection"),m(A,"class","selection cell svelte-g8ij5d")},m(B,p){K(B,A,p),w(A,t),w(t,n),w(t,i),w(t,s),w(s,o),w(o,l),w(A,c),w(A,f),w(A,u),h||(d=dA(f,"click",g),h=!0)},p(B,p){e=B,p&4&&!Ne(n.src,r=st(e[8].img,e[8].xywh,"96,"))&&m(n,"src",r),p&4&&a!==(a=e[8].title+"")&&NA(l,a)},d(B){B&&D(A),h=!1,d()}}}function Sb(e){let A;function t(i,s){return i[4]?Hb:Ib}let n=t(e),r=n(e);return{c(){r.c(),A=ke()},m(i,s){r.m(i,s),K(i,A,s)},p(i,s){n===(n=t(i))&&r?r.p(i,s):(r.d(1),r=n(i),r&&(r.c(),r.m(A.parentNode,A)))},d(i){r.d(i),i&&D(A)}}}function xb(e){let A,t,n,r;return A=new Eb({props:{selectionLength:e[1]}}),n=new Ub({props:{selectionLength:e[1],selectionStore:e[0],$$slots:{default:[Sb]},$$scope:{ctx:e}}}),{c(){pA(A.$$.fragment),t=R(),pA(n.$$.fragment)},m(i,s){gA(A,i,s),K(i,t,s),gA(n,i,s),r=!0},p(i,[s]){const o={};s&2&&(o.selectionLength=i[1]),A.$set(o);const a={};s&2&&(a.selectionLength=i[1]),s&1&&(a.selectionStore=i[0]),s&2077&&(a.$$scope={dirty:s,ctx:i}),n.$set(a)},i(i){r||(G(A.$$.fragment,i),G(n.$$.fragment,i),r=!0)},o(i){W(A.$$.fragment,i),W(n.$$.fragment,i),r=!1},d(i){BA(A,i),i&&D(t),BA(n,i)}}}function Lb(e,A,t){let n,r,i,s,{selectionStore:o}=A;const{selected:a}=o;FA(e,a,c=>t(3,s=c));const l=c=>o.remove(c,Object.keys(s)[0]);return e.$$set=c=>{"selectionStore"in c&&t(0,o=c.selectionStore)},e.$$.update=()=>{e.$$.dirty&8&&t(2,n=Object.values(s)[0]||{}),e.$$.dirty&4&&t(1,r=Object.keys(n).length),e.$$.dirty&2&&t(4,i=r>0)},[o,r,n,s,i,a,l]}class kb extends PA{constructor(A){super(),RA(this,A,Lb,xb,OA,{selectionStore:0})}}const xH="",{Map:Mb}=Al;function vd(e,A,t){const n=e.slice();return n[18]=A[t],n}function Cd(e){const A=e[2].get(e[18].id);e[21]=A}function Qd(e,A,t){const n=e.slice();return n[22]=A[t],n[24]=t,n}function yd(e,A,t){const n=e.slice();return n[25]=A[t],n}function Tb(e){let A,t;return A=new hb({props:{expandable:!1,$$slots:{"toolbar-visible":[Db]},$$scope:{ctx:e}}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,r){const i={};r&268435456&&(i.$$scope={dirty:r,ctx:n}),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function _d(e){let A,t,n,r,i,s=e[25].title+"",o,a,l,c=e[25].shortcut+"",f,u,h,d;return{c(){A=C("p"),t=C("button"),n=C("span"),r=C("i"),i=R(),o=sA(s),a=R(),l=C("span"),f=sA(c),u=R(),m(r,"class","fas "+e[25].icon+" svelte-7vjt6f"),m(n,"class","icon is-small"),m(l,"class","shortcut svelte-7vjt6f"),m(t,"class","button pl-5"),m(t,"title",e[25].desc),m(A,"class","control")},m(g,B){K(g,A,B),w(A,t),w(t,n),w(n,r),w(t,i),w(t,o),w(t,a),w(t,l),w(l,f),w(A,u),h||(d=dA(t,"click",Mt(e[25].fct)),h=!0)},p(g,B){e=g},d(g){g&&D(A),h=!1,d()}}}function Db(e){let A,t,n,r,i,s,o,a=Object.values(e[10]),l=[];for(let c=0;c<a.length;c+=1)l[c]=_d(yd(e,a,c));return{c(){A=C("div"),t=C("div"),n=C("div"),r=C("span"),r.textContent=`${Y==="en"?"Process selection":"Agir sur la sélection"}`,i=R(),s=C("div"),o=C("div");for(let c=0;c<l.length;c+=1)l[c].c();m(r,"class","tag is-medium is-link mr-5"),m(n,"class","column is-narrow mr-5"),m(o,"class","field has-addons"),m(s,"class","column"),m(t,"class","columns is-vcentered is-mobile py-4"),m(A,"slot","toolbar-visible")},m(c,f){K(c,A,f),w(A,t),w(t,n),w(n,r),w(t,i),w(t,s),w(s,o);for(let u=0;u<l.length;u+=1)l[u]&&l[u].m(o,null)},p(c,f){if(f&1024){a=Object.values(c[10]);let u;for(u=0;u<a.length;u+=1){const h=yd(c,a,u);l[u]?l[u].p(h,f):(l[u]=_d(h),l[u].c(),l[u].m(o,null))}for(;u<l.length;u+=1)l[u].d(1);l.length=a.length}},d(c){c&&D(A),Se(l,c)}}}function Kb(e){let A,t=e[9].title+"",n;return{c(){A=C("span"),n=sA(t),m(A,"class","button is-small is-success"),m(A,"title",e[9].desc)},m(r,i){K(r,A,i),w(A,n)},p:tA,d(r){r&&D(A)}}}function Ob(e){let A,t=e[8].title+"",n,r,i;function s(){return e[13](e[18])}return{c(){A=C("button"),n=sA(t),m(A,"class","button is-small is-warning"),m(A,"title",e[8].desc)},m(o,a){K(o,A,a),w(A,n),r||(i=dA(A,"click",s),r=!0)},p(o,a){e=o},d(o){o&&D(A),r=!1,i()}}}function Nb(e){let A,t,n=e[18].size+"",r,i,s,o,a,l;function c(h,d){return h[18].fullyConnected?Kb:Ob}let f=c(e),u=f(e);return{c(){A=C("div"),t=C("span"),r=sA(n),i=sA(" images"),s=R(),o=C("hr"),a=R(),u.c(),l=R(),m(t,"class","cluster-size"),m(A,"class","cluster-info is-center is-fullwidth")},m(h,d){K(h,A,d),w(A,t),w(t,r),w(t,i),w(A,s),w(A,o),w(A,a),u.m(A,null),K(h,l,d)},p(h,d){d&2&&n!==(n=h[18].size+"")&&NA(r,n),f===(f=c(h))&&u?u.p(h,d):(u.d(1),u=f(h),u&&(u.c(),u.m(A,null)))},d(h){h&&D(A),u.d(),h&&D(l)}}}function Ud(e){let A,t;return A=new Yn({props:{item:e[22],items:e[21],index:e[24],copyable:!1,selectionStore:Xi}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,r){const i={};r&6&&(i.item=n[22]),r&6&&(i.items=n[21]),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function Rb(e){Cd(e);let A,t,n=e[21],r=[];for(let s=0;s<n.length;s+=1)r[s]=Ud(Qd(e,n,s));const i=s=>W(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();A=R()},m(s,o){for(let a=0;a<r.length;a+=1)r[a]&&r[a].m(s,o);K(s,A,o),t=!0},p(s,o){if(Cd(s),o&6){n=s[21];let a;for(a=0;a<n.length;a+=1){const l=Qd(s,n,a);r[a]?(r[a].p(l,o),G(r[a],1)):(r[a]=Ud(l),r[a].c(),G(r[a],1),r[a].m(A.parentNode,A))}for($A(),a=n.length;a<r.length;a+=1)i(a);Ae()}},i(s){if(!t){for(let o=0;o<n.length;o+=1)G(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)W(r[o]);t=!1},d(s){Se(r,s),s&&D(A)}}}function Fd(e,A){let t,n,r;return n=new qh({props:{$$slots:{"row-body":[Rb],"row-header":[Nb]},$$scope:{ctx:A}}}),{key:e,first:null,c(){t=ke(),pA(n.$$.fragment),this.first=t},m(i,s){K(i,t,s),gA(n,i,s),r=!0},p(i,s){A=i;const o={};s&268435462&&(o.$$scope={dirty:s,ctx:A}),n.$set(o)},i(i){r||(G(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&D(t),BA(n,i)}}}function Pb(e){let A=[],t=new Mb,n,r,i=e[1];const s=o=>o[18].id;for(let o=0;o<i.length;o+=1){let a=vd(e,i,o),l=s(a);t.set(l,A[o]=Fd(l,a))}return{c(){for(let o=0;o<A.length;o+=1)A[o].c();n=ke()},m(o,a){for(let l=0;l<A.length;l+=1)A[l]&&A[l].m(o,a);K(o,n,a),r=!0},p(o,a){a&774&&(i=o[1],$A(),A=fr(A,a,s,1,o,i,t,n.parentNode,js,Fd,n,vd),Ae())},i(o){if(!r){for(let a=0;a<i.length;a+=1)G(A[a]);r=!0}},o(o){for(let a=0;a<A.length;a+=1)W(A[a]);r=!1},d(o){for(let a=0;a<A.length;a+=1)A[a].d(o);o&&D(n)}}}function Vb(e){let A,t,n,r,i,s,o,a,l,c=ai&&Tb(e);return t=new ld({props:{store:e[0],nbOfItems:e[3],pageLength:e[7]}}),r=new kb({props:{selectionStore:Xi}}),s=new eb({props:{$$slots:{default:[Pb]},$$scope:{ctx:e}}}),a=new ld({props:{store:e[0],nbOfItems:e[3],pageLength:e[7]}}),{c(){c&&c.c(),A=R(),pA(t.$$.fragment),n=R(),pA(r.$$.fragment),i=R(),pA(s.$$.fragment),o=R(),pA(a.$$.fragment)},m(f,u){c&&c.m(f,u),K(f,A,u),gA(t,f,u),K(f,n,u),gA(r,f,u),K(f,i,u),gA(s,f,u),K(f,o,u),gA(a,f,u),l=!0},p(f,[u]){ai&&c.p(f,u);const h={};u&1&&(h.store=f[0]),u&8&&(h.nbOfItems=f[3]),t.$set(h);const d={};u&268435462&&(d.$$scope={dirty:u,ctx:f}),s.$set(d);const g={};u&1&&(g.store=f[0]),u&8&&(g.nbOfItems=f[3]),a.$set(g)},i(f){l||(G(c),G(t.$$.fragment,f),G(r.$$.fragment,f),G(s.$$.fragment,f),G(a.$$.fragment,f),l=!0)},o(f){W(c),W(t.$$.fragment,f),W(r.$$.fragment,f),W(s.$$.fragment,f),W(a.$$.fragment,f),l=!1},d(f){c&&c.d(f),f&&D(A),BA(t,f),f&&D(n),BA(r,f),f&&D(i),BA(s,f),f&&D(o),BA(a,f)}}}function Gb(e,A,t){let n,r,i,s,{documentSetStore:o}=A;const{imageNodes:a}=o;FA(e,a,y=>t(12,r=y));let{clusterStore:l}=A;const{clusterNb:c,paginatedClusters:f,pageLength:u,validateCluster:h,newCluster:d,removeFromClusters:g}=l;FA(e,c,y=>t(3,s=y)),FA(e,f,y=>t(1,i=y));const B={create:{title:Y==="en"?"New cluster":"Nouveau cluster",desc:Y==="en"?"Create a new validated cluster from the selected regions":"Créer un nouveau cluster valide à partir des régions sélectionnées",icon:"fa-object-group",shortcut:"Shift + C",fct:d},remove:{title:Y==="en"?"Remove from cluster":"Retirer du cluster",desc:Y==="en"?"Remove the selected regions from their cluster":"Retirer les régions sélectionnées de leur cluster",icon:"fa-chain-broken",shortcut:"Shift + D",fct:g},validate:{title:Y==="en"?"Validate cluster":"Valider le cluster",desc:Y==="en"?"Set as exact match all the pairs of regions in the cluster":"Définir comme correspondance exacte toutes les paires de régions dans le cluster",icon:"fa-check",fct:h},validated:{title:Y==="en"?"Validated cluster":"Cluster valide",desc:Y==="en"?"All pairs of regions have be categorized as exact matches":"Toutes les paires de régions ont été catégorisées comme des correspondances exactes",icon:"fa-check"}},{validate:p,validated:Q,...F}=B,v=y=>p.fct(y);return e.$$set=y=>{"documentSetStore"in y&&t(11,o=y.documentSetStore),"clusterStore"in y&&t(0,l=y.clusterStore)},e.$$.update=()=>{e.$$.dirty&4098&&t(2,n=new Map(i.map(y=>[y.id,y.members.map(U=>({...r.get(U),clusterId:y.id}))])))},[l,i,n,s,a,c,f,u,p,Q,F,o,r,v]}class Xb extends PA{constructor(A){super(),RA(this,A,Gb,Vb,OA,{documentSetStore:11,clusterStore:0})}}function Jb(e,A){const n=DA(1),{visiblePairs:r,imageNodes:i}=e;$s(n,"p");function s(v){Ao(v,n,"p")}function o(v){if(v.length===0)return[];const y=new Map,U=T=>y.has(T)?(y.get(T)!==T&&y.set(T,U(y.get(T))),y.get(T)):(y.set(T,T),T),S=(T,x)=>{const k=U(T),M=U(x);k!==M&&y.set(M,k)},_=new Set;v.forEach(T=>{S(T.id_1,T.id_2),_.add(T.id_1),_.add(T.id_2)});const b=new Map;return _.forEach(T=>{const x=U(T);b.has(x)||b.set(x,[]),b.get(x).push(T)}),Array.from(b.values()).map(T=>{const x=T.length,k=x*(x-1)/2,M=new Set(T),E=v.filter(P=>M.has(P.id_1)&&M.has(P.id_2)).length;return{id:crypto.randomUUID(),members:T,size:x,fullyConnected:E===k}}).filter(T=>T.size>1).sort((T,x)=>x.size-T.size)}const a=pe(r,v=>v.length?o(v):[]),l=DA([]);a.subscribe(v=>{l.set(v)});const c=pe([l,n],([v,y])=>{const U=(y-1)*10,S=U+10;return v.slice(U,S)}),f=(v,y)=>{const U=be(i).get(v),S=be(i).get(y);return{img_1:v,img_2:y,regions_id_1:U==null?void 0:U.regionId,regions_id_2:S==null?void 0:S.regionId}},u=(v,y)=>(l.update(U=>U.map(S=>{if(!y[S.id])return S;const _=S.members.filter(b=>!v.has(b));return{...S,members:_,size:_.length}}).filter(S=>S.size>0)),!0),h=async v=>{const y=Array.isArray(v)?v:Object.keys(v),U=new Set(y),S={};be(l).forEach(b=>{const T=b.members.filter(x=>U.has(x));T.length>0&&(S[b.id]=T)});const _=Object.entries(S).flatMap(([b,T])=>{const x=be(l).find(M=>M.id===b);if(!x)return[];const k=x.members.filter(M=>!U.has(M));return T.flatMap(M=>k.map(E=>f(M,E)))});if(_.length===0)return u(U,S),!0;try{const b=await qs(()=>fetch(`${window.location.origin}/${wt}/uncategorize-pair-batch`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify({pairs:_})}));return b.ok?(u(U,S),!0):(console.log(b),await Re(Y==="en"?"Batch un-categorization failed":"La dé-catégorisation par lot a échoué",Y==="en"?"Error":"Erreur"),!1)}catch(b){return await Re(b,Y==="en"?"Error":"Erreur"),!1}},d=async v=>{const y=v.flatMap((U,S)=>v.slice(S+1).map(_=>f(U,_)));try{const U=await qs(()=>fetch(`${window.location.origin}/${wt}/exact-match-batch`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify({pairs:y})}));return U.ok?!0:(console.log(U),await Re(Y==="en"?"Batch validation failed":"La validation par lot a échoué",Y==="en"?"Error":"Erreur"),!1)}catch(U){return await Re(U,Y==="en"?"Error":"Erreur"),console.error("Error:",U),!1}},g=async v=>{if(!ai)return await Re(Y==="en"?"You do not have permission to validate clusters":"Vous n'avez pas la permission, de valider les clusters.",Y==="en"?"Permission Denied":"Permission refusée"),!1;const y=await d(v.members);return y&&l.update(U=>U.map(S=>S.id===v.id?{...S,fullyConnected:!0}:S)),y},B=async v=>{if(v.length<2)return!1;const y=await d(v);return y&&l.update(U=>[{id:crypto.randomUUID(),members:v,size:v.length,fullyConnected:!0},...U].sort((_,b)=>b.size-_.size)),y},p=()=>Object.values(be(A).selected)[0]||{},Q=async()=>{if(!await Re(Y==="en"?"Do you want to create a cluster out of these images?":"Voulez-vous créer un cluster à partir de ces images ?",Y==="en"?"Confirm creation":"Confirmer la création",!0))return;const y=p(),U=Object.keys(y);return U.length<2?(await Re(Y==="en"?"Cluster creation requires at least 2 images":"La création d'un nouveau cluster nécessite a minima 2 images",Y==="en"?"Impossible creation":"Création impossible"),!1):!await h(U)||!await B(U)?!1:(A.empty(),!0)},F=async()=>{if(!await Re(Y==="en"?"Do you want to remove these images from their clusters?":"Voulez-vous supprimer ces images de leurs clusters ?",Y==="en"?"Confirm deletion":"Confirmer la suppression",!0))return;const y=p();return await h(Object.keys(y))?(A.empty(),!0):!1};return{imageClusters:a,interfaceClusters:l,clusterNb:pe(l,v=>v.length),validateCluster:g,removeFromClusters:F,newCluster:Q,paginatedClusters:c,handlePageUpdate:s,pageLength:10,currentPage:n}}function bd(e,A,t){const n=e.slice();return n[25]=A[t],n}function Wb(e){let A;return{c(){A=C("p"),A.textContent=`${Y==="en"?"Groups of images that share a similarity connection above the score threshold.":"Groupes d'images partageant une connexion de similarité au-dessus du seuil de score."}`},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function Yb(e){let A;return{c(){A=C("p"),A.textContent=`${Y==="en"?"Matrix showing aggregated similarity scores between documents. Click a cell to explore page-level similarities in a scatter plot interface.":"Matrice affichant les scores de similarité agrégés entre documents. Cliquez sur une cellule pour explorer les similarités entre paires de documents."}`},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function zb(e){let A;return{c(){A=C("p"),A.textContent=`${Y==="en"?"Network where each node is a document. Edge thickness reflects the cumulative similarity score between document pairs. Node size indicates the number of connections.":"Réseau où chaque nœud est un document. L'épaisseur des liens reflète le score de similarité cumulé entre paires de documents. La taille des nœuds indique le nombre de connexions."}`},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function jb(e){let A;return{c(){A=C("p"),A.textContent=`${Y==="en"?"Network where each node is an image region. Edges connect regions with similarity scores above the threshold. Node color indicates the source document.":"Réseau où chaque nœud est une région d'image. Les liens connectent les régions dont le score de similarité dépasse le seuil. La couleur indique le document source."}`},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function qb(e){let A;function t(i,s){if(i[23]==="img")return jb;if(i[23]==="doc")return zb;if(i[23]==="matrix")return Yb;if(i[23]==="clusters")return Wb}let n=t(e),r=n&&n(e);return{c(){A=C("div"),r&&r.c(),m(A,"slot","datavizInfo")},m(i,s){K(i,A,s),r&&r.m(A,null)},p(i,s){n===(n=t(i))&&r?r.p(i,s):(r&&r.d(1),r=n&&n(i),r&&(r.c(),r.m(A,null)))},d(i){i&&D(A),r&&r.d()}}}function Zb(e){let A,t,n;return t=new Hp({props:{docSet:e[0],documentSetStore:e[4],clusterStore:e[8],$$slots:{datavizInfo:[qb]},$$scope:{ctx:e}}}),{c(){A=C("div"),pA(t.$$.fragment),m(A,"slot","sidebar")},m(r,i){K(r,A,i),gA(t,A,null),n=!0},p(r,i){const s={};i&1&&(s.docSet=r[0]),i&276824064&&(s.$$scope={dirty:i,ctx:r}),t.$set(s)},i(r){n||(G(t.$$.fragment,r),n=!0)},o(r){W(t.$$.fragment,r),n=!1},d(r){r&&D(A),BA(t)}}}function Ed(e){let A,t,n,r,i,s,o,a=e[25].title+"",l,c;return{c(){A=C("div"),t=C("figure"),n=C("img"),i=R(),s=C("div"),o=C("span"),l=sA(a),c=R(),Ne(n.src,r=st(e[25].img,e[25].xywh,"96,"))||m(n,"src",r),m(n,"alt","Extracted region"),m(o,"class","overlay-desc"),m(s,"class","overlay is-center"),m(t,"class","image is-64x64 card"),m(A,"class","selection cell")},m(f,u){K(f,A,u),w(A,t),w(t,n),w(t,i),w(t,s),w(s,o),w(o,l),w(A,c)},p(f,u){u&2&&!Ne(n.src,r=st(f[25].img,f[25].xywh,"96,"))&&m(n,"src",r),u&2&&a!==(a=f[25].title+"")&&NA(l,a)},d(f){f&&D(A)}}}function $b(e){let A,t,n=Object.values(Object.values(e[1])[0]||{}),r=[];for(let i=0;i<n.length;i+=1)r[i]=Ed(bd(e,n,i));return{c(){A=C("div"),t=C("div");for(let i=0;i<r.length;i+=1)r[i].c();m(t,"class","grid is-gap-2"),m(A,"slot","content"),m(A,"class","fixed-grid has-6-cols")},m(i,s){K(i,A,s),w(A,t);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(t,null)},p(i,s){if(s&2){n=Object.values(Object.values(i[1])[0]||{});let o;for(o=0;o<n.length;o+=1){const a=bd(i,n,o);r[o]?r[o].p(a,s):(r[o]=Ed(a),r[o].c(),r[o].m(t,null))}for(;o<r.length;o+=1)r[o].d(1);r.length=n.length}},d(i){i&&D(A),Se(r,i)}}}function AE(e){let A,t,n,r={ctx:e,current:null,token:null,hasCatch:!1,pending:lE,then:nE,catch:tE,value:24,blocks:[,,,]};return zs(t=e[3],r),{c(){A=ke(),r.block.c()},m(i,s){K(i,A,s),r.block.m(i,r.anchor=s),r.mount=()=>A.parentNode,r.anchor=A,n=!0},p(i,s){e=i,r.ctx=e,s&8&&t!==(t=e[3])&&zs(t,r)||il(r,e,s)},i(i){n||(G(r.block),n=!0)},o(i){for(let s=0;s<3;s+=1){const o=r.blocks[s];W(o)}n=!1},d(i){i&&D(A),r.block.d(i),r.token=null,r=null}}}function eE(e){let A,t,n;return{c(){A=C("article"),t=C("div"),n=sA(e[2]),m(t,"class","message-body"),m(A,"class","message is-danger")},m(r,i){K(r,A,i),w(A,t),w(t,n)},p(r,i){i&4&&NA(n,r[2])},i:tA,o:tA,d(r){r&&D(A)}}}function tE(e){return{c:tA,m:tA,p:tA,i:tA,o:tA,d:tA}}function nE(e){let A,t,n,r;const i=[iE,rE],s=[];function o(a,l){return a[24]===0?0:1}return A=o(e),t=s[A]=i[A](e),{c(){t.c(),n=ke()},m(a,l){s[A].m(a,l),K(a,n,l),r=!0},p(a,l){let c=A;A=o(a),A===c?s[A].p(a,l):($A(),W(s[c],1,1,()=>{s[c]=null}),Ae(),t=s[A],t?t.p(a,l):(t=s[A]=i[A](a),t.c()),G(t,1),t.m(n.parentNode,n))},i(a){r||(G(t),r=!0)},o(a){W(t),r=!1},d(a){s[A].d(a),a&&D(n)}}}function rE(e){let A,t,n=e[9][e[23]]+"",r,i,s,o,a;const l=[aE,oE,sE],c=[];function f(u,h){return u[23]==="img"||u[23]==="doc"?0:u[23]==="sim"?1:u[23]==="mat"?2:-1}return~(s=f(e))&&(o=c[s]=l[s](e)),{c(){A=C("div"),t=C("h2"),r=sA(n),i=R(),o&&o.c(),m(t,"class","title is-3 has-text-link")},m(u,h){K(u,A,h),w(A,t),w(t,r),w(A,i),~s&&c[s].m(A,null),a=!0},p(u,h){(!a||h&8388608)&&n!==(n=u[9][u[23]]+"")&&NA(r,n);let d=s;s=f(u),s===d?~s&&c[s].p(u,h):(o&&($A(),W(c[d],1,1,()=>{c[d]=null}),Ae()),~s?(o=c[s],o?o.p(u,h):(o=c[s]=l[s](u),o.c()),G(o,1),o.m(A,null)):o=null)},i(u){a||(G(o),a=!0)},o(u){W(o),a=!1},d(u){u&&D(A),~s&&c[s].d()}}}function iE(e){let A;return{c(){A=C("article"),A.innerHTML=`<div class="message-body">No document pairs found for this configuration.
                            Please adjust your selection criteria in the sidebar to include more documents or
                            categories.</div>`,m(A,"class","message is-warning")},m(t,n){K(t,A,n)},p:tA,i:tA,o:tA,d(t){t&&D(A)}}}function sE(e){let A,t;return A=new YF({props:{documentSetStore:e[4]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p:tA,i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function oE(e){let A,t;return A=new Xb({props:{documentSetStore:e[4],clusterStore:e[8]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p:tA,i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function aE(e){let A,t;return A=new i1({props:{documentSetStore:e[4],type:e[23]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,r){const i={};r&8388608&&(i.type=n[23]),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function lE(e){let A;return{c(){A=C("progress"),A.textContent="Loading...",m(A,"class","progress is-link"),m(A,"max","100")},m(t,n){K(t,A,n)},p:tA,i:tA,o:tA,d(t){t&&D(A)}}}function cE(e){let A,t,n,r,i,s;t=new BB({props:{$$slots:{content:[$b]},$$scope:{ctx:e}}});const o=[eE,AE],a=[];function l(c,f){return c[2]?0:1}return r=l(e),i=a[r]=o[r](e),{c(){A=C("div"),pA(t.$$.fragment),n=R(),i.c(),m(A,"slot","content")},m(c,f){K(c,A,f),gA(t,A,null),w(A,n),a[r].m(A,null),s=!0},p(c,f){const u={};f&268435458&&(u.$$scope={dirty:f,ctx:c}),t.$set(u);let h=r;r=l(c),r===h?a[r].p(c,f):($A(),W(a[h],1,1,()=>{a[h]=null}),Ae(),i=a[r],i?i.p(c,f):(i=a[r]=o[r](c),i.c()),G(i,1),i.m(A,null))},i(c){s||(G(t.$$.fragment,c),G(i),s=!0)},o(c){W(t.$$.fragment,c),W(i),s=!1},d(c){c&&D(A),BA(t),a[r].d()}}}function uE(e){let A,t;return A=new UB({props:{tabList:e[9],$$slots:{content:[cE,({activeTab:n})=>({23:n}),({activeTab:n})=>n?8388608:0],sidebar:[Zb,({activeTab:n})=>({23:n}),({activeTab:n})=>n?8388608:0]},$$scope:{ctx:e}}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,[r]){const i={};r&276824079&&(i.$$scope={dirty:r,ctx:n}),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function fE(e,A,t){var T;let n,r,i,{docSet:s}=A;const o=ZF(s.id),{error:a,fetchPairs:l,selectedRegions:c,selectedCategories:f,threshold:u,topK:h,mutualTopK:d,scoreMode:g}=o;FA(e,a,x=>t(2,r=x)),FA(e,l,x=>t(3,i=x));let B,p,Q,F,v,y;gn(()=>{B=Nn(c,"regions","set"),p=Nn(f,"categories","array",[1]),Q=Nn(u,"threshold","number"),F=Nn(h,"topk","number"),v=Nn(d,"mutual","boolean"),y=Nn(g,"mode","string");const x=c.subscribe(B),k=f.subscribe(p),M=u.subscribe(Q),E=h.subscribe(F),P=d.subscribe(v),I=g.subscribe(y);return()=>{x(),k(),M(),E(),P(),I()}});const{selected:U}=Xi;FA(e,U,x=>t(1,n=x));const S=Jb(o,Xi),_={sim:Y==="en"?"Copy Clusters":"Groupe de copies",mat:Y==="en"?"Document Matrix":"Matrice de documents",img:Y==="en"?"Image Network":"Réseau d'images",doc:Y==="en"?"Document Network":"Réseau de documents"},b=((T=s==null?void 0:s.selection)==null?void 0:T.selected)||{Witness:{},Series:{},Work:{}};return Mn("selectedDocuments",b),e.$$set=x=>{"docSet"in x&&t(0,s=x.docSet)},[s,n,r,i,o,a,l,U,S,_]}class hE extends PA{constructor(A){super(),RA(this,A,fE,uE,OA,{docSet:0})}}new hE({target:document.getElementById("document-set"),props:{docSet}});const LH="";function dE(e){let A,t,n;return t=new Yn({props:{item:e[0],height:"full"}}),{c(){A=C("div"),pA(t.$$.fragment),m(A,"class","img-wrapper svelte-1duc3w1")},m(r,i){K(r,A,i),gA(t,A,null),n=!0},p(r,[i]){const s={};i&1&&(s.item=r[0]),t.$set(s)},i(r){n||(G(t.$$.fragment,r),n=!0)},o(r){W(t.$$.fragment,r),n=!1},d(r){r&&D(A),BA(t)}}}function gE(e,A,t){let{mainImgItem:n}=A;return e.$$set=r=>{"mainImgItem"in r&&t(0,n=r.mainImgItem)},[n]}class Id extends PA{constructor(A){super(),RA(this,A,gE,dE,OA,{mainImgItem:0})}}const kH="";function BE(e){return{c:tA,m:tA,p:tA,d:tA}}function pE(e){let A,t=`${e[5][0]}%`,n=`${e[5][1]}%`,r=`${e[5][2]}%`,i=`${e[5][3]}%`;return{c(){A=C("div"),m(A,"class","modal-context-bbox svelte-zgr10j"),m(A,"aria-description",Y==="fr"?"Position de la région extraite sur la page":"Position of the extracted region on the page"),TA(A,"left",t),TA(A,"top",n),TA(A,"width",r),TA(A,"height",i)},m(s,o){K(s,A,o)},p:tA,d(s){s&&D(A)}}}function mE(e){return{c:tA,m:tA,p:tA,d:tA}}function wE(e){let A,t,n,r,i,s={ctx:e,current:null,token:null,hasCatch:!1,pending:mE,then:pE,catch:BE,value:5};return zs(e[1],s),{c(){A=C("div"),t=C("div"),n=C("img"),i=R(),s.block.c(),m(n,"class","card modal-context-full-page svelte-zgr10j"),Ne(n.src,r=e[0])||m(n,"src",r),m(n,"alt",Y==="fr"?"Vue de la page d'où la région est extraite":"View of the page the region is extracted from"),m(t,"class","modal-context-wrapper svelte-zgr10j"),m(A,"class","modal-context-outer pb-4 svelte-zgr10j")},m(o,a){K(o,A,a),w(A,t),w(t,n),w(t,i),s.block.m(t,s.anchor=null),s.mount=()=>t,s.anchor=null},p(o,[a]){e=o,il(s,e,a)},i:tA,o:tA,d(o){o&&D(A),s.block.d(),s.token=null,s=null}}}function vE(e,A,t){let{mainImgItem:n}=A;const r=st(n.img,"full","full"),i=sB(n.img),s=n.xywh.map(Number),o=fetch(i).then(a=>a.json()).then(a=>[s[0]/a.width,s[1]/a.height,s[2]/a.width,s[3]/a.height].map(l=>l*100));return e.$$set=a=>{"mainImgItem"in a&&t(2,n=a.mainImgItem)},[r,o,n]}class CE extends PA{constructor(A){super(),RA(this,A,vE,wE,OA,{mainImgItem:2})}}const MH="";function Hd(e){let A,t;return{c(){A=new kg(!1),t=ke(),A.a=t},m(n,r){A.m(e[5],n,r),K(n,t,r)},p(n,r){r&32&&A.p(n[5])},d(n){n&&D(t),n&&A.d()}}}function Sd(e){let A,t,n;var r=e[9];function i(s){return{props:{mainImgItem:s[15],compareImgItem:s[13],svgItem:s[1]}}}return r&&(A=Ln(r,i(e))),{c(){A&&pA(A.$$.fragment),t=ke()},m(s,o){A&&gA(A,s,o),K(s,t,o),n=!0},p(s,o){const a={};if(o&2&&(a.svgItem=s[1]),o&512&&r!==(r=s[9])){if(A){$A();const l=A;W(l.$$.fragment,1,0,()=>{BA(l,1)}),Ae()}r?(A=Ln(r,i(s)),pA(A.$$.fragment),G(A.$$.fragment,1),gA(A,t.parentNode,t)):A=null}else r&&A.$set(a)},i(s){n||(A&&G(A.$$.fragment,s),n=!0)},o(s){A&&W(A.$$.fragment,s),n=!1},d(s){s&&D(t),A&&BA(A,s)}}}function QE(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F=!e[6]&&e[5]&&Hd(e),v=e[9]&&Sd(e);return{c(){A=C("div"),t=C("figure"),n=C("div"),F&&F.c(),r=R(),i=C("img"),o=R(),a=C("div"),l=C("a"),c=C("i"),f=R(),u=C("span"),u.textContent=`${Y==="en"?"Download SVG":"Télécharger le SVG"}`,h=R(),v&&v.c(),m(n,"class","svg-container svelte-78b4ls"),m(i,"class","region-img svelte-78b4ls"),Ne(i.src,s=e[12])||m(i,"src",s),m(i,"alt","Extracted region"),m(t,"class","image card region-image svelte-78b4ls"),TA(t,"width",e[3]?"50%":`${e[2]}px`),TA(t,"aspect-ratio",e[7]?e[7].split(" ")[2]/e[7].split(" ")[3]:1),m(c,"class","fa-solid fa-download"),m(u,"class","tooltip svelte-78b4ls"),m(l,"class","button tag svelte-78b4ls"),m(l,"href",e[8]),m(l,"download",e[1]),m(a,"class","region-btn ml-1 svelte-78b4ls"),m(A,"class",d="region is-center "+(e[4]&&e[10](e[15])?"checked":"")+" svelte-78b4ls")},m(y,U){K(y,A,U),w(A,t),w(t,n),F&&F.m(n,null),w(t,r),w(t,i),w(A,o),w(A,a),w(a,l),w(l,c),w(l,f),w(l,u),w(a,h),v&&v.m(a,null),B=!0,p||(Q=[dA(t,"click",e[17]),dA(t,"keyup",null),dA(t,"mouseenter",e[18]),dA(t,"mouseleave",e[19])],p=!0)},p(y,[U]){e=y,!e[6]&&e[5]?F?F.p(e,U):(F=Hd(e),F.c(),F.m(n,null)):F&&(F.d(1),F=null),(!B||U&12)&&TA(t,"width",e[3]?"50%":`${e[2]}px`),(!B||U&128)&&TA(t,"aspect-ratio",e[7]?e[7].split(" ")[2]/e[7].split(" ")[3]:1),(!B||U&256)&&m(l,"href",e[8]),(!B||U&2)&&m(l,"download",e[1]),e[9]?v?(v.p(e,U),U&512&&G(v,1)):(v=Sd(e),v.c(),G(v,1),v.m(a,null)):v&&($A(),W(v,1,1,()=>{v=null}),Ae()),(!B||U&1040&&d!==(d="region is-center "+(e[4]&&e[10](e[15])?"checked":"")+" svelte-78b4ls"))&&m(A,"class",d)},i(y){B||(G(v),$e(()=>{B&&(g||(g=Ft(A,Zt,{duration:e[14]},!0)),g.run(1))}),B=!0)},o(y){W(v),g||(g=Ft(A,Zt,{duration:e[14]},!1)),g.run(0),B=!1},d(y){y&&D(A),F&&F.d(),v&&v.d(),y&&g&&g.end(),p=!1,Ce(Q)}}}function yE(e,A,t){let n,{selectionStore:r}=A;r||(r=du);const{isSelected:i}=r;FA(e,i,k=>t(10,n=k));let{toggleSelection:s=r.toggle}=A,{svgPath:o}=A,{width:a=200}=A,{fullWidth:l=!1}=A,{selectable:c=!0}=A;const[f,u,h,d]=o.replace(".svg","").split("_"),g=st(`${f}_${u}_${h}`,d,`${a},`);let B=!1,p="",Q="",F="";const v=Je("qImgMetadata")||void 0,y=Je("isInModal")||!1,U=y?0:500;let S;y||Gi(()=>Promise.resolve().then(()=>Td),void 0).then(k=>t(9,S=k.default));let _={ref:o,img:`${f}_${u}_${h}`,xywh:d};Bn(()=>{F&&URL.revokeObjectURL(F)}),gn(async()=>{const M=await(await fetch(`${qg}svg/${o}`)).text(),P=new DOMParser().parseFromString(M,"image/svg+xml"),I=P.querySelector("svg");t(7,Q=I.getAttribute("viewBox")||`0 0 ${I.getAttribute("width")} ${I.getAttribute("height")}`),P.querySelectorAll("image").forEach(X=>X.remove()),I.setAttribute("viewBox",Q),I.removeAttribute("width"),I.removeAttribute("height"),t(5,p=new XMLSerializer().serializeToString(P.documentElement))});const b=()=>c?s(_):null,T=()=>t(6,B=!0),x=()=>t(6,B=!1);return e.$$set=k=>{"selectionStore"in k&&t(16,r=k.selectionStore),"toggleSelection"in k&&t(0,s=k.toggleSelection),"svgPath"in k&&t(1,o=k.svgPath),"width"in k&&t(2,a=k.width),"fullWidth"in k&&t(3,l=k.fullWidth),"selectable"in k&&t(4,c=k.selectable)},e.$$.update=()=>{if(e.$$.dirty&32&&p){const k=new Blob([p],{type:"image/svg+xml"});t(8,F=URL.createObjectURL(k))}},[s,o,a,l,c,p,B,Q,F,S,n,i,g,v,U,_,r,b,T,x]}class _E extends PA{constructor(A){super(),RA(this,A,yE,QE,OA,{selectionStore:16,toggleSelection:0,svgPath:1,width:2,fullWidth:3,selectable:4})}}function UE(e){let A,t;return A=new _E({props:{svgPath:e[0],fullWidth:!0}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,[r]){const i={};r&1&&(i.svgPath=n[0]),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function FE(e,A,t){let{svgItem:n}=A;return e.$$set=r=>{"svgItem"in r&&t(0,n=r.svgItem)},[n]}class bE extends PA{constructor(A){super(),RA(this,A,FE,UE,OA,{svgItem:0})}}const TH="";function xd(e,A,t){const n=e.slice();return n[21]=A[t].id,n[22]=A[t].label,n}function Ld(e){let A,t,n;return{c(){A=C("button"),A.innerHTML='<span class="icon"><i class="fas fa-chevron-left"></i></span>',m(A,"class","nav-btn nav-left svelte-1edvdg1")},m(r,i){K(r,A,i),t||(n=dA(A,"click",e[15]),t=!0)},p:tA,d(r){r&&D(A),t=!1,n()}}}function kd(e){let A,t,n=e[22]+"",r,i,s,o,a;function l(){return e[16](e[21])}return{c(){A=C("li"),t=C("a"),r=sA(n),i=R(),m(t,"href",""),m(A,"class",s=e[21]===e[2]?"is-active":"")},m(c,f){K(c,A,f),w(A,t),w(t,r),w(A,i),o||(a=dA(t,"click",Mt(l)),o=!0)},p(c,f){e=c,f&4&&s!==(s=e[21]===e[2]?"is-active":"")&&m(A,"class",s)},d(c){c&&D(A),o=!1,a()}}}function Md(e){let A,t,n;return{c(){A=C("button"),A.innerHTML='<span class="icon"><i class="fas fa-chevron-right"></i></span>',m(A,"class","nav-btn nav-right svelte-1edvdg1")},m(r,i){K(r,A,i),t||(n=dA(A,"click",e[17]),t=!0)},p:tA,d(r){r&&D(A),t=!1,n()}}}function EE(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q=e[0]&&Ld(e),F=e[5],v=[];for(let b=0;b<F.length;b+=1)v[b]=kd(xd(e,F,b));const y=[e[3][e[2]]||{}];var U=e[1][e[2]]||null;function S(b){let T={};for(let x=0;x<y.length;x+=1)T=Ya(T,y[x]);return{props:T}}U&&(f=Ln(U,S()));let _=e[0]&&Md(e);return{c(){A=C("div"),t=C("div"),n=R(),r=C("div"),Q&&Q.c(),i=R(),s=C("div"),o=C("div"),a=C("ul");for(let b=0;b<v.length;b+=1)v[b].c();l=R(),c=C("div"),f&&pA(f.$$.fragment),u=R(),_&&_.c(),h=R(),d=C("button"),m(t,"class","modal-background"),m(o,"class","tabs is-centered"),TA(o,"height","fit-content"),m(c,"class","ml-4 mr-4 modal-main-wrapper svelte-1edvdg1"),ZA(c,"pb-4",e[2]==="main"),m(s,"class","modal-inner svelte-1edvdg1"),m(r,"class","modal-content svelte-1edvdg1"),m(d,"class","modal-close is-large"),m(d,"aria-label","close"),m(A,"id","region-modal-wrapper"),m(A,"class","modal is-active")},m(b,T){K(b,A,T),w(A,t),w(A,n),w(A,r),Q&&Q.m(r,null),w(r,i),w(r,s),w(s,o),w(o,a);for(let x=0;x<v.length;x+=1)v[x]&&v[x].m(a,null);w(s,l),w(s,c),f&&gA(f,c,null),w(r,u),_&&_.m(r,null),w(A,h),w(A,d),g=!0,B||(p=[dA(t,"click",e[8]),dA(t,"keyup",e[7]),dA(d,"click",e[8])],B=!0)},p(b,[T]){if(b[0]?Q?Q.p(b,T):(Q=Ld(b),Q.c(),Q.m(r,i)):Q&&(Q.d(1),Q=null),T&100){F=b[5];let k;for(k=0;k<F.length;k+=1){const M=xd(b,F,k);v[k]?v[k].p(M,T):(v[k]=kd(M),v[k].c(),v[k].m(a,null))}for(;k<v.length;k+=1)v[k].d(1);v.length=F.length}const x=T&12?Xg(y,[Jg(b[3][b[2]]||{})]):{};if(T&6&&U!==(U=b[1][b[2]]||null)){if(f){$A();const k=f;W(k.$$.fragment,1,0,()=>{BA(k,1)}),Ae()}U?(f=Ln(U,S()),pA(f.$$.fragment),G(f.$$.fragment,1),gA(f,c,null)):f=null}else U&&f.$set(x);(!g||T&4)&&ZA(c,"pb-4",b[2]==="main"),b[0]?_?_.p(b,T):(_=Md(b),_.c(),_.m(r,null)):_&&(_.d(1),_=null)},i(b){g||(f&&G(f.$$.fragment,b),g=!0)},o(b){f&&W(f.$$.fragment,b),g=!1},d(b){b&&D(A),Q&&Q.d(),Se(v,b),f&&BA(f),_&&_.d(),B=!1,Ce(p)}}}function IE(e,A,t){let n,r,i,s,{mainImgItem:o}=A,{compareImgItem:a}=A,{svgItem:l}=A,{items:c=null}=A,{initialIndex:f=null}=A;const u=_=>{n&&t(14,r=(r+_+c.length)%c.length)},h=ii(),d=a?["main","page","similarity","expansion"]:l?["overlay"]:["main","page"],g={expansion:{fr:"Expansion de requête",en:"Query expansion"},similarity:{fr:"Comparaison",en:"Comparison"},page:{fr:"Vue de la page",en:"Page view"},main:{fr:"Vue principale",en:"Main view"},overlay:{fr:"Vue superposée",en:"Overlay view"}},B=d.map(_=>{var b;return{id:_,label:((b=g[_])==null?void 0:b[Y])??"Main view"}}),p={main:Id,page:CE,overlay:bE};a&&Promise.all([Gi(()=>Promise.resolve().then(()=>H2),void 0).then(_=>_.default),Gi(()=>Promise.resolve().then(()=>nH),void 0).then(_=>_.default)]).then(([_,b])=>{const T=Object.keys(p);d.filter(x=>!T.includes(x)).map(x=>t(1,p[x]=x==="expansion"?b:x==="similarity"?_:Id,p))});const Q=_=>t(2,s=_),F=_=>{_.key==="Escape"?h("closeModal"):_.key==="ArrowLeft"?u(-1):_.key==="ArrowRight"&&u(1)},v=()=>h("closeModal");gn(()=>{document.addEventListener("keyup",F)}),Bn(()=>{document.removeEventListener("keydown",F)});const y=()=>u(-1),U=_=>Q(_),S=()=>u(1);return e.$$set=_=>{"mainImgItem"in _&&t(9,o=_.mainImgItem),"compareImgItem"in _&&t(10,a=_.compareImgItem),"svgItem"in _&&t(11,l=_.svgItem),"items"in _&&t(12,c=_.items),"initialIndex"in _&&t(13,f=_.initialIndex)},e.$$.update=()=>{e.$$.dirty&4096&&t(0,n=(c==null?void 0:c.length)>1),e.$$.dirty&8192&&t(14,r=f??0),e.$$.dirty&20481&&n&&c[r]&&t(9,o=new Bu(c[r])),e.$$.dirty&3584&&t(3,i={main:{mainImgItem:o},page:{mainImgItem:o},similarity:{mainImgItem:o,compareImgItem:a},overlay:{svgItem:l},expansion:{mainImgItem:o,compareImgItem:a}})},t(2,s=d[0]),[n,p,s,i,u,B,Q,F,v,o,a,l,c,f,r,y,U,S]}class HE extends PA{constructor(A){super(),RA(this,A,IE,EE,OA,{mainImgItem:9,compareImgItem:10,svgItem:11,items:12,initialIndex:13})}}const DH="";function SE(e){let A,t,n,r,i,s,o,a,l,c,f;return a=new Bi({props:{targetHtmlId:e[0],tooltipText:e[1]}}),{c(){A=C("div"),t=C("button"),n=dt("svg"),r=dt("path"),i=dt("path"),s=dt("path"),o=R(),pA(a.$$.fragment),m(r,"d","M53.6443 14.25C47.7042 5.33 37.7293 0 26.9801 0C16.2206 0 6.24576 5.33 0.305653 14.25L0 14.71L0.305653 15.17C6.24576 24.09 16.2206 29.42 26.9801 29.42C37.7293 29.42 47.7042 24.09 53.6443 15.16L53.95 14.71L53.6443 14.25ZM3.25025 14.71C7.63146 8.69001 14.0606 4.65 21.2641 3.22C20.0619 3.83 18.9411 4.62 17.963 5.59C15.5176 8.02 14.1625 11.25 14.1625 14.67C14.1625 18.11 15.5176 21.34 17.963 23.76C19.0124 24.79 20.1943 25.61 21.4781 26.23C14.1829 24.85 7.6824 20.78 3.25025 14.71ZM27.1125 22.64C22.7008 22.64 19.1041 19.08 19.1041 14.7C19.1041 12.59 19.9396 10.6 21.4475 9.10001C22.9555 7.60001 24.9729 6.77 27.1125 6.77C29.2522 6.77 31.2594 7.60001 32.7775 9.10001C34.2855 10.6 35.121 12.59 35.121 14.7C35.121 16.82 34.2855 18.82 32.7775 20.32C31.2594 21.81 29.242 22.64 27.1125 22.64ZM32.9915 26.14C34.204 25.53 35.3146 24.74 36.3029 23.77C38.7482 21.34 40.0932 18.11 40.0932 14.68C40.0932 9.75 37.281 5.47001 33.1647 3.32001C40.1747 4.81001 46.4102 8.83001 50.6896 14.71C46.3797 20.64 40.0728 24.67 32.9915 26.14Z"),m(r,"fill","black"),m(r,"class","svelte-19wutme"),m(i,"d","M26.9804 25.98C33.3222 25.98 38.4633 20.9343 38.4633 14.71C38.4633 8.48576 33.3222 3.44 26.9804 3.44C20.6386 3.44 15.4976 8.48576 15.4976 14.71C15.4976 20.9343 20.6386 25.98 26.9804 25.98Z"),m(i,"fill","black"),m(i,"class","svelte-19wutme"),m(s,"d","M17.9529 23.85L36.2928 5.85001"),m(s,"stroke","black"),m(s,"stroke-width","3"),m(s,"stroke-miterlimit","10"),m(s,"class","svelte-19wutme"),m(n,"width","54"),m(n,"height","30"),m(n,"viewBox","0 0 54 30"),m(n,"fill","none"),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"class","svelte-19wutme"),m(t,"class","button tag svelte-19wutme"),m(t,"title",e[1]),m(A,"id",e[0])},m(u,h){K(u,A,h),w(A,t),w(t,n),w(n,r),w(n,i),w(n,s),w(t,o),gA(a,t,null),l=!0,c||(f=dA(t,"click",e[2]),c=!0)},p:tA,i(u){l||(G(a.$$.fragment,u),l=!0)},o(u){W(a.$$.fragment,u),l=!1},d(u){u&&D(A),BA(a),c=!1,f()}}}function xE(e,A,t){let n,r,{mainImgItem:i}=A,{compareImgItem:s=void 0}=A,{items:o=null}=A,{index:a=null}=A,{svgItem:l}=A;Mn("isInModal",!0);const c=`modal-opener-${window.crypto.randomUUID()}`,f=Y==="fr"?"Vue détaillée":"Detailed view",u=(g,B)=>(g?(B=new HE({target:document.querySelector("body"),props:{mainImgItem:i,compareImgItem:s,svgItem:l,items:o,initialIndex:a}}),B.$on("closeModal",d)):!g&&r!=null&&B.$destroy(),B),h=()=>t(8,n=!n),d=()=>t(8,n=!1);return e.$$set=g=>{"mainImgItem"in g&&t(3,i=g.mainImgItem),"compareImgItem"in g&&t(4,s=g.compareImgItem),"items"in g&&t(5,o=g.items),"index"in g&&t(6,a=g.index),"svgItem"in g&&t(7,l=g.svgItem)},e.$$.update=()=>{e.$$.dirty&768&&t(9,r=u(n,r))},t(8,n=!1),[c,f,h,i,s,o,a,l,n,r]}class LE extends PA{constructor(A){super(),RA(this,A,xE,SE,OA,{mainImgItem:3,compareImgItem:4,items:5,index:6,svgItem:7})}}const Td=Object.freeze(Object.defineProperty({__proto__:null,default:LE},Symbol.toStringTag,{value:"Module"})),KH="";function kE(e){let A,t,n,r,i,s,o;return{c(){A=C("button"),t=C("span"),t.innerHTML='<span class="switch-control svelte-g5g8im"><span class="switch-spot"></span></span>',n=R(),r=C("span"),i=sA(e[0]),m(t,"class","switch mr-2 svelte-g5g8im"),m(r,"class","label svelte-g5g8im"),m(A,"id",e[3]),m(A,"name",e[3]),m(A,"class","input-checkbox-wrapper is-flex is-align-items-center-is-justify-content-center p-2 pl-3 pr-3 svelte-g5g8im"),m(A,"aria-label",e[0]),ZA(A,"is-checked",e[2]),ZA(A,"is-clickable",e[1]),ZA(A,"button",e[1])},m(a,l){K(a,A,l),w(A,t),w(A,n),w(A,r),w(r,i),s||(o=dA(A,"click",Mt(e[4])),s=!0)},p(a,[l]){l&1&&NA(i,a[0]),l&1&&m(A,"aria-label",a[0]),l&4&&ZA(A,"is-checked",a[2]),l&2&&ZA(A,"is-clickable",a[1]),l&2&&ZA(A,"button",a[1])},i:tA,o:tA,d(a){a&&D(A),s=!1,o()}}}function ME(e,A,t){let n,{toggleLabel:r}=A,{start:i=!1}=A,{buttonDisplay:s=!1}=A;const o=`input-toggle-${window.crypto.randomUUID()}`,a=ii(),l=Je("resetTrigger")||void 0;l==null||l.subscribe(f);const c=()=>t(2,n=!n);function f(){t(2,n=i)}return e.$$set=u=>{"toggleLabel"in u&&t(0,r=u.toggleLabel),"start"in u&&t(5,i=u.start),"buttonDisplay"in u&&t(1,s=u.buttonDisplay)},e.$$.update=()=>{e.$$.dirty&32&&t(2,n=i),e.$$.dirty&4&&a("updateChecked",n)},[r,s,n,o,c,i]}class TE extends PA{constructor(A){super(),RA(this,A,ME,kE,OA,{toggleLabel:0,start:5,buttonDisplay:1})}}/*! choices.js v11.1.0 | © 2025 Josh Johnson | https://github.com/jshjohnson/Choices#readme */var Ma=function(e,A){return Ma=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])},Ma(e,A)};function Dd(e,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");Ma(e,A);function t(){this.constructor=e}e.prototype=A===null?Object.create(A):(t.prototype=A.prototype,new t)}var tt=function(){return tt=Object.assign||function(A){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(A[i]=t[i])}return A},tt.apply(this,arguments)};function DE(e,A,t){if(t||arguments.length===2)for(var n=0,r=A.length,i;n<r;n++)(i||!(n in A))&&(i||(i=Array.prototype.slice.call(A,0,n)),i[n]=A[n]);return e.concat(i||Array.prototype.slice.call(A))}typeof SuppressedError=="function"&&SuppressedError;var Fe={ADD_CHOICE:"ADD_CHOICE",REMOVE_CHOICE:"REMOVE_CHOICE",FILTER_CHOICES:"FILTER_CHOICES",ACTIVATE_CHOICES:"ACTIVATE_CHOICES",CLEAR_CHOICES:"CLEAR_CHOICES",ADD_GROUP:"ADD_GROUP",ADD_ITEM:"ADD_ITEM",REMOVE_ITEM:"REMOVE_ITEM",HIGHLIGHT_ITEM:"HIGHLIGHT_ITEM"},nt={showDropdown:"showDropdown",hideDropdown:"hideDropdown",change:"change",choice:"choice",search:"search",addItem:"addItem",removeItem:"removeItem",highlightItem:"highlightItem",highlightChoice:"highlightChoice",unhighlightItem:"unhighlightItem"},Xe={TAB_KEY:9,SHIFT_KEY:16,BACK_KEY:46,DELETE_KEY:8,ENTER_KEY:13,A_KEY:65,ESC_KEY:27,UP_KEY:38,DOWN_KEY:40,PAGE_UP_KEY:33,PAGE_DOWN_KEY:34},KE=["fuseOptions","classNames"],fn={Text:"text",SelectOne:"select-one",SelectMultiple:"select-multiple"},Kd=function(e){return{type:Fe.ADD_CHOICE,choice:e}},OE=function(e){return{type:Fe.REMOVE_CHOICE,choice:e}},NE=function(e){return{type:Fe.FILTER_CHOICES,results:e}},RE=function(e){return{type:Fe.ACTIVATE_CHOICES,active:e}},PE=function(e){return{type:Fe.ADD_GROUP,group:e}},Od=function(e){return{type:Fe.ADD_ITEM,item:e}},Nd=function(e){return{type:Fe.REMOVE_ITEM,item:e}},Os=function(e,A){return{type:Fe.HIGHLIGHT_ITEM,item:e,highlighted:A}},VE=function(e,A){return Math.floor(Math.random()*(A-e)+e)},Rd=function(e){return Array.from({length:e},function(){return VE(0,36).toString(36)}).join("")},GE=function(e,A){var t=e.id||e.name&&"".concat(e.name,"-").concat(Rd(2))||Rd(4);return t=t.replace(/(:|\.|\[|\]|,)/g,""),t="".concat(A,"-").concat(t),t},XE=function(e,A,t){t===void 0&&(t=1);for(var n="".concat(t>0?"next":"previous","ElementSibling"),r=e[n];r;){if(r.matches(A))return r;r=r[n]}return null},JE=function(e,A,t){t===void 0&&(t=1);var n;return t>0?n=A.scrollTop+A.offsetHeight>=e.offsetTop+e.offsetHeight:n=e.offsetTop>=A.scrollTop,n},Ns=function(e){if(typeof e!="string"){if(e==null)return"";if(typeof e=="object"){if("raw"in e)return Ns(e.raw);if("trusted"in e)return e.trusted}return e}return e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;")},WE=function(){var e=document.createElement("div");return function(A){e.innerHTML=A.trim();for(var t=e.children[0];e.firstChild;)e.removeChild(e.firstChild);return t}}(),zr=function(e,A){return typeof e=="function"?e(Ns(A),A):e},Pd=function(e){return typeof e=="function"?e():e},bn=function(e){if(typeof e=="string")return e;if(typeof e=="object"){if("trusted"in e)return e.trusted;if("raw"in e)return e.raw}return""},Vd=function(e){if(typeof e=="string")return e;if(typeof e=="object"){if("escaped"in e)return e.escaped;if("trusted"in e)return e.trusted}return""},Ta=function(e,A){return e?Vd(A):Ns(A)},Xt=function(e,A,t){e.innerHTML=Ta(A,t)},YE=function(e,A){var t=e.value,n=e.label,r=n===void 0?t:n,i=A.value,s=A.label,o=s===void 0?i:s;return bn(r).localeCompare(bn(o),[],{sensitivity:"base",ignorePunctuation:!0,numeric:!0})},zE=function(e,A){return e.rank-A.rank},jE=function(e,A,t){t===void 0&&(t=null);var n=new CustomEvent(A,{detail:t,bubbles:!0,cancelable:!0});return e.dispatchEvent(n)},qE=function(e,A){var t=Object.keys(e).sort(),n=Object.keys(A).sort();return t.filter(function(r){return n.indexOf(r)<0})},Rs=function(e){return Array.isArray(e)?e:[e]},jr=function(e){return e&&Array.isArray(e)?e.map(function(A){return".".concat(A)}).join(""):".".concat(e)},VA=function(e,A){var t;(t=e.classList).add.apply(t,Rs(A))},xt=function(e,A){var t;(t=e.classList).remove.apply(t,Rs(A))},ZE=function(e){if(typeof e<"u")try{return JSON.parse(e)}catch{return e}return{}},$E=function(e,A,t){var n=e.itemEl;n&&(xt(n,t),VA(n,A))},AI=function(){function e(A){var t=A.element,n=A.type,r=A.classNames;this.element=t,this.classNames=r,this.type=n,this.isActive=!1}return e.prototype.show=function(){return VA(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","true"),this.isActive=!0,this},e.prototype.hide=function(){return xt(this.element,this.classNames.activeState),this.element.setAttribute("aria-expanded","false"),this.isActive=!1,this},e}(),Gd=function(){function e(A){var t=A.element,n=A.type,r=A.classNames,i=A.position;this.element=t,this.classNames=r,this.type=n,this.position=i,this.isOpen=!1,this.isFlipped=!1,this.isDisabled=!1,this.isLoading=!1}return e.prototype.shouldFlip=function(A,t){var n=!1;return this.position==="auto"?n=this.element.getBoundingClientRect().top-t>=0&&!window.matchMedia("(min-height: ".concat(A+1,"px)")).matches:this.position==="top"&&(n=!0),n},e.prototype.setActiveDescendant=function(A){this.element.setAttribute("aria-activedescendant",A)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype.open=function(A,t){VA(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","true"),this.isOpen=!0,this.shouldFlip(A,t)&&(VA(this.element,this.classNames.flippedState),this.isFlipped=!0)},e.prototype.close=function(){xt(this.element,this.classNames.openState),this.element.setAttribute("aria-expanded","false"),this.removeActiveDescendant(),this.isOpen=!1,this.isFlipped&&(xt(this.element,this.classNames.flippedState),this.isFlipped=!1)},e.prototype.addFocusState=function(){VA(this.element,this.classNames.focusState)},e.prototype.removeFocusState=function(){xt(this.element,this.classNames.focusState)},e.prototype.enable=function(){xt(this.element,this.classNames.disabledState),this.element.removeAttribute("aria-disabled"),this.type===fn.SelectOne&&this.element.setAttribute("tabindex","0"),this.isDisabled=!1},e.prototype.disable=function(){VA(this.element,this.classNames.disabledState),this.element.setAttribute("aria-disabled","true"),this.type===fn.SelectOne&&this.element.setAttribute("tabindex","-1"),this.isDisabled=!0},e.prototype.wrap=function(A){var t=this.element,n=A.parentNode;n&&(A.nextSibling?n.insertBefore(t,A.nextSibling):n.appendChild(t)),t.appendChild(A)},e.prototype.unwrap=function(A){var t=this.element,n=t.parentNode;n&&(n.insertBefore(A,t),n.removeChild(t))},e.prototype.addLoadingState=function(){VA(this.element,this.classNames.loadingState),this.element.setAttribute("aria-busy","true"),this.isLoading=!0},e.prototype.removeLoadingState=function(){xt(this.element,this.classNames.loadingState),this.element.removeAttribute("aria-busy"),this.isLoading=!1},e}(),eI=function(){function e(A){var t=A.element,n=A.type,r=A.classNames,i=A.preventPaste;this.element=t,this.type=n,this.classNames=r,this.preventPaste=i,this.isFocussed=this.element.isEqualNode(document.activeElement),this.isDisabled=t.disabled,this._onPaste=this._onPaste.bind(this),this._onInput=this._onInput.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this)}return Object.defineProperty(e.prototype,"placeholder",{set:function(A){this.element.placeholder=A},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(A){this.element.value=A},enumerable:!1,configurable:!0}),e.prototype.addEventListeners=function(){var A=this.element;A.addEventListener("paste",this._onPaste),A.addEventListener("input",this._onInput,{passive:!0}),A.addEventListener("focus",this._onFocus,{passive:!0}),A.addEventListener("blur",this._onBlur,{passive:!0})},e.prototype.removeEventListeners=function(){var A=this.element;A.removeEventListener("input",this._onInput),A.removeEventListener("paste",this._onPaste),A.removeEventListener("focus",this._onFocus),A.removeEventListener("blur",this._onBlur)},e.prototype.enable=function(){var A=this.element;A.removeAttribute("disabled"),this.isDisabled=!1},e.prototype.disable=function(){var A=this.element;A.setAttribute("disabled",""),this.isDisabled=!0},e.prototype.focus=function(){this.isFocussed||this.element.focus()},e.prototype.blur=function(){this.isFocussed&&this.element.blur()},e.prototype.clear=function(A){return A===void 0&&(A=!0),this.element.value="",A&&this.setWidth(),this},e.prototype.setWidth=function(){var A=this.element;A.style.minWidth="".concat(A.placeholder.length+1,"ch"),A.style.width="".concat(A.value.length+1,"ch")},e.prototype.setActiveDescendant=function(A){this.element.setAttribute("aria-activedescendant",A)},e.prototype.removeActiveDescendant=function(){this.element.removeAttribute("aria-activedescendant")},e.prototype._onInput=function(){this.type!==fn.SelectOne&&this.setWidth()},e.prototype._onPaste=function(A){this.preventPaste&&A.preventDefault()},e.prototype._onFocus=function(){this.isFocussed=!0},e.prototype._onBlur=function(){this.isFocussed=!1},e}(),tI=4,Xd=function(){function e(A){var t=A.element;this.element=t,this.scrollPos=this.element.scrollTop,this.height=this.element.offsetHeight}return e.prototype.prepend=function(A){var t=this.element.firstElementChild;t?this.element.insertBefore(A,t):this.element.append(A)},e.prototype.scrollToTop=function(){this.element.scrollTop=0},e.prototype.scrollToChildElement=function(A,t){var n=this;if(A){var r=this.element.offsetHeight,i=this.element.scrollTop+r,s=A.offsetHeight,o=A.offsetTop+s,a=t>0?this.element.scrollTop+o-i:A.offsetTop;requestAnimationFrame(function(){n._animateScroll(a,t)})}},e.prototype._scrollDown=function(A,t,n){var r=(n-A)/t,i=r>1?r:1;this.element.scrollTop=A+i},e.prototype._scrollUp=function(A,t,n){var r=(A-n)/t,i=r>1?r:1;this.element.scrollTop=A-i},e.prototype._animateScroll=function(A,t){var n=this,r=tI,i=this.element.scrollTop,s=!1;t>0?(this._scrollDown(i,r,A),i<A&&(s=!0)):(this._scrollUp(i,r,A),i>A&&(s=!0)),s&&requestAnimationFrame(function(){n._animateScroll(A,t)})},e}(),Jd=function(){function e(A){var t=A.element,n=A.classNames;this.element=t,this.classNames=n,this.isDisabled=!1}return Object.defineProperty(e.prototype,"isActive",{get:function(){return this.element.dataset.choice==="active"},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this.element.dir},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.element.value},set:function(A){this.element.setAttribute("value",A),this.element.value=A},enumerable:!1,configurable:!0}),e.prototype.conceal=function(){var A=this.element;VA(A,this.classNames.input),A.hidden=!0,A.tabIndex=-1;var t=A.getAttribute("style");t&&A.setAttribute("data-choice-orig-style",t),A.setAttribute("data-choice","active")},e.prototype.reveal=function(){var A=this.element;xt(A,this.classNames.input),A.hidden=!1,A.removeAttribute("tabindex");var t=A.getAttribute("data-choice-orig-style");t?(A.removeAttribute("data-choice-orig-style"),A.setAttribute("style",t)):A.removeAttribute("style"),A.removeAttribute("data-choice")},e.prototype.enable=function(){this.element.removeAttribute("disabled"),this.element.disabled=!1,this.isDisabled=!1},e.prototype.disable=function(){this.element.setAttribute("disabled",""),this.element.disabled=!0,this.isDisabled=!0},e.prototype.triggerEvent=function(A,t){jE(this.element,A,t||{})},e}(),nI=function(e){Dd(A,e);function A(){return e!==null&&e.apply(this,arguments)||this}return A}(Jd),qr=function(e,A){return A===void 0&&(A=!0),typeof e>"u"?A:!!e},Wd=function(e){if(typeof e=="string"&&(e=e.split(" ").filter(function(A){return A.length})),Array.isArray(e)&&e.length)return e},Lt=function(e,A,t){if(t===void 0&&(t=!0),typeof e=="string"){var n=Ns(e),r=t||n===e?e:{escaped:n,raw:e},i=Lt({value:e,label:r,selected:!0},!1);return i}var s=e;if("choices"in s){if(!A)throw new TypeError("optGroup is not allowed");var o=s,a=o.choices.map(function(u){return Lt(u,!1)}),l={id:0,label:bn(o.label)||o.value,active:!!a.length,disabled:!!o.disabled,choices:a};return l}var c=s,f={id:0,group:null,score:0,rank:0,value:c.value,label:c.label||c.value,active:qr(c.active),selected:qr(c.selected,!1),disabled:qr(c.disabled,!1),placeholder:qr(c.placeholder,!1),highlighted:!1,labelClass:Wd(c.labelClass),labelDescription:c.labelDescription,customProperties:c.customProperties};return f},rI=function(e){return e.tagName==="INPUT"},Yd=function(e){return e.tagName==="SELECT"},iI=function(e){return e.tagName==="OPTION"},sI=function(e){return e.tagName==="OPTGROUP"},oI=function(e){Dd(A,e);function A(t){var n=t.element,r=t.classNames,i=t.template,s=t.extractPlaceholder,o=e.call(this,{element:n,classNames:r})||this;return o.template=i,o.extractPlaceholder=s,o}return Object.defineProperty(A.prototype,"placeholderOption",{get:function(){return this.element.querySelector('option[value=""]')||this.element.querySelector("option[placeholder]")},enumerable:!1,configurable:!0}),A.prototype.addOptions=function(t){var n=this,r=document.createDocumentFragment();t.forEach(function(i){var s=i;if(!s.element){var o=n.template(s);r.appendChild(o),s.element=o}}),this.element.appendChild(r)},A.prototype.optionsAsChoices=function(){var t=this,n=[];return this.element.querySelectorAll(":scope > option, :scope > optgroup").forEach(function(r){iI(r)?n.push(t._optionToChoice(r)):sI(r)&&n.push(t._optgroupToChoice(r))}),n},A.prototype._optionToChoice=function(t){return!t.hasAttribute("value")&&t.hasAttribute("placeholder")&&(t.setAttribute("value",""),t.value=""),{id:0,group:null,score:0,rank:0,value:t.value,label:t.label,element:t,active:!0,selected:this.extractPlaceholder?t.selected:t.hasAttribute("selected"),disabled:t.disabled,highlighted:!1,placeholder:this.extractPlaceholder&&(!t.value||t.hasAttribute("placeholder")),labelClass:typeof t.dataset.labelClass<"u"?Wd(t.dataset.labelClass):void 0,labelDescription:typeof t.dataset.labelDescription<"u"?t.dataset.labelDescription:void 0,customProperties:ZE(t.dataset.customProperties)}},A.prototype._optgroupToChoice=function(t){var n=this,r=t.querySelectorAll("option"),i=Array.from(r).map(function(s){return n._optionToChoice(s)});return{id:0,label:t.label||"",element:t,active:!!i.length,disabled:t.disabled,choices:i}},A}(Jd),aI={containerOuter:["choices"],containerInner:["choices__inner"],input:["choices__input"],inputCloned:["choices__input--cloned"],list:["choices__list"],listItems:["choices__list--multiple"],listSingle:["choices__list--single"],listDropdown:["choices__list--dropdown"],item:["choices__item"],itemSelectable:["choices__item--selectable"],itemDisabled:["choices__item--disabled"],itemChoice:["choices__item--choice"],description:["choices__description"],placeholder:["choices__placeholder"],group:["choices__group"],groupHeading:["choices__heading"],button:["choices__button"],activeState:["is-active"],focusState:["is-focused"],openState:["is-open"],disabledState:["is-disabled"],highlightedState:["is-highlighted"],selectedState:["is-selected"],flippedState:["is-flipped"],loadingState:["is-loading"],notice:["choices__notice"],addChoice:["choices__item--selectable","add-choice"],noResults:["has-no-results"],noChoices:["has-no-choices"]},zd={items:[],choices:[],silent:!1,renderChoiceLimit:-1,maxItemCount:-1,closeDropdownOnSelect:"auto",singleModeForMultiSelect:!1,addChoices:!1,addItems:!0,addItemFilter:function(e){return!!e&&e!==""},removeItems:!0,removeItemButton:!1,removeItemButtonAlignLeft:!1,editItems:!1,allowHTML:!1,allowHtmlUserInput:!1,duplicateItemsAllowed:!0,delimiter:",",paste:!0,searchEnabled:!0,searchChoices:!0,searchFloor:1,searchResultLimit:4,searchFields:["label","value"],position:"auto",resetScrollPosition:!0,shouldSort:!0,shouldSortItems:!1,sorter:YE,shadowRoot:null,placeholder:!0,placeholderValue:null,searchPlaceholderValue:null,prependValue:null,appendValue:null,renderSelectedChoices:"auto",loadingText:"Loading...",noResultsText:"No results found",noChoicesText:"No choices to choose from",itemSelectText:"Press to select",uniqueItemText:"Only unique values can be added",customAddItemText:"Only values matching specific conditions can be added",addItemText:function(e){return'Press Enter to add <b>"'.concat(e,'"</b>')},removeItemIconText:function(){return"Remove item"},removeItemLabelText:function(e){return"Remove item: ".concat(e)},maxItemText:function(e){return"Only ".concat(e," values can be added")},valueComparer:function(e,A){return e===A},fuseOptions:{includeScore:!0},labelId:"",callbackOnInit:null,callbackOnCreateTemplates:null,classNames:aI,appendGroupInSearch:!1},jd=function(e){var A=e.itemEl;A&&(A.remove(),e.itemEl=void 0)};function lI(e,A,t){var n=e,r=!0;switch(A.type){case Fe.ADD_ITEM:{A.item.selected=!0;var i=A.item.element;i&&(i.selected=!0,i.setAttribute("selected","")),n.push(A.item);break}case Fe.REMOVE_ITEM:{A.item.selected=!1;var i=A.item.element;if(i){i.selected=!1,i.removeAttribute("selected");var s=i.parentElement;s&&Yd(s)&&s.type===fn.SelectOne&&(s.value="")}jd(A.item),n=n.filter(function(c){return c.id!==A.item.id});break}case Fe.REMOVE_CHOICE:{jd(A.choice),n=n.filter(function(l){return l.id!==A.choice.id});break}case Fe.HIGHLIGHT_ITEM:{var o=A.highlighted,a=n.find(function(l){return l.id===A.item.id});a&&a.highlighted!==o&&(a.highlighted=o,t&&$E(a,o?t.classNames.highlightedState:t.classNames.selectedState,o?t.classNames.selectedState:t.classNames.highlightedState));break}default:{r=!1;break}}return{state:n,update:r}}function cI(e,A){var t=e,n=!0;switch(A.type){case Fe.ADD_GROUP:{t.push(A.group);break}case Fe.CLEAR_CHOICES:{t=[];break}default:{n=!1;break}}return{state:t,update:n}}function uI(e,A,t){var n=e,r=!0;switch(A.type){case Fe.ADD_CHOICE:{n.push(A.choice);break}case Fe.REMOVE_CHOICE:{A.choice.choiceEl=void 0,A.choice.group&&(A.choice.group.choices=A.choice.group.choices.filter(function(s){return s.id!==A.choice.id})),n=n.filter(function(s){return s.id!==A.choice.id});break}case Fe.ADD_ITEM:case Fe.REMOVE_ITEM:{A.item.choiceEl=void 0;break}case Fe.FILTER_CHOICES:{var i=[];A.results.forEach(function(s){i[s.item.id]=s}),n.forEach(function(s){var o=i[s.id];o!==void 0?(s.score=o.score,s.rank=o.rank,s.active=!0):(s.score=0,s.rank=0,s.active=!1),t&&t.appendGroupInSearch&&(s.choiceEl=void 0)});break}case Fe.ACTIVATE_CHOICES:{n.forEach(function(s){s.active=A.active,t&&t.appendGroupInSearch&&(s.choiceEl=void 0)});break}case Fe.CLEAR_CHOICES:{n=[];break}default:{r=!1;break}}return{state:n,update:r}}var qd={groups:cI,items:lI,choices:uI},fI=function(){function e(A){this._state=this.defaultState,this._listeners=[],this._txn=0,this._context=A}return Object.defineProperty(e.prototype,"defaultState",{get:function(){return{groups:[],items:[],choices:[]}},enumerable:!1,configurable:!0}),e.prototype.changeSet=function(A){return{groups:A,items:A,choices:A}},e.prototype.reset=function(){this._state=this.defaultState;var A=this.changeSet(!0);this._txn?this._changeSet=A:this._listeners.forEach(function(t){return t(A)})},e.prototype.subscribe=function(A){return this._listeners.push(A),this},e.prototype.dispatch=function(A){var t=this,n=this._state,r=!1,i=this._changeSet||this.changeSet(!1);Object.keys(qd).forEach(function(s){var o=qd[s](n[s],A,t._context);o.update&&(r=!0,i[s]=!0,n[s]=o.state)}),r&&(this._txn?this._changeSet=i:this._listeners.forEach(function(s){return s(i)}))},e.prototype.withTxn=function(A){this._txn++;try{A()}finally{if(this._txn=Math.max(0,this._txn-1),!this._txn){var t=this._changeSet;t&&(this._changeSet=void 0,this._listeners.forEach(function(n){return n(t)}))}}},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this.state.items},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"highlightedActiveItems",{get:function(){return this.items.filter(function(A){return A.active&&A.highlighted})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"choices",{get:function(){return this.state.choices},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeChoices",{get:function(){return this.choices.filter(function(A){return A.active})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"searchableChoices",{get:function(){return this.choices.filter(function(A){return!A.disabled&&!A.placeholder})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"groups",{get:function(){return this.state.groups},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"activeGroups",{get:function(){var A=this;return this.state.groups.filter(function(t){var n=t.active&&!t.disabled,r=A.state.choices.some(function(i){return i.active&&!i.disabled});return n&&r},[])},enumerable:!1,configurable:!0}),e.prototype.inTxn=function(){return this._txn>0},e.prototype.getChoiceById=function(A){return this.activeChoices.find(function(t){return t.id===A})},e.prototype.getGroupById=function(A){return this.groups.find(function(t){return t.id===A})},e}(),Oe={noChoices:"no-choices",noResults:"no-results",addChoice:"add-choice",generic:""};function hI(e,A,t){return(A=gI(A))in e?Object.defineProperty(e,A,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[A]=t,e}function Zd(e,A){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);A&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function or(e){for(var A=1;A<arguments.length;A++){var t=arguments[A]!=null?arguments[A]:{};A%2?Zd(Object(t),!0).forEach(function(n){hI(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zd(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function dI(e,A){if(typeof e!="object"||!e)return e;var t=e[Symbol.toPrimitive];if(t!==void 0){var n=t.call(e,A||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(e)}function gI(e){var A=dI(e,"string");return typeof A=="symbol"?A:A+""}function Jt(e){return Array.isArray?Array.isArray(e):eg(e)==="[object Array]"}const BI=1/0;function pI(e){if(typeof e=="string")return e;let A=e+"";return A=="0"&&1/e==-BI?"-0":A}function mI(e){return e==null?"":pI(e)}function kt(e){return typeof e=="string"}function $d(e){return typeof e=="number"}function wI(e){return e===!0||e===!1||vI(e)&&eg(e)=="[object Boolean]"}function Ag(e){return typeof e=="object"}function vI(e){return Ag(e)&&e!==null}function lt(e){return e!=null}function Da(e){return!e.trim().length}function eg(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const OH="Extended search is not available",CI="Incorrect 'index' type",QI=e=>`Invalid value for key ${e}`,yI=e=>`Pattern length exceeds max of ${e}.`,_I=e=>`Missing ${e} property in key`,UI=e=>`Property 'weight' in key '${e}' must be a positive integer`,tg=Object.prototype.hasOwnProperty;class FI{constructor(A){this._keys=[],this._keyMap={};let t=0;A.forEach(n=>{let r=ng(n);this._keys.push(r),this._keyMap[r.id]=r,t+=r.weight}),this._keys.forEach(n=>{n.weight/=t})}get(A){return this._keyMap[A]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function ng(e){let A=null,t=null,n=null,r=1,i=null;if(kt(e)||Jt(e))n=e,A=rg(e),t=Ka(e);else{if(!tg.call(e,"name"))throw new Error(_I("name"));const s=e.name;if(n=s,tg.call(e,"weight")&&(r=e.weight,r<=0))throw new Error(UI(s));A=rg(s),t=Ka(s),i=e.getFn}return{path:A,id:t,weight:r,src:n,getFn:i}}function rg(e){return Jt(e)?e:e.split(".")}function Ka(e){return Jt(e)?e.join("."):e}function bI(e,A){let t=[],n=!1;const r=(i,s,o)=>{if(lt(i))if(!s[o])t.push(i);else{let a=s[o];const l=i[a];if(!lt(l))return;if(o===s.length-1&&(kt(l)||$d(l)||wI(l)))t.push(mI(l));else if(Jt(l)){n=!0;for(let c=0,f=l.length;c<f;c+=1)r(l[c],s,o+1)}else s.length&&r(l,s,o+1)}};return r(e,kt(A)?A.split("."):A,0),n?t:t[0]}const EI={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},II={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,A)=>e.score===A.score?e.idx<A.idx?-1:1:e.score<A.score?-1:1},HI={location:0,threshold:.6,distance:100},SI={useExtendedSearch:!1,getFn:bI,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var SA=or(or(or(or({},II),EI),HI),SI);const xI=/[^ ]+/g;function LI(e=1,A=3){const t=new Map,n=Math.pow(10,A);return{get(r){const i=r.match(xI).length;if(t.has(i))return t.get(i);const s=1/Math.pow(i,.5*e),o=parseFloat(Math.round(s*n)/n);return t.set(i,o),o},clear(){t.clear()}}}class Oa{constructor({getFn:A=SA.getFn,fieldNormWeight:t=SA.fieldNormWeight}={}){this.norm=LI(t,3),this.getFn=A,this.isCreated=!1,this.setIndexRecords()}setSources(A=[]){this.docs=A}setIndexRecords(A=[]){this.records=A}setKeys(A=[]){this.keys=A,this._keysMap={},A.forEach((t,n)=>{this._keysMap[t.id]=n})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,kt(this.docs[0])?this.docs.forEach((A,t)=>{this._addString(A,t)}):this.docs.forEach((A,t)=>{this._addObject(A,t)}),this.norm.clear())}add(A){const t=this.size();kt(A)?this._addString(A,t):this._addObject(A,t)}removeAt(A){this.records.splice(A,1);for(let t=A,n=this.size();t<n;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(A,t){return A[this._keysMap[t]]}size(){return this.records.length}_addString(A,t){if(!lt(A)||Da(A))return;let n={v:A,i:t,n:this.norm.get(A)};this.records.push(n)}_addObject(A,t){let n={i:t,$:{}};this.keys.forEach((r,i)=>{let s=r.getFn?r.getFn(A):this.getFn(A,r.path);if(lt(s)){if(Jt(s)){let o=[];const a=[{nestedArrIndex:-1,value:s}];for(;a.length;){const{nestedArrIndex:l,value:c}=a.pop();if(lt(c))if(kt(c)&&!Da(c)){let f={v:c,i:l,n:this.norm.get(c)};o.push(f)}else Jt(c)&&c.forEach((f,u)=>{a.push({nestedArrIndex:u,value:f})})}n.$[i]=o}else if(kt(s)&&!Da(s)){let o={v:s,n:this.norm.get(s)};n.$[i]=o}}}),this.records.push(n)}toJSON(){return{keys:this.keys,records:this.records}}}function ig(e,A,{getFn:t=SA.getFn,fieldNormWeight:n=SA.fieldNormWeight}={}){const r=new Oa({getFn:t,fieldNormWeight:n});return r.setKeys(e.map(ng)),r.setSources(A),r.create(),r}function kI(e,{getFn:A=SA.getFn,fieldNormWeight:t=SA.fieldNormWeight}={}){const{keys:n,records:r}=e,i=new Oa({getFn:A,fieldNormWeight:t});return i.setKeys(n),i.setIndexRecords(r),i}function Ps(e,{errors:A=0,currentLocation:t=0,expectedLocation:n=0,distance:r=SA.distance,ignoreLocation:i=SA.ignoreLocation}={}){const s=A/e.length;if(i)return s;const o=Math.abs(n-t);return r?s+o/r:o?1:s}function MI(e=[],A=SA.minMatchCharLength){let t=[],n=-1,r=-1,i=0;for(let s=e.length;i<s;i+=1){let o=e[i];o&&n===-1?n=i:!o&&n!==-1&&(r=i-1,r-n+1>=A&&t.push([n,r]),n=-1)}return e[i-1]&&i-n>=A&&t.push([n,i-1]),t}const En=32;function TI(e,A,t,{location:n=SA.location,distance:r=SA.distance,threshold:i=SA.threshold,findAllMatches:s=SA.findAllMatches,minMatchCharLength:o=SA.minMatchCharLength,includeMatches:a=SA.includeMatches,ignoreLocation:l=SA.ignoreLocation}={}){if(A.length>En)throw new Error(yI(En));const c=A.length,f=e.length,u=Math.max(0,Math.min(n,f));let h=i,d=u;const g=o>1||a,B=g?Array(f):[];let p;for(;(p=e.indexOf(A,d))>-1;){let S=Ps(A,{currentLocation:p,expectedLocation:u,distance:r,ignoreLocation:l});if(h=Math.min(S,h),d=p+c,g){let _=0;for(;_<c;)B[p+_]=1,_+=1}}d=-1;let Q=[],F=1,v=c+f;const y=1<<c-1;for(let S=0;S<c;S+=1){let _=0,b=v;for(;_<b;)Ps(A,{errors:S,currentLocation:u+b,expectedLocation:u,distance:r,ignoreLocation:l})<=h?_=b:v=b,b=Math.floor((v-_)/2+_);v=b;let T=Math.max(1,u-b+1),x=s?f:Math.min(u+b,f)+c,k=Array(x+2);k[x+1]=(1<<S)-1;for(let E=x;E>=T;E-=1){let P=E-1,I=t[e.charAt(P)];if(g&&(B[P]=+!!I),k[E]=(k[E+1]<<1|1)&I,S&&(k[E]|=(Q[E+1]|Q[E])<<1|1|Q[E+1]),k[E]&y&&(F=Ps(A,{errors:S,currentLocation:P,expectedLocation:u,distance:r,ignoreLocation:l}),F<=h)){if(h=F,d=P,d<=u)break;T=Math.max(1,2*u-d)}}if(Ps(A,{errors:S+1,currentLocation:u,expectedLocation:u,distance:r,ignoreLocation:l})>h)break;Q=k}const U={isMatch:d>=0,score:Math.max(.001,F)};if(g){const S=MI(B,o);S.length?a&&(U.indices=S):U.isMatch=!1}return U}function DI(e){let A={};for(let t=0,n=e.length;t<n;t+=1){const r=e.charAt(t);A[r]=(A[r]||0)|1<<n-t-1}return A}class sg{constructor(A,{location:t=SA.location,threshold:n=SA.threshold,distance:r=SA.distance,includeMatches:i=SA.includeMatches,findAllMatches:s=SA.findAllMatches,minMatchCharLength:o=SA.minMatchCharLength,isCaseSensitive:a=SA.isCaseSensitive,ignoreLocation:l=SA.ignoreLocation}={}){if(this.options={location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l},this.pattern=a?A:A.toLowerCase(),this.chunks=[],!this.pattern.length)return;const c=(u,h)=>{this.chunks.push({pattern:u,alphabet:DI(u),startIndex:h})},f=this.pattern.length;if(f>En){let u=0;const h=f%En,d=f-h;for(;u<d;)c(this.pattern.substr(u,En),u),u+=En;if(h){const g=f-En;c(this.pattern.substr(g),g)}}else c(this.pattern,0)}searchIn(A){const{isCaseSensitive:t,includeMatches:n}=this.options;if(t||(A=A.toLowerCase()),this.pattern===A){let d={isMatch:!0,score:0};return n&&(d.indices=[[0,A.length-1]]),d}const{location:r,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,ignoreLocation:l}=this.options;let c=[],f=0,u=!1;this.chunks.forEach(({pattern:d,alphabet:g,startIndex:B})=>{const{isMatch:p,score:Q,indices:F}=TI(A,d,g,{location:r+B,distance:i,threshold:s,findAllMatches:o,minMatchCharLength:a,includeMatches:n,ignoreLocation:l});p&&(u=!0),f+=Q,p&&F&&(c=[...c,...F])});let h={isMatch:u,score:u?f/this.chunks.length:1};return u&&n&&(h.indices=c),h}}class hn{constructor(A){this.pattern=A}static isMultiMatch(A){return og(A,this.multiRegex)}static isSingleMatch(A){return og(A,this.singleRegex)}search(){}}function og(e,A){const t=e.match(A);return t?t[1]:null}class KI extends hn{constructor(A){super(A)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(A){const t=A===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class OI extends hn{constructor(A){super(A)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(A){const n=A.indexOf(this.pattern)===-1;return{isMatch:n,score:n?0:1,indices:[0,A.length-1]}}}class NI extends hn{constructor(A){super(A)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(A){const t=A.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class RI extends hn{constructor(A){super(A)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(A){const t=!A.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,A.length-1]}}}class PI extends hn{constructor(A){super(A)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(A){const t=A.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[A.length-this.pattern.length,A.length-1]}}}class VI extends hn{constructor(A){super(A)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(A){const t=!A.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,A.length-1]}}}class ag extends hn{constructor(A,{location:t=SA.location,threshold:n=SA.threshold,distance:r=SA.distance,includeMatches:i=SA.includeMatches,findAllMatches:s=SA.findAllMatches,minMatchCharLength:o=SA.minMatchCharLength,isCaseSensitive:a=SA.isCaseSensitive,ignoreLocation:l=SA.ignoreLocation}={}){super(A),this._bitapSearch=new sg(A,{location:t,threshold:n,distance:r,includeMatches:i,findAllMatches:s,minMatchCharLength:o,isCaseSensitive:a,ignoreLocation:l})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(A){return this._bitapSearch.searchIn(A)}}class lg extends hn{constructor(A){super(A)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(A){let t=0,n;const r=[],i=this.pattern.length;for(;(n=A.indexOf(this.pattern,t))>-1;)t=n+i,r.push([n,t-1]);const s=!!r.length;return{isMatch:s,score:s?0:1,indices:r}}}const Na=[KI,lg,NI,RI,VI,PI,OI,ag],cg=Na.length,GI=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,XI="|";function JI(e,A={}){return e.split(XI).map(t=>{let n=t.trim().split(GI).filter(i=>i&&!!i.trim()),r=[];for(let i=0,s=n.length;i<s;i+=1){const o=n[i];let a=!1,l=-1;for(;!a&&++l<cg;){const c=Na[l];let f=c.isMultiMatch(o);f&&(r.push(new c(f,A)),a=!0)}if(!a)for(l=-1;++l<cg;){const c=Na[l];let f=c.isSingleMatch(o);if(f){r.push(new c(f,A));break}}}return r})}const WI=new Set([ag.type,lg.type]);class YI{constructor(A,{isCaseSensitive:t=SA.isCaseSensitive,includeMatches:n=SA.includeMatches,minMatchCharLength:r=SA.minMatchCharLength,ignoreLocation:i=SA.ignoreLocation,findAllMatches:s=SA.findAllMatches,location:o=SA.location,threshold:a=SA.threshold,distance:l=SA.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:n,minMatchCharLength:r,findAllMatches:s,ignoreLocation:i,location:o,threshold:a,distance:l},this.pattern=t?A:A.toLowerCase(),this.query=JI(this.pattern,this.options)}static condition(A,t){return t.useExtendedSearch}searchIn(A){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:n,isCaseSensitive:r}=this.options;A=r?A:A.toLowerCase();let i=0,s=[],o=0;for(let a=0,l=t.length;a<l;a+=1){const c=t[a];s.length=0,i=0;for(let f=0,u=c.length;f<u;f+=1){const h=c[f],{isMatch:d,indices:g,score:B}=h.search(A);if(d){if(i+=1,o+=B,n){const p=h.constructor.type;WI.has(p)?s=[...s,...g]:s.push(g)}}else{o=0,i=0,s.length=0;break}}if(i){let f={isMatch:!0,score:o/i};return n&&(f.indices=s),f}}return{isMatch:!1,score:1}}}const Ra=[];function zI(...e){Ra.push(...e)}function Pa(e,A){for(let t=0,n=Ra.length;t<n;t+=1){let r=Ra[t];if(r.condition(e,A))return new r(e,A)}return new sg(e,A)}const Vs={AND:"$and",OR:"$or"},Va={PATH:"$path",PATTERN:"$val"},Ga=e=>!!(e[Vs.AND]||e[Vs.OR]),jI=e=>!!e[Va.PATH],qI=e=>!Jt(e)&&Ag(e)&&!Ga(e),ug=e=>({[Vs.AND]:Object.keys(e).map(A=>({[A]:e[A]}))});function fg(e,A,{auto:t=!0}={}){const n=r=>{let i=Object.keys(r);const s=jI(r);if(!s&&i.length>1&&!Ga(r))return n(ug(r));if(qI(r)){const a=s?r[Va.PATH]:i[0],l=s?r[Va.PATTERN]:r[a];if(!kt(l))throw new Error(QI(a));const c={keyId:Ka(a),pattern:l};return t&&(c.searcher=Pa(l,A)),c}let o={children:[],operator:i[0]};return i.forEach(a=>{const l=r[a];Jt(l)&&l.forEach(c=>{o.children.push(n(c))})}),o};return Ga(e)||(e=ug(e)),n(e)}function ZI(e,{ignoreFieldNorm:A=SA.ignoreFieldNorm}){e.forEach(t=>{let n=1;t.matches.forEach(({key:r,norm:i,score:s})=>{const o=r?r.weight:null;n*=Math.pow(s===0&&o?Number.EPSILON:s,(o||1)*(A?1:i))}),t.score=n})}function $I(e,A){const t=e.matches;A.matches=[],lt(t)&&t.forEach(n=>{if(!lt(n.indices)||!n.indices.length)return;const{indices:r,value:i}=n;let s={indices:r,value:i};n.key&&(s.key=n.key.src),n.idx>-1&&(s.refIndex=n.idx),A.matches.push(s)})}function A2(e,A){A.score=e.score}function e2(e,A,{includeMatches:t=SA.includeMatches,includeScore:n=SA.includeScore}={}){const r=[];return t&&r.push($I),n&&r.push(A2),e.map(i=>{const{idx:s}=i,o={item:A[s],refIndex:s};return r.length&&r.forEach(a=>{a(i,o)}),o})}class ar{constructor(A,t={},n){this.options=or(or({},SA),t),this.options.useExtendedSearch,this._keyStore=new FI(this.options.keys),this.setCollection(A,n)}setCollection(A,t){if(this._docs=A,t&&!(t instanceof Oa))throw new Error(CI);this._myIndex=t||ig(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(A){lt(A)&&(this._docs.push(A),this._myIndex.add(A))}remove(A=()=>!1){const t=[];for(let n=0,r=this._docs.length;n<r;n+=1){const i=this._docs[n];A(i,n)&&(this.removeAt(n),n-=1,r-=1,t.push(i))}return t}removeAt(A){this._docs.splice(A,1),this._myIndex.removeAt(A)}getIndex(){return this._myIndex}search(A,{limit:t=-1}={}){const{includeMatches:n,includeScore:r,shouldSort:i,sortFn:s,ignoreFieldNorm:o}=this.options;let a=kt(A)?kt(this._docs[0])?this._searchStringList(A):this._searchObjectList(A):this._searchLogical(A);return ZI(a,{ignoreFieldNorm:o}),i&&a.sort(s),$d(t)&&t>-1&&(a=a.slice(0,t)),e2(a,this._docs,{includeMatches:n,includeScore:r})}_searchStringList(A){const t=Pa(A,this.options),{records:n}=this._myIndex,r=[];return n.forEach(({v:i,i:s,n:o})=>{if(!lt(i))return;const{isMatch:a,score:l,indices:c}=t.searchIn(i);a&&r.push({item:i,idx:s,matches:[{score:l,value:i,norm:o,indices:c}]})}),r}_searchLogical(A){const t=fg(A,this.options),n=(o,a,l)=>{if(!o.children){const{keyId:f,searcher:u}=o,h=this._findMatches({key:this._keyStore.get(f),value:this._myIndex.getValueForItemAtKeyId(a,f),searcher:u});return h&&h.length?[{idx:l,item:a,matches:h}]:[]}const c=[];for(let f=0,u=o.children.length;f<u;f+=1){const h=o.children[f],d=n(h,a,l);if(d.length)c.push(...d);else if(o.operator===Vs.AND)return[]}return c},r=this._myIndex.records,i={},s=[];return r.forEach(({$:o,i:a})=>{if(lt(o)){let l=n(t,o,a);l.length&&(i[a]||(i[a]={idx:a,item:o,matches:[]},s.push(i[a])),l.forEach(({matches:c})=>{i[a].matches.push(...c)}))}}),s}_searchObjectList(A){const t=Pa(A,this.options),{keys:n,records:r}=this._myIndex,i=[];return r.forEach(({$:s,i:o})=>{if(!lt(s))return;let a=[];n.forEach((l,c)=>{a.push(...this._findMatches({key:l,value:s[c],searcher:t}))}),a.length&&i.push({idx:o,item:s,matches:a})}),i}_findMatches({key:A,value:t,searcher:n}){if(!lt(t))return[];let r=[];if(Jt(t))t.forEach(({v:i,i:s,n:o})=>{if(!lt(i))return;const{isMatch:a,score:l,indices:c}=n.searchIn(i);a&&r.push({score:l,key:A,value:i,idx:s,norm:o,indices:c})});else{const{v:i,n:s}=t,{isMatch:o,score:a,indices:l}=n.searchIn(i);o&&r.push({score:a,key:A,value:i,norm:s,indices:l})}return r}}ar.version="7.0.0",ar.createIndex=ig,ar.parseIndex=kI,ar.config=SA,ar.parseQuery=fg,zI(YI);var t2=function(){function e(A){this._haystack=[],this._fuseOptions=tt(tt({},A.fuseOptions),{keys:DE([],A.searchFields,!0),includeMatches:!0})}return e.prototype.index=function(A){this._haystack=A,this._fuse&&this._fuse.setCollection(A)},e.prototype.reset=function(){this._haystack=[],this._fuse=void 0},e.prototype.isEmptyIndex=function(){return!this._haystack.length},e.prototype.search=function(A){this._fuse||(this._fuse=new ar(this._haystack,this._fuseOptions));var t=this._fuse.search(A);return t.map(function(n,r){return{item:n.item,score:n.score||0,rank:r+1}})},e}();function n2(e){return new t2(e)}var r2=function(e){for(var A in e)if(Object.prototype.hasOwnProperty.call(e,A))return!1;return!0},Xa=function(e,A,t){var n=e.dataset,r=A.customProperties,i=A.labelClass,s=A.labelDescription;i&&(n.labelClass=Rs(i).join(" ")),s&&(n.labelDescription=s),t&&r&&(typeof r=="string"?n.customProperties=r:typeof r=="object"&&!r2(r)&&(n.customProperties=JSON.stringify(r)))},hg=function(e,A,t){var n=A&&e.querySelector("label[for='".concat(A,"']")),r=n&&n.innerText;r&&t.setAttribute("aria-label",r)},i2={containerOuter:function(e,A,t,n,r,i,s){var o=e.classNames.containerOuter,a=document.createElement("div");return VA(a,o),a.dataset.type=i,A&&(a.dir=A),n&&(a.tabIndex=0),t&&(a.setAttribute("role",r?"combobox":"listbox"),r?a.setAttribute("aria-autocomplete","list"):s||hg(this._docRoot,this.passedElement.element.id,a),a.setAttribute("aria-haspopup","true"),a.setAttribute("aria-expanded","false")),s&&a.setAttribute("aria-labelledby",s),a},containerInner:function(e){var A=e.classNames.containerInner,t=document.createElement("div");return VA(t,A),t},itemList:function(e,A){var t=e.searchEnabled,n=e.classNames,r=n.list,i=n.listSingle,s=n.listItems,o=document.createElement("div");return VA(o,r),VA(o,A?i:s),this._isSelectElement&&t&&o.setAttribute("role","listbox"),o},placeholder:function(e,A){var t=e.allowHTML,n=e.classNames.placeholder,r=document.createElement("div");return VA(r,n),Xt(r,t,A),r},item:function(e,A,t){var n=e.allowHTML,r=e.removeItemButtonAlignLeft,i=e.removeItemIconText,s=e.removeItemLabelText,o=e.classNames,a=o.item,l=o.button,c=o.highlightedState,f=o.itemSelectable,u=o.placeholder,h=bn(A.value),d=document.createElement("div");if(VA(d,a),A.labelClass){var g=document.createElement("span");Xt(g,n,A.label),VA(g,A.labelClass),d.appendChild(g)}else Xt(d,n,A.label);if(d.dataset.item="",d.dataset.id=A.id,d.dataset.value=h,Xa(d,A,!0),(A.disabled||this.containerOuter.isDisabled)&&d.setAttribute("aria-disabled","true"),this._isSelectElement&&(d.setAttribute("aria-selected","true"),d.setAttribute("role","option")),A.placeholder&&(VA(d,u),d.dataset.placeholder=""),VA(d,A.highlighted?c:f),t){A.disabled&&xt(d,f),d.dataset.deletable="";var B=document.createElement("button");B.type="button",VA(B,l),Xt(B,!0,zr(i,A.value));var p=zr(s,A.value);p&&B.setAttribute("aria-label",p),B.dataset.button="",r?d.insertAdjacentElement("afterbegin",B):d.appendChild(B)}return d},choiceList:function(e,A){var t=e.classNames.list,n=document.createElement("div");return VA(n,t),A||n.setAttribute("aria-multiselectable","true"),n.setAttribute("role","listbox"),n},choiceGroup:function(e,A){var t=e.allowHTML,n=e.classNames,r=n.group,i=n.groupHeading,s=n.itemDisabled,o=A.id,a=A.label,l=A.disabled,c=bn(a),f=document.createElement("div");VA(f,r),l&&VA(f,s),f.setAttribute("role","group"),f.dataset.group="",f.dataset.id=o,f.dataset.value=c,l&&f.setAttribute("aria-disabled","true");var u=document.createElement("div");return VA(u,i),Xt(u,t,a||""),f.appendChild(u),f},choice:function(e,A,t,n){var r=e.allowHTML,i=e.classNames,s=i.item,o=i.itemChoice,a=i.itemSelectable,l=i.selectedState,c=i.itemDisabled,f=i.description,u=i.placeholder,h=A.label,d=bn(A.value),g=document.createElement("div");g.id=A.elementId,VA(g,s),VA(g,o),n&&typeof h=="string"&&(h=Ta(r,h),h+=" (".concat(n,")"),h={trusted:h});var B=g;if(A.labelClass){var p=document.createElement("span");Xt(p,r,h),VA(p,A.labelClass),B=p,g.appendChild(p)}else Xt(g,r,h);if(A.labelDescription){var Q="".concat(A.elementId,"-description");B.setAttribute("aria-describedby",Q);var F=document.createElement("span");Xt(F,r,A.labelDescription),F.id=Q,VA(F,f),g.appendChild(F)}return A.selected&&VA(g,l),A.placeholder&&VA(g,u),g.setAttribute("role",A.group?"treeitem":"option"),g.dataset.choice="",g.dataset.id=A.id,g.dataset.value=d,t&&(g.dataset.selectText=t),A.group&&(g.dataset.groupId="".concat(A.group.id)),Xa(g,A,!1),A.disabled?(VA(g,c),g.dataset.choiceDisabled="",g.setAttribute("aria-disabled","true")):(VA(g,a),g.dataset.choiceSelectable=""),g},input:function(e,A){var t=e.classNames,n=t.input,r=t.inputCloned,i=e.labelId,s=document.createElement("input");return s.type="search",VA(s,n),VA(s,r),s.autocomplete="off",s.autocapitalize="off",s.spellcheck=!1,s.setAttribute("aria-autocomplete","list"),A?s.setAttribute("aria-label",A):i||hg(this._docRoot,this.passedElement.element.id,s),s},dropdown:function(e){var A=e.classNames,t=A.list,n=A.listDropdown,r=document.createElement("div");return VA(r,t),VA(r,n),r.setAttribute("aria-expanded","false"),r},notice:function(e,A,t){var n=e.classNames,r=n.item,i=n.itemChoice,s=n.addChoice,o=n.noResults,a=n.noChoices,l=n.notice;t===void 0&&(t=Oe.generic);var c=document.createElement("div");switch(Xt(c,!0,A),VA(c,r),VA(c,i),VA(c,l),t){case Oe.addChoice:VA(c,s);break;case Oe.noResults:VA(c,o);break;case Oe.noChoices:VA(c,a);break}return t===Oe.addChoice&&(c.dataset.choiceSelectable="",c.dataset.choice=""),c},option:function(e){var A=bn(e.label),t=new Option(A,e.value,!1,e.selected);return Xa(t,e,!0),t.disabled=e.disabled,e.selected&&t.setAttribute("selected",""),t}},s2="-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,o2={},Ja=function(e){if(e)return e.dataset.id?parseInt(e.dataset.id,10):void 0},Zr="[data-choice-selectable]",a2=function(){function e(A,t){A===void 0&&(A="[data-choice]"),t===void 0&&(t={});var n=this;this.initialisedOK=void 0,this._hasNonChoicePlaceholder=!1,this._lastAddedChoiceId=0,this._lastAddedGroupId=0;var r=e.defaults;this.config=tt(tt(tt({},r.allOptions),r.options),t),KE.forEach(function(p){n.config[p]=tt(tt(tt({},r.allOptions[p]),r.options[p]),t[p])});var i=this.config;i.silent||this._validateConfig();var s=i.shadowRoot||document.documentElement;this._docRoot=s;var o=typeof A=="string"?s.querySelector(A):A;if(!o||typeof o!="object"||!(rI(o)||Yd(o)))throw TypeError(!o&&typeof A=="string"?"Selector ".concat(A," failed to find an element"):"Expected one of the following types text|select-one|select-multiple");var a=o.type,l=a===fn.Text;(l||i.maxItemCount!==1)&&(i.singleModeForMultiSelect=!1),i.singleModeForMultiSelect&&(a=fn.SelectMultiple);var c=a===fn.SelectOne,f=a===fn.SelectMultiple,u=c||f;if(this._elementType=a,this._isTextElement=l,this._isSelectOneElement=c,this._isSelectMultipleElement=f,this._isSelectElement=c||f,this._canAddUserChoices=l&&i.addItems||u&&i.addChoices,typeof i.renderSelectedChoices!="boolean"&&(i.renderSelectedChoices=i.renderSelectedChoices==="always"||c),i.closeDropdownOnSelect==="auto"?i.closeDropdownOnSelect=l||c||i.singleModeForMultiSelect:i.closeDropdownOnSelect=qr(i.closeDropdownOnSelect),i.placeholder&&(i.placeholderValue?this._hasNonChoicePlaceholder=!0:o.dataset.placeholder&&(this._hasNonChoicePlaceholder=!0,i.placeholderValue=o.dataset.placeholder)),t.addItemFilter&&typeof t.addItemFilter!="function"){var h=t.addItemFilter instanceof RegExp?t.addItemFilter:new RegExp(t.addItemFilter);i.addItemFilter=h.test.bind(h)}if(this._isTextElement)this.passedElement=new nI({element:o,classNames:i.classNames});else{var d=o;this.passedElement=new oI({element:d,classNames:i.classNames,template:function(p){return n._templates.option(p)},extractPlaceholder:i.placeholder&&!this._hasNonChoicePlaceholder})}if(this.initialised=!1,this._store=new fI(i),this._currentValue="",i.searchEnabled=!l&&i.searchEnabled||f,this._canSearch=i.searchEnabled,this._isScrollingOnIe=!1,this._highlightPosition=0,this._wasTap=!0,this._placeholderValue=this._generatePlaceholderValue(),this._baseId=GE(o,"choices-"),this._direction=o.dir,!this._direction){var g=window.getComputedStyle(o).direction,B=window.getComputedStyle(document.documentElement).direction;g!==B&&(this._direction=g)}if(this._idNames={itemChoice:"item-choice"},this._templates=r.templates,this._render=this._render.bind(this),this._onFocus=this._onFocus.bind(this),this._onBlur=this._onBlur.bind(this),this._onKeyUp=this._onKeyUp.bind(this),this._onKeyDown=this._onKeyDown.bind(this),this._onInput=this._onInput.bind(this),this._onClick=this._onClick.bind(this),this._onTouchMove=this._onTouchMove.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onMouseOver=this._onMouseOver.bind(this),this._onFormReset=this._onFormReset.bind(this),this._onSelectKey=this._onSelectKey.bind(this),this._onEnterKey=this._onEnterKey.bind(this),this._onEscapeKey=this._onEscapeKey.bind(this),this._onDirectionKey=this._onDirectionKey.bind(this),this._onDeleteKey=this._onDeleteKey.bind(this),this.passedElement.isActive){i.silent||console.warn("Trying to initialise Choices on element already initialised",{element:A}),this.initialised=!0,this.initialisedOK=!1;return}this.init(),this._initialItems=this._store.items.map(function(p){return p.value})}return Object.defineProperty(e,"defaults",{get:function(){return Object.preventExtensions({get options(){return o2},get allOptions(){return zd},get templates(){return i2}})},enumerable:!1,configurable:!0}),e.prototype.init=function(){if(!(this.initialised||this.initialisedOK!==void 0)){this._searcher=n2(this.config),this._loadChoices(),this._createTemplates(),this._createElements(),this._createStructure(),this._isTextElement&&!this.config.addItems||this.passedElement.element.hasAttribute("disabled")||this.passedElement.element.closest("fieldset:disabled")?this.disable():(this.enable(),this._addEventListeners()),this._initStore(),this.initialised=!0,this.initialisedOK=!0;var A=this.config.callbackOnInit;typeof A=="function"&&A.call(this)}},e.prototype.destroy=function(){this.initialised&&(this._removeEventListeners(),this.passedElement.reveal(),this.containerOuter.unwrap(this.passedElement.element),this._store._listeners=[],this.clearStore(!1),this._stopSearch(),this._templates=e.defaults.templates,this.initialised=!1,this.initialisedOK=void 0)},e.prototype.enable=function(){return this.passedElement.isDisabled&&this.passedElement.enable(),this.containerOuter.isDisabled&&(this._addEventListeners(),this.input.enable(),this.containerOuter.enable()),this},e.prototype.disable=function(){return this.passedElement.isDisabled||this.passedElement.disable(),this.containerOuter.isDisabled||(this._removeEventListeners(),this.input.disable(),this.containerOuter.disable()),this},e.prototype.highlightItem=function(A,t){if(t===void 0&&(t=!0),!A||!A.id)return this;var n=this._store.items.find(function(r){return r.id===A.id});return!n||n.highlighted?this:(this._store.dispatch(Os(n,!0)),t&&this.passedElement.triggerEvent(nt.highlightItem,this._getChoiceForOutput(n)),this)},e.prototype.unhighlightItem=function(A,t){if(t===void 0&&(t=!0),!A||!A.id)return this;var n=this._store.items.find(function(r){return r.id===A.id});return!n||!n.highlighted?this:(this._store.dispatch(Os(n,!1)),t&&this.passedElement.triggerEvent(nt.unhighlightItem,this._getChoiceForOutput(n)),this)},e.prototype.highlightAll=function(){var A=this;return this._store.withTxn(function(){A._store.items.forEach(function(t){t.highlighted||(A._store.dispatch(Os(t,!0)),A.passedElement.triggerEvent(nt.highlightItem,A._getChoiceForOutput(t)))})}),this},e.prototype.unhighlightAll=function(){var A=this;return this._store.withTxn(function(){A._store.items.forEach(function(t){t.highlighted&&(A._store.dispatch(Os(t,!1)),A.passedElement.triggerEvent(nt.highlightItem,A._getChoiceForOutput(t)))})}),this},e.prototype.removeActiveItemsByValue=function(A){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(n){return n.value===A}).forEach(function(n){return t._removeItem(n)})}),this},e.prototype.removeActiveItems=function(A){var t=this;return this._store.withTxn(function(){t._store.items.filter(function(n){var r=n.id;return r!==A}).forEach(function(n){return t._removeItem(n)})}),this},e.prototype.removeHighlightedItems=function(A){var t=this;return A===void 0&&(A=!1),this._store.withTxn(function(){t._store.highlightedActiveItems.forEach(function(n){t._removeItem(n),A&&t._triggerChange(n.value)})}),this},e.prototype.showDropdown=function(A){var t=this;return this.dropdown.isActive?this:(A===void 0&&(A=!this._canSearch),requestAnimationFrame(function(){t.dropdown.show();var n=t.dropdown.element.getBoundingClientRect();t.containerOuter.open(n.bottom,n.height),A||t.input.focus(),t.passedElement.triggerEvent(nt.showDropdown)}),this)},e.prototype.hideDropdown=function(A){var t=this;return this.dropdown.isActive?(requestAnimationFrame(function(){t.dropdown.hide(),t.containerOuter.close(),!A&&t._canSearch&&(t.input.removeActiveDescendant(),t.input.blur()),t.passedElement.triggerEvent(nt.hideDropdown)}),this):this},e.prototype.getValue=function(A){var t=this,n=this._store.items.map(function(r){return A?r.value:t._getChoiceForOutput(r)});return this._isSelectOneElement||this.config.singleModeForMultiSelect?n[0]:n},e.prototype.setValue=function(A){var t=this;return this.initialisedOK?(this._store.withTxn(function(){A.forEach(function(n){n&&t._addChoice(Lt(n,!1))})}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setValue"),this)},e.prototype.setChoiceByValue=function(A){var t=this;return this.initialisedOK?this._isTextElement?this:(this._store.withTxn(function(){var n=Array.isArray(A)?A:[A];n.forEach(function(r){return t._findAndSelectChoiceByValue(r)}),t.unhighlightAll()}),this._searcher.reset(),this):(this._warnChoicesInitFailed("setChoiceByValue"),this)},e.prototype.setChoices=function(A,t,n,r,i,s){var o=this;if(A===void 0&&(A=[]),t===void 0&&(t="value"),n===void 0&&(n="label"),r===void 0&&(r=!1),i===void 0&&(i=!0),s===void 0&&(s=!1),!this.initialisedOK)return this._warnChoicesInitFailed("setChoices"),this;if(!this._isSelectElement)throw new TypeError("setChoices can't be used with INPUT based Choices");if(typeof t!="string"||!t)throw new TypeError("value parameter must be a name of 'value' field in passed objects");if(typeof A=="function"){var a=A(this);if(typeof Promise=="function"&&a instanceof Promise)return new Promise(function(l){return requestAnimationFrame(l)}).then(function(){return o._handleLoadingState(!0)}).then(function(){return a}).then(function(l){return o.setChoices(l,t,n,r,i,s)}).catch(function(l){o.config.silent||console.error(l)}).then(function(){return o._handleLoadingState(!1)}).then(function(){return o});if(!Array.isArray(a))throw new TypeError(".setChoices first argument function must return either array of choices or Promise, got: ".concat(typeof a));return this.setChoices(a,t,n,!1)}if(!Array.isArray(A))throw new TypeError(".setChoices must be called either with array of choices with a function resulting into Promise of array of choices");return this.containerOuter.removeLoadingState(),this._store.withTxn(function(){i&&(o._isSearching=!1),r&&o.clearChoices(!0,s);var l=t==="value",c=n==="label";A.forEach(function(f){if("choices"in f){var u=f;c||(u=tt(tt({},u),{label:u[n]})),o._addGroup(Lt(u,!0))}else{var h=f;(!c||!l)&&(h=tt(tt({},h),{value:h[t],label:h[n]}));var d=Lt(h,!1);o._addChoice(d),d.placeholder&&!o._hasNonChoicePlaceholder&&(o._placeholderValue=Vd(d.label))}}),o.unhighlightAll()}),this._searcher.reset(),this},e.prototype.refresh=function(A,t,n){var r=this;return A===void 0&&(A=!1),t===void 0&&(t=!1),n===void 0&&(n=!1),this._isSelectElement?(this._store.withTxn(function(){var i=r.passedElement.optionsAsChoices(),s={};n||r._store.items.forEach(function(a){a.id&&a.active&&a.selected&&(s[a.value]=!0)}),r.clearStore(!1);var o=function(a){n?r._store.dispatch(Nd(a)):s[a.value]&&(a.selected=!0)};i.forEach(function(a){if("choices"in a){a.choices.forEach(o);return}o(a)}),r._addPredefinedChoices(i,t,A),r._isSearching&&r._searchChoices(r.input.value)}),this):(this.config.silent||console.warn("refresh method can only be used on choices backed by a <select> element"),this)},e.prototype.removeChoice=function(A){var t=this._store.choices.find(function(n){return n.value===A});return t?(this._clearNotice(),this._store.dispatch(OE(t)),this._searcher.reset(),t.selected&&this.passedElement.triggerEvent(nt.removeItem,this._getChoiceForOutput(t)),this):this},e.prototype.clearChoices=function(A,t){var n=this;return A===void 0&&(A=!0),t===void 0&&(t=!1),A&&(t?this.passedElement.element.replaceChildren(""):this.passedElement.element.querySelectorAll(":not([selected])").forEach(function(r){r.remove()})),this.itemList.element.replaceChildren(""),this.choiceList.element.replaceChildren(""),this._clearNotice(),this._store.withTxn(function(){var r=t?[]:n._store.items;n._store.reset(),r.forEach(function(i){n._store.dispatch(Kd(i)),n._store.dispatch(Od(i))})}),this._searcher.reset(),this},e.prototype.clearStore=function(A){return A===void 0&&(A=!0),this.clearChoices(A,!0),this._stopSearch(),this._lastAddedChoiceId=0,this._lastAddedGroupId=0,this},e.prototype.clearInput=function(){var A=!this._isSelectOneElement;return this.input.clear(A),this._stopSearch(),this},e.prototype._validateConfig=function(){var A=this.config,t=qE(A,zd);t.length&&console.warn("Unknown config option(s) passed",t.join(", ")),A.allowHTML&&A.allowHtmlUserInput&&(A.addItems&&console.warn("Warning: allowHTML/allowHtmlUserInput/addItems all being true is strongly not recommended and may lead to XSS attacks"),A.addChoices&&console.warn("Warning: allowHTML/allowHtmlUserInput/addChoices all being true is strongly not recommended and may lead to XSS attacks"))},e.prototype._render=function(A){A===void 0&&(A={choices:!0,groups:!0,items:!0}),!this._store.inTxn()&&(this._isSelectElement&&(A.choices||A.groups)&&this._renderChoices(),A.items&&this._renderItems())},e.prototype._renderChoices=function(){var A=this;if(this._canAddItems()){var t=this,n=t.config,r=t._isSearching,i=this._store,s=i.activeGroups,o=i.activeChoices,a=0;if(r&&n.searchResultLimit>0?a=n.searchResultLimit:n.renderChoiceLimit>0&&(a=n.renderChoiceLimit),this._isSelectElement){var l=o.filter(function(d){return!d.element});l.length&&this.passedElement.addOptions(l)}var c=document.createDocumentFragment(),f=function(d){return d.filter(function(g){return!g.placeholder&&(r?!!g.rank:n.renderSelectedChoices||!g.selected)})},u=!1,h=function(d,g,B){r?d.sort(zE):n.shouldSort&&d.sort(n.sorter);var p=d.length;p=!g&&a&&p>a?a:p,p--,d.every(function(Q,F){var v=Q.choiceEl||A._templates.choice(n,Q,n.itemSelectText,B);return Q.choiceEl=v,c.appendChild(v),(r||!Q.selected)&&(u=!0),F<p})};o.length&&(n.resetScrollPosition&&requestAnimationFrame(function(){return A.choiceList.scrollToTop()}),!this._hasNonChoicePlaceholder&&!r&&this._isSelectOneElement&&h(o.filter(function(d){return d.placeholder&&!d.group}),!1,void 0),s.length&&!r?(n.shouldSort&&s.sort(n.sorter),h(o.filter(function(d){return!d.placeholder&&!d.group}),!1,void 0),s.forEach(function(d){var g=f(d.choices);if(g.length){if(d.label){var B=d.groupEl||A._templates.choiceGroup(A.config,d);d.groupEl=B,B.remove(),c.appendChild(B)}h(g,!0,n.appendGroupInSearch&&r?d.label:void 0)}})):h(f(o),!1,void 0)),!u&&(r||!c.children.length||!n.renderSelectedChoices)&&(this._notice||(this._notice={text:Pd(r?n.noResultsText:n.noChoicesText),type:r?Oe.noResults:Oe.noChoices}),c.replaceChildren("")),this._renderNotice(c),this.choiceList.element.replaceChildren(c),u&&this._highlightChoice()}},e.prototype._renderItems=function(){var A=this,t=this._store.items||[],n=this.itemList.element,r=this.config,i=document.createDocumentFragment(),s=function(f){return n.querySelector('[data-item][data-id="'.concat(f.id,'"]'))},o=function(f){var u=f.itemEl;u&&u.parentElement||(u=s(f)||A._templates.item(r,f,r.removeItemButton),f.itemEl=u,i.appendChild(u))};t.forEach(o);var a=!!i.childNodes.length;if(this._isSelectOneElement){var l=n.children.length;if(a||l>1){var c=n.querySelector(jr(r.classNames.placeholder));c&&c.remove()}else!a&&!l&&this._placeholderValue&&(a=!0,o(Lt({selected:!0,value:"",label:this._placeholderValue,placeholder:!0},!1)))}a&&(n.append(i),r.shouldSortItems&&!this._isSelectOneElement&&(t.sort(r.sorter),t.forEach(function(f){var u=s(f);u&&(u.remove(),i.append(u))}),n.append(i))),this._isTextElement&&(this.passedElement.value=t.map(function(f){var u=f.value;return u}).join(r.delimiter))},e.prototype._displayNotice=function(A,t,n){n===void 0&&(n=!0);var r=this._notice;if(r&&(r.type===t&&r.text===A||r.type===Oe.addChoice&&(t===Oe.noResults||t===Oe.noChoices))){n&&this.showDropdown(!0);return}this._clearNotice(),this._notice=A?{text:A,type:t}:void 0,this._renderNotice(),n&&A&&this.showDropdown(!0)},e.prototype._clearNotice=function(){if(this._notice){var A=this.choiceList.element.querySelector(jr(this.config.classNames.notice));A&&A.remove(),this._notice=void 0}},e.prototype._renderNotice=function(A){var t=this._notice;if(t){var n=this._templates.notice(this.config,t.text,t.type);A?A.append(n):this.choiceList.prepend(n)}},e.prototype._getChoiceForOutput=function(A,t){return{id:A.id,highlighted:A.highlighted,labelClass:A.labelClass,labelDescription:A.labelDescription,customProperties:A.customProperties,disabled:A.disabled,active:A.active,label:A.label,placeholder:A.placeholder,value:A.value,groupValue:A.group?A.group.label:void 0,element:A.element,keyCode:t}},e.prototype._triggerChange=function(A){A!=null&&this.passedElement.triggerEvent(nt.change,{value:A})},e.prototype._handleButtonAction=function(A){var t=this,n=this._store.items;if(!(!n.length||!this.config.removeItems||!this.config.removeItemButton)){var r=A&&Ja(A.parentElement),i=r&&n.find(function(s){return s.id===r});i&&this._store.withTxn(function(){if(t._removeItem(i),t._triggerChange(i.value),t._isSelectOneElement&&!t._hasNonChoicePlaceholder){var s=(t.config.shouldSort?t._store.choices.reverse():t._store.choices).find(function(o){return o.placeholder});s&&(t._addItem(s),t.unhighlightAll(),s.value&&t._triggerChange(s.value))}})}},e.prototype._handleItemAction=function(A,t){var n=this;t===void 0&&(t=!1);var r=this._store.items;if(!(!r.length||!this.config.removeItems||this._isSelectOneElement)){var i=Ja(A);i&&(r.forEach(function(s){s.id===i&&!s.highlighted?n.highlightItem(s):!t&&s.highlighted&&n.unhighlightItem(s)}),this.input.focus())}},e.prototype._handleChoiceAction=function(A){var t=this,n=Ja(A),r=n&&this._store.getChoiceById(n);if(!r||r.disabled)return!1;var i=this.dropdown.isActive;if(!r.selected){if(!this._canAddItems())return!0;this._store.withTxn(function(){t._addItem(r,!0,!0),t.clearInput(),t.unhighlightAll()}),this._triggerChange(r.value)}return i&&this.config.closeDropdownOnSelect&&(this.hideDropdown(!0),this.containerOuter.element.focus()),!0},e.prototype._handleBackspace=function(A){var t=this.config;if(!(!t.removeItems||!A.length)){var n=A[A.length-1],r=A.some(function(i){return i.highlighted});t.editItems&&!r&&n?(this.input.value=n.value,this.input.setWidth(),this._removeItem(n),this._triggerChange(n.value)):(r||this.highlightItem(n,!1),this.removeHighlightedItems(!0))}},e.prototype._loadChoices=function(){var A,t=this,n=this.config;if(this._isTextElement){if(this._presetChoices=n.items.map(function(s){return Lt(s,!1)}),this.passedElement.value){var r=this.passedElement.value.split(n.delimiter).map(function(s){return Lt(s,!1,t.config.allowHtmlUserInput)});this._presetChoices=this._presetChoices.concat(r)}this._presetChoices.forEach(function(s){s.selected=!0})}else if(this._isSelectElement){this._presetChoices=n.choices.map(function(s){return Lt(s,!0)});var i=this.passedElement.optionsAsChoices();i&&(A=this._presetChoices).push.apply(A,i)}},e.prototype._handleLoadingState=function(A){A===void 0&&(A=!0);var t=this.itemList.element;A?(this.disable(),this.containerOuter.addLoadingState(),this._isSelectOneElement?t.replaceChildren(this._templates.placeholder(this.config,this.config.loadingText)):this.input.placeholder=this.config.loadingText):(this.enable(),this.containerOuter.removeLoadingState(),this._isSelectOneElement?(t.replaceChildren(""),this._render()):this.input.placeholder=this._placeholderValue||"")},e.prototype._handleSearch=function(A){if(this.input.isFocussed)if(A!==null&&typeof A<"u"&&A.length>=this.config.searchFloor){var t=this.config.searchChoices?this._searchChoices(A):0;t!==null&&this.passedElement.triggerEvent(nt.search,{value:A,resultCount:t})}else this._store.choices.some(function(n){return!n.active})&&this._stopSearch()},e.prototype._canAddItems=function(){var A=this.config,t=A.maxItemCount,n=A.maxItemText;return!A.singleModeForMultiSelect&&t>0&&t<=this._store.items.length?(this.choiceList.element.replaceChildren(""),this._notice=void 0,this._displayNotice(typeof n=="function"?n(t):n,Oe.addChoice),!1):(this._notice&&this._notice.type===Oe.addChoice&&this._clearNotice(),!0)},e.prototype._canCreateItem=function(A){var t=this.config,n=!0,r="";if(n&&typeof t.addItemFilter=="function"&&!t.addItemFilter(A)&&(n=!1,r=zr(t.customAddItemText,A)),n){var i=this._store.choices.find(function(s){return t.valueComparer(s.value,A)});if(i){if(this._isSelectElement)return this._displayNotice("",Oe.addChoice),!1;t.duplicateItemsAllowed||(n=!1,r=zr(t.uniqueItemText,A))}}return n&&(r=zr(t.addItemText,A)),r&&this._displayNotice(r,Oe.addChoice),n},e.prototype._searchChoices=function(A){var t=A.trim().replace(/\s{2,}/," ");if(!t.length||t===this._currentValue)return null;var n=this._searcher;n.isEmptyIndex()&&n.index(this._store.searchableChoices);var r=n.search(t);this._currentValue=t,this._highlightPosition=0,this._isSearching=!0;var i=this._notice,s=i&&i.type;return s!==Oe.addChoice&&(r.length?this._clearNotice():this._displayNotice(Pd(this.config.noResultsText),Oe.noResults)),this._store.dispatch(NE(r)),r.length},e.prototype._stopSearch=function(){this._isSearching&&(this._currentValue="",this._isSearching=!1,this._clearNotice(),this._store.dispatch(RE(!0)),this.passedElement.triggerEvent(nt.search,{value:"",resultCount:0}))},e.prototype._addEventListeners=function(){var A=this._docRoot,t=this.containerOuter.element,n=this.input.element;A.addEventListener("touchend",this._onTouchEnd,!0),t.addEventListener("keydown",this._onKeyDown,!0),t.addEventListener("mousedown",this._onMouseDown,!0),A.addEventListener("click",this._onClick,{passive:!0}),A.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.dropdown.element.addEventListener("mouseover",this._onMouseOver,{passive:!0}),this._isSelectOneElement&&(t.addEventListener("focus",this._onFocus,{passive:!0}),t.addEventListener("blur",this._onBlur,{passive:!0})),n.addEventListener("keyup",this._onKeyUp,{passive:!0}),n.addEventListener("input",this._onInput,{passive:!0}),n.addEventListener("focus",this._onFocus,{passive:!0}),n.addEventListener("blur",this._onBlur,{passive:!0}),n.form&&n.form.addEventListener("reset",this._onFormReset,{passive:!0}),this.input.addEventListeners()},e.prototype._removeEventListeners=function(){var A=this._docRoot,t=this.containerOuter.element,n=this.input.element;A.removeEventListener("touchend",this._onTouchEnd,!0),t.removeEventListener("keydown",this._onKeyDown,!0),t.removeEventListener("mousedown",this._onMouseDown,!0),A.removeEventListener("click",this._onClick),A.removeEventListener("touchmove",this._onTouchMove),this.dropdown.element.removeEventListener("mouseover",this._onMouseOver),this._isSelectOneElement&&(t.removeEventListener("focus",this._onFocus),t.removeEventListener("blur",this._onBlur)),n.removeEventListener("keyup",this._onKeyUp),n.removeEventListener("input",this._onInput),n.removeEventListener("focus",this._onFocus),n.removeEventListener("blur",this._onBlur),n.form&&n.form.removeEventListener("reset",this._onFormReset),this.input.removeEventListeners()},e.prototype._onKeyDown=function(A){var t=A.keyCode,n=this.dropdown.isActive,r=A.key.length===1||A.key.length===2&&A.key.charCodeAt(0)>=55296||A.key==="Unidentified";switch(!this._isTextElement&&!n&&t!==Xe.ESC_KEY&&t!==Xe.TAB_KEY&&t!==Xe.SHIFT_KEY&&(this.showDropdown(),!this.input.isFocussed&&r&&(this.input.value+=A.key,A.key===" "&&A.preventDefault())),t){case Xe.A_KEY:return this._onSelectKey(A,this.itemList.element.hasChildNodes());case Xe.ENTER_KEY:return this._onEnterKey(A,n);case Xe.ESC_KEY:return this._onEscapeKey(A,n);case Xe.UP_KEY:case Xe.PAGE_UP_KEY:case Xe.DOWN_KEY:case Xe.PAGE_DOWN_KEY:return this._onDirectionKey(A,n);case Xe.DELETE_KEY:case Xe.BACK_KEY:return this._onDeleteKey(A,this._store.items,this.input.isFocussed)}},e.prototype._onKeyUp=function(){this._canSearch=this.config.searchEnabled},e.prototype._onInput=function(){var A=this.input.value;if(!A){this._isTextElement?this.hideDropdown(!0):this._stopSearch();return}this._canAddItems()&&(this._canSearch&&this._handleSearch(A),this._canAddUserChoices&&(this._canCreateItem(A),this._isSelectElement&&(this._highlightPosition=0,this._highlightChoice())))},e.prototype._onSelectKey=function(A,t){if((A.ctrlKey||A.metaKey)&&t){this._canSearch=!1;var n=this.config.removeItems&&!this.input.value&&this.input.element===document.activeElement;n&&this.highlightAll()}},e.prototype._onEnterKey=function(A,t){var n=this,r=this.input.value,i=A.target;if(A.preventDefault(),i&&i.hasAttribute("data-button")){this._handleButtonAction(i);return}if(!t){(this._isSelectElement||this._notice)&&this.showDropdown();return}var s=this.dropdown.element.querySelector(jr(this.config.classNames.highlightedState));if(!(s&&this._handleChoiceAction(s))){if(!i||!r){this.hideDropdown(!0);return}if(this._canAddItems()){var o=!1;this._store.withTxn(function(){if(o=n._findAndSelectChoiceByValue(r,!0),!o){if(!n._canAddUserChoices||!n._canCreateItem(r))return;n._addChoice(Lt(r,!1,n.config.allowHtmlUserInput),!0,!0),o=!0}n.clearInput(),n.unhighlightAll()}),o&&(this._triggerChange(r),this.config.closeDropdownOnSelect&&this.hideDropdown(!0))}}},e.prototype._onEscapeKey=function(A,t){t&&(A.stopPropagation(),this.hideDropdown(!0),this._stopSearch(),this.containerOuter.element.focus())},e.prototype._onDirectionKey=function(A,t){var n=A.keyCode;if(t||this._isSelectOneElement){this.showDropdown(),this._canSearch=!1;var r=n===Xe.DOWN_KEY||n===Xe.PAGE_DOWN_KEY?1:-1,i=A.metaKey||n===Xe.PAGE_DOWN_KEY||n===Xe.PAGE_UP_KEY,s=void 0;if(i)r>0?s=this.dropdown.element.querySelector("".concat(Zr,":last-of-type")):s=this.dropdown.element.querySelector(Zr);else{var o=this.dropdown.element.querySelector(jr(this.config.classNames.highlightedState));o?s=XE(o,Zr,r):s=this.dropdown.element.querySelector(Zr)}s&&(JE(s,this.choiceList.element,r)||this.choiceList.scrollToChildElement(s,r),this._highlightChoice(s)),A.preventDefault()}},e.prototype._onDeleteKey=function(A,t,n){!this._isSelectOneElement&&!A.target.value&&n&&(this._handleBackspace(t),A.preventDefault())},e.prototype._onTouchMove=function(){this._wasTap&&(this._wasTap=!1)},e.prototype._onTouchEnd=function(A){var t=(A||A.touches[0]).target,n=this._wasTap&&this.containerOuter.element.contains(t);if(n){var r=t===this.containerOuter.element||t===this.containerInner.element;r&&(this._isTextElement?this.input.focus():this._isSelectMultipleElement&&this.showDropdown()),A.stopPropagation()}this._wasTap=!0},e.prototype._onMouseDown=function(A){var t=A.target;if(t instanceof HTMLElement){if(s2&&this.choiceList.element.contains(t)){var n=this.choiceList.element.firstElementChild;this._isScrollingOnIe=this._direction==="ltr"?A.offsetX>=n.offsetWidth:A.offsetX<n.offsetLeft}if(t!==this.input.element){var r=t.closest("[data-button],[data-item],[data-choice]");r instanceof HTMLElement&&("button"in r.dataset?this._handleButtonAction(r):"item"in r.dataset?this._handleItemAction(r,A.shiftKey):"choice"in r.dataset&&this._handleChoiceAction(r)),A.preventDefault()}}},e.prototype._onMouseOver=function(A){var t=A.target;t instanceof HTMLElement&&"choice"in t.dataset&&this._highlightChoice(t)},e.prototype._onClick=function(A){var t=A.target,n=this.containerOuter,r=n.element.contains(t);r?!this.dropdown.isActive&&!n.isDisabled?this._isTextElement?document.activeElement!==this.input.element&&this.input.focus():(this.showDropdown(),n.element.focus()):this._isSelectOneElement&&t!==this.input.element&&!this.dropdown.element.contains(t)&&this.hideDropdown():(n.removeFocusState(),this.hideDropdown(!0),this.unhighlightAll())},e.prototype._onFocus=function(A){var t=A.target,n=this.containerOuter,r=t&&n.element.contains(t);if(r){var i=t===this.input.element;this._isTextElement?i&&n.addFocusState():this._isSelectMultipleElement?i&&(this.showDropdown(!0),n.addFocusState()):(n.addFocusState(),i&&this.showDropdown(!0))}},e.prototype._onBlur=function(A){var t=A.target,n=this.containerOuter,r=t&&n.element.contains(t);r&&!this._isScrollingOnIe?t===this.input.element?(n.removeFocusState(),this.hideDropdown(!0),(this._isTextElement||this._isSelectMultipleElement)&&this.unhighlightAll()):t===this.containerOuter.element&&(n.removeFocusState(),this._canSearch||this.hideDropdown(!0)):(this._isScrollingOnIe=!1,this.input.element.focus())},e.prototype._onFormReset=function(){var A=this;this._store.withTxn(function(){A.clearInput(),A.hideDropdown(),A.refresh(!1,!1,!0),A._initialItems.length&&A.setChoiceByValue(A._initialItems)})},e.prototype._highlightChoice=function(A){A===void 0&&(A=null);var t=Array.from(this.dropdown.element.querySelectorAll(Zr));if(t.length){var n=A,r=this.config.classNames.highlightedState,i=Array.from(this.dropdown.element.querySelectorAll(jr(r)));i.forEach(function(s){xt(s,r),s.setAttribute("aria-selected","false")}),n?this._highlightPosition=t.indexOf(n):(t.length>this._highlightPosition?n=t[this._highlightPosition]:n=t[t.length-1],n||(n=t[0])),VA(n,r),n.setAttribute("aria-selected","true"),this.passedElement.triggerEvent(nt.highlightChoice,{el:n}),this.dropdown.isActive&&(this.input.setActiveDescendant(n.id),this.containerOuter.setActiveDescendant(n.id))}},e.prototype._addItem=function(A,t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!1),!A.id)throw new TypeError("item.id must be set before _addItem is called for a choice/item");(this.config.singleModeForMultiSelect||this._isSelectOneElement)&&this.removeActiveItems(A.id),this._store.dispatch(Od(A)),t&&(this.passedElement.triggerEvent(nt.addItem,this._getChoiceForOutput(A)),n&&this.passedElement.triggerEvent(nt.choice,this._getChoiceForOutput(A)))},e.prototype._removeItem=function(A){if(A.id){this._store.dispatch(Nd(A));var t=this._notice;t&&t.type===Oe.noChoices&&this._clearNotice(),this.passedElement.triggerEvent(nt.removeItem,this._getChoiceForOutput(A))}},e.prototype._addChoice=function(A,t,n){if(t===void 0&&(t=!0),n===void 0&&(n=!1),A.id)throw new TypeError("Can not re-add a choice which has already been added");var r=this.config;if(!(!r.duplicateItemsAllowed&&this._store.choices.find(function(o){return r.valueComparer(o.value,A.value)}))){this._lastAddedChoiceId++,A.id=this._lastAddedChoiceId,A.elementId="".concat(this._baseId,"-").concat(this._idNames.itemChoice,"-").concat(A.id);var i=r.prependValue,s=r.appendValue;i&&(A.value=i+A.value),s&&(A.value+=s.toString()),(i||s)&&A.element&&(A.element.value=A.value),this._clearNotice(),this._store.dispatch(Kd(A)),A.selected&&this._addItem(A,t,n)}},e.prototype._addGroup=function(A,t){var n=this;if(t===void 0&&(t=!0),A.id)throw new TypeError("Can not re-add a group which has already been added");this._store.dispatch(PE(A)),A.choices&&(this._lastAddedGroupId++,A.id=this._lastAddedGroupId,A.choices.forEach(function(r){r.group=A,A.disabled&&(r.disabled=!0),n._addChoice(r,t)}))},e.prototype._createTemplates=function(){var A=this,t=this.config.callbackOnCreateTemplates,n={};typeof t=="function"&&(n=t.call(this,WE,Ta,Rs));var r={};Object.keys(this._templates).forEach(function(i){i in n?r[i]=n[i].bind(A):r[i]=A._templates[i].bind(A)}),this._templates=r},e.prototype._createElements=function(){var A=this._templates,t=this,n=t.config,r=t._isSelectOneElement,i=n.position,s=n.classNames,o=this._elementType;this.containerOuter=new Gd({element:A.containerOuter(n,this._direction,this._isSelectElement,r,n.searchEnabled,o,n.labelId),classNames:s,type:o,position:i}),this.containerInner=new Gd({element:A.containerInner(n),classNames:s,type:o,position:i}),this.input=new eI({element:A.input(n,this._placeholderValue),classNames:s,type:o,preventPaste:!n.paste}),this.choiceList=new Xd({element:A.choiceList(n,r)}),this.itemList=new Xd({element:A.itemList(n,r)}),this.dropdown=new AI({element:A.dropdown(n),classNames:s,type:o})},e.prototype._createStructure=function(){var A=this,t=A.containerInner,n=A.containerOuter,r=A.passedElement,i=this.dropdown.element;r.conceal(),t.wrap(r.element),n.wrap(t.element),this._isSelectOneElement?this.input.placeholder=this.config.searchPlaceholderValue||"":(this._placeholderValue&&(this.input.placeholder=this._placeholderValue),this.input.setWidth()),n.element.appendChild(t.element),n.element.appendChild(i),t.element.appendChild(this.itemList.element),i.appendChild(this.choiceList.element),this._isSelectOneElement?this.config.searchEnabled&&i.insertBefore(this.input.element,i.firstChild):t.element.appendChild(this.input.element),this._highlightPosition=0,this._isSearching=!1},e.prototype._initStore=function(){var A=this;this._store.subscribe(this._render).withTxn(function(){A._addPredefinedChoices(A._presetChoices,A._isSelectOneElement&&!A._hasNonChoicePlaceholder,!1)}),(!this._store.choices.length||this._isSelectOneElement&&this._hasNonChoicePlaceholder)&&this._render()},e.prototype._addPredefinedChoices=function(A,t,n){var r=this;if(t===void 0&&(t=!1),n===void 0&&(n=!0),t){var i=A.findIndex(function(s){return s.selected})===-1;i&&A.some(function(s){return s.disabled||"choices"in s?!1:(s.selected=!0,!0)})}A.forEach(function(s){"choices"in s?r._isSelectElement&&r._addGroup(s,n):r._addChoice(s,n)})},e.prototype._findAndSelectChoiceByValue=function(A,t){var n=this;t===void 0&&(t=!1);var r=this._store.choices.find(function(i){return n.config.valueComparer(i.value,A)});return r&&!r.disabled&&!r.selected?(this._addItem(r,!0,t),!0):!1},e.prototype._generatePlaceholderValue=function(){var A=this.config;if(!A.placeholder)return null;if(this._hasNonChoicePlaceholder)return A.placeholderValue;if(this._isSelectElement){var t=this.passedElement.placeholderOption;return t?t.text:null}return null},e.prototype._warnChoicesInitFailed=function(A){if(!this.config.silent)if(this.initialised){if(!this.initialisedOK)throw new TypeError("".concat(A," called for an element which has multiple instances of Choices initialised on it"))}else throw new TypeError("".concat(A," called on a non-initialised instance of Choices"))},e.version="11.1.0",e}();const NH="",RH="";function dg(e){let A,t;return{c(){A=C("label"),t=sA(e[2]),m(A,"for",e[4])},m(n,r){K(n,A,r),w(A,t)},p(n,r){r&4&&NA(t,n[2])},d(n){n&&D(A)}}}function l2(e){let A;return{c(){A=C("select"),m(A,"id",e[4]),m(A,"name",e[4]),m(A,"aria-label",e[2]),m(A,"class","m-1")},m(t,n){K(t,A,n)},p(t,n){n&4&&m(A,"aria-label",t[2])},i:tA,o:tA,d(t){t&&D(A)}}}function c2(e){let A,t,n,r=e[3].length&&gg(e);return{c(){r&&r.c(),A=R(),t=C("select"),m(t,"id",e[4]),m(t,"name",e[4]),m(t,"aria-label",e[2]),m(t,"class","m-1"),t.multiple=!0},m(i,s){r&&r.m(i,s),K(i,A,s),K(i,t,s),n=!0},p(i,s){i[3].length?r?(r.p(i,s),s&8&&G(r,1)):(r=gg(i),r.c(),G(r,1),r.m(A.parentNode,A)):r&&($A(),W(r,1,1,()=>{r=null}),Ae()),(!n||s&4)&&m(t,"aria-label",i[2])},i(i){n||(G(r),n=!0)},o(i){W(r),n=!1},d(i){r&&r.d(i),i&&D(A),i&&D(t)}}}function gg(e){let A,t,n=e[3].length+"",r,i,s,o;return s=new Bi({props:{targetHtmlId:e[5],tooltipText:`${e[3].length}
                                    ${Y==="fr"&&e[3].length>1?"valeurs sélectionnées":Y==="fr"&&e[3].length===1?"valeur sélectionnée":Y==="en"&&e[3].length>1?"selected values":"selected value"}`}}),{c(){A=C("span"),t=C("span"),r=sA(n),i=R(),pA(s.$$.fragment),m(t,"id",e[5]),m(t,"class","input-dropdown-count tag m-1 svelte-1epfuu8"),m(A,"class","is-relative")},m(a,l){K(a,A,l),w(A,t),w(t,r),w(A,i),gA(s,A,null),o=!0},p(a,l){(!o||l&8)&&n!==(n=a[3].length+"")&&NA(r,n);const c={};l&8&&(c.tooltipText=`${a[3].length}
                                    ${Y==="fr"&&a[3].length>1?"valeurs sélectionnées":Y==="fr"&&a[3].length===1?"valeur sélectionnée":Y==="en"&&a[3].length>1?"selected values":"selected value"}`),s.$set(c)},i(a){o||(G(s.$$.fragment,a),o=!0)},o(a){W(s.$$.fragment,a),o=!1},d(a){a&&D(A),BA(s)}}}function u2(e){let A,t,n,r,i,s,o,a=e[2]!==void 0&&dg(e);const l=[c2,l2],c=[];function f(u,h){return u[0]?0:1}return r=f(e),i=c[r]=l[r](e),{c(){A=C("div"),a&&a.c(),t=R(),n=C("div"),i.c(),m(n,"class",s="input-dropdown-select "+(e[0]?"is-multiple":"is-single")+" "+(e[0]&&e[3].length?"is-flex is-justify-content-flex-start is-align-items-center":"")+" "+(e[1]?"light-display":"")+" svelte-1epfuu8"),m(A,"class","input-dropdown-select-wrapper")},m(u,h){K(u,A,h),a&&a.m(A,null),w(A,t),w(A,n),c[r].m(n,null),o=!0},p(u,[h]){u[2]!==void 0?a?a.p(u,h):(a=dg(u),a.c(),a.m(A,t)):a&&(a.d(1),a=null);let d=r;r=f(u),r===d?c[r].p(u,h):($A(),W(c[d],1,1,()=>{c[d]=null}),Ae(),i=c[r],i?i.p(u,h):(i=c[r]=l[r](u),i.c()),G(i,1),i.m(n,null)),(!o||h&11&&s!==(s="input-dropdown-select "+(u[0]?"is-multiple":"is-single")+" "+(u[0]&&u[3].length?"is-flex is-justify-content-flex-start is-align-items-center":"")+" "+(u[1]?"light-display":"")+" svelte-1epfuu8"))&&m(n,"class",s)},i(u){o||(G(i),o=!0)},o(u){W(i),o=!1},d(u){u&&D(A),a&&a.d(),c[r].d()}}}const f2=250;function h2(e,A,t){let n,r,{choicesItems:i}=A,{start:s=[]}=A,{multiple:o}=A,{searchable:a=!0}=A,{lightDisplay:l=!1}=A,{placeholder:c=Y==="fr"?"Sélectionner une valeur":"Select a value"}=A,{title:f=void 0}=A,{selectAll:u=!!o}=A;const h=`input-dropdown-select-${window.crypto.randomUUID()}`,d=`input-dropdown-counter-${window.crypto.randomUUID()}`,g=`select-all-${window.crypto.randomUUID()}`,B=`unselect-all-${window.crypto.randomUUID()}`,p=ii();let Q;const F=ui();F.setCompareFn(eo);const v=Je("resetTrigger")||void 0;v==null||v.subscribe(()=>k(Q,i,s,u));const y=()=>{t(11,r=!0),setTimeout(()=>t(11,r=!1),f2)},U=(I,X)=>{X||(F.set(I),F.same()||p("updateValues",n))},S=I=>`<span class="iconify" data-icon=${I}/>`,_=(I,X)=>I!=null&&X!=null&&I.length&&X.length?`<span class="dropdown-prefix-wrapper">${X==="iconify"?S(I):I}</span>`:"",b=(I,X)=>X?[{value:g,label:`<b>${Y==="fr"?"Tout sélectionner":"Select all"}</b>`},{value:B,label:`<b>${Y==="fr"?"Tout retirer":"Remove all"}</b>`},...I]:I,T=(I,X)=>b(I,X).map(O=>(O.id=`dropdown-choice-${window.crypto.randomUUID()}`,O.label=`<span>
                ${_(O.prefix||"",O.prefixType||"")}
                <span class="dropdown-prefix-text">${O.label}</span>
            </span>`,O));function x(I,X,O){return I=structuredClone(I),X=structuredClone(X),I=T(I,O).map(V=>X.includes(V.value)?{...V,selected:!0}:{...V,selected:!1}),t(3,n=X),I}function k(I,X,O,V){I&&(X=x(X,O,V),I.clearStore().setChoices(X))}const M=(I,X,O,V,J,eA)=>(V=structuredClone(V),O=structuredClone(O),I.detail.value===J?(y(),O=O.map(oA=>[J,eA].includes(oA.value)?{...oA,selected:!1}:{...oA,selected:!0}),X.removeActiveItems().clearChoices(!0,!0).setValue(O).hideDropdown(),V=[...new Set(O.filter(oA=>oA.selected===!0).map(oA=>oA.value))]):I.detail.value===eA?(X.removeActiveItems().hideDropdown(),V=[]):V=o===!0?[...V,I.detail.value]:[I.detail.value],[...new Set(V)]),E=(I,X)=>structuredClone(X).filter(O=>O!==I.detail.value);function P(I,X){const O=document.getElementById(h);Q=new a2(O,{items:[],choices:I,addChoices:!1,addItems:!1,removeItems:!0,removeItemButton:!0,searchEnabled:a,allowHTML:!0,shouldSort:!X,sorter:(V,J)=>V.label.localeCompare(J.label),placeholderValue:c,classNames:{item:["choices__item","dropdown-item"]},loadingText:Y==="fr"?"Chargement...":"Loading...",noResultsText:Y==="fr"?"Pas de résultats":"No results found",noChoicesText:Y==="fr"?"Pas de choix pour faire la sélection":"No choices to choose from",itemSelectText:Y==="fr"?"Cliquer pour sélectionner":"Press to select",uniqueItemText:Y==="fr"?"Seules des valeurs uniques peuvent être ajoutées":"Only unique values can be added",customAddItemText:Y==="fr"?"Les valeurs ne répondent pas aux conditions attendues":"Only values matching specific conditions can be added",removeItemIconText:Y==="fr"?"Retirer l'item":"Remove item",addItemText:V=>Y==="fr"?`Cliquer sur Entrer pour ajouter <b>${V}</b>`:`Press Enter to add <b>"${V}"</b>`,removeItemLabelText:V=>Y==="fr"?`Retirer l'item: ${V}`:`Remove item: ${V}`,maxItemText:V=>Y==="fr"?`Seulement ${V} items peuvent être ajoutées`:`Only ${V} items can be added`}),O.addEventListener("addItem",V=>{t(3,n=M(V,Q,I,n,g,B))}),O.addEventListener("removeItem",V=>{t(3,n=E(V,n))})}return gn(()=>{const I=x(i,s,u);P(I,u)}),Bn(()=>{Q.destroy(),Q=void 0}),e.$$set=I=>{"choicesItems"in I&&t(6,i=I.choicesItems),"start"in I&&t(7,s=I.start),"multiple"in I&&t(0,o=I.multiple),"searchable"in I&&t(8,a=I.searchable),"lightDisplay"in I&&t(1,l=I.lightDisplay),"placeholder"in I&&t(9,c=I.placeholder),"title"in I&&t(2,f=I.title),"selectAll"in I&&t(10,u=I.selectAll)},e.$$.update=()=>{e.$$.dirty&2056&&U(n,r)},t(3,n=[]),t(11,r=!1),[o,l,f,n,h,d,i,s,a,c,u,r]}class d2 extends PA{constructor(A){super(),RA(this,A,h2,u2,OA,{choicesItems:6,start:7,multiple:0,searchable:8,lightDisplay:1,placeholder:9,title:2,selectAll:10})}}const PH="";function g2(e){let A,t,n,r,i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,S,_,b,T,x,k,M,E,P,I,X,O,V,J,eA,oA,wA;return l=new pn({props:{minVal:0,maxVal:1,start:e[5],emitOnUpdate:!0,title:Y==="fr"?"Opacité":"Opacity"}}),l.$on("updateSlider",e[9]),u=new pn({props:{minVal:0,maxVal:360,start:e[6],step:1,emitOnUpdate:!0,title:"Rotation"}}),u.$on("updateSlider",e[10]),g=new pn({props:{minVal:0,maxVal:200,step:1,start:e[7],emitOnUpdate:!0,title:Y==="fr"?"Redimensionner":"Scale"}}),g.$on("updateSlider",e[11]),Q=new pn({props:{minVal:-100,maxVal:100,step:1,start:e[8][0],emitOnUpdate:!0,title:Y==="fr"?"Translation horizontale":"Horizontal translate"}}),Q.$on("updateSlider",e[12]),y=new pn({props:{minVal:-100,maxVal:100,step:1,start:e[8][1],emitOnUpdate:!0,title:Y==="fr"?"Translation verticale":"Vertical translate"}}),y.$on("updateSlider",e[13]),_=new d2({props:{choicesItems:e[4],start:[],lightDisplay:!0,placeholder:Y==="fr"?"Sélectionner":"Select",title:Y==="fr"?"Basculer":"Flip"}}),_.$on("updateValues",e[14]),{c(){A=C("div"),t=C("div"),n=C("div"),r=C("div"),i=C("strong"),i.textContent=`${Y==="en"?"Query image transformation":"Modification de l'image requête"}`,s=R(),o=C("div"),a=C("div"),pA(l.$$.fragment),c=R(),f=C("div"),pA(u.$$.fragment),h=R(),d=C("div"),pA(g.$$.fragment),B=R(),p=C("div"),pA(Q.$$.fragment),F=R(),v=C("div"),pA(y.$$.fragment),U=R(),S=C("div"),pA(_.$$.fragment),b=R(),T=C("div"),x=C("button"),x.textContent=`${Y==="fr"?"Réinitialiser":"Reset"}`,k=R(),M=C("div"),E=C("img"),X=R(),O=C("img"),m(r,"class","toolbar-title mt-0 mb-2 svelte-nzei31"),m(a,"class"," svelte-nzei31"),m(f,"class"," svelte-nzei31"),m(d,"class"," svelte-nzei31"),m(p,"class"," svelte-nzei31"),m(v,"class"," svelte-nzei31"),m(S,"class"," svelte-nzei31"),m(x,"class","button is-link"),m(T,"class","mt-2 is-flex is-flex-direction-column is-justify-content-center is-align-items-flex-end svelte-nzei31"),m(o,"class","toolbar-controls is-flex is-flex-direction-column is-align-items-start is-justify-content-center svelte-nzei31"),m(n,"class","toolbar svelte-nzei31"),m(t,"class","toolbar-wrapper is-flex is-flex-direction-column is-justify-content-center is-align-items-center svelte-nzei31"),m(E,"class","compare-img svelte-nzei31"),Ne(E.src,P=e[0].queryImage.href)||m(E,"src",P),m(E,"alt",I=e[0].queryImage.title),m(O,"class","main-img svelte-nzei31"),Ne(O.src,V=e[0].similarityImage.href)||m(O,"src",V),m(O,"alt",J=e[0].similarityImage.title),ZA(O,"overlay-reset",e[2]),TA(O,"opacity",e[1]),TA(O,"transform",e[3]),m(M,"class","overlay-wrapper svelte-nzei31"),m(A,"class","similarity-overlay-wrapper svelte-nzei31")},m(cA,yA){K(cA,A,yA),w(A,t),w(t,n),w(n,r),w(r,i),w(n,s),w(n,o),w(o,a),gA(l,a,null),w(o,c),w(o,f),gA(u,f,null),w(o,h),w(o,d),gA(g,d,null),w(o,B),w(o,p),gA(Q,p,null),w(o,F),w(o,v),gA(y,v,null),w(o,U),w(o,S),gA(_,S,null),w(o,b),w(o,T),w(T,x),w(A,k),w(A,M),w(M,E),w(M,X),w(M,O),eA=!0,oA||(wA=dA(x,"click",e[15]),oA=!0)},p(cA,[yA]){(!eA||yA&1&&!Ne(E.src,P=cA[0].queryImage.href))&&m(E,"src",P),(!eA||yA&1&&I!==(I=cA[0].queryImage.title))&&m(E,"alt",I),(!eA||yA&1&&!Ne(O.src,V=cA[0].similarityImage.href))&&m(O,"src",V),(!eA||yA&1&&J!==(J=cA[0].similarityImage.title))&&m(O,"alt",J),(!eA||yA&4)&&ZA(O,"overlay-reset",cA[2]),yA&2&&TA(O,"opacity",cA[1]),yA&8&&TA(O,"transform",cA[3])},i(cA){eA||(G(l.$$.fragment,cA),G(u.$$.fragment,cA),G(g.$$.fragment,cA),G(Q.$$.fragment,cA),G(y.$$.fragment,cA),G(_.$$.fragment,cA),eA=!0)},o(cA){W(l.$$.fragment,cA),W(u.$$.fragment,cA),W(g.$$.fragment,cA),W(Q.$$.fragment,cA),W(y.$$.fragment,cA),W(_.$$.fragment,cA),eA=!1},d(cA){cA&&D(A),BA(l),BA(u),BA(g),BA(Q),BA(y),BA(_),oA=!1,wA()}}}function B2(e,A,t){let n,{imgData:r}=A;const i=[{value:"h",label:Y==="fr"?"Basculer horizontalement":"Flip horizontally"},{value:"v",label:Y==="fr"?"Basculer verticalement":"Flip vertically"},{value:"hv",label:Y==="fr"?"Basculer horizontalement et verticalement":"Flip horizontally and vertically"}];let s=.5;const o=s;let a=0;const l=a;let c=100;const f=c;let u=[1,1];const h=structuredClone(u);let d=[0,0];const g=structuredClone(d);let B=!1;const p=DA(window.crypto.randomUUID());Mn("resetTrigger",p);const Q=b=>t(1,s=b.detail),F=b=>t(16,a=b.detail),v=b=>t(17,c=b.detail),y=b=>t(19,d=[b.detail,d[1]]),U=b=>t(19,d=[d[0],b.detail]),S=b=>{let T=b.detail[0];t(18,u=T==="hv"?[-1,-1]:T==="h"?[-1,1]:T==="v"?[1,-1]:[1,1])},_=()=>{t(1,s=o),t(16,a=l),t(17,c=f),t(18,u=h),t(19,d=g),p.set(window.crypto.randomUUID()),t(2,B=!0),setTimeout(()=>t(2,B=!1),1e3)};return e.$$set=b=>{"imgData"in b&&t(0,r=b.imgData)},e.$$.update=()=>{e.$$.dirty&983040&&t(3,n=`translate(${d[0]-50}%, ${d[1]}%)
                        rotate(${a}deg)
                        scale(${u.map(b=>b*(c/100)).join()})`)},[r,s,B,n,i,o,l,f,g,Q,F,v,y,U,S,_,a,c,u,d]}class p2 extends PA{constructor(A){super(),RA(this,A,B2,g2,OA,{imgData:0})}}function m2(){const e=`${window.location.origin}${window.location.pathname}`,A=25,t=window.location.pathname.match(/\d+/g).join("-"),n={[t]:{}},r=[2,6],i=DA(1),s=DA({}),o=DA(JSON.parse(localStorage.getItem("selectedRegions"))||n);o.subscribe(k=>localStorage.setItem("selectedRegions",JSON.stringify(k)));const a=DA(JSON.parse(localStorage.getItem("excludedCategories"))||[]);a.subscribe(k=>localStorage.setItem("excludedCategories",JSON.stringify(k)));const l=DA(JSON.parse(localStorage.getItem("similarityScoreCutoff"))||void 0);l.subscribe(k=>{k!=null&&localStorage.setItem("similarityScoreCutoff",JSON.stringify(k))});const c=DA(JSON.parse(localStorage.getItem("propagateRecursionDepth"))||r[1]);c.subscribe(k=>localStorage.setItem("propagateRecursionDepth",JSON.stringify(k)));const f=DA(JSON.parse(localStorage.getItem("propagateFilterByRegions"))||!1);f.subscribe(k=>localStorage.setItem("propagateFilterByRegions",JSON.stringify(k)));const u=pe([c,f],([k,M])=>({propagateRecursionDepth:k,propagateFilterByRegions:M})),h=pe([a,o,l],([k,M,E])=>({excludedCategories:k,regions:M,similarityScoreCutoff:E})),d=pe([u,h],([k,M])=>({propagate:k,similarity:M})),g=DA([]),B=DA([]);async function p(){const k=async()=>{const P=await(await fetch(`${e}compared-regions`)).json();s.set(P),o.update(I=>{let X=I[t]||{};if(Object.keys(X).length){let O=Object.keys(X).filter(V=>Object.keys(P).includes(V)).reduce((V,J)=>(V[J]=X[J],V),{});I[t]=O}return I})},M=async()=>{const P=await(await fetch(`${e}query-images`)).json();P.length>0&&(g.set(P),T(S()))};hr.set(!0);try{await Promise.all([k(),M()])}catch(E){console.error("Error:",E),$g.set(E.message)}finally{hr.set(!1)}}function Q(k){localStorage.setItem("selectedRegions",JSON.stringify(k))}function F(k){o.update(M=>{const E={...M};return delete E[t][k],Q(E),E})}function v(k){o.update(M=>{const E={...M,[t]:{...M[t]||{},[k.ref]:k}};return Q(E),E})}const y=pe(o,k=>M=>{var E;return(E=k[t])==null?void 0:E.hasOwnProperty(M)});function U(k){const M=be(s),E=Object.keys(M).filter(P=>P.startsWith(k));return E.length!==1?{title:"Error"}:M[E[0]]}const S=()=>$s(i,"sp"),_=pe([i,g],([k,M])=>(async()=>b(k,M))());function b(k,M){const E=(k-1)*A,P=E+A,I=M.slice(E,P);return B.set(I),I}function T(k){Ao(k,i,"sp")}function x(k){s.update(M=>({...M,[k.ref]:k}))}return{currentPage:i,comparedRegions:s,excludedCategories:a,qImgs:g,pageQImgs:B,selectedRegions:o,propagateRecursionDepth:c,propagateFilterByRegions:f,similarityToolbarParams:d,propagateParams:u,similarityScoreCutoff:l,allowedPropagateDepthRange:r,fetchSimilarity:p,setPageQImgs:_,getRegionsInfo:U,handlePageUpdate:T,unselect:F,select:v,addComparedRegions:x,isSelected:y,pageLength:A}}const Wt=m2(),{getRegionsInfo:w2}=Wt;async function Bg(e,A,t,n,r,i,s=!1,o=!0){const a=()=>o?`<b>${!isNaN(parseFloat(t))&&A===1?`Score: ${t}`:A===2&&Y==="en"?"Manual similarity":A===2&&Y==="fr"?"Correspondance manuelle":A===3&&Y==="en"?"Propagated match":"Correspondance propagée"}</b>`:"",l=c=>`${c}<br>
        Page ${parseInt(n)}<br>
        ${a()}`;return s===!0?fetch(`${r}${i}get_regions_title/${e}`).then(c=>c.json()).then(c=>l(c.title)).catch(c=>(console.error("similarity.utils.getDesc()",c),l(Y==="fr"?"Titre inconnu":"Unknown title"))):Promise.resolve(l(w2(e).title))}function pg(e,A,t){const n=e.slice();return n[16]=A[t],n}function v2(e){let A=Y==="en"?"Similarity":"Similarité",t;return{c(){t=sA(A)},m(n,r){K(n,t,r)},p:tA,d(n){n&&D(t)}}}function C2(e){let A=Y==="en"?"Query image":"Image requête",t;return{c(){t=sA(A)},m(n,r){K(n,t,r)},p:tA,d(n){n&&D(t)}}}function mg(e){let A,t,n,r,i,s;function o(c,f){if(c[16]==="queryImage")return C2;if(c[16]==="similarityImage")return v2}let a=o(e),l=a&&a(e);return r=new Yn({props:{item:e[0][e[16]],descPromise:e[1][e[16]],height:"full"}}),{c(){A=C("div"),t=C("span"),l&&l.c(),n=R(),pA(r.$$.fragment),i=R(),m(A,"class","img-legend-wrapper column is-flex is-flex-direction-column is-justify-content-center is-align-items-center")},m(c,f){K(c,A,f),w(A,t),l&&l.m(t,null),w(A,n),gA(r,A,null),w(A,i),s=!0},p(c,f){l&&l.p(c,f);const u={};f&1&&(u.item=c[0][c[16]]),r.$set(u)},i(c){s||(G(r.$$.fragment,c),s=!0)},o(c){W(r.$$.fragment,c),s=!1},d(c){c&&D(A),l&&l.d(),BA(r)}}}function Q2(e){let A,t,n=["queryImage","similarityImage"],r=[];for(let s=0;s<2;s+=1)r[s]=mg(pg(e,n,s));const i=s=>W(r[s],1,1,()=>{r[s]=null});return{c(){A=C("div");for(let s=0;s<2;s+=1)r[s].c();m(A,"class","side-by-side columns")},m(s,o){K(s,A,o);for(let a=0;a<2;a+=1)r[a]&&r[a].m(A,null);t=!0},p(s,[o]){if(o&3){n=["queryImage","similarityImage"];let a;for(a=0;a<2;a+=1){const l=pg(s,n,a);r[a]?(r[a].p(l,o),G(r[a],1)):(r[a]=mg(l),r[a].c(),G(r[a],1),r[a].m(A,null))}for($A(),a=2;a<2;a+=1)i(a);Ae()}},i(s){if(!t){for(let o=0;o<2;o+=1)G(r[o]);t=!0}},o(s){r=r.filter(Boolean);for(let o=0;o<2;o+=1)W(r[o]);t=!1},d(s){s&&D(A),Se(r,s)}}}function y2(e,A,t){let{imgData:n}=A;const r=Je("similarityPair"),i=new URL(window.location.href),s=i.origin,o=i.pathname,[a,l,c,f]=r.qImg.split(".")[0].split("_"),[u,h,d,g]=r.sImg.split(".")[0].split("_"),B=`${a}_${l}`,p=`${u}_${h}`,Q={queryImage:Bg(B,r.similarityType,r.score,c,s,o,!0,!1),similarityImage:Bg(p,r.similarityType,r.score,d,s,o,!0,!0)};return e.$$set=F=>{"imgData"in F&&t(0,n=F.imgData)},[n,Q]}class _2 extends PA{constructor(A){super(),RA(this,A,y2,Q2,OA,{imgData:0})}}const VH="";function U2(e){let A,t;return A=new _2({props:{imgData:e[2]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p:tA,i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function F2(e){let A,t;return A=new p2({props:{imgData:e[1]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p:tA,i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function b2(e){let A,t,n,r,i,s,o,a,l;const c=[F2,U2],f=[];function u(h,d){return h[0]?0:1}return n=u(e),r=f[n]=c[n](e),a=new TE({props:{start:!1,buttonDisplay:!0,toggleLabel:Y==="en"?"Overlay view":"Vue superposée"}}),a.$on("updateChecked",e[3]),{c(){A=C("div"),t=C("div"),r.c(),s=R(),o=C("div"),pA(a.$$.fragment),m(t,"class",i="modal-similarity-images "+(e[0]?"overlay-wrapper":"side-by-side-wrapper")+" svelte-1qvtan5"),m(A,"class","modal-similarity svelte-1qvtan5")},m(h,d){K(h,A,d),w(A,t),f[n].m(t,null),w(A,s),w(A,o),gA(a,o,null),l=!0},p(h,[d]){let g=n;n=u(h),n===g?f[n].p(h,d):($A(),W(f[g],1,1,()=>{f[g]=null}),Ae(),r=f[n],r?r.p(h,d):(r=f[n]=c[n](h),r.c()),G(r,1),r.m(t,null)),(!l||d&1&&i!==(i="modal-similarity-images "+(h[0]?"overlay-wrapper":"side-by-side-wrapper")+" svelte-1qvtan5"))&&m(t,"class",i)},i(h){l||(G(r),G(a.$$.fragment,h),l=!0)},o(h){W(r),W(a.$$.fragment,h),l=!1},d(h){h&&D(A),f[n].d(),BA(a)}}}function E2(e,A,t){let{mainImgItem:n}=A,{compareImgItem:r}=A;const i={similarityImage:{href:st(n.img,n.img.split("_").pop()),title:a(n.title)},queryImage:{href:st(r.img,r.img.split("_").pop()),title:a(r.title)}},s={similarityImage:n,queryImage:r};let o=!1;function a(c){return Y==="fr"?`Vue principale de la région ${c}`:`Main view of region ${c}`}const l=()=>t(0,o=!o);return e.$$set=c=>{"mainImgItem"in c&&t(4,n=c.mainImgItem),"compareImgItem"in c&&t(5,r=c.compareImgItem)},[o,i,s,l,n,r]}class I2 extends PA{constructor(A){super(),RA(this,A,E2,b2,OA,{mainImgItem:4,compareImgItem:5})}}const H2=Object.freeze(Object.defineProperty({__proto__:null,default:I2},Symbol.toStringTag,{value:"Module"})),wg=(e,A,t,n)=>({id:e,img:e,title:`Canvas ${n} - ${t} - ${Y==="en"?"Witness":"Témoin"} #${Zs(A)}`,xywh:t.split(",").map(Number),canvas:n,ref:e.replace(".jpg",""),type:ol});function S2(e){let A,t,n,r,i,s,o,a,l,c,f;return t=new Rn({props:{category:1,isSelected:e[0]===1,toggle:e[4],padding:"pl-3 pr-2"}}),r=new Rn({props:{category:2,isSelected:e[0]===2,toggle:e[4]}}),s=new Rn({props:{category:3,isSelected:e[0]===3,toggle:e[4]}}),a=new Rn({props:{category:4,isSelected:e[0]===4,toggle:e[4]}}),c=new Rn({props:{category:5,isSelected:e[0]===5,toggle:e[4],padding:"pl-2 pr-3"}}),{c(){A=C("div"),pA(t.$$.fragment),n=R(),pA(r.$$.fragment),i=R(),pA(s.$$.fragment),o=R(),pA(a.$$.fragment),l=R(),pA(c.$$.fragment),m(A,"class","tags has-addons is-dark is-center")},m(u,h){K(u,A,h),gA(t,A,null),w(A,n),gA(r,A,null),w(A,i),gA(s,A,null),w(A,o),gA(a,A,null),w(A,l),gA(c,A,null),f=!0},p(u,h){const d={};h&1&&(d.isSelected=u[0]===1),t.$set(d);const g={};h&1&&(g.isSelected=u[0]===2),r.$set(g);const B={};h&1&&(B.isSelected=u[0]===3),s.$set(B);const p={};h&1&&(p.isSelected=u[0]===4),a.$set(p);const Q={};h&1&&(Q.isSelected=u[0]===5),c.$set(Q)},i(u){f||(G(t.$$.fragment,u),G(r.$$.fragment,u),G(s.$$.fragment,u),G(a.$$.fragment,u),G(c.$$.fragment,u),f=!0)},o(u){W(t.$$.fragment,u),W(r.$$.fragment,u),W(s.$$.fragment,u),W(a.$$.fragment,u),W(c.$$.fragment,u),f=!1},d(u){u&&D(A),BA(t),BA(r),BA(s),BA(a),BA(c)}}}function x2(e){let A,t,n,r;t=new Yn({props:{item:e[3],size:256,selectable:!1,isSquare:!1}});let i=!e[2]&&S2(e);return{c(){A=C("div"),pA(t.$$.fragment),n=R(),i&&i.c()},m(s,o){K(s,A,o),gA(t,A,null),w(A,n),i&&i.m(A,null),r=!0},p(s,[o]){s[2]||i.p(s,o)},i(s){r||(G(t.$$.fragment,s),G(i),r=!0)},o(s){W(t.$$.fragment,s),W(i),r=!1},d(s){s&&D(A),BA(t),i&&i.d()}}}function L2(e,A,t){let n,r,i;const{comparedRegions:s}=Wt;FA(e,s,M=>t(15,i=M));const o=new URL(window.location.href),a=o.origin;o.pathname;let{qImg:l}=A,{sImg:c}=A,{qRegions:f}=A,{sRegions:u}=A,{score:h=0}=A,{category:d=null}=A,{users:g=[]}=A,{isManual:B}=A,{similarityType:p}=A;const Q=Je("isInModal")||!1,[F,v,y,U]=c.split(".")[0].split("_"),_=(()=>{let M=wg(c,F,U,y);const E=i[`${F}_${v}_anno${u}`]||{title:M.title};return M.title=`${tB(E.title.replace(/^[^|]+/,""))}<br/>Page ${eB(y)}<br/><b>Score: ${h}</b>`,M})();Mn("similarityPair",{qImg:l,sImg:c,qRegions:f,sRegions:u,score:h,category:d,users:g,isManual:B,similarityType:p});function b(M){M=M.slice();let E=M.indexOf(Number(oi));return r&&E===-1?M.push(Number(oi)):!r&&E!==-1&&M.splice(E,1),M}const T=()=>({img_1:l,img_2:c,regions_id_1:f,regions_id_2:u,score:h,category:n,category_x:b(g),similarity_type:p});function x(M){M===5?r=!r:t(0,n=n===M?null:M)}async function k(M){x(M);try{(await fetch(`${a}/${wt}/save-category`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify(T())})).ok||(console.error("Error: Network response was not ok"),x(M))}catch(E){console.error("Error:",E),x(M)}}return e.$$set=M=>{"qImg"in M&&t(5,l=M.qImg),"sImg"in M&&t(6,c=M.sImg),"qRegions"in M&&t(7,f=M.qRegions),"sRegions"in M&&t(8,u=M.sRegions),"score"in M&&t(9,h=M.score),"category"in M&&t(10,d=M.category),"users"in M&&t(11,g=M.users),"isManual"in M&&t(12,B=M.isManual),"similarityType"in M&&t(13,p=M.similarityType)},e.$$.update=()=>{e.$$.dirty&1024&&t(0,n=d),e.$$.dirty&2048&&(r=g.includes(Number(oi))||!1)},[n,s,Q,_,k,l,c,f,u,h,d,g,B,p]}class k2 extends PA{constructor(A){super(),RA(this,A,L2,x2,OA,{qImg:5,sImg:6,qRegions:7,sRegions:8,score:9,category:10,users:11,isManual:12,similarityType:13})}}function vg(e,A,t){const n=e.slice();return n[22]=A[t].uuid,n[23]=A[t].data[0],n[24]=A[t].data[1],n[25]=A[t].data[2],n[26]=A[t].data[3],n[27]=A[t].data[4],n[28]=A[t].data[5],n[29]=A[t].data[6],n[30]=A[t].data[7],n[31]=A[t].data[8],n}function M2(e){let A,t=Y==="en"?`Error when retrieving similar regions: ${e[2]}`:`Erreur de recupération des régions similaires: ${e[2]}`,n;return{c(){A=C("div"),n=sA(t),m(A,"class","faded is-center")},m(r,i){K(r,A,i),w(A,n)},p(r,i){i[0]&4&&t!==(t=Y==="en"?`Error when retrieving similar regions: ${r[2]}`:`Erreur de recupération des régions similaires: ${r[2]}`)&&NA(n,t)},i:tA,o:tA,d(r){r&&D(A)}}}function T2(e){let A,t,n=e[4].length+"",r,i,s=e[11](e[10],e[4].length)+"",o,a,l,c=[],f=new Map,u,h=e[4];const d=B=>B[22];for(let B=0;B<h.length;B+=1){let p=vg(e,h,B),Q=d(p);f.set(Q,c[B]=Qg(Q,p))}let g=null;return h.length||(g=Cg(e)),{c(){A=C("div"),t=C("span"),r=sA(n),i=R(),o=sA(s),a=R(),l=C("div");for(let B=0;B<c.length;B+=1)c[B].c();g&&g.c(),m(t,"class","m-2"),m(l,"class","m-2 is-gap-2"),ZA(l,"grid",e[4].length>0)},m(B,p){K(B,A,p),w(A,t),w(t,r),w(t,i),w(t,o),w(A,a),w(A,l);for(let Q=0;Q<c.length;Q+=1)c[Q]&&c[Q].m(l,null);g&&g.m(l,null),u=!0},p(B,p){(!u||p[0]&16)&&n!==(n=B[4].length+"")&&NA(r,n),(!u||p[0]&16)&&s!==(s=B[11](B[10],B[4].length)+"")&&NA(o,s),p[0]&49&&(h=B[4],$A(),c=fr(c,p,d,1,B,h,f,l,js,Qg,null,vg),Ae(),!h.length&&g?g.p(B,p):h.length?g&&(g.d(1),g=null):(g=Cg(B),g.c(),g.m(l,null))),(!u||p[0]&16)&&ZA(l,"grid",B[4].length>0)},i(B){if(!u){for(let p=0;p<h.length;p+=1)G(c[p]);u=!0}},o(B){for(let p=0;p<c.length;p+=1)W(c[p]);u=!1},d(B){B&&D(A);for(let p=0;p<c.length;p+=1)c[p].d();g&&g.d()}}}function D2(e){let A;return{c(){A=C("div"),A.textContent=`${Y==="en"&&!e[10]?"Retrieving similar regions...":Y==="fr"&&!e[10]?"Récupération des régions similaires...":Y==="en"&&e[10]?"Retrieving propagated regions...":"Récupération de similarités propagées..."}`,m(A,"class","faded is-center")},m(t,n){K(t,A,n)},p:tA,i:tA,o:tA,d(t){t&&D(A)}}}function Cg(e){let A;function t(i,s){return i[5]?O2:K2}let n=t(e),r=n(e);return{c(){r.c(),A=ke()},m(i,s){r.m(i,s),K(i,A,s)},p(i,s){n===(n=t(i))&&r?r.p(i,s):(r.d(1),r=n(i),r&&(r.c(),r.m(A.parentNode,A)))},d(i){r.d(i),i&&D(A)}}}function K2(e){let A;return{c(){A=C("div"),A.textContent=`${Y==="en"?"No similar regions":"Pas de régions similaires"}
                    `,m(A,"class","faded is-center")},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function O2(e){let A;return{c(){A=C("div"),A.textContent=`${Y==="en"?"No document selected. Select one to display results.":"Aucun document sélectionné. Sélectionnez-en un pour afficher les résultats."}
                    `,m(A,"class","faded is-center")},m(t,n){K(t,A,n)},p:tA,d(t){t&&D(A)}}}function Qg(e,A){let t,n,r;return n=new k2({props:{qImg:A[0],sImg:A[25],score:A[23],qRegions:A[26],sRegions:A[27],category:A[28],users:A[29],isManual:A[30],similarityType:A[31]}}),{key:e,first:null,c(){t=ke(),pA(n.$$.fragment),this.first=t},m(i,s){K(i,t,s),gA(n,i,s),r=!0},p(i,s){A=i;const o={};s[0]&1&&(o.qImg=A[0]),s[0]&16&&(o.sImg=A[25]),s[0]&16&&(o.score=A[23]),s[0]&16&&(o.qRegions=A[26]),s[0]&16&&(o.sRegions=A[27]),s[0]&16&&(o.category=A[28]),s[0]&16&&(o.users=A[29]),s[0]&16&&(o.isManual=A[30]),s[0]&16&&(o.similarityType=A[31]),n.$set(o)},i(i){r||(G(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&D(t),BA(n,i)}}}function N2(e){let A,t,n,r;const i=[D2,T2,M2],s=[];function o(a,l){return a[1]&&a[3]==="loading"?0:a[3]==="loaded"?1:a[3]==="error"?2:-1}return~(A=o(e))&&(t=s[A]=i[A](e)),{c(){t&&t.c(),n=ke()},m(a,l){~A&&s[A].m(a,l),K(a,n,l),r=!0},p(a,l){let c=A;A=o(a),A===c?~A&&s[A].p(a,l):(t&&($A(),W(s[c],1,1,()=>{s[c]=null}),Ae()),~A?(t=s[A],t?t.p(a,l):(t=s[A]=i[A](a),t.c()),G(t,1),t.m(n.parentNode,n)):t=null)},i(a){r||(G(t),r=!0)},o(a){W(t),r=!1},d(a){~A&&s[A].d(a),a&&D(n)}}}function R2(e,A,t){let n,r,i,s,o,a,l,c,{qImg:f}=A,{sImgsPromise:u}=A;const{selectedRegions:h,excludedCategories:d,similarityScoreCutoff:g,propagateFilterByRegions:B}=Wt;FA(e,h,b=>t(16,c=b)),FA(e,d,b=>t(15,l=b)),FA(e,g,b=>t(14,a=b)),FA(e,B,b=>t(13,o=b));const p=Je("similarityPropagatedContext")||!1,Q=window.location.pathname.match(/\d+/g).join("-");let F;const v=(b,T)=>b===null||T===void 0||Number(b)>=T,y=(b,T,x)=>!x.includes(b),U=(b,T,x,k,M,E)=>p?!0:v(b,M)&&y(T,x,k),S=(b,T,x,k)=>b.filter(({uuid:M,data:[E,P,I,X,O,V,J,eA,oA]})=>U(E,V,J,T,x)),_=(b,T)=>{const x=T>1;return b?Y==="fr"?x?"similarités propagées":"similarité propagée":x?"propagated matches":"propagated match":Y==="fr"?x?"images similaires":"image similaire":x?"similar images":"similar image"};return e.$$set=b=>{"qImg"in b&&t(0,f=b.qImg),"sImgsPromise"in b&&t(1,u=b.sImgsPromise)},e.$$.update=()=>{e.$$.dirty[0]&65536&&t(5,n=Object.values(c).length===0||c[Q]===void 0||!Object.keys(c[Q]).length),e.$$.dirty[0]&2&&(b=>{t(3,r="loading"),t(4,s=[]),t(12,i=[])})(),e.$$.dirty[0]&2&&u.then(b=>{t(12,i=b.map(T=>({uuid:window.crypto.randomUUID(),data:T}))),t(3,r="loaded")}).catch(b=>{t(2,F=b),t(3,r="error")}),e.$$.dirty[0]&61440&&t(4,s=S(i,l,a))},t(3,r="loading"),t(12,i=[]),[f,u,F,r,s,n,h,d,g,B,p,_,i,o,a,l,c]}class yg extends PA{constructor(A){super(),RA(this,A,R2,N2,OA,{qImg:0,sImgsPromise:1},null,[-1,-1])}}function P2(e){let A,t;return A=new yg({props:{qImg:e[0],sImgsPromise:e[1]}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,[r]){const i={};r&1&&(i.qImg=n[0]),r&2&&(i.sImgsPromise=n[1]),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function V2(e,A,t){let n,r,{qImg:i}=A,s;const o=Je("isInModal")||!1,{selectedRegions:a,comparedRegions:l}=Wt;FA(e,a,d=>t(4,n=d)),FA(e,l,d=>t(5,r=d));const c=`${window.location.origin}${window.location.pathname}`,f=window.location.pathname.match(/\d+/g).join("-"),u=(d,g)=>g?Object.keys(r).map(B=>r[B].id):Object.values(d[f]||{}).map(B=>B.id);async function h(d,g,B){const p=u(g,B);return p.length===0?[]:await(await fetch(`${c}similar-images`,{method:"POST",body:JSON.stringify({regionsIds:p,qImg:d,topk:12}),headers:{"Content-Type":"application/json","X-CSRFToken":qt}})).json()}return o?s=h(i,n,o):a.subscribe(d=>{t(1,s=h(i,d,o))}),e.$$set=d=>{"qImg"in d&&t(0,i=d.qImg)},[i,s,a,l]}class G2 extends PA{constructor(A){super(),RA(this,A,V2,P2,OA,{qImg:0})}}const GH="";function X2(e){let A,t,n,r;return n=new yg({props:{qImg:e[0],sImgsPromise:e[1]}}),{c(){A=C("div"),t=C("div"),pA(n.$$.fragment),m(t,"class","matches-suggestion svelte-1cb4wg0"),m(A,"class","block matches-suggestion-wrapper svelte-1cb4wg0")},m(i,s){K(i,A,s),w(A,t),gA(n,t,null),r=!0},p(i,[s]){const o={};s&1&&(o.qImg=i[0]),s&2&&(o.sImgsPromise=i[1]),n.$set(o)},i(i){r||(G(n.$$.fragment,i),r=!0)},o(i){W(n.$$.fragment,i),r=!1},d(i){i&&D(A),BA(n)}}}function J2(e,A,t){let n,r,{qImg:i}=A;const{propagateParams:s,selectedRegions:o}=Wt;FA(e,s,B=>t(4,n=B)),FA(e,o,B=>t(5,r=B));const a=`${window.location.origin}${window.location.pathname}`,l=window.location.pathname.match(/\d+/g).join("-"),c=Je("isInModal")||!1;let f;const u=ui();u.setCompareFn((B,p)=>[B,p].every(Q=>Q&&Q.hasOwnProperty("propagateRecursionDepth")&&Q.hasOwnProperty("propagateFilterByRegions"))?B.propagateRecursionDepth===p.propagateRecursionDepth&&B.propagateFilterByRegions===p.propagateFilterByRegions:!1);const h=ui();h.setCompareFn(eo),Mn("similarityPropagatedContext",!0);const d=B=>Object.keys(B).includes(l)?Object.values(B[l]).map(p=>p.id):[],g=async(B,p,Q)=>fetch(`${a}propagated-matches/${i}`,{method:"POST",body:JSON.stringify({regionsIds:Q?[]:p,filterByRegions:Q?!1:B.propagateFilterByRegions,recursionDepth:B.propagateRecursionDepth}),headers:{"Content-Type":"application/json","X-CSRFToken":qt}}).then(F=>F.json()).catch(F=>(console.error("PropagatedMatches.getPropagatedMatches:",F),[]));return s.subscribe(B=>{u.set(B),u.same()||t(1,f=g(u.get(),d(r),c))}),o.subscribe(B=>{h.set(d(B)),n.propagateFilterByRegions===!0&&!h.same()&&t(1,f=g(n,h.get(),c))}),e.$$set=B=>{"qImg"in B&&t(0,i=B.qImg)},[i,f,s,o]}class W2 extends PA{constructor(A){super(),RA(this,A,J2,X2,OA,{qImg:0})}}const XH="";function Y2(e){let A,t,n,r=parseInt(e[5])+"",i,s,o,a,l,c,f,u,h,d,g,B,p,Q,F,v,y,U,S;return{c(){A=C("a"),t=C("i"),n=sA(`
            Page `),i=sA(r),s=R(),o=C("img"),l=R(),c=C("div"),f=C("div"),u=C("input"),h=R(),d=C("button"),d.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"></path></svg>',g=R(),B=C("button"),p=dt("svg"),Q=dt("path"),m(t,"class","fa-solid fa-pen-to-square"),m(A,"class","tag px-2 py-1 mb-2 is-rounded is-hoverable"),m(A,"href",oB(e[6],parseInt(e[5]))),m(A,"target","_blank"),Ne(o.src,a=st(e[0],e[0].split("_").pop(),"250,"))||m(o,"src",a),m(o,"alt","Query region"),m(o,"class","mb-3 card query-image svelte-f4ylwc"),m(u,"class","input is-small tag"),m(u,"type","text"),m(u,"placeholder",Y==="en"?"Add new match":"Ajouter une correspondance"),m(d,"class","button is-small tag is-link is-center"),m(f,"class","tags has-addons"),TA(f,"flex-wrap","nowrap"),m(Q,"fill","white"),m(Q,"d","M376.6 84.5c11.3-13.6 9.5-33.8-4.1-45.1s-33.8-9.5-45.1 4.1L192 206 56.6 43.5C45.3 29.9 25.1 28.1 11.5 39.4S-3.9 70.9 7.4 84.5L150.3 256 7.4 427.5c-11.3 13.6-9.5 33.8 4.1 45.1s33.8 9.5 45.1-4.1L192 306 327.4 468.5c11.3 13.6 31.5 15.4 45.1 4.1s15.4-31.5 4.1-45.1L233.7 256 376.6 84.5z"),m(p,"xmlns","http://www.w3.org/2000/svg"),m(p,"viewBox","0 0 384 512"),m(B,"id","no-match"),m(B,"class",F="button is-small tag is-danger is-center m-0 "+(e[3]===1?"visible":"")+" svelte-f4ylwc"),m(B,"title",Y==="en"?"No match for this region in this witness":"Aucune correspondance de cette région pour ce témoin"),m(c,"class","new-similarity control pt-2 is-center svelte-f4ylwc")},m(_,b){K(_,A,b),w(A,t),w(A,n),w(A,i),K(_,s,b),K(_,o,b),K(_,l,b),K(_,c,b),w(c,f),w(f,u),xn(u,e[1]),w(f,h),w(f,d),w(c,g),w(c,B),w(B,p),w(p,Q),y=!0,U||(S=[dA(u,"input",e[12]),dA(d,"click",e[8]),dA(B,"click",e[9])],U=!0)},p(_,b){(!y||b&1&&!Ne(o.src,a=st(_[0],_[0].split("_").pop(),"250,")))&&m(o,"src",a),b&2&&u.value!==_[1]&&xn(u,_[1]),(!y||b&8&&F!==(F="button is-small tag is-danger is-center m-0 "+(_[3]===1?"visible":"")+" svelte-f4ylwc"))&&m(B,"class",F)},i(_){y||($e(()=>{y&&(v||(v=Ft(B,Zt,{duration:500},!0)),v.run(1))}),y=!0)},o(_){v||(v=Ft(B,Zt,{duration:500},!1)),v.run(0),y=!1},d(_){_&&D(A),_&&D(s),_&&D(o),_&&D(l),_&&D(c),_&&v&&v.end(),U=!1,Ce(S)}}}function z2(e){let A,t,n,r,i,s,o,a;return t=new G2({props:{qImg:e[0]}}),s=new W2({props:{qImg:e[0]}}),{c(){A=C("div"),pA(t.$$.fragment),r=R(),i=C("div"),pA(s.$$.fragment),m(A,"class",n=ei(e[7]?"":e[2])+" svelte-f4ylwc"),m(i,"class",o=ei(e[7]?"":e[2])+" svelte-f4ylwc")},m(l,c){K(l,A,c),gA(t,A,null),K(l,r,c),K(l,i,c),gA(s,i,null),a=!0},p(l,c){const f={};c&1&&(f.qImg=l[0]),t.$set(f),(!a||c&4&&n!==(n=ei(l[7]?"":l[2])+" svelte-f4ylwc"))&&m(A,"class",n);const u={};c&1&&(u.qImg=l[0]),s.$set(u),(!a||c&4&&o!==(o=ei(l[7]?"":l[2])+" svelte-f4ylwc"))&&m(i,"class",o)},i(l){a||(G(t.$$.fragment,l),G(s.$$.fragment,l),a=!0)},o(l){W(t.$$.fragment,l),W(s.$$.fragment,l),a=!1},d(l){l&&D(A),BA(t),l&&D(r),l&&D(i),BA(s)}}}function j2(e){let A,t;return A=new qh({props:{useGrid:!1,$$slots:{"row-body":[z2],"row-header":[Y2]},$$scope:{ctx:e}}}),{c(){pA(A.$$.fragment)},m(n,r){gA(A,n,r),t=!0},p(n,[r]){const i={};r&1048591&&(i.$$scope={dirty:r,ctx:n}),A.$set(i)},i(n){t||(G(A.$$.fragment,n),t=!0)},o(n){W(A.$$.fragment,n),t=!1},d(n){BA(A,n)}}}function q2(e){return e=e.replace(".jpg",""),/^wit\d+_[a-zA-Z]{3}\d+_\d+_\d+,\d+,\d+,\d+$/.test(e)}function Z2(e,A,t){let n,r,i,s;const{selectedRegions:o}=Wt;FA(e,o,U=>t(11,s=U));let{qImg:a}=A,l="";const[c,f,u,h]=a.split(".")[0].split("_"),d=`${window.location.origin}${window.location.pathname}`,g=window.location.pathname.match(/\d+/g).join("-"),B=Y==="en"?"Error":"Erreur",p=Je("manifest"),Q=Je("isInModal")||!1;Mn("qImgMetadata",wg(a,c,h,u));async function F(){if(!l||!q2(l)){await Re(Y==="en"?"Please insert a valid region reference to add a new match":"Veuillez insérer une référence de région valide pour ajouter une nouvelle correspondance","Error");return}try{const U=await fetch(`${d}add-region-pair`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify({q_img:a.replace(".jpg",""),s_img:l,similarity_type:2})});U.ok||(console.error("Error: Network response was not ok"),await Re(Y==="en"?"Problem with network, match was not added":"Problème de réseau, la correspondance n'a pas été ajoutée",B));const S=await U.json();if(S.hasOwnProperty("error")||!S.hasOwnProperty("s_regions")){await Re(Y==="en"?`Request was unsuccessful, match was not added:<br>${S.error}`:`La requête n'a pas abouti, la correspondance n'a pas été ajoutée :<br>${S.error}`,B);return}const _=S.s_regions;Wt.addComparedRegions(_),Wt.select(_)}catch(U){console.error("Error:",U),await Re(Y==="en"?`An error has occurred, match was not added:<br>${U}`:`Une erreur s'est produite, la correspondance n'a pas été ajoutée :<br>${U}`,B)}}async function v(){const U=Object.values(s[g])[0];if(await Re(Y==="en"?`Do you confirm this region does not have any match in ${U.title}?`:`Confirmez-vous que cette région n'a pas de correspondance dans ${U.title} ?`,Y==="en"?"Confirm no match":"Confirmer l'absence de correspondance",!0))try{(await fetch(`${d}no-match`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":qt},body:JSON.stringify({q_img:a,s_regions:U.id})})).ok||(console.error("Error: Network response was not ok"),await Re(Y==="en"?"Problem with network":"Problème de réseau",B)),Wt.select(U)}catch(_){console.error("Error:",_),await Re(Y==="en"?`An error has occurred, request was unsuccessful:<br>${_}`:`Une erreur s'est produite, la requête n'a pas abouti :<br>${_}`,B)}}function y(){l=this.value,t(1,l)}return e.$$set=U=>{"qImg"in U&&t(0,a=U.qImg)},e.$$.update=()=>{e.$$.dirty&2048&&t(3,n=s.hasOwnProperty(g)?Object.values(s[g]).length:0),e.$$.dirty&1024&&t(2,i=`fixed-grid has-${r-1}-cols`)},t(10,r=ll(window.innerWidth)),[a,l,i,n,o,u,p,Q,F,v,r,s,y]}class $2 extends PA{constructor(A){super(),RA(this,A,Z2,j2,OA,{qImg:0})}}function AH(e){let A,t,n,r,i,s;return i=new $2({props:{qImg:e[0].img}}),{c(){A=C("div"),t=C("a"),n=C("button"),n.textContent=`${Y==="fr"?"Voir toutes les similarités pour ce document":"View all similarities for this document"}`,r=R(),pA(i.$$.fragment),m(n,"class","button is-link is-small"),m(t,"href",e[1]()),m(A,"class","is-flex is-align-items-center is-justify-content-end")},m(o,a){K(o,A,a),w(A,t),w(t,n),K(o,r,a),gA(i,o,a),s=!0},p(o,[a]){const l={};a&1&&(l.qImg=o[0].img),i.$set(l)},i(o){s||(G(i.$$.fragment,o),s=!0)},o(o){W(i.$$.fragment,o),s=!1},d(o){o&&D(A),o&&D(r),BA(i,o)}}}function eH(e,A,t){let{mainImgItem:n}=A;function r(){const i=n.img.match(/wit(\d+)/)[1],s=new URL(window.location.origin);return s.pathname=`${new URL(window.location).pathname.split("/")[1]}/witness/${i}/regions/`,s.searchParams.set("tab","similarity"),s.href}return e.$$set=i=>{"mainImgItem"in i&&t(0,n=i.mainImgItem)},[n,r]}class tH extends PA{constructor(A){super(),RA(this,A,eH,AH,OA,{mainImgItem:0})}}const nH=Object.freeze(Object.defineProperty({__proto__:null,default:tH},Symbol.toStringTag,{value:"Module"}))})();
//# sourceMappingURL=documentSet.js.map

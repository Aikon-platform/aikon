(function(){"use strict";function A(){}const st=t=>t;function ot(t,e){for(const l in e)t[l]=e[l];return t}function Bn(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function rt(t){return t()}function ct(){return Object.create(null)}function G(t){t.forEach(rt)}function Le(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ce;function ut(t,e){return Ce||(Ce=document.createElement("a")),Ce.href=e,t===Ce.href}function zn(t){return Object.keys(t).length===0}function We(t,...e){if(t==null)return A;const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function je(t){let e;return We(t,l=>e=l)(),e}function re(t,e,l){t.$$.on_destroy.push(We(e,l))}function Me(t,e,l,n){if(t){const i=ft(t,e,l,n);return t[0](i)}}function ft(t,e,l,n){return t[1]&&n?ot(l.ctx.slice(),t[1](n(e))):l.ctx}function Te(t,e,l,n){if(t[2]&&n){const i=t[2](n(l));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let r=0;r<o;r+=1)s[r]=e.dirty[r]|i[r];return s}return e.dirty|i}return e.dirty}function Ue(t,e,l,n,i,s){if(i){const o=ft(e,l,n,s);t.p(o,i)}}function De(t){if(t.ctx.length>32){const e=[],l=t.ctx.length/32;for(let n=0;n<l;n++)e[n]=-1;return e}return-1}function Fe(t){return t&&Le(t.destroy)?t.destroy:A}const at=typeof window<"u";let Hn=at?()=>window.performance.now():()=>Date.now(),Ze=at?t=>requestAnimationFrame(t):A;const ke=new Set;function dt(t){ke.forEach(e=>{e.c(t)||(ke.delete(e),e.f())}),ke.size!==0&&Ze(dt)}function Vn(t){let e;return ke.size===0&&Ze(dt),{promise:new Promise(l=>{ke.add(e={c:t,f:l})}),abort(){ke.delete(e)}}}function p(t,e){t.appendChild(e)}function _t(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function qn(t){const e=b("style");return Jn(_t(t),e),e.sheet}function Jn(t,e){return p(t.head||t,e),e.sheet}function S(t,e,l){t.insertBefore(e,l||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function b(t){return document.createElement(t)}function ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function L(){return O(" ")}function H(){return O("")}function F(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Oe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}const Gn=["width","height"];function mt(t,e){const l=Object.getOwnPropertyDescriptors(t.__proto__);for(const n in e)e[n]==null?t.removeAttribute(n):n==="style"?t.style.cssText=e[n]:n==="__value"?t.value=t[n]=e[n]:l[n]&&l[n].set&&Gn.indexOf(n)===-1?t[n]=e[n]:m(t,n,e[n])}function pt(t){return t===""?null:+t}function Kn(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function ie(t,e){t.value=e??""}function Be(t,e,l){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e){i.selected=!0;return}}(!l||e!==void 0)&&(t.selectedIndex=-1)}function ht(t,e){for(let l=0;l<t.options.length;l+=1){const n=t.options[l];n.selected=~e.indexOf(n.__value)}}function Wn(t){const e=t.querySelector(":checked");return e&&e.__value}function fe(t,e,l){t.classList[l?"add":"remove"](e)}function bt(t,e,{bubbles:l=!1,cancelable:n=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,l,n,e),i}const ze=new Map;let He=0;function Zn(t){let e=5381,l=t.length;for(;l--;)e=(e<<5)-e^t.charCodeAt(l);return e>>>0}function Xn(t,e){const l={stylesheet:qn(e),rules:{}};return ze.set(t,l),l}function gt(t,e,l,n,i,s,o,r=0){const c=16.666/n;let u=`{
`;for(let v=0;v<=1;v+=c){const y=e+(l-e)*s(v);u+=v*100+`%{${o(y,1-y)}}
`}const a=u+`100% {${o(l,1-l)}}
}`,f=`__svelte_${Zn(a)}_${r}`,d=_t(t),{stylesheet:_,rules:h}=ze.get(d)||Xn(d,t);h[f]||(h[f]=!0,_.insertRule(`@keyframes ${f} ${a}`,_.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${n}ms linear ${i}ms 1 both`,He+=1,f}function Yn(t,e){const l=(t.style.animation||"").split(", "),n=l.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=l.length-n.length;i&&(t.style.animation=n.join(", "),He-=i,He||Qn())}function Qn(){Ze(()=>{He||(ze.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&w(e)}),ze.clear())})}let Pe;function ae(t){Pe=t}function Ve(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function xn(t){Ve().$$.on_mount.push(t)}function el(){const t=Ve();return(e,l,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=bt(e,l,{cancelable:n});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function kt(t,e){return Ve().$$.context.set(t,e),e}const we=[],Xe=[];let Se=[];const vt=[],tl=Promise.resolve();let Ye=!1;function nl(){Ye||(Ye=!0,tl.then(xe))}function ye(t){Se.push(t)}const Qe=new Set;let Ee=0;function xe(){if(Ee!==0)return;const t=Pe;do{try{for(;Ee<we.length;){const e=we[Ee];Ee++,ae(e),ll(e.$$)}}catch(e){throw we.length=0,Ee=0,e}for(ae(null),we.length=0,Ee=0;Xe.length;)Xe.pop()();for(let e=0;e<Se.length;e+=1){const l=Se[e];Qe.has(l)||(Qe.add(l),l())}Se.length=0}while(we.length);for(;vt.length;)vt.pop()();Ye=!1,Qe.clear(),ae(t)}function ll(t){if(t.fragment!==null){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function il(t){const e=[],l=[];Se.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Se=e}let Ne;function sl(){return Ne||(Ne=Promise.resolve(),Ne.then(()=>{Ne=null})),Ne}function et(t,e,l){t.dispatchEvent(bt(`${e?"intro":"outro"}${l}`))}const qe=new Set;let de;function _e(){de={r:0,c:[],p:de}}function me(){de.r||G(de.c),de=de.p}function C(t,e){t&&t.i&&(qe.delete(t),t.i(e))}function T(t,e,l,n){if(t&&t.o){if(qe.has(t))return;qe.add(t),de.c.push(()=>{qe.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}const ol={duration:0};function wt(t,e,l,n){const i={direction:"both"};let s=e(t,l,i),o=n?0:1,r=null,c=null,u=null;function a(){u&&Yn(t,u)}function f(_,h){const g=_.b-o;return h*=Math.abs(g),{a:o,b:_.b,d:g,duration:h,start:_.start,end:_.start+h,group:_.group}}function d(_){const{delay:h=0,duration:g=300,easing:v=st,tick:y=A,css:k}=s||ol,$={start:Hn()+h,b:_};_||($.group=de,de.r+=1),r||c?c=$:(k&&(a(),u=gt(t,o,_,g,h,v,k)),_&&y(0,1),r=f($,g),ye(()=>et(t,_,"start")),Vn(E=>{if(c&&E>c.start&&(r=f(c,g),c=null,et(t,r.b,"start"),k&&(a(),u=gt(t,o,r.b,r.duration,0,v,s.css))),r){if(E>=r.end)y(o=r.b,1-o),et(t,r.b,"end"),c||(r.b?a():--r.group.r||G(r.group.c)),r=null;else if(E>=r.start){const R=E-r.start;o=r.a+r.d*v(R/r.duration),y(o,1-o)}}return!!(r||c)}))}return{run(_){Le(s)?sl().then(()=>{s=s(i),d(_)}):d(_)},end(){a(),r=c=null}}}function rl(t,e){const l=e.token={};function n(i,s,o,r){if(e.token!==l)return;e.resolved=r;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=r);const u=i&&(e.current=i)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==s&&f&&(_e(),T(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),me())}):e.block.d(1),u.c(),C(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[s]=u),a&&xe()}if(Bn(t)){const i=Ve();if(t.then(s=>{ae(i),n(e.then,1,e.value,s),ae(null)},s=>{if(ae(i),n(e.catch,2,e.error,s),ae(null),!e.hasCatch)throw s}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,t),!0;e.resolved=t}}function cl(t,e,l){const n=e.slice(),{resolved:i}=t;t.current===t.then&&(n[t.value]=i),t.current===t.catch&&(n[t.error]=i),t.block.p(n,l)}function ul(t,e){T(t,1,1,()=>{e.delete(t.key)})}function fl(t,e,l,n,i,s,o,r,c,u,a,f){let d=t.length,_=s.length,h=d;const g={};for(;h--;)g[t[h].key]=h;const v=[],y=new Map,k=new Map,$=[];for(h=_;h--;){const N=f(i,s,h),D=l(N);let U=o.get(D);U?n&&$.push(()=>U.p(N,e)):(U=u(D,N),U.c()),y.set(D,v[h]=U),D in g&&k.set(D,Math.abs(h-g[D]))}const E=new Set,R=new Set;function P(N){C(N,1),N.m(r,a),o.set(N.key,N),a=N.first,_--}for(;d&&_;){const N=v[_-1],D=t[d-1],U=N.key,B=D.key;N===D?(a=N.first,d--,_--):y.has(B)?!o.has(U)||E.has(U)?P(N):R.has(B)?d--:k.get(U)>k.get(B)?(R.add(U),P(N)):(E.add(B),d--):(c(D,o),d--)}for(;d--;){const N=t[d];y.has(N.key)||c(N,o)}for(;_;)P(v[_-1]);return G($),v}function al(t,e){const l={},n={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],r=e[s];if(r){for(const c in o)c in r||(n[c]=1);for(const c in r)i[c]||(l[c]=r[c],i[c]=1);t[s]=r}else for(const c in o)i[c]=1}for(const o in n)o in l||(l[o]=void 0);return l}function J(t){t&&t.c()}function V(t,e,l,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,l),n||ye(()=>{const o=t.$$.on_mount.map(rt).filter(Le);t.$$.on_destroy?t.$$.on_destroy.push(...o):G(o),t.$$.on_mount=[]}),s.forEach(ye)}function q(t,e){const l=t.$$;l.fragment!==null&&(il(l.after_update),G(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function dl(t,e){t.$$.dirty[0]===-1&&(we.push(t),nl(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,l,n,i,s,o,r=[-1]){const c=Pe;ae(t);const u=t.$$={fragment:null,ctx:[],props:s,update:A,not_equal:i,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ct(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=l?l(t,e.props||{},(f,d,..._)=>{const h=_.length?_[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),a&&dl(t,f)),d}):[],u.update(),a=!0,G(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const f=Kn(e.target);u.fragment&&u.fragment.l(f),f.forEach(w)}else u.fragment&&u.fragment.c();e.intro&&C(t.$$.fragment),V(t,e.target,e.anchor,e.customElement),xe()}ae(c)}class te{$destroy(){q(this,1),this.$destroy=A}$on(e,l){if(!Le(l))return A;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!zn(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const j=APP_LANG,se=APP_NAME,_l=WEBAPP_NAME,St=USER_ID,yt=IS_SUPERUSER,Et=ADD_PERMISSION,ml=CSRF_TOKEN;ADDITIONAL_MODULES,APP_URL,SAS_APP_URL;const pl=CANTALOUPE_APP_URL;MEDIA_PATH;const hl=PAGE_LEN,Je={Witness:j==="en"?"Witness":"Témoin",Work:j==="en"?"Work":"Œuvre",Series:j==="en"?"Series":"Série d'imprimés",Regions:j==="en"?"Region Extraction":"Extraction d'illustrations"},$e=[];function bl(t,e){return{subscribe:he(t,e).subscribe}}function he(t,e=A){let l;const n=new Set;function i(r){if(K(t,r)&&(t=r,l)){const c=!$e.length;for(const u of n)u[1](),$e.push(u,t);if(c){for(let u=0;u<$e.length;u+=2)$e[u][0]($e[u+1]);$e.length=0}}}function s(r){i(r(t))}function o(r,c=A){const u=[r,c];return n.add(u),n.size===1&&(l=e(i)||A),r(t),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:i,update:s,subscribe:o}}function Ie(t,e,l){const n=!Array.isArray(t),i=n?[t]:t,s=e.length<2;return bl(l,o=>{let r=!1;const c=[];let u=0,a=A;const f=()=>{if(u)return;a();const _=e(n?c[0]:c,o);s?o(_):a=Le(_)?_:A},d=i.map((_,h)=>We(_,g=>{c[h]=g,u&=~(1<<h),r&&f()},()=>{u|=1<<h}));return r=!0,f(),function(){G(d),a(),r=!1}})}function tt(t){const{type:e,modelName:l,title:n,extractMeta:i=_=>_}=t,s={id:null,type:e,title:n,selected:{}},o=JSON.parse(localStorage.getItem(e))||s,r=he(o),c=he(!1);function u(_,h=!1){c.set(h),localStorage.setItem(e,JSON.stringify(_))}function a(){r.update(_=>{if(e!=="documentSet")return console.error("Document set management is the only type currently supported for saving."),_;const h=Object.fromEntries(Object.entries(_.selected).map(([v,y])=>[v,Object.keys(y)])),g=_.id?`${_.id}/edit`:"new";return fetch(`${window.location.origin}/${l}/${g}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":ml},body:JSON.stringify({title:_.title,selection:_,...h})}).then(v=>v.json()).then(v=>{if(!(v!=null&&v.document_set_id))throw new Error("Failed to save");r.update(y=>(y.id=v.document_set_id,y.title=v.document_set_title,u(y,!0),y))}).catch(v=>console.error("Error:",v)),_})}const f=_=>r.update(()=>{const h=_.selection.id?_.selection:{..._.selection,id:_.id};return u(h),h}),d=()=>r.update(()=>{const _={...s,selected:{}};return u(_),_});return{type:e,subscribe:r.subscribe,add:_=>r.update(h=>(h.selected[_.class]={...h.selected[_.class]||{},[_.id]:i(_)},u(h),h)),addAll:_=>r.update(h=>(_.forEach(g=>{h.selected[g.class]={...h.selected[g.class]||{},[g.id]:i(g)}}),u(h),h)),remove:(_,h)=>r.update(g=>{const{[_]:v,...y}=g.selected[h];return g.selected[h]=y,u(g),g}),removeAll:(_,h)=>r.update(g=>(_.forEach(v=>{var y;return(y=g.selected[h])==null?!0:delete y[v]}),u(g),g)),toggle:_=>r.update(h=>{var g;if((g=h.selected[_.class])!=null&&g[_.id]){const{[_.id]:v,...y}=h.selected[_.class];h.selected[_.class]=y}else h.selected[_.class]={...h.selected[_.class]||{},[_.id]:i(_)};return u(h),h}),toggleSet:_=>{je(r).id===_.id?d():f(_)},empty:()=>r.update(_=>(_.id=null,_.title=n,_.selected={},u(_,!0),_)),updateTitle:_=>r.update(h=>(h.title=_,u(h,!0),h)),save:a,isSaved:c,selection:r,selectionTitle:Ie(r,_=>_.title),isSelected:Ie(r,_=>h=>{var g;return((g=_.selected[h.class])==null?void 0:g[h.id])||!1}),selected:Ie(r,_=>_.selected),nbSelected:Ie(r,_=>Object.values(_.selected).reduce((h,g)=>h+Object.keys(g).length,0)),isSetSelected:Ie(r,_=>h=>_.id===h.id)}}const be=tt({type:"documentSet",modelName:"document-set",title:j==="en"?"Document set":"Set de documents",extractMeta:t=>({title:t.title,url:t.url})});tt({type:"regionsSet",modelName:"regions-set",title:j==="en"?"Regions set":"Set de régions",extractMeta:t=>t});function gl(t){const[e,...l]=t.split("_");return l.join("_")}tt({type:"clusterSet",modelName:"cluster-set",title:j==="en"?"Selected regions":"Régions sélectionnées",extractMeta:t=>({imgRef:t.id,clusterId:t.clusterId,title:t.title,xywh:t.xywh,img:gl(t.id)})});const Yi="";function kl(t){let e=t[1]?"Retirer de la":"Ajouter à la",l,n;return{c(){l=O(e),n=O(" sélection")},m(i,s){S(i,l,s),S(i,n,s)},p(i,s){s&2&&e!==(e=i[1]?"Retirer de la":"Ajouter à la")&&M(l,e)},d(i){i&&w(l),i&&w(n)}}}function vl(t){let e=t[1]?"Remove from":"Add to",l,n;return{c(){l=O(e),n=O(" selection")},m(i,s){S(i,l,s),S(i,n,s)},p(i,s){s&2&&e!==(e=i[1]?"Remove from":"Add to")&&M(l,e)},d(i){i&&w(l),i&&w(n)}}}function wl(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function Sl(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function yl(t){let e,l,n,i,s;function o(d,_){return j==="en"?vl:kl}let c=o()(t);function u(d,_){return d[1]?Sl:wl}let a=u(t),f=a(t);return{c(){e=b("button"),c.c(),l=L(),n=ve("svg"),f.c(),m(n,"xmlns","http://www.w3.org/2000/svg"),m(n,"viewBox","0 0 384 512"),m(n,"class","svelte-135nggd"),m(e,"class","button"),fe(e,"is-inverted",t[1])},m(d,_){S(d,e,_),c.m(e,null),p(e,l),p(e,n),f.m(n,null),i||(s=F(e,"click",t[4]),i=!0)},p(d,[_]){c.p(d,_),a!==(a=u(d))&&(f.d(1),f=a(d),f&&(f.c(),f.m(n,null))),_&2&&fe(e,"is-inverted",d[1])},i:A,o:A,d(d){d&&w(e),c.d(),f.d(),i=!1,s()}}}function El(t,e,l){let n,i;const{isSelected:s}=be;re(t,s,c=>l(3,i=c));let{item:o}=e;const r=()=>be.toggle(o);return t.$$set=c=>{"item"in c&&l(0,o=c.item)},t.$$.update=()=>{t.$$.dirty&9&&l(1,n=i(o))},[o,n,s,i,r]}class $l extends te{constructor(e){super(),ee(this,e,El,yl,K,{item:0})}}function $t(t,{delay:e=0,duration:l=400,easing:n=st}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:l,easing:n,css:s=>`opacity: ${s*i}`}}const Ll=t=>typeof t=="string"||t instanceof String;function Ol(){return pl??"http://localhost:8182"}function Pl(t,e){if(typeof window<"u"){const l=parseInt(new URLSearchParams(window.location.search).get(e));if(!isNaN(l))return t.set(l),l}return t.set(1),1}function Nl(t,e,l){if(e.set(t),typeof window<"u"){const n=new URL(window.location.href);n.searchParams.set(l,t),window.history.pushState({},"",n)}}function Il(t=null){return t=t.split("_"),t.length<3?void 0:`${t.slice(0,3).join("_").replace(".jpg","")}.jpg`}function Rl(t=null){const e=Il(t);return e===void 0?void 0:`${Ol()}/iiif/2/${e}`}function Lt(t=null,e=null,l="full"){if(e=Ll(e)?e.replace(".jpg",""):e,!t)return"https://placehold.co/96x96/png?text=No+image";const n=Rl(t);if(n===void 0)return"https://placehold.co/96x96/png?text=No+image";const i=t.split("_");return e||(e=i[i.length-1].includes(",")?i.pop().replace(".jpg",""):"full"),`${n}/${e}/${l}/0/default.jpg`}function Re(t,e=null,l=!1){return new Promise(n=>{if(document.getElementById("msg-modal")){l?document.getElementById("modal-footer").hidden=!1:n(void 0),e&&(document.getElementById("modal-title").innerHTML=e),document.getElementById("modal-msg").innerHTML=t,document.getElementById("hidden-msg-btn").click();const s=document.getElementById("cancel-btn"),o=document.getElementById("ok-btn"),r=document.getElementById("modal-bkg"),c=()=>{s.removeEventListener("click",u),r.removeEventListener("click",u),o.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},u=()=>{c(),n(!1)},a=()=>{c(),n(!0)};s.addEventListener("click",u),o.addEventListener("click",a)}else l?n(window.confirm(t)):(window.alert(t),n(void 0))})}async function Ot(t){try{return(await fetch(t)).ok}catch(e){return console.error("Error:",e),!1}}async function Al(t,e){return Ot(`/${se}/${e.toLowerCase()}/${t}/delete`)}function Pt(t){const e=t.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button-close"),l=()=>t.classList.remove("is-active");e.forEach(i=>i.addEventListener("click",l));const n=i=>{i.key==="Escape"&&t.classList.contains("is-active")&&l()};return document.addEventListener("keydown",n),{destroy(){e.forEach(i=>i.removeEventListener("click",l)),document.removeEventListener("keydown",n)}}}function Nt(t){const e=()=>{const l=document.getElementById(t.dataset.target);l==null||l.classList.add("is-active")};return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}const Qi="",Cl=t=>({}),It=t=>({}),jl=t=>({}),Rt=t=>({});function At(t,e,l){const n=t.slice();return n[7]=e[l],n}function Ct(t){let e,l,n,i;return{c(){e=b("div"),l=b("figure"),n=b("img"),ut(n.src,i=Lt(t[0].img,"full","250,"))||m(n,"src",i),m(n,"alt","Record illustration"),m(l,"class","card image is-96x96 svelte-1f9ag52"),m(e,"class","media-left")},m(s,o){S(s,e,o),p(e,l),p(l,n)},p(s,o){o&1&&!ut(n.src,i=Lt(s[0].img,"full","250,"))&&m(n,"src",i)},d(s){s&&w(e)}}}function jt(t){let e;return{c(){e=b("span"),e.innerHTML=`<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span>
                            <span style="margin-left: -0.5rem">Public</span>`,m(e,"class","pl-3 pt-1 icon-text is-size-7 is-center has-text-weight-normal")},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function Mt(t){let e=t[0].user+"",l;return{c(){l=O(e)},m(n,i){S(n,l,i)},p(n,i){i&1&&e!==(e=n[0].user+"")&&M(l,e)},d(n){n&&w(l)}}}function Tt(t){let e,l=t[0].updated_at+"",n;return{c(){e=b("span"),n=O(l),m(e,"class","tag p-1 mb-1")},m(i,s){S(i,e,s),p(e,n)},p(i,s){s&1&&l!==(l=i[0].updated_at+"")&&M(n,l)},d(i){i&&w(e)}}}function Ml(t){let e,l,n,i,s;return{c(){e=b("a"),l=b("span"),n=L(),i=b("span"),i.textContent=`${j==="en"?"Edit":"Éditer"}`,m(l,"class","iconify"),m(l,"data-icon","entypo:edit"),m(i,"class","ml-2"),m(e,"href",s=t[2]?t[0].edit_url:null),m(e,"class","edit-btn button is-small is-rounded is-link px-2 svelte-1f9ag52"),m(e,"title",j==="en"?"Edit":"Éditer")},m(o,r){S(o,e,r),p(e,l),p(e,n),p(e,i)},p(o,r){r&1&&s!==(s=o[2]?o[0].edit_url:null)&&m(e,"href",s)},d(o){o&&w(e)}}}function Ut(t){let e=t[0].hasOwnProperty("iiif"),l,n=e&&Dt(t);return{c(){n&&n.c(),l=H()},m(i,s){n&&n.m(i,s),S(i,l,s)},p(i,s){s&1&&(e=i[0].hasOwnProperty("iiif")),e?n?n.p(i,s):(n=Dt(i),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&w(l)}}}function Dt(t){let e,l=t[0].iiif,n=[];for(let i=0;i<l.length;i+=1)n[i]=Ft(At(t,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},m(i,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){l=i[0].iiif;let o;for(o=0;o<l.length;o+=1){const r=At(i,l,o);n[o]?n[o].p(r,s):(n[o]=Ft(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){x(n,i),i&&w(e)}}}function Ft(t){let e,l=t[7]+"";return{c(){e=b("span"),m(e,"class","tag logo mt-1")},m(n,i){S(n,e,i),e.innerHTML=l},p(n,i){i&1&&l!==(l=n[7]+"")&&(e.innerHTML=l)},d(n){n&&w(e)}}}function Bt(t){let e=t[0].user_id===parseInt(St)||yt,l,n=e&&zt(t);return{c(){n&&n.c(),l=H()},m(i,s){n&&n.m(i,s),S(i,l,s)},p(i,s){s&1&&(e=i[0].user_id===parseInt(St)||yt),e?n?n.p(i,s):(n=zt(i),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&w(l)}}}function zt(t){let e,l,n;return{c(){e=b("button"),m(e,"class","delete is-medium"),m(e,"title",j==="en"?"Delete":"Supprimer")},m(i,s){S(i,e,s),l||(n=F(e,"click",t[3]),l=!0)},p:A,d(i){i&&w(e),l=!1,n()}}}function Tl(t){let e,l,n,i,s=t[0].hasOwnProperty("img"),o,r,c,u,a=t[0].type+"",f,d,_=t[0].id+"",h,g,v=t[0].title+"",y,k,$,E=t[0].hasOwnProperty("is_public")&&t[0].is_public,R,P,N,D,U,B,oe=t[0].hasOwnProperty("buttons")&&Object.keys(t[0].buttons).length!==0,Ae,Ge,Dn,Fn,Ke,pe,ne,W=s&&Ct(t),le=E&&jt(),Z=t[0].user&&Mt(t),X=t[0].updated_at&&Tt(t),ge=t[2]&&Ml(t),Y=oe&&Ut(t);const lt=t[6].buttons,ce=Me(lt,t,t[5],Rt);let Q=(t[0].class==="Treatment"||t[0].class==="DocumentSet")&&Bt(t);const it=t[6].body,ue=Me(it,t,t[5],It);return{c(){e=b("div"),l=b("div"),n=b("div"),i=b("div"),W&&W.c(),o=L(),r=b("div"),c=b("a"),u=b("span"),f=O(a),d=O(" #"),h=O(_),g=L(),y=O(v),$=L(),le&&le.c(),R=L(),P=b("p"),Z&&Z.c(),N=L(),X&&X.c(),D=L(),U=b("p"),ge&&ge.c(),B=L(),Y&&Y.c(),Ae=L(),Ge=b("div"),ce&&ce.c(),Dn=L(),Q&&Q.c(),Fn=L(),Ke=b("div"),ue&&ue.c(),m(u,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),m(c,"href",k=t[1]?t[0].view_url:null),m(c,"class","title is-4 "+(t[1]?"hoverable":"")+" pt-2 svelte-1f9ag52"),m(P,"class","subtitle is-6 mb-0 ml-2 pt-2"),m(U,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle"),m(r,"class","media-content"),m(Ge,"class","media-right"),m(i,"class","media"),m(Ke,"class","content fixed-grid px-5"),m(n,"class","card-content"),m(l,"class","card mb-5"),m(e,"class","item")},m(I,z){S(I,e,z),p(e,l),p(l,n),p(n,i),W&&W.m(i,null),p(i,o),p(i,r),p(r,c),p(c,u),p(u,f),p(u,d),p(u,h),p(c,g),p(c,y),p(r,$),le&&le.m(r,null),p(r,R),p(r,P),Z&&Z.m(P,null),p(P,N),X&&X.m(P,null),p(r,D),p(r,U),ge&&ge.m(U,null),p(U,B),Y&&Y.m(U,null),p(i,Ae),p(i,Ge),ce&&ce.m(Ge,null),p(i,Dn),Q&&Q.m(i,null),p(n,Fn),p(n,Ke),ue&&ue.m(Ke,null),ne=!0},p(I,[z]){z&1&&(s=I[0].hasOwnProperty("img")),s?W?W.p(I,z):(W=Ct(I),W.c(),W.m(i,o)):W&&(W.d(1),W=null),(!ne||z&1)&&a!==(a=I[0].type+"")&&M(f,a),(!ne||z&1)&&_!==(_=I[0].id+"")&&M(h,_),(!ne||z&1)&&v!==(v=I[0].title+"")&&M(y,v),(!ne||z&1&&k!==(k=I[1]?I[0].view_url:null))&&m(c,"href",k),z&1&&(E=I[0].hasOwnProperty("is_public")&&I[0].is_public),E?le||(le=jt(),le.c(),le.m(r,R)):le&&(le.d(1),le=null),I[0].user?Z?Z.p(I,z):(Z=Mt(I),Z.c(),Z.m(P,N)):Z&&(Z.d(1),Z=null),I[0].updated_at?X?X.p(I,z):(X=Tt(I),X.c(),X.m(P,null)):X&&(X.d(1),X=null),I[2]&&ge.p(I,z),z&1&&(oe=I[0].hasOwnProperty("buttons")&&Object.keys(I[0].buttons).length!==0),oe?Y?Y.p(I,z):(Y=Ut(I),Y.c(),Y.m(U,null)):Y&&(Y.d(1),Y=null),ce&&ce.p&&(!ne||z&32)&&Ue(ce,lt,I,I[5],ne?Te(lt,I[5],z,jl):De(I[5]),Rt),I[0].class==="Treatment"||I[0].class==="DocumentSet"?Q?Q.p(I,z):(Q=Bt(I),Q.c(),Q.m(i,null)):Q&&(Q.d(1),Q=null),ue&&ue.p&&(!ne||z&32)&&Ue(ue,it,I,I[5],ne?Te(it,I[5],z,Cl):De(I[5]),It)},i(I){ne||(C(ce,I),C(ue,I),ye(()=>{ne&&(pe||(pe=wt(e,$t,{duration:500},!0)),pe.run(1))}),ne=!0)},o(I){T(ce,I),T(ue,I),pe||(pe=wt(e,$t,{duration:500},!1)),pe.run(0),ne=!1},d(I){I&&w(e),W&&W.d(),le&&le.d(),Z&&Z.d(),X&&X.d(),ge&&ge.d(),Y&&Y.d(),ce&&ce.d(I),Q&&Q.d(),ue&&ue.d(I),I&&pe&&pe.end()}}}function Ul(t,e,l){let{$$slots:n={},$$scope:i}=e,{recordsStore:s}=e,{item:o}=e;const r=o.hasOwnProperty("view_url")&&o.view_url!=="",c=o.hasOwnProperty("edit_url")&&o.edit_url!=="";async function u(){if(!await Re(j==="en"?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement ?",j==="en"?"Confirm deletion":"Confirmer la suppression",!0))return;await Al(o.id,o.class)?s.remove(o.id):await Re(j==="en"?"Failed to delete record":"Erreur lors de la suppression de l'enregistrement",j==="en"?"Error":"Erreur")}return t.$$set=a=>{"recordsStore"in a&&l(4,s=a.recordsStore),"item"in a&&l(0,o=a.item),"$$scope"in a&&l(5,i=a.$$scope)},[o,r,c,u,s,i,n]}class nt extends te{constructor(e){super(),ee(this,e,Ul,Tl,K,{recordsStore:4,item:0})}}const xi="";function Ht(t,e,l){const n=t.slice();return n[2]=e[l][0],n[3]=e[l][1],n}function Dl(t){let e,l,n;return l=new $l({props:{item:t[0]}}),{c(){e=b("div"),J(l.$$.fragment),m(e,"slot","buttons")},m(i,s){S(i,e,s),V(l,e,null),n=!0},p(i,s){const o={};s&1&&(o.item=i[0]),l.$set(o)},i(i){n||(C(l.$$.fragment,i),n=!0)},o(i){T(l.$$.fragment,i),n=!1},d(i){i&&w(e),q(l)}}}function Vt(t){let e,l,n=t[2]+"",i,s,o,r=t[3]+"",c,u;return{c(){e=b("div"),l=b("div"),i=O(n),s=L(),o=b("div"),u=L(),m(l,"class","column is-4 is-bold"),m(o,"class",c="column is-8 "+(t[3]==="-"?"faded":"")),m(e,"class","datum is-middle columns svelte-ln5qdg")},m(a,f){S(a,e,f),p(e,l),p(l,i),p(e,s),p(e,o),o.innerHTML=r,p(e,u)},p(a,f){f&1&&n!==(n=a[2]+"")&&M(i,n),f&1&&r!==(r=a[3]+"")&&(o.innerHTML=r),f&1&&c!==(c="column is-8 "+(a[3]==="-"?"faded":""))&&m(o,"class",c)},d(a){a&&w(e)}}}function Fl(t){let e,l=Object.entries(t[0].metadata),n=[];for(let i=0;i<l.length;i+=1)n[i]=Vt(Ht(t,l,i));return{c(){e=b("div");for(let i=0;i<n.length;i+=1)n[i].c();m(e,"slot","body"),m(e,"class","grid metadata pt-2 svelte-ln5qdg")},m(i,s){S(i,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,s){if(s&1){l=Object.entries(i[0].metadata);let o;for(o=0;o<l.length;o+=1){const r=Ht(i,l,o);n[o]?n[o].p(r,s):(n[o]=Vt(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&w(e),x(n,i)}}}function Bl(t){let e,l;return e=new nt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[Fl],buttons:[Dl]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(n,i){V(e,n,i),l=!0},p(n,[i]){const s={};i&1&&(s.item=n[0]),i&2&&(s.recordsStore=n[1]),i&65&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function zl(t,e,l){let{item:n}=e,{recordsStore:i}=e;return t.$$set=s=>{"item"in s&&l(0,n=s.item),"recordsStore"in s&&l(1,i=s.recordsStore)},[n,i]}class Hl extends te{constructor(e){super(),ee(this,e,zl,Bl,K,{item:0,recordsStore:1})}}const es="";function Vl(t){let e,l,n,i,s,o=j==="en"?"Selection":"Sélection",r,c,u,a,f,d;return{c(){e=b("div"),l=b("button"),n=b("span"),i=b("i"),s=L(),r=O(o),c=O(`
            (`),u=O(t[0]),a=O(")"),m(i,"class","fa-solid fa-book-bookmark"),m(n,"id","btn-content"),m(l,"id","set-btn"),m(l,"class","button px-5 py-4 is-link svelte-gmt9z5"),m(l,"data-target","selection-modal"),m(e,"class","set-container svelte-gmt9z5")},m(_,h){S(_,e,h),p(e,l),p(l,n),p(n,i),p(n,s),p(n,r),p(n,c),p(n,u),p(n,a),f||(d=Fe(Nt.call(null,l)),f=!0)},p(_,[h]){h&1&&M(u,_[0])},i:A,o:A,d(_){_&&w(e),f=!1,d()}}}function ql(t,e,l){let{selectionLength:n=0}=e,i=n;return t.$$set=s=>{"selectionLength"in s&&l(0,n=s.selectionLength)},t.$$.update=()=>{if(t.$$.dirty&3&&n!==i){const s=n>i;l(1,i=n);const o=document.getElementById("btn-content");o&&o.animate([{transform:s?"translateY(-7px)":"translateX(-5px)"},{transform:s?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[n,i]}class Jl extends te{constructor(e){super(),ee(this,e,ql,Vl,K,{selectionLength:0})}}function Gl(t){let e,l,n,i,s=j==="en"?"Save selection":"Sauvegarder la sélection",o,r,c;return{c(){e=b("button"),l=b("span"),n=b("i"),i=L(),o=O(s),m(n,"class","fa-solid fa-floppy-disk"),m(e,"class","button is-link")},m(u,a){S(u,e,a),p(e,l),p(l,n),p(l,i),p(l,o),r||(c=F(e,"click",t[7]),r=!0)},p:A,d(u){u&&w(e),r=!1,c()}}}function Kl(t){let e,l,n,i,s=j==="en"?"Go to treatment":"Accéder au traitement",o,r;return{c(){var c;e=b("a"),l=b("span"),n=b("i"),i=L(),o=O(s),m(n,"class","fa-solid fa-gear"),m(e,"class","button is-link"),m(e,"href",r="/"+se+"/treatment/add/?document_set="+((c=t[3])==null?void 0:c.id))},m(c,u){S(c,e,u),p(e,l),p(l,n),p(l,i),p(l,o)},p(c,u){var a;u&8&&r!==(r="/"+se+"/treatment/add/?document_set="+((a=c[3])==null?void 0:a.id))&&m(e,"href",r)},d(c){c&&w(e)}}}function qt(t){let e,l,n,i,s,o,r;return{c(){var c,u;e=b("a"),l=b("span"),l.innerHTML='<i class="fa-solid fa-file-export"></i> JSON',i=L(),s=b("a"),o=b("span"),o.innerHTML='<i class="fa-solid fa-file-zipper"></i> ZIP',m(e,"class","button is-link is-dark"),m(e,"href",n="/"+se+"/document-set/"+((c=t[3])==null?void 0:c.id)+"/json"),m(e,"target","_blank"),m(s,"class","button is-link is-dark"),m(s,"href",r="/"+se+"/document-set/"+((u=t[3])==null?void 0:u.id)+"/zip"),m(s,"target","_blank")},m(c,u){S(c,e,u),p(e,l),S(c,i,u),S(c,s,u),p(s,o)},p(c,u){var a,f;u&8&&n!==(n="/"+se+"/document-set/"+((a=c[3])==null?void 0:a.id)+"/json")&&m(e,"href",n),u&8&&r!==(r="/"+se+"/document-set/"+((f=c[3])==null?void 0:f.id)+"/zip")&&m(s,"href",r)},d(c){c&&w(e),c&&w(i),c&&w(s)}}}function Wl(t){let e,l,n,i,s,o,r;function c(d,_){return d[2]&&!d[1]?Kl:Gl}let u=c(t),a=u(t),f=!t[1]&&qt(t);return{c(){e=b("footer"),l=b("div"),n=b("button"),n.textContent=`${j==="en"?"Clear selection":"Vider la sélection"}`,i=L(),a.c(),s=L(),f&&f.c(),m(n,"class","button button-close is-link is-light"),m(l,"class","buttons"),m(e,"class","modal-card-foot is-center")},m(d,_){S(d,e,_),p(e,l),p(l,n),p(l,i),a.m(l,null),p(l,s),f&&f.m(l,null),o||(r=F(n,"click",t[6]),o=!0)},p(d,[_]){u===(u=c(d))&&a?a.p(d,_):(a.d(1),a=u(d),a&&(a.c(),a.m(l,s))),d[1]?f&&(f.d(1),f=null):f?f.p(d,_):(f=qt(d),f.c(),f.m(l,null))},i:A,o:A,d(d){d&&w(e),a.d(),f&&f.d(),o=!1,r()}}}function Zl(t,e,l){let n,i,{selectionStore:s}=e;const{isSaved:o,selection:r}=s;re(t,o,f=>l(2,n=f)),re(t,r,f=>l(3,i=f));let{isRegion:c=s.type!=="documentSet"}=e;const u=()=>s.empty(),a=()=>s.save();return t.$$set=f=>{"selectionStore"in f&&l(0,s=f.selectionStore),"isRegion"in f&&l(1,c=f.isRegion)},[s,c,n,i,o,r,u,a]}class Xl extends te{constructor(e){super(),ee(this,e,Zl,Wl,K,{selectionStore:0,isRegion:1})}}const ts="";function Yl(t){let e,l,n,i,s,o;return{c(){e=b("span"),l=O(t[5]),n=L(),i=b("span"),i.innerHTML='<i class="fas fa-edit"></i>',m(i,"class","pl-3 smaller has-text-link")},m(r,c){S(r,e,c),p(e,l),p(e,n),p(e,i),s||(o=[F(e,"click",t[7]),F(e,"keyup",null)],s=!0)},p(r,c){c&32&&M(l,r[5])},d(r){r&&w(e),s=!1,G(o)}}}function Ql(t){let e,l,n;return{c(){e=b("input"),m(e,"class","input selection-title svelte-sgypdx")},m(i,s){S(i,e,s),t[12](e),ie(e,t[4]),l||(n=[F(e,"input",t[13]),F(e,"keydown",t[8]),F(e,"blur",t[9])],l=!0)},p(i,s){s&16&&e.value!==i[4]&&ie(e,i[4])},d(i){i&&w(e),t[12](null),l=!1,G(n)}}}function xl(t){let e,l,n,i,s,o,r,c,u,a,f,d,_,h,g,v,y,k,$,E;function R(B,oe){return B[2]?Ql:Yl}let P=R(t),N=P(t);const D=t[11].default,U=Me(D,t,t[10],null);return y=new Xl({props:{selectionStore:t[0]}}),{c(){e=b("div"),l=b("div"),n=L(),i=b("div"),s=b("div"),o=b("div"),r=b("i"),c=L(),N.c(),u=O(`
                (`),a=O(t[1]),f=O(")"),d=L(),_=b("button"),h=L(),g=b("section"),U&&U.c(),v=L(),J(y.$$.fragment),m(l,"class","modal-background"),m(r,"class","fa-solid fa-book-bookmark"),m(o,"class","title is-4 mb-0 media-content"),m(_,"class","delete media-left"),m(_,"aria-label","close"),m(s,"class","modal-card-head media mb-0 is-middle"),m(g,"class","modal-card-body"),m(i,"class","modal-content"),m(e,"id","selection-modal"),m(e,"class","modal fade"),m(e,"tabindex","-1"),m(e,"aria-labelledby","selection-modal-label"),m(e,"aria-hidden","true")},m(B,oe){S(B,e,oe),p(e,l),p(e,n),p(e,i),p(i,s),p(s,o),p(o,r),p(o,c),N.m(o,null),p(o,u),p(o,a),p(o,f),p(s,d),p(s,_),p(i,h),p(i,g),U&&U.m(g,null),p(i,v),V(y,i,null),k=!0,$||(E=Fe(Pt.call(null,e)),$=!0)},p(B,[oe]){P===(P=R(B))&&N?N.p(B,oe):(N.d(1),N=P(B),N&&(N.c(),N.m(o,u))),(!k||oe&2)&&M(a,B[1]),U&&U.p&&(!k||oe&1024)&&Ue(U,D,B,B[10],k?Te(D,B[10],oe,null):De(B[10]),null);const Ae={};oe&1&&(Ae.selectionStore=B[0]),y.$set(Ae)},i(B){k||(C(U,B),C(y.$$.fragment,B),k=!0)},o(B){T(U,B),T(y.$$.fragment,B),k=!1},d(B){B&&w(e),N.d(),U&&U.d(B),q(y),$=!1,E()}}}function ei(t,e,l){let n,{$$slots:i={},$$scope:s}=e,{selectionStore:o}=e;const{selectionTitle:r,updateTitle:c,save:u}=o;re(t,r,$=>l(5,n=$));let{selectionLength:a=!1}=e,f=!1,d,_;function h(){l(2,f=!0),l(4,_=n),setTimeout(()=>d&&d.focus(),0)}function g($){$.key==="Enter"&&v()}function v(){l(2,f=!1),c(_),u()}function y($){Xe[$?"unshift":"push"](()=>{d=$,l(3,d)})}function k(){_=this.value,l(4,_)}return t.$$set=$=>{"selectionStore"in $&&l(0,o=$.selectionStore),"selectionLength"in $&&l(1,a=$.selectionLength),"$$scope"in $&&l(10,s=$.$$scope)},[o,a,f,d,_,n,r,h,g,v,s,i,y,k]}class ti extends te{constructor(e){super(),ee(this,e,ei,xl,K,{selectionStore:0,selectionLength:1})}}const ns="";function Jt(t,e,l){const n=t.slice();return n[15]=e[l],n[17]=l,n}function Gt(t){let e,l=t[4],n=[];for(let i=0;i<l.length;i+=1)n[i]=Kt(Jt(t,l,i));return{c(){e=b("ul");for(let i=0;i<n.length;i+=1)n[i].c();m(e,"class","autocomplete-list is-wide svelte-109rw7p")},m(i,s){S(i,e,s);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,s){if(s&592){l=i[4];let o;for(o=0;o<l.length;o+=1){const r=Jt(i,l,o);n[o]?n[o].p(r,s):(n[o]=Kt(r),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&w(e),x(n,i)}}}function Kt(t){let e,l=t[15].label+"",n,i,s,o;function r(){return t[13](t[15])}return{c(){e=b("li"),n=O(l),i=L(),m(e,"class","svelte-109rw7p"),fe(e,"selected",t[17]===t[6])},m(c,u){S(c,e,u),p(e,n),p(e,i),s||(o=[F(e,"click",r),F(e,"keyup",null)],s=!0)},p(c,u){t=c,u&16&&l!==(l=t[15].label+"")&&M(n,l),u&64&&fe(e,"selected",t[17]===t[6])},d(c){c&&w(e),s=!1,G(o)}}}function ni(t){let e,l,n,i,s,o=t[5]&&Gt(t);return{c(){e=b("div"),l=b("input"),n=L(),o&&o.c(),m(l,"class","input is-small is-wide svelte-109rw7p"),m(l,"name",t[1]),m(l,"id",t[2]),m(l,"placeholder",t[0]),m(l,"autocomplete","off"),m(e,"class","autocomplete svelte-109rw7p")},m(r,c){S(r,e,c),p(e,l),ie(l,t[3]),p(e,n),o&&o.m(e,null),i||(s=[F(l,"input",t[12]),F(l,"input",t[7]),F(l,"keydown",t[8])],i=!0)},p(r,[c]){c&2&&m(l,"name",r[1]),c&4&&m(l,"id",r[2]),c&1&&m(l,"placeholder",r[0]),c&8&&l.value!==r[3]&&ie(l,r[3]),r[5]?o?o.p(r,c):(o=Gt(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:A,o:A,d(r){r&&w(e),o&&o.d(),i=!1,G(s)}}}function li(t,e,l){let{items:n=[]}=e,{placeholder:i=`${j==="en"?"Select":"Sélectionner"} ...`}=e,{name:s=""}=e,{id:o=""}=e,r="",c=[],u=!1,a=-1,f=null;const d=el();function _(){l(6,a=-1)}function h(k){k.key==="ArrowDown"?(k.preventDefault(),l(6,a=(a+1)%c.length)):k.key==="ArrowUp"?(k.preventDefault(),l(6,a=a<=0?c.length-1:a-1)):k.key==="Enter"&&a!==-1&&(k.preventDefault(),g(c[a]))}function g(k){l(3,r=k.label),l(11,f=k),l(5,u=!1),d("select",k)}function v(){r=this.value,l(3,r)}const y=k=>g(k);return t.$$set=k=>{"items"in k&&l(10,n=k.items),"placeholder"in k&&l(0,i=k.placeholder),"name"in k&&l(1,s=k.name),"id"in k&&l(2,o=k.id)},t.$$.update=()=>{t.$$.dirty&3080&&(r.length>0?(l(4,c=n.filter(k=>k.label.toLowerCase().includes(r.toLowerCase()))),l(5,u=!0)):(l(4,c=[]),l(5,u=!1),f&&(l(11,f=null),d("select",{id:null,label:""}))))},[i,s,o,r,c,u,a,_,h,g,n,f,v,y]}class ii extends te{constructor(e){super(),ee(this,e,li,ni,K,{items:10,placeholder:0,name:1,id:2})}}const ls="";function Wt(t,e,l){const n=t.slice();return n[16]=e[l],n[17]=e,n[18]=l,n}function Zt(t,e,l){const n=t.slice();return n[19]=e[l],n}function Xt(t,e,l){const n=t.slice();return n[16]=e[l],n[22]=e,n[23]=l,n}function Yt(t){let e,l,n,i,s,o,r,c,u,a=j==="en"?"Search":"Rechercher",f,d,_,h,g=t[0],v=[];for(let E=0;E<g.length;E+=1)v[E]=xt(Xt(t,g,E));let y=t[0],k=[];for(let E=0;E<y.length;E+=1)k[E]=ln(Wt(t,y,E));const $=E=>T(k[E],1,1,()=>{k[E]=null});return{c(){e=b("form"),l=b("article");for(let E=0;E<v.length;E+=1)v[E].c();n=L(),i=b("div");for(let E=0;E<k.length;E+=1)k[E].c();s=L(),o=b("div"),r=b("button"),c=b("i"),u=L(),f=O(a),m(i,"class","grid"),m(l,"class","message fixed-grid"),m(c,"class","fa-solid fa-magnifying-glass"),m(r,"type","submit"),m(r,"class","button is-link is-outlined is-fullwidth"),m(o,"class","panel-block columns"),m(e,"class","is-center pb-3")},m(E,R){S(E,e,R),p(e,l);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(l,null);p(l,n),p(l,i);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(i,null);p(e,s),p(e,o),p(o,r),p(r,c),p(r,u),p(r,f),d=!0,_||(h=F(e,"submit",t[3]),_=!0)},p(E,R){if(R&3){g=E[0];let P;for(P=0;P<g.length;P+=1){const N=Xt(E,g,P);v[P]?v[P].p(N,R):(v[P]=xt(N),v[P].c(),v[P].m(l,n))}for(;P<v.length;P+=1)v[P].d(1);v.length=g.length}if(R&51){y=E[0];let P;for(P=0;P<y.length;P+=1){const N=Wt(E,y,P);k[P]?(k[P].p(N,R),C(k[P],1)):(k[P]=ln(N),k[P].c(),C(k[P],1),k[P].m(i,null))}for(_e(),P=y.length;P<k.length;P+=1)$(P);me()}},i(E){if(!d){for(let R=0;R<y.length;R+=1)C(k[R]);d=!0}},o(E){k=k.filter(Boolean);for(let R=0;R<k.length;R+=1)T(k[R]);d=!1},d(E){E&&w(e),x(v,E),x(k,E),_=!1,h()}}}function Qt(t){let e,l,n=t[16].label+"",i,s,o,r,c,u,a,f,d,_;function h(){t[7].call(c,t[16])}return{c(){e=b("div"),l=b("label"),i=O(n),o=L(),r=b("div"),c=b("input"),f=L(),m(l,"for",s=t[16].name),m(l,"class","label column is-small is-2 svelte-wwfwxh"),m(c,"type","text"),m(c,"class","input is-small is-wide"),m(c,"id",u=t[16].name),m(c,"name",a=t[16].name),m(r,"class","control has-icons-right column is-10"),m(e,"class","search-field field columns pb-3 svelte-wwfwxh")},m(g,v){S(g,e,v),p(e,l),p(l,i),p(e,o),p(e,r),p(r,c),ie(c,t[1][t[16].name]),p(e,f),d||(_=F(c,"input",h),d=!0)},p(g,v){t=g,v&1&&n!==(n=t[16].label+"")&&M(i,n),v&1&&s!==(s=t[16].name)&&m(l,"for",s),v&1&&u!==(u=t[16].name)&&m(c,"id",u),v&1&&a!==(a=t[16].name)&&m(c,"name",a),v&3&&c.value!==t[1][t[16].name]&&ie(c,t[1][t[16].name])},d(g){g&&w(e),d=!1,_()}}}function xt(t){let e,l=t[16].name==="search"&&Qt(t);return{c(){l&&l.c(),e=H()},m(n,i){l&&l.m(n,i),S(n,e,i)},p(n,i){n[16].name==="search"?l?l.p(n,i):(l=Qt(n),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(n){l&&l.d(n),n&&w(e)}}}function en(t){let e,l,n=t[16].label+"",i,s,o,r,c,u,a,f,d,_;const h=[ui,ci,ri,oi,si],g=[];function v(y,k){return k&1&&(c=null),k&1&&(u=null),c==null&&(c=!!y[16].type.includes("ChoiceField")),c?0:y[16].type==="BooleanField"?1:(u==null&&(u=!!y[16].type.includes("Date")),u?2:y[16].type==="IntegerField"||y[16].type==="FloatField"?3:4)}return a=v(t,-1),f=g[a]=h[a](t),{c(){e=b("div"),l=b("label"),i=O(n),o=L(),r=b("div"),f.c(),d=L(),m(l,"for",s=t[16].name),m(l,"class","label column is-small is-3 svelte-wwfwxh"),m(r,"class","control has-icons-right column is-9"),m(e,"class","search-field field columns is-middle svelte-wwfwxh")},m(y,k){S(y,e,k),p(e,l),p(l,i),p(e,o),p(e,r),g[a].m(r,null),p(e,d),_=!0},p(y,k){(!_||k&1)&&n!==(n=y[16].label+"")&&M(i,n),(!_||k&1&&s!==(s=y[16].name))&&m(l,"for",s);let $=a;a=v(y,k),a===$?g[a].p(y,k):(_e(),T(g[$],1,1,()=>{g[$]=null}),me(),f=g[a],f?f.p(y,k):(f=g[a]=h[a](y),f.c()),C(f,1),f.m(r,null))},i(y){_||(C(f),_=!0)},o(y){T(f),_=!1},d(y){y&&w(e),g[a].d()}}}function si(t){let e,l,n,i,s;function o(){t[13].call(e,t[16])}return{c(){e=b("input"),m(e,"type","text"),m(e,"class","input is-small is-wide"),m(e,"id",l=t[16].name),m(e,"name",n=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&l!==(l=t[16].name)&&m(e,"id",l),c&1&&n!==(n=t[16].name)&&m(e,"name",n),c&3&&e.value!==t[1][t[16].name]&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function oi(t){let e,l,n,i,s;function o(){t[12].call(e,t[16])}return{c(){e=b("input"),m(e,"type","number"),m(e,"class","input is-small is-wide"),m(e,"id",l=t[16].name),m(e,"name",n=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&l!==(l=t[16].name)&&m(e,"id",l),c&1&&n!==(n=t[16].name)&&m(e,"name",n),c&3&&pt(e.value)!==t[1][t[16].name]&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function ri(t){let e,l,n,i,s;function o(){t[11].call(e,t[16])}return{c(){e=b("input"),m(e,"type","date"),m(e,"class","input is-small is-wide"),m(e,"id",l=t[16].name),m(e,"name",n=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&l!==(l=t[16].name)&&m(e,"id",l),c&1&&n!==(n=t[16].name)&&m(e,"name",n),c&3&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function ci(t){let e,l,n,i,s;function o(){t[10].call(e,t[16])}return{c(){e=b("input"),m(e,"type","checkbox"),m(e,"id",l=t[16].name),m(e,"name",n=t[16].name)},m(r,c){S(r,e,c),e.checked=t[1][t[16].name],i||(s=F(e,"change",o),i=!0)},p(r,c){t=r,c&1&&l!==(l=t[16].name)&&m(e,"id",l),c&1&&n!==(n=t[16].name)&&m(e,"name",n),c&3&&(e.checked=t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function ui(t){let e,l,n,i,s;const o=[ai,fi],r=[];function c(u,a){return a&1&&(e=null),e==null&&(e=!!_i(u[16])),e?0:1}return l=c(t,-1),n=r[l]=o[l](t),{c(){n.c(),i=H()},m(u,a){r[l].m(u,a),S(u,i,a),s=!0},p(u,a){let f=l;l=c(u,a),l===f?r[l].p(u,a):(_e(),T(r[f],1,1,()=>{r[f]=null}),me(),n=r[l],n?n.p(u,a):(n=r[l]=o[l](u),n.c()),C(n,1),n.m(i.parentNode,i))},i(u){s||(C(n),s=!0)},o(u){T(n),s=!1},d(u){r[l].d(u),u&&w(i)}}}function fi(t){let e,l,n=!t[5](t[16]),i,s,o,r,c,u,a=n&&tn(),f=t[16].choices,d=[];for(let v=0;v<f.length;v+=1)d[v]=nn(Zt(t,f,v));let _=[{id:s=t[16].name},{name:o=t[16].name},{class:"is-wide"},t[5](t[16])?{size:3,multiple:!0}:{}],h={};for(let v=0;v<_.length;v+=1)h=ot(h,_[v]);function g(){t[9].call(l,t[16])}return{c(){e=b("div"),l=b("select"),a&&a.c(),i=H();for(let v=0;v<d.length;v+=1)d[v].c();mt(l,h),t[1][t[16].name]===void 0&&ye(g),fe(l,"svelte-wwfwxh",!0),m(e,"class",r="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))},m(v,y){S(v,e,y),p(e,l),a&&a.m(l,null),p(l,i);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(l,null);"value"in h&&(h.multiple?ht:Be)(l,h.value),l.autofocus&&l.focus(),Be(l,t[1][t[16].name],!0),c||(u=F(l,"change",g),c=!0)},p(v,y){if(t=v,y&1&&(n=!t[5](t[16])),n?a?a.p(t,y):(a=tn(),a.c(),a.m(l,i)):a&&(a.d(1),a=null),y&1){f=t[16].choices;let k;for(k=0;k<f.length;k+=1){const $=Zt(t,f,k);d[k]?d[k].p($,y):(d[k]=nn($),d[k].c(),d[k].m(l,null))}for(;k<d.length;k+=1)d[k].d(1);d.length=f.length}mt(l,h=al(_,[y&1&&s!==(s=t[16].name)&&{id:s},y&1&&o!==(o=t[16].name)&&{name:o},{class:"is-wide"},y&1&&(t[5](t[16])?{size:3,multiple:!0}:{})])),y&33&&"value"in h&&(h.multiple?ht:Be)(l,h.value),y&3&&Be(l,t[1][t[16].name]),fe(l,"svelte-wwfwxh",!0),y&1&&r!==(r="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))&&m(e,"class",r)},i:A,o:A,d(v){v&&w(e),a&&a.d(),x(d,v),c=!1,u()}}}function ai(t){let e,l;function n(...i){return t[8](t[16],...i)}return e=new ii({props:{items:t[16].choices,name:t[16].name,id:t[16].name}}),e.$on("select",n),{c(){J(e.$$.fragment)},m(i,s){V(e,i,s),l=!0},p(i,s){t=i;const o={};s&1&&(o.items=t[16].choices),s&1&&(o.name=t[16].name),s&1&&(o.id=t[16].name),e.$set(o)},i(i){l||(C(e.$$.fragment,i),l=!0)},o(i){T(e.$$.fragment,i),l=!1},d(i){q(e,i)}}}function tn(t){let e;return{c(){e=b("option"),e.textContent=`${j==="en"?"Select":"Sélectionner"} ...
                                                    `,e.__value="",e.value=e.__value,e.disabled=!0,e.selected=!0,m(e,"class","faded")},m(l,n){S(l,e,n)},p:A,d(l){l&&w(e)}}}function nn(t){let e,l=t[19].label+"",n,i;return{c(){e=b("option"),n=O(l),e.__value=i=t[19].id,e.value=e.__value},m(s,o){S(s,e,o),p(e,n)},p(s,o){o&1&&l!==(l=s[19].label+"")&&M(n,l),o&1&&i!==(i=s[19].id)&&(e.__value=i,e.value=e.__value)},d(s){s&&w(e)}}}function ln(t){let e,l,n=t[16].name!=="search"&&en(t);return{c(){n&&n.c(),e=H()},m(i,s){n&&n.m(i,s),S(i,e,s),l=!0},p(i,s){i[16].name!=="search"?n?(n.p(i,s),s&1&&C(n,1)):(n=en(i),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(_e(),T(n,1,1,()=>{n=null}),me())},i(i){l||(C(n),l=!0)},o(i){T(n),l=!1},d(i){n&&n.d(i),i&&w(e)}}}function di(t){let e,l,n=t[0].length>0&&Yt(t);return{c(){n&&n.c(),e=H()},m(i,s){n&&n.m(i,s),S(i,e,s),l=!0},p(i,[s]){i[0].length>0?n?(n.p(i,s),s&1&&C(n,1)):(n=Yt(i),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(_e(),T(n,1,1,()=>{n=null}),me())},i(i){l||(C(n),l=!0)},o(i){T(n),l=!1},d(i){n&&n.d(i),i&&w(e)}}}function _i(t){return t.type.includes("ChoiceField")&&t.choices.length>5}function mi(t,e,l){let n,{recordsStore:i}=e;const{recordSearch:s,searchParams:o}=i;re(t,o,$=>l(14,n=$));let{searchFields:r=[]}=e,c={};xn(()=>{const $=n??new URLSearchParams(window.location.search);r.forEach(E=>{l(1,c[E.name]=$.get(E.name)||E.initial||"",c)})});function u($){$.preventDefault(),s(c)}function a($,E){l(1,c[$.name]=E.detail.id,c)}const f=$=>$.type.includes("Multiple");function d($){c[$.name]=this.value,l(1,c),l(0,r)}const _=($,E)=>a($,E);function h($){c[$.name]=Wn(this),l(1,c),l(0,r)}function g($){c[$.name]=this.checked,l(1,c),l(0,r)}function v($){c[$.name]=this.value,l(1,c),l(0,r)}function y($){c[$.name]=pt(this.value),l(1,c),l(0,r)}function k($){c[$.name]=this.value,l(1,c),l(0,r)}return t.$$set=$=>{"recordsStore"in $&&l(6,i=$.recordsStore),"searchFields"in $&&l(0,r=$.searchFields)},[r,c,o,u,a,f,i,d,_,h,g,v,y,k]}class pi extends te{constructor(e){super(),ee(this,e,mi,di,K,{recordsStore:6,searchFields:0})}}function sn(t){let e,l,n,i,s,o,r,c,u,a=t[5]>1&&on(t),f=t[5]<t[3]&&un(t);return{c(){e=b("nav"),l=b("ul"),a&&a.c(),n=L(),i=b("li"),s=b("a"),o=O(t[5]),r=L(),f&&f.c(),m(s,"class","pagination-link is-current"),m(s,"href",null),m(l,"class","pagination-list ml-0"),m(e,"class","pagination is-centered mb-2"),m(e,"aria-label","pagination")},m(d,_){S(d,e,_),p(e,l),a&&a.m(l,null),p(l,n),p(l,i),p(i,s),p(s,o),p(l,r),f&&f.m(l,null),c||(u=F(s,"click",Oe(t[9])),c=!0)},p(d,_){d[5]>1?a?a.p(d,_):(a=on(d),a.c(),a.m(l,n)):a&&(a.d(1),a=null),_&32&&M(o,d[5]),d[5]<d[3]?f?f.p(d,_):(f=un(d),f.c(),f.m(l,null)):f&&(f.d(1),f=null)},d(d){d&&w(e),a&&a.d(),f&&f.d(),c=!1,u()}}}function on(t){let e,l,n,i,s,o,r=t[5]-1>1&&rn(t);return{c(){e=b("li"),l=b("a"),l.textContent="1",n=L(),r&&r.c(),i=H(),m(l,"class","pagination-link"),m(l,"href",null)},m(c,u){S(c,e,u),p(e,l),S(c,n,u),r&&r.m(c,u),S(c,i,u),s||(o=F(l,"click",Oe(t[7])),s=!0)},p(c,u){c[5]-1>1?r?r.p(c,u):(r=rn(c),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(c){c&&w(e),c&&w(n),r&&r.d(c),c&&w(i),s=!1,o()}}}function rn(t){let e,l,n,i=t[5]-1+"",s,o,r,c=t[5]-1>2&&cn();return{c(){c&&c.c(),e=L(),l=b("li"),n=b("a"),s=O(i),m(n,"class","pagination-link"),m(n,"href",null)},m(u,a){c&&c.m(u,a),S(u,e,a),S(u,l,a),p(l,n),p(n,s),o||(r=F(n,"click",Oe(t[8])),o=!0)},p(u,a){u[5]-1>2?c||(c=cn(),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),a&32&&i!==(i=u[5]-1+"")&&M(s,i)},d(u){c&&c.d(u),u&&w(e),u&&w(l),o=!1,r()}}}function cn(t){let e;return{c(){e=b("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function un(t){let e,l,n,i,s,o,r=t[5]+1<t[3]&&fn(t);return{c(){r&&r.c(),e=L(),l=b("li"),n=b("a"),i=O(t[3]),m(n,"class","pagination-link"),m(n,"href",null)},m(c,u){r&&r.m(c,u),S(c,e,u),S(c,l,u),p(l,n),p(n,i),s||(o=F(n,"click",Oe(t[11])),s=!0)},p(c,u){c[5]+1<c[3]?r?r.p(c,u):(r=fn(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u&8&&M(i,c[3])},d(c){r&&r.d(c),c&&w(e),c&&w(l),s=!1,o()}}}function fn(t){let e,l,n=t[5]+1+"",i,s,o,r,c,u=t[5]+2<t[3]&&an();return{c(){e=b("li"),l=b("a"),i=O(n),s=L(),u&&u.c(),o=H(),m(l,"class","pagination-link"),m(l,"href",null)},m(a,f){S(a,e,f),p(e,l),p(l,i),S(a,s,f),u&&u.m(a,f),S(a,o,f),r||(c=F(l,"click",Oe(t[10])),r=!0)},p(a,f){f&32&&n!==(n=a[5]+1+"")&&M(i,n),a[5]+2<a[3]?u||(u=an(),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},d(a){a&&w(e),a&&w(s),u&&u.d(a),a&&w(o),r=!1,c()}}}function an(t){let e;return{c(){e=b("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function hi(t){let e,l,n=t[5]*t[2]-t[2]+1+"",i,s,o=Math.min(t[5]*t[2],t[1])+"",r,c,u,a,f=t[4]&&sn(t);return{c(){f&&f.c(),e=L(),l=b("div"),i=O(n),s=O(" - "),r=O(o),c=O(" / "),u=O(t[1]),m(l,"class",a="is-size-7 is-center mb-4 "+(t[4]?"":"mt-4"))},m(d,_){f&&f.m(d,_),S(d,e,_),S(d,l,_),p(l,i),p(l,s),p(l,r),p(l,c),p(l,u)},p(d,[_]){d[4]?f?f.p(d,_):(f=sn(d),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),_&36&&n!==(n=d[5]*d[2]-d[2]+1+"")&&M(i,n),_&38&&o!==(o=Math.min(d[5]*d[2],d[1])+"")&&M(r,o),_&2&&M(u,d[1]),_&16&&a!==(a="is-size-7 is-center mb-4 "+(d[4]?"":"mt-4"))&&m(l,"class",a)},i:A,o:A,d(d){f&&f.d(d),d&&w(e),d&&w(l)}}}function bi(t,e,l){let n,i,s,{store:o}=e;const{currentPage:r}=o;re(t,r,g=>l(5,s=g));let{nbOfItems:c}=e,{pageLength:u=hl}=e;const a=()=>o.handlePageUpdate(1),f=()=>o.handlePageUpdate(s-1),d=()=>o.handlePageUpdate(s),_=()=>o.handlePageUpdate(s+1),h=()=>o.handlePageUpdate(n);return t.$$set=g=>{"store"in g&&l(0,o=g.store),"nbOfItems"in g&&l(1,c=g.nbOfItems),"pageLength"in g&&l(2,u=g.pageLength)},t.$$.update=()=>{t.$$.dirty&6&&l(3,n=u>0?Math.ceil(c/u):1),t.$$.dirty&14&&l(4,i=n>1||c>u)},[o,c,u,n,i,s,r,a,f,d,_,h]}class dn extends te{constructor(e){super(),ee(this,e,bi,hi,K,{store:0,nbOfItems:1,pageLength:2})}}const gi=t=>({}),_n=t=>({});function ki(t){let e,l,n,i,s,o,r,c,u,a,f,d,_,h,g,v,y,k,$,E,R;const P=t[1].content,N=Me(P,t,t[0],_n);return{c(){e=b("button"),l=L(),n=b("div"),i=b("div"),s=L(),o=b("div"),r=b("div"),r.innerHTML=`<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div>
            <button class="delete media-left" aria-label="close"></button>`,c=L(),u=b("section"),a=b("div"),f=L(),d=b("div"),N&&N.c(),_=L(),h=b("footer"),g=b("div"),v=b("button"),v.textContent=`${j==="en"?"Abort":"Retour"}`,y=L(),k=b("button"),k.textContent="OK",m(e,"id","hidden-msg-btn"),m(e,"data-target","msg-modal"),e.hidden=!0,m(i,"id","modal-bkg"),m(i,"class","modal-background"),m(r,"class","modal-card-head media mb-0"),m(a,"id","modal-msg"),m(d,"class","py-3"),m(u,"id","modal-body"),m(u,"class","modal-card-body"),m(v,"id","cancel-btn"),m(v,"class","button is-link is-light button-close"),m(k,"id","ok-btn"),m(k,"class","button is-link button-close"),m(g,"class","buttons"),m(h,"id","modal-footer"),m(h,"class","modal-card-foot is-center pt-3"),h.hidden=!0,m(o,"class","modal-content"),m(n,"id","msg-modal"),m(n,"class","modal fade"),m(n,"tabindex","-1"),m(n,"aria-labelledby","selection-modal-label"),m(n,"aria-hidden","true")},m(D,U){S(D,e,U),S(D,l,U),S(D,n,U),p(n,i),p(n,s),p(n,o),p(o,r),p(o,c),p(o,u),p(u,a),p(u,f),p(u,d),N&&N.m(d,null),p(o,_),p(o,h),p(h,g),p(g,v),p(g,y),p(g,k),$=!0,E||(R=[Fe(Nt.call(null,e)),Fe(Pt.call(null,n))],E=!0)},p(D,[U]){N&&N.p&&(!$||U&1)&&Ue(N,P,D,D[0],$?Te(P,D[0],U,gi):De(D[0]),_n)},i(D){$||(C(N,D),$=!0)},o(D){T(N,D),$=!1},d(D){D&&w(e),D&&w(l),D&&w(n),N&&N.d(D),E=!1,G(R)}}}function vi(t,e,l){let{$$slots:n={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&l(0,i=s.$$scope)},[i,n]}class mn extends te{constructor(e){super(),ee(this,e,vi,ki,K,{})}}function wi(t){const e=t,l=he(1),n=he([]),i=he(0),s=he(new URLSearchParams(window.location.search));Pl(l,"p");async function o(){const f=je(s);f.set("p",`${je(l)}`);try{const _=await(await fetch(`${window.location.origin}/search/${e}/?${f.toString()}`)).json();n.set(_.results),i.set(_.count),l.set(_.current_page),f.set("p",String(je(l)));const h=`${window.location.pathname}?${f.toString()}`;return history.pushState(null,"",h),_}catch(d){throw console.error("Error fetching page:",d),d}}let r=o();function c(f){Nl(f,l,"p"),r=o()}function u(f){const d=new URLSearchParams(f);s.set(d),c(1)}function a(f){n.update(d=>d.filter(_=>_.id!==f))}return{currentPage:l,pageRecords:n,resultPage:r,resultNumber:i,fetchPage:o,handlePageUpdate:c,recordSearch:u,remove:a}}function pn(t,e,l){const n=t.slice();return n[8]=e[l][0],n[9]=e[l][1],n}function hn(t,e,l){const n=t.slice();return n[12]=e[l][0],n[13]=e[l][1],n}function bn(t,e,l){const n=t.slice();return n[12]=e[l][0],n[13]=e[l][1],n}function Si(t){let e=t[2]?"Retirer de la":"Charger dans la",l,n;return{c(){l=O(e),n=O(" sélection")},m(i,s){S(i,l,s),S(i,n,s)},p(i,s){s&4&&e!==(e=i[2]?"Retirer de la":"Charger dans la")&&M(l,e)},d(i){i&&w(l),i&&w(n)}}}function yi(t){let e=t[2]?"Unload from":"Load to",l,n;return{c(){l=O(e),n=O(" selection")},m(i,s){S(i,l,s),S(i,n,s)},p(i,s){s&4&&e!==(e=i[2]?"Unload from":"Load to")&&M(l,e)},d(i){i&&w(l),i&&w(n)}}}function Ei(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function $i(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(l,n){S(l,e,n)},d(l){l&&w(e)}}}function Li(t){let e,l,n,i,s,o,r,c,u,a=j==="en"?"Export":"Exporter",f,d,_;function h(E,R){return j==="en"?yi:Si}let v=h()(t);function y(E,R){return E[2]?$i:Ei}let k=y(t),$=k(t);return{c(){e=b("div"),l=b("button"),v.c(),n=L(),i=ve("svg"),$.c(),s=L(),o=b("button"),r=b("span"),c=b("i"),u=L(),f=O(a),m(i,"xmlns","http://www.w3.org/2000/svg"),m(i,"viewBox","0 0 384 512"),m(l,"class","button"),fe(l,"is-inverted",t[2]),m(c,"class","fa-solid fa-file-export"),m(o,"class","button is-link"),fe(o,"is-inverted",t[2]),m(e,"slot","buttons")},m(E,R){S(E,e,R),p(e,l),v.m(l,null),p(l,n),p(l,i),$.m(i,null),p(e,s),p(e,o),p(o,r),p(r,c),p(r,u),p(r,f),d||(_=[F(l,"click",t[6]),F(o,"click",t[7])],d=!0)},p(E,R){v.p(E,R),k!==(k=y(E))&&($.d(1),$=k(E),$&&($.c(),$.m(i,null))),R&4&&fe(l,"is-inverted",E[2]),R&4&&fe(o,"is-inverted",E[2])},d(E){E&&w(e),v.d(),$.d(),d=!1,G(_)}}}function gn(t){let e,l=t[13].task_type+"",n,i,s=t[12]+"",o,r,c,u;return{c(){e=b("a"),n=O(l),i=O(" #"),o=O(s),r=L(),m(e,"href",c=t[13].url),m(e,"class",u="tag is-rounded is-small "+wn(t[13].status))},m(a,f){S(a,e,f),p(e,n),p(e,i),p(e,o),p(e,r)},p(a,f){f&1&&l!==(l=a[13].task_type+"")&&M(n,l),f&1&&s!==(s=a[12]+"")&&M(o,s),f&1&&c!==(c=a[13].url)&&m(e,"href",c),f&1&&u!==(u="tag is-rounded is-small "+wn(a[13].status))&&m(e,"class",u)},d(a){a&&w(e)}}}function kn(t){let e,l,n=t[8]+"",i,s,o=t[12]+"",r,c,u=t[13].title+"",a,f;return{c(){e=b("div"),l=b("span"),i=O(n),s=O(" #"),r=O(o),c=L(),a=O(u),f=L(),m(l,"class","tag is-rounded is-accent")},m(d,_){S(d,e,_),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,a),p(e,f)},p(d,_){_&1&&n!==(n=d[8]+"")&&M(i,n),_&1&&o!==(o=d[12]+"")&&M(r,o),_&1&&u!==(u=d[13].title+"")&&M(a,u)},d(d){d&&w(e)}}}function vn(t){let e,l=Object.entries(t[9]),n=[];for(let i=0;i<l.length;i+=1)n[i]=kn(hn(t,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},m(i,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){l=Object.entries(i[9]);let o;for(o=0;o<l.length;o+=1){const r=hn(i,l,o);n[o]?n[o].p(r,s):(n[o]=kn(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){x(n,i),i&&w(e)}}}function Oi(t){let e,l,n,i,s=Object.entries(t[0].treatments),o=[];for(let u=0;u<s.length;u+=1)o[u]=gn(bn(t,s,u));let r=Object.entries(t[0].selection.selected),c=[];for(let u=0;u<r.length;u+=1)c[u]=vn(pn(t,r,u));return{c(){e=b("div"),l=b("div");for(let u=0;u<o.length;u+=1)o[u].c();n=L(),i=b("div");for(let u=0;u<c.length;u+=1)c[u].c();m(l,"class","tags container"),m(i,"class","grid"),m(e,"slot","body")},m(u,a){S(u,e,a),p(e,l);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(l,null);p(e,n),p(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null)},p(u,a){if(a&1){s=Object.entries(u[0].treatments);let f;for(f=0;f<s.length;f+=1){const d=bn(u,s,f);o[f]?o[f].p(d,a):(o[f]=gn(d),o[f].c(),o[f].m(l,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}if(a&1){r=Object.entries(u[0].selection.selected);let f;for(f=0;f<r.length;f+=1){const d=pn(u,r,f);c[f]?c[f].p(d,a):(c[f]=vn(d),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}},d(u){u&&w(e),x(o,u),x(c,u)}}}function Pi(t){let e,l,n,i;return e=new mn({}),n=new nt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[Oi],buttons:[Li]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),l=L(),J(n.$$.fragment)},m(s,o){V(e,s,o),S(s,l,o),V(n,s,o),i=!0},p(s,[o]){const r={};o&1&&(r.item=s[0]),o&2&&(r.recordsStore=s[1]),o&262149&&(r.$$scope={dirty:o,ctx:s}),n.$set(r)},i(s){i||(C(e.$$.fragment,s),C(n.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),T(n.$$.fragment,s),i=!1},d(s){q(e,s),s&&w(l),q(n,s)}}}function wn(t){return t?t==="CANCELLED"?"is-info":t==="ERROR"?"is-danger":t==="IN PROGRESS"?"is-warning":t==="PENDING"||t==="STARTED"?"is-info":t==="SUCCESS"?"is-success":"is-dark":"is-dark"}function Ni(t,e,l){let n,i,{item:s}=e,{recordsStore:o}=e;const{isSetSelected:r}=be;re(t,r,f=>l(5,i=f));async function c(f){let d=j==="en"?"You can export the contents of this set as a ZIP archive or reach our JSON API.":"Vous pouvez exporter le contenu de cet ensemble en archive ZIP ou interroger notre API JSON.",_=document.createElement("div");_.style="display: flex; gap: 1rem; align-items: center; justify-content: center; margin-top: 1em;";let h=document.createElement("a");h.classList.add("button","is-link"),h.innerHTML="<span>"+(j==="en"?"JSON API":"API JSON")+"</span>",h.href=`/${se}/document-set/${f.id}/json`,h.target="_blank";let g=document.createElement("a");g.classList.add("button","is-link"),g.innerHTML="<span>ZIP</span>",g.href=`/${se}/document-set/${f.id}/zip`,g.target="_blank",_.appendChild(h),_.appendChild(g),await Re(d+"<br/>"+_.outerHTML,"Export",!1)}const u=()=>be.toggleSet(s),a=()=>c(s);return t.$$set=f=>{"item"in f&&l(0,s=f.item),"recordsStore"in f&&l(1,o=f.recordsStore)},t.$$.update=()=>{t.$$.dirty&33&&l(2,n=i(s))},[s,o,n,r,c,i,u,a]}let Ii=class extends te{constructor(e){super(),ee(this,e,Ni,Pi,K,{item:0,recordsStore:1})}};function Sn(t,e,l){const n=t.slice();return n[5]=e[l][0],n[6]=e[l][1],n}function yn(t,e,l){const n=t.slice();return n[9]=e[l][0],n[10]=e[l][1],n}function Ri(t){let e,l,n,i,s;return{c(){e=b("a"),l=b("i"),n=L(),i=b("span"),i.textContent=`${j==="en"?"Relaunch same treatment":"Relancer le même traitement"}`,m(l,"class","fa-solid fa-arrow-rotate-left"),m(e,"href",s="add/"+t[0].query_parameters),m(e,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),m(e,"title",j==="en"?"Relaunch same treatment":"Relancer le même traitement")},m(o,r){S(o,e,r),p(e,l),p(e,n),p(e,i)},p(o,r){r&1&&s!==(s="add/"+o[0].query_parameters)&&m(e,"href",s)},d(o){o&&w(e)}}}function Ai(t){let e,l,n,i,s,o;return{c(){e=b("button"),l=b("i"),n=L(),i=b("span"),i.textContent=`${j==="en"?"Cancel treatment":"Annuler le traitement"}`,m(l,"class","fa-solid fa-ban"),m(e,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),m(e,"title",j==="en"?"Cancel treatment":"Annuler le traitement")},m(r,c){S(r,e,c),p(e,l),p(e,n),p(e,i),s||(o=F(e,"click",t[4]),s=!0)},p:A,d(r){r&&w(e),s=!1,o()}}}function Ci(t){let e,l;return{c(){e=b("span"),l=O(t[2]),m(e,"class","tag is-info p-1 mb-1")},m(n,i){S(n,e,i),p(e,l)},p(n,i){i&4&&M(l,n[2])},d(n){n&&w(e)}}}function ji(t){let e,l,n;return{c(){e=b("span"),l=O(t[2]),m(e,"class","tag is-danger p-1 mb-1"),m(e,"title",n=t[0].info||"Unknown error")},m(i,s){S(i,e,s),p(e,l)},p(i,s){s&4&&M(l,i[2]),s&1&&n!==(n=i[0].info||"Unknown error")&&m(e,"title",n)},d(i){i&&w(e)}}}function Mi(t){let e,l;return{c(){e=b("span"),l=O(t[2]),m(e,"class","tag is-success p-1 mb-1")},m(n,i){S(n,e,i),p(e,l)},p(n,i){i&4&&M(l,n[2])},d(n){n&&w(e)}}}function Ti(t){let e,l;function n(u,a){if(!u[3]&&u[0].api_tracking_id)return Ai;if(u[3]&&u[2]==="ERROR")return Ri}let i=n(t),s=i&&i(t);function o(u,a){return u[2]==="SUCCESS"?Mi:u[2]==="ERROR"?ji:Ci}let r=o(t),c=r(t);return{c(){e=b("div"),s&&s.c(),l=L(),c.c(),m(e,"slot","buttons")},m(u,a){S(u,e,a),s&&s.m(e,null),p(e,l),c.m(e,null)},p(u,a){i===(i=n(u))&&s?s.p(u,a):(s&&s.d(1),s=i&&i(u),s&&(s.c(),s.m(e,l))),r===(r=o(u))&&c?c.p(u,a):(c.d(1),c=r(u),c&&(c.c(),c.m(e,null)))},d(u){u&&w(e),s&&s.d(),c.d()}}}function En(t){let e,l=Object.entries(t[0].selection.selected),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ln(Sn(t,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},m(i,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){l=Object.entries(i[0].selection.selected);let o;for(o=0;o<l.length;o+=1){const r=Sn(i,l,o);n[o]?n[o].p(r,s):(n[o]=Ln(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){x(n,i),i&&w(e)}}}function $n(t){let e,l,n=t[5]+"",i,s,o=t[9]+"",r,c,u=t[10].title+"",a,f;return{c(){e=b("div"),l=b("span"),i=O(n),s=O(" #"),r=O(o),c=L(),a=O(u),f=L(),m(l,"class","tag is-rounded is-accent")},m(d,_){S(d,e,_),p(e,l),p(l,i),p(l,s),p(l,r),p(e,c),p(e,a),p(e,f)},p(d,_){_&1&&n!==(n=d[5]+"")&&M(i,n),_&1&&o!==(o=d[9]+"")&&M(r,o),_&1&&u!==(u=d[10].title+"")&&M(a,u)},d(d){d&&w(e)}}}function Ln(t){let e,l=Object.entries(t[6]),n=[];for(let i=0;i<l.length;i+=1)n[i]=$n(yn(t,l,i));return{c(){for(let i=0;i<n.length;i+=1)n[i].c();e=H()},m(i,s){for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){l=Object.entries(i[6]);let o;for(o=0;o<l.length;o+=1){const r=yn(i,l,o);n[o]?n[o].p(r,s):(n[o]=$n(r),n[o].c(),n[o].m(e.parentNode,e))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){x(n,i),i&&w(e)}}}function Ui(t){let e,l=t[0].hasOwnProperty("selection")&&t[0].selection.hasOwnProperty("selected")&&t[0].selection.selected,n=l&&En(t);return{c(){e=b("div"),n&&n.c(),m(e,"slot","body"),m(e,"class","pt-2 grid")},m(i,s){S(i,e,s),n&&n.m(e,null)},p(i,s){s&1&&(l=i[0].hasOwnProperty("selection")&&i[0].selection.hasOwnProperty("selected")&&i[0].selection.selected),l?n?n.p(i,s):(n=En(i),n.c(),n.m(e,null)):n&&(n.d(1),n=null)},d(i){i&&w(e),n&&n.d()}}}function Di(t){let e,l;return e=new nt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[Ui],buttons:[Ti]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(n,i){V(e,n,i),l=!0},p(n,[i]){const s={};i&1&&(s.item=n[0]),i&2&&(s.recordsStore=n[1]),i&8205&&(s.$$scope={dirty:i,ctx:n}),e.$set(s)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Fi(t,e,l){let n,i,{item:s}=e,{recordsStore:o}=e;async function r(){if(!await Re(j==="en"?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?",j==="en"?"Confirm cancel":"Confirmer l'annulation",!0))return;await Ot(`/${se}/treatment/${s.id}/cancel`)?(l(3,n=!0),l(2,i="CANCELLED")):await Re(j==="en"?"Failed to cancel treatment":"Erreur lors de l'annulation du traitement",j==="en"?"Error":"Erreur")}return t.$$set=c=>{"item"in c&&l(0,s=c.item),"recordsStore"in c&&l(1,o=c.recordsStore)},t.$$.update=()=>{t.$$.dirty&1&&l(3,n=s.is_finished),t.$$.dirty&1&&l(2,i=s.status)},[s,o,i,n,r]}class Bi extends te{constructor(e){super(),ee(this,e,Fi,Di,K,{item:0,recordsStore:1})}}function On(t,e,l){const n=t.slice();return n[17]=e[l][0],n[18]=e[l][1],n}function Pn(t,e,l){const n=t.slice();return n[21]=e[l][0],n[22]=e[l][1],n}function Nn(t,e,l){const n=t.slice();return n[26]=e[l],n}function In(t){let e,l,n,i,s;return{c(){e=b("span"),l=b("a"),n=b("i"),i=L(),s=b("span"),s.textContent=`${j==="en"?"Add":"Ajouter"}`,m(n,"class","fa-solid fa-plus"),m(l,"href",t[12]),m(l,"class","button is-rounded is-primary mb-4"),m(l,"title",j==="en"?"Add":"Ajouter"),m(e,"class","is-right")},m(o,r){S(o,e,r),p(e,l),p(l,n),p(l,i),p(l,s)},p:A,d(o){o&&w(e)}}}function zi(t){let e,l=j==="en"?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",n,i,s=t[29]+"",o;return{c(){e=b("div"),n=O(l),i=L(),o=O(s),m(e,"class","faded is-center")},m(r,c){S(r,e,c),p(e,n),p(e,i),p(e,o)},p:A,i:A,o:A,d(r){r&&w(e)}}}function Hi(t){let e,l,n=t[4].length!==0&&Rn(t);return{c(){n&&n.c(),e=H()},m(i,s){n&&n.m(i,s),S(i,e,s),l=!0},p(i,s){i[4].length!==0?n?(n.p(i,s),s&16&&C(n,1)):(n=Rn(i),n.c(),C(n,1),n.m(e.parentNode,e)):n&&(_e(),T(n,1,1,()=>{n=null}),me())},i(i){l||(C(n),l=!0)},o(i){T(n),l=!1},d(i){n&&n.d(i),i&&w(e)}}}function Rn(t){let e,l,n,i=[],s=new Map,o,r,c;e=new dn({props:{store:t[8],nbOfItems:t[5]}});let u=t[4];const a=d=>d[26].id;for(let d=0;d<u.length;d+=1){let _=Nn(t,u,d),h=a(_);s.set(h,i[d]=Cn(h,_))}let f=null;return u.length||(f=An()),r=new dn({props:{store:t[8],nbOfItems:t[5]}}),{c(){J(e.$$.fragment),l=L(),n=b("div");for(let d=0;d<i.length;d+=1)i[d].c();f&&f.c(),o=L(),J(r.$$.fragment)},m(d,_){V(e,d,_),S(d,l,_),S(d,n,_);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(n,null);f&&f.m(n,null),S(d,o,_),V(r,d,_),c=!0},p(d,_){const h={};_&32&&(h.nbOfItems=d[5]),e.$set(h),_&272&&(u=d[4],_e(),i=fl(i,_,a,1,d,u,s,n,ul,Cn,null,Nn),me(),!u.length&&f?f.p(d,_):u.length?f&&(f.d(1),f=null):(f=An(),f.c(),f.m(n,null)));const g={};_&32&&(g.nbOfItems=d[5]),r.$set(g)},i(d){if(!c){C(e.$$.fragment,d);for(let _=0;_<u.length;_+=1)C(i[_]);C(r.$$.fragment,d),c=!0}},o(d){T(e.$$.fragment,d);for(let _=0;_<i.length;_+=1)T(i[_]);T(r.$$.fragment,d),c=!1},d(d){q(e,d),d&&w(l),d&&w(n);for(let _=0;_<i.length;_+=1)i[_].d();f&&f.d(),d&&w(o),q(r,d)}}}function An(t){let e;return{c(){e=b("p"),e.textContent=`${j==="en"?"No records found":"Aucun enregistrement trouvé"}`},m(l,n){S(l,e,n)},p:A,d(l){l&&w(e)}}}function Vi(t){let e,l;return e=new Hl({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(n,i){V(e,n,i),l=!0},p(n,i){const s={};i&16&&(s.item=n[26]),e.$set(s)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function qi(t){let e,l;return e=new Ii({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(n,i){V(e,n,i),l=!0},p(n,i){const s={};i&16&&(s.item=n[26]),e.$set(s)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Ji(t){let e,l;return e=new Bi({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(n,i){V(e,n,i),l=!0},p(n,i){const s={};i&16&&(s.item=n[26]),e.$set(s)},i(n){l||(C(e.$$.fragment,n),l=!0)},o(n){T(e.$$.fragment,n),l=!1},d(n){q(e,n)}}}function Cn(t,e){let l,n,i,s,o,r,c;const u=[Ji,qi,Vi],a=[];function f(d,_){return _&16&&(n=null),_&16&&(i=null),n==null&&(n=!!d[26].class.includes("Treatment")),n?0:(i==null&&(i=!!d[26].class.includes("Set")),i?1:2)}return s=f(e,-1),o=a[s]=u[s](e),{key:t,first:null,c(){l=H(),o.c(),r=H(),this.first=l},m(d,_){S(d,l,_),a[s].m(d,_),S(d,r,_),c=!0},p(d,_){e=d;let h=s;s=f(e,_),s===h?a[s].p(e,_):(_e(),T(a[h],1,1,()=>{a[h]=null}),me(),o=a[s],o?o.p(e,_):(o=a[s]=u[s](e),o.c()),C(o,1),o.m(r.parentNode,r))},i(d){c||(C(o),c=!0)},o(d){T(o),c=!1},d(d){d&&w(l),a[s].d(d),d&&w(r)}}}function Gi(t){let e;return{c(){e=b("div"),e.textContent=`${j==="en"?"Retrieving records...":"Récupération des enregistrements..."}`,m(e,"class","faded is-center")},m(l,n){S(l,e,n)},p:A,i:A,o:A,d(l){l&&w(e)}}}function jn(t){let e,l,n;return{c(){e=b("tr"),l=b("td"),l.textContent=`${j==="en"?"No documents in selection":"Aucun document sélectionné"}`,n=L()},m(i,s){S(i,e,s),p(e,l),p(e,n)},p:A,d(i){i&&w(e)}}}function Mn(t){let e,l=Je[t[17]]+"",n,i,s,o,r,c=Object.entries(t[18]),u=[];for(let a=0;a<c.length;a+=1)u[a]=Tn(Pn(t,c,a));return{c(){e=b("h3"),n=O(l),i=L(),s=b("table"),o=b("tbody");for(let a=0;a<u.length;a+=1)u[a].c();r=L(),m(s,"class","table pl-2 is-fullwidth")},m(a,f){S(a,e,f),p(e,n),S(a,i,f),S(a,s,f),p(s,o);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(o,null);p(s,r)},p(a,f){if(f&8&&l!==(l=Je[a[17]]+"")&&M(n,l),f&8){c=Object.entries(a[18]);let d;for(d=0;d<c.length;d+=1){const _=Pn(a,c,d);u[d]?u[d].p(_,f):(u[d]=Tn(_),u[d].c(),u[d].m(o,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=c.length}},d(a){a&&w(e),a&&w(i),a&&w(s),x(u,a)}}}function Tn(t){let e,l,n,i,s=t[21]+"",o,r,c,u,a=t[22].title+"",f,d,_,h,g,v,y,k;function $(){return t[16](t[21],t[17])}return{c(){e=b("tr"),l=b("th"),n=b("span"),i=O("#"),o=O(s),r=L(),c=b("td"),u=b("a"),f=O(a),_=L(),h=b("td"),g=b("button"),v=L(),m(n,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),m(l,"class","is-narrow is-3"),m(u,"href",d=t[22].url),m(u,"target","_blank"),m(g,"class","delete"),m(g,"aria-label","close"),m(h,"class","is-narrow")},m(E,R){S(E,e,R),p(e,l),p(l,n),p(n,i),p(n,o),p(e,r),p(e,c),p(c,u),p(u,f),p(e,_),p(e,h),p(h,g),S(E,v,R),y||(k=F(g,"click",$),y=!0)},p(E,R){t=E,R&8&&s!==(s=t[21]+"")&&M(o,s),R&8&&a!==(a=t[22].title+"")&&M(f,a),R&8&&d!==(d=t[22].url)&&m(u,"href",d)},d(E){E&&w(e),E&&w(v),y=!1,k()}}}function Un(t){let e=Object.values(t[18]).length>0&&t[17]in Je,l,n=e&&Mn(t);return{c(){n&&n.c(),l=H()},m(i,s){n&&n.m(i,s),S(i,l,s)},p(i,s){s&8&&(e=Object.values(i[18]).length>0&&i[17]in Je),e?n?n.p(i,s):(n=Mn(i),n.c(),n.m(l.parentNode,l)):n&&(n.d(1),n=null)},d(i){n&&n.d(i),i&&w(l)}}}function Ki(t){let e,l=Object.entries(t[3]),n=[];for(let s=0;s<l.length;s+=1)n[s]=Un(On(t,l,s));let i=null;return l.length||(i=jn()),{c(){for(let s=0;s<n.length;s+=1)n[s].c();e=H(),i&&i.c()},m(s,o){for(let r=0;r<n.length;r+=1)n[r]&&n[r].m(s,o);S(s,e,o),i&&i.m(s,o)},p(s,o){if(o&8){l=Object.entries(s[3]);let r;for(r=0;r<l.length;r+=1){const c=On(s,l,r);n[r]?n[r].p(c,o):(n[r]=Un(c),n[r].c(),n[r].m(e.parentNode,e))}for(;r<n.length;r+=1)n[r].d(1);n.length=l.length,!l.length&&i?i.p(s,o):l.length?i&&(i.d(1),i=null):(i=jn(),i.c(),i.m(e.parentNode,e))}},d(s){x(n,s),s&&w(e),i&&i.d(s)}}}function Wi(t){let e,l,n,i,s,o,r=!t[0].includes("set")&&Et,c,u,a,f;e=new mn({}),n=new Jl({props:{selectionLength:t[2]}}),s=new pi({props:{recordsStore:t[8],searchFields:t[1]}});let d=r&&In(t),_={ctx:t,current:null,token:null,hasCatch:!0,pending:Gi,then:Hi,catch:zi,value:25,error:29,blocks:[,,,]};return rl(t[10],_),a=new ti({props:{selectionLength:t[2],selectionStore:be,$$slots:{default:[Ki]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),l=L(),J(n.$$.fragment),i=L(),J(s.$$.fragment),o=L(),d&&d.c(),c=L(),_.block.c(),u=L(),J(a.$$.fragment)},m(h,g){V(e,h,g),S(h,l,g),V(n,h,g),S(h,i,g),V(s,h,g),S(h,o,g),d&&d.m(h,g),S(h,c,g),_.block.m(h,_.anchor=g),_.mount=()=>u.parentNode,_.anchor=u,S(h,u,g),V(a,h,g),f=!0},p(h,[g]){t=h;const v={};g&4&&(v.selectionLength=t[2]),n.$set(v);const y={};g&2&&(y.searchFields=t[1]),s.$set(y),g&1&&(r=!t[0].includes("set")&&Et),r?d?d.p(t,g):(d=In(t),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null),cl(_,t,g);const k={};g&4&&(k.selectionLength=t[2]),g&1073741832&&(k.$$scope={dirty:g,ctx:t}),a.$set(k)},i(h){f||(C(e.$$.fragment,h),C(n.$$.fragment,h),C(s.$$.fragment,h),C(_.block),C(a.$$.fragment,h),f=!0)},o(h){T(e.$$.fragment,h),T(n.$$.fragment,h),T(s.$$.fragment,h);for(let g=0;g<3;g+=1){const v=_.blocks[g];T(v)}T(a.$$.fragment,h),f=!1},d(h){q(e,h),h&&w(l),q(n,h),h&&w(i),q(s,h),h&&w(o),d&&d.d(h),h&&w(c),_.block.d(h),_.token=null,_=null,h&&w(u),q(a,h)}}}function Zi(t,e,l){let n,i,s,o,r,c;const{selected:u,nbSelected:a}=be;re(t,u,E=>l(15,o=E)),re(t,a,E=>l(14,s=E));let{modelName:f=""}=e;kt("modelName",f);let{modelTitle:d=""}=e;kt("modelTitle",d);const _=wi(f),{pageRecords:h,resultPage:g,resultNumber:v}=_;re(t,h,E=>l(4,r=E)),re(t,v,E=>l(5,c=E));let{searchFields:y=[]}=e;const k=f.includes("treatment")?`/${se}/${f}/add/`:`/${se}-admin/${_l}/${f}/add/`,$=(E,R)=>be.remove(E,R);return t.$$set=E=>{"modelName"in E&&l(13,f=E.modelName),"modelTitle"in E&&l(0,d=E.modelTitle),"searchFields"in E&&l(1,y=E.searchFields)},t.$$.update=()=>{t.$$.dirty&32768&&l(3,n=o),t.$$.dirty&16384&&l(2,i=s)},[d,y,i,n,r,c,u,a,_,h,g,v,k,f,s,o,$]}class Xi extends te{constructor(e){super(),ee(this,e,Zi,Wi,K,{modelName:13,modelTitle:0,searchFields:1})}}new Xi({target:document.getElementById("record-list"),props:{searchFields,modelName,modelTitle}})})();
//# sourceMappingURL=recordList.js.map

var recordList=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function l(e){return e()}function r(){return Object.create(null)}function s(e){e.forEach(l)}function o(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i;function a(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function u(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function d(e){let t;return u(e,(e=>t=e))(),t}function m(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,l){if(e){const r=p(e,t,n,l);return e[0](r)}}function p(e,t,l,r){return e[1]&&r?n(l.ctx.slice(),e[1](r(t))):l.ctx}function g(e,t,n,l){if(e[2]&&l){const r=e[2](l(n));if(void 0===t.dirty)return r;if("object"==typeof r){const e=[],n=Math.max(t.dirty.length,r.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|r[l];return e}return t.dirty|r}return t.dirty}function h(e,t,n,l,r,s){if(r){const o=p(t,n,l,s);e.p(o,r)}}function $(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const b="undefined"!=typeof window;let v=b?()=>window.performance.now():()=>Date.now(),y=b?e=>requestAnimationFrame(e):e;const w=new Set;function k(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&y(k)}function S(e,t){e.appendChild(t)}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function _(e){const t=N("style");return function(e,t){S(e.head||e,t),t.sheet}(x(e),t),t.sheet}function E(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function L(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function P(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function R(e){return document.createTextNode(e)}function C(){return R(" ")}function A(){return R("")}function j(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function I(e){return function(t){return t.preventDefault(),e.call(this,t)}}function T(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const M=["width","height"];function D(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===M.indexOf(l)?e[l]=t[l]:T(e,l,t[l])}function F(e){return""===e?null:+e}function U(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function H(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function B(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function V(e,t,n){e.classList[n?"add":"remove"](t)}function J(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(e,n,l,t),r}const q=new Map;let G,W=0;function Z(e,t,n,l,r,s,o,c=0){const i=16.666/l;let a="{\n";for(let e=0;e<=1;e+=i){const l=t+(n-t)*s(e);a+=100*e+`%{${o(l,1-l)}}\n`}const u=a+`100% {${o(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${c}`,m=x(e),{stylesheet:f,rules:p}=q.get(m)||function(e,t){const n={stylesheet:_(t),rules:{}};return q.set(e,n),n}(m,e);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${l}ms linear ${r}ms 1 both`,W+=1,d}function X(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),r=n.length-l.length;r&&(e.style.animation=l.join(", "),W-=r,W||y((()=>{W||(q.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&O(t)})),q.clear())})))}function Y(e){G=e}function K(){if(!G)throw new Error("Function called outside component initialization");return G}function Q(e,t){return K().$$.context.set(e,t),t}const ee=[],te=[];let ne=[];const le=[],re=Promise.resolve();let se=!1;function oe(e){ne.push(e)}const ce=new Set;let ie,ae=0;function ue(){if(0!==ae)return;const e=G;do{try{for(;ae<ee.length;){const e=ee[ae];ae++,Y(e),de(e.$$)}}catch(e){throw ee.length=0,ae=0,e}for(Y(null),ee.length=0,ae=0;te.length;)te.pop()();for(let e=0;e<ne.length;e+=1){const t=ne[e];ce.has(t)||(ce.add(t),t())}ne.length=0}while(ee.length);for(;le.length;)le.pop()();se=!1,ce.clear(),Y(e)}function de(e){if(null!==e.fragment){e.update(),s(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}function me(e,t,n){e.dispatchEvent(J(`${t?"intro":"outro"}${n}`))}const fe=new Set;let pe;function ge(){pe={r:0,c:[],p:pe}}function he(){pe.r||s(pe.c),pe=pe.p}function $e(e,t){e&&e.i&&(fe.delete(e),e.i(t))}function be(e,t,n,l){if(e&&e.o){if(fe.has(e))return;fe.add(e),pe.c.push((()=>{fe.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}const ve={duration:0};function ye(n,l,r,c){const i={direction:"both"};let a=l(n,r,i),u=c?0:1,d=null,m=null,f=null;function p(){f&&X(n,f)}function g(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(l){const{delay:r=0,duration:o=300,easing:c=t,tick:i=e,css:h}=a||ve,$={start:v()+r,b:l};l||($.group=pe,pe.r+=1),d||m?m=$:(h&&(p(),f=Z(n,u,l,o,r,c,h)),l&&i(0,1),d=g($,o),oe((()=>me(n,l,"start"))),function(e){let t;0===w.size&&y(k),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(m&&e>m.start&&(d=g(m,o),m=null,me(n,d.b,"start"),h&&(p(),f=Z(n,u,d.b,d.duration,0,c,a.css))),d)if(e>=d.end)i(u=d.b,1-u),me(n,d.b,"end"),m||(d.b?p():--d.group.r||s(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*c(t/d.duration),i(u,1-u)}return!(!d&&!m)})))}return{run(e){o(a)?(ie||(ie=Promise.resolve(),ie.then((()=>{ie=null}))),ie).then((()=>{a=a(i),h(e)})):h(e)},end(){p(),d=m=null}}}function we(e,t){be(e,1,1,(()=>{t.delete(e.key)}))}function ke(e){e&&e.c()}function Se(e,t,n,r){const{fragment:c,after_update:i}=e.$$;c&&c.m(t,n),r||oe((()=>{const t=e.$$.on_mount.map(l).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...t):s(t),e.$$.on_mount=[]})),i.forEach(oe)}function xe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];ne.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),ne=t}(n.after_update),s(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _e(e,t){-1===e.$$.dirty[0]&&(ee.push(e),se||(se=!0,re.then(ue)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ee(t,n,l,o,c,i,a,u=[-1]){const d=G;Y(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:c,bound:r(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:r(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(m.root);let f=!1;if(m.ctx=l?l(t,n.props||{},((e,n,...l)=>{const r=l.length?l[0]:n;return m.ctx&&c(m.ctx[e],m.ctx[e]=r)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](r),f&&_e(t,e)),n})):[],m.update(),f=!0,s(m.before_update),m.fragment=!!o&&o(m.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);m.fragment&&m.fragment.l(e),e.forEach(O)}else m.fragment&&m.fragment.c();n.intro&&$e(t.$$.fragment),Se(t,n.target,n.anchor,n.customElement),ue()}Y(d)}class Oe{$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Le=APP_LANG,Ne=APP_NAME,Pe=WEBAPP_NAME,Re=USER_ID,Ce=IS_SUPERUSER,Ae=ADD_PERMISSION,je=CSRF_TOKEN;ADDITIONAL_MODULES;const Ie="Region";SAS_APP_URL;const Te=CANTALOUPE_APP_URL;MEDIA_PATH;const Me=PAGE_LEN,De={Witness:"en"===Le?"Witness":"Témoin",Work:"en"===Le?"Work":"Œuvre",Series:"en"===Le?"Series":"Série d'imprimés",Regions:"en"===Le?"Regions":"Illustrations extraites"},Fe=[];function Ue(t,n=e){let l;const r=new Set;function s(e){if(c(t,e)&&(t=e,l)){const e=!Fe.length;for(const e of r)e[1](),Fe.push(e,t);if(e){for(let e=0;e<Fe.length;e+=2)Fe[e][0](Fe[e+1]);Fe.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(o,c=e){const i=[o,c];return r.add(i),1===r.size&&(l=n(s)||e),o(t),()=>{r.delete(i),0===r.size&&l&&(l(),l=null)}}}}function ze(t,n,l){const r=!Array.isArray(t),c=r?[t]:t,i=n.length<2;return a=t=>{let l=!1;const a=[];let d=0,m=e;const f=()=>{if(d)return;m();const l=n(r?a[0]:a,t);i?t(l):m=o(l)?l:e},p=c.map(((e,t)=>u(e,(e=>{a[t]=e,d&=~(1<<t),l&&f()}),(()=>{d|=1<<t}))));return l=!0,f(),function(){s(p),m(),l=!1}},{subscribe:Ue(l,a).subscribe};var a}const He=function(){const e={id:null,type:"documentSet",title:"en"===Le?"Document set":"Set de documents",selected:{}},t={id:null,type:"regionsSet",title:"en"===Le?"Regions set":"Set de régions",selected:{}},n=Ue({records:JSON.parse(localStorage.getItem("documentSet"))||e,regions:JSON.parse(localStorage.getItem("regionsSet"))||t}),{subscribe:l,update:r,get:s}=n,o=Ue(!1);function c(e,t=!1){o.set(t),localStorage.setItem(e.type,JSON.stringify(e))}function i(e,t){return e[t?"regions":"records"]?.selected||{}}function a(e,t=!0){const n=i(e,t);return t?n[Ie]??{}:Object.entries(n)}function u(e,t,n){const l=n===Ie?"regions":"records",r=e[l],{[t]:s,...o}=r.selected[n];return e[l]={...r,selected:{...r.selected,[n]:o}},c(e[l]),e}function d(e,t,n=!0){const l=t.class===Ie?"regions":"records",r=e[l],s=r.selected,o=t.class===Ie?t:{title:t.title,url:t.url};return e[l]={...r,selected:{...s,[t.class]:{...s[t.class]||{},[t.id]:o}}},n&&c(e[l]),e}function m(e,t){return e[t.class.toLowerCase().includes("regions")?"regions":"records"].id===t.id}return{subscribe:l,save:e=>r((t=>function(e,t){const n=t?"regions-set":"document-set";if(t)return window.alert("Region set management is not yet implemented"),e;let l=e[t?"regions":"records"],s={};Object.entries(l.selected).forEach((([e,t])=>{s[e]=Object.keys(t)}));const i=null!==l.id?`${l.id}/edit`:"new";return fetch(`${window.location.origin}/${n}/${i}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":je},body:JSON.stringify({title:l.title,selection:l,...s})}).then((e=>e.json())).then((n=>{if(!n?.document_set_id)throw new Error("Failed to save selection");r((e=>{const l=e[t?"regions":"records"];return l.id=n.document_set_id,l.title=n.document_set_title,o.set(!0),e})),c(e[t?"regions":"records"],!0)})).catch((e=>console.error("Error:",e))),e}(t,e))),empty:n=>r((l=>(l[n?"regions":"records"]=n?t:e,c(l[n?"regions":"records"]),l))),removeAll:(e,t)=>r((n=>function(e,t,n){const l=n===Ie?"regions":"records",r=e[l];let s=r.selected[n];return s&&Object.keys(s).length?(t.forEach((e=>{delete s[e]})),e[l]={...r,selected:{...r.selected,[n]:s}},c(e[l]),e):e}(n,e,t))),remove:(e,t)=>r((n=>u(n,e,t))),addAll:e=>r((t=>function(e,t){const n=t[0].type===Ie;return t.forEach((t=>{e=d(e,t,!1)})),c(e[n?"regions":"records"]),e}(t,e))),add:e=>r((t=>d(t,e))),toggle:e=>r((t=>{const n=i(t,e.class===Ie);return n[e.class]?.[e.id]?u(t,e.id,e.class):d(t,e)})),updateTitle:(e,t)=>r((n=>{const l=t?"regions":"records";return n[l]={...n[l],title:e},c(n[l],!0),n})),isSaved:o,isSelected:ze(n,(e=>t=>i(e,t.class===Ie)[t.class]?.hasOwnProperty(t.id)||!1)),isSetSelected:ze(n,(e=>t=>m(e,t))),selected:ze(n,(e=>t=>a(e,t))),nbSelected:ze(n,(e=>t=>{const n=a(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)})),selectionTitle:ze(n,(e=>t=>e[t?"regions":"records"].title)),selection:ze(n,(e=>t=>e[t?"regions":"records"])),toggleSet:n=>r((l=>m(l,n)?function(n,l){const r=l.class.toLowerCase().includes("regions");return n[r?"regions":"records"]=r?t:e,c(n[r?"regions":"records"]),n}(l,n):function(e,t){const n=t.class.toLowerCase().includes("regions")?"regions":"records";return null===t.selection.id&&(t.selection.id=t.id),e[n]=t.selection,c(e[n]),e}(l,n)))}}();function Be(e){let t,n,l=e[1]?"Retirer de la":"Ajouter à la";return{c(){t=R(l),n=R(" sélection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter à la")&&U(t,l)},d(e){e&&O(t),e&&O(n)}}}function Ve(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=R(l),n=R(" selection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&U(t,l)},d(e){e&&O(t),e&&O(n)}}}function Je(e){let t;return{c(){t=P("path"),T(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function qe(e){let t;return{c(){t=P("path"),T(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Ge(t){let n,l,r,s,o;let c=("en"===Le?Ve:Be)(t);function i(e,t){return e[1]?qe:Je}let a=i(t),u=a(t);return{c(){n=N("button"),c.c(),l=C(),r=P("svg"),u.c(),T(r,"xmlns","http://www.w3.org/2000/svg"),T(r,"viewBox","0 0 384 512"),T(r,"class","svelte-135nggd"),T(n,"class","button"),V(n,"is-inverted",t[1])},m(e,i){E(e,n,i),c.m(n,null),S(n,l),S(n,r),u.m(r,null),s||(o=j(n,"click",t[4]),s=!0)},p(e,[t]){c.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(r,null))),2&t&&V(n,"is-inverted",e[1])},i:e,o:e,d(e){e&&O(n),c.d(),u.d(),s=!1,o()}}}function We(e,t,n){let l,r;const{isSelected:s}=He;m(e,s,(e=>n(3,r=e)));let{item:o}=t;return e.$$set=e=>{"item"in e&&n(0,o=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=r(o))},[o,l,s,r,()=>He.toggle(o)]}class Ze extends Oe{constructor(e){super(),Ee(this,e,We,Ge,c,{item:0})}}function Xe(e,{delay:n=0,duration:l=400,easing:r=t}={}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:r,css:e=>"opacity: "+e*s}}function Ye(e=null){const t=function(e=null){return(e=e.split("_")).length<3?void 0:`${e.slice(0,3).join("_").replace(".jpg","")}.jpg`}(e);return void 0===t?void 0:`${Te??"http://localhost:8182"}/iiif/2/${t}`}function Ke(e=null,t="full",n="full"){if(!e)return"https://placehold.co/96x96/png?text=No+image";const l=Ye(e);if(void 0===l)return"https://placehold.co/96x96/png?text=No+image";return`${l}/${e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t}/${n}/0/default.jpg`}function Qe(e,t=null,n=!1){return new Promise((l=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:l(void 0),t&&(document.getElementById("modal-title").innerHTML=t),document.getElementById("modal-body").innerHTML=e,document.getElementById("hidden-msg-btn").click();const r=document.getElementById("cancel-btn"),s=document.getElementById("ok-btn"),o=document.getElementById("modal-bkg"),c=()=>{r.removeEventListener("click",i),o.removeEventListener("click",i),s.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},i=()=>{c(),l(!1)},a=()=>{c(),l(!0)};r.addEventListener("click",i),s.addEventListener("click",a)}else n?l(window.confirm(e)):(window.alert(e),l(void 0))}))}async function et(e){try{return(await fetch(e)).ok}catch(e){return console.error("Error:",e),!1}}const tt=e=>({}),nt=e=>({}),lt=e=>({}),rt=e=>({});function st(e,t,n){const l=e.slice();return l[7]=t[n],l}function ot(e){let t,n,l,r;return{c(){t=N("div"),n=N("figure"),l=N("img"),a(l.src,r=Ke(e[0].img,"full","250,"))||T(l,"src",r),T(l,"alt","Record illustration"),T(n,"class","card image is-96x96 svelte-1f9ag52"),T(t,"class","media-left")},m(e,r){E(e,t,r),S(t,n),S(n,l)},p(e,t){1&t&&!a(l.src,r=Ke(e[0].img,"full","250,"))&&T(l,"src",r)},d(e){e&&O(t)}}}function ct(e){let t;return{c(){t=N("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                            <span style="margin-left: -0.5rem">Public</span>',T(t,"class","pl-3 pt-1 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function it(e){let t,n=e[0].user+"";return{c(){t=R(n)},m(e,n){E(e,t,n)},p(e,l){1&l&&n!==(n=e[0].user+"")&&U(t,n)},d(e){e&&O(t)}}}function at(e){let t,n,l=e[0].updated_at+"";return{c(){t=N("span"),n=R(l),T(t,"class","tag p-1 mb-1")},m(e,l){E(e,t,l),S(t,n)},p(e,t){1&t&&l!==(l=e[0].updated_at+"")&&U(n,l)},d(e){e&&O(t)}}}function ut(e){let t,n=e[0].hasOwnProperty("iiif"),l=n&&dt(e);return{c(){l&&l.c(),t=A()},m(e,n){l&&l.m(e,n),E(e,t,n)},p(e,r){1&r&&(n=e[0].hasOwnProperty("iiif")),n?l?l.p(e,r):(l=dt(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function dt(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=mt(st(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,r){if(1&r){let s;for(n=e[0].iiif,s=0;s<n.length;s+=1){const o=st(e,n,s);l[s]?l[s].p(o,r):(l[s]=mt(o),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function mt(e){let t,n=e[7]+"";return{c(){t=N("span"),T(t,"class","tag logo mt-1")},m(e,l){E(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[7]+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function ft(e){let t,n=e[0].user_id===parseInt(Re)||Ce,l=n&&pt(e);return{c(){l&&l.c(),t=A()},m(e,n){l&&l.m(e,n),E(e,t,n)},p(e,r){1&r&&(n=e[0].user_id===parseInt(Re)||Ce),n?l?l.p(e,r):(l=pt(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function pt(t){let n,l,r;return{c(){n=N("button"),T(n,"class","delete is-medium"),T(n,"title","en"===Le?"Delete":"Supprimer")},m(e,s){E(e,n,s),l||(r=j(n,"click",t[3]),l=!0)},p:e,d(e){e&&O(n),l=!1,r()}}}function gt(e){let t,n,l,r,s,o,c,i,a,u,d,m,p,b,v,y,w,k,x,_,L,P,A,j,I,M,D,F,z=e[0].hasOwnProperty("img"),H=e[0].type+"",B=e[0].id+"",V=e[0].title+"",J=e[0].hasOwnProperty("is_public")&&e[0].is_public,q=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length,G=z&&ot(e),W=J&&ct(),Z=e[0].user&&it(e),X=e[0].updated_at&&at(e),Y=e[2]&&function(e){let t,n,l,r,s;return{c(){t=N("a"),n=N("span"),l=C(),r=N("span"),r.textContent="en"===Le?"Edit":"Éditer",T(n,"class","iconify"),T(n,"data-icon","entypo:edit"),T(r,"class","ml-2"),T(t,"href",s=e[2]?e[0].edit_url:null),T(t,"class","edit-btn button is-small is-rounded is-link px-2 svelte-1f9ag52"),T(t,"title","en"===Le?"Edit":"Éditer")},m(e,s){E(e,t,s),S(t,n),S(t,l),S(t,r)},p(e,n){1&n&&s!==(s=e[2]?e[0].edit_url:null)&&T(t,"href",s)},d(e){e&&O(t)}}}(e),K=q&&ut(e);const Q=e[6].buttons,ee=f(Q,e,e[5],rt);let te=("Treatment"===e[0].class||"DocumentSet"===e[0].class)&&ft(e);const ne=e[6].body,le=f(ne,e,e[5],nt);return{c(){t=N("div"),n=N("div"),l=N("div"),r=N("div"),G&&G.c(),s=C(),o=N("div"),c=N("a"),i=N("span"),a=R(H),u=R(" #"),d=R(B),m=C(),p=R(V),v=C(),W&&W.c(),y=C(),w=N("p"),Z&&Z.c(),k=C(),X&&X.c(),x=C(),_=N("p"),Y&&Y.c(),L=C(),K&&K.c(),P=C(),A=N("div"),ee&&ee.c(),j=C(),te&&te.c(),I=C(),M=N("div"),le&&le.c(),T(i,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),T(c,"href",b=e[1]?e[0].view_url:null),T(c,"class","title is-4 "+(e[1]?"hoverable":"")+" pt-2 svelte-1f9ag52"),T(w,"class","subtitle is-6 mb-0 ml-2 pt-2"),T(_,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle"),T(o,"class","media-content"),T(A,"class","media-right"),T(r,"class","media"),T(M,"class","content fixed-grid px-5"),T(l,"class","card-content"),T(n,"class","card mb-5"),T(t,"class","item")},m(e,f){E(e,t,f),S(t,n),S(n,l),S(l,r),G&&G.m(r,null),S(r,s),S(r,o),S(o,c),S(c,i),S(i,a),S(i,u),S(i,d),S(c,m),S(c,p),S(o,v),W&&W.m(o,null),S(o,y),S(o,w),Z&&Z.m(w,null),S(w,k),X&&X.m(w,null),S(o,x),S(o,_),Y&&Y.m(_,null),S(_,L),K&&K.m(_,null),S(r,P),S(r,A),ee&&ee.m(A,null),S(r,j),te&&te.m(r,null),S(l,I),S(l,M),le&&le.m(M,null),F=!0},p(e,[t]){1&t&&(z=e[0].hasOwnProperty("img")),z?G?G.p(e,t):(G=ot(e),G.c(),G.m(r,s)):G&&(G.d(1),G=null),(!F||1&t)&&H!==(H=e[0].type+"")&&U(a,H),(!F||1&t)&&B!==(B=e[0].id+"")&&U(d,B),(!F||1&t)&&V!==(V=e[0].title+"")&&U(p,V),(!F||1&t&&b!==(b=e[1]?e[0].view_url:null))&&T(c,"href",b),1&t&&(J=e[0].hasOwnProperty("is_public")&&e[0].is_public),J?W||(W=ct(),W.c(),W.m(o,y)):W&&(W.d(1),W=null),e[0].user?Z?Z.p(e,t):(Z=it(e),Z.c(),Z.m(w,k)):Z&&(Z.d(1),Z=null),e[0].updated_at?X?X.p(e,t):(X=at(e),X.c(),X.m(w,null)):X&&(X.d(1),X=null),e[2]&&Y.p(e,t),1&t&&(q=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length),q?K?K.p(e,t):(K=ut(e),K.c(),K.m(_,null)):K&&(K.d(1),K=null),ee&&ee.p&&(!F||32&t)&&h(ee,Q,e,e[5],F?g(Q,e[5],t,lt):$(e[5]),rt),"Treatment"===e[0].class||"DocumentSet"===e[0].class?te?te.p(e,t):(te=ft(e),te.c(),te.m(r,null)):te&&(te.d(1),te=null),le&&le.p&&(!F||32&t)&&h(le,ne,e,e[5],F?g(ne,e[5],t,tt):$(e[5]),nt)},i(e){F||($e(ee,e),$e(le,e),oe((()=>{F&&(D||(D=ye(t,Xe,{duration:500},!0)),D.run(1))})),F=!0)},o(e){be(ee,e),be(le,e),D||(D=ye(t,Xe,{duration:500},!1)),D.run(0),F=!1},d(e){e&&O(t),G&&G.d(),W&&W.d(),Z&&Z.d(),X&&X.d(),Y&&Y.d(),K&&K.d(),ee&&ee.d(e),te&&te.d(),le&&le.d(e),e&&D&&D.end()}}}function ht(e,t,n){let{$$slots:l={},$$scope:r}=t,{recordsStore:s}=t,{item:o}=t;const c=o.hasOwnProperty("view_url")&&""!==o.view_url,i=o.hasOwnProperty("edit_url")&&""!==o.edit_url;return e.$$set=e=>{"recordsStore"in e&&n(4,s=e.recordsStore),"item"in e&&n(0,o=e.item),"$$scope"in e&&n(5,r=e.$$scope)},[o,c,i,async function(){if(!await Qe("en"===Le?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement ?","en"===Le?"Confirm deletion":"Confirmer la suppression",!0))return;await async function(e,t){return et(`/${Ne}/${t.toLowerCase()}/${e}/delete`)}(o.id,o.class)?s.remove(o.id):await Qe("en"===Le?"Failed to delete record":"Erreur lors de la suppression de l'enregistrement","en"===Le?"Error":"Erreur")},s,r,l]}class $t extends Oe{constructor(e){super(),Ee(this,e,ht,gt,c,{recordsStore:4,item:0})}}function bt(e,t,n){const l=e.slice();return l[2]=t[n][0],l[3]=t[n][1],l}function vt(e){let t,n,l;return n=new Ze({props:{item:e[0]}}),{c(){t=N("div"),ke(n.$$.fragment),T(t,"slot","buttons")},m(e,r){E(e,t,r),Se(n,t,null),l=!0},p(e,t){const l={};1&t&&(l.item=e[0]),n.$set(l)},i(e){l||($e(n.$$.fragment,e),l=!0)},o(e){be(n.$$.fragment,e),l=!1},d(e){e&&O(t),xe(n)}}}function yt(e){let t,n,l,r,s,o,c,i=e[2]+"",a=e[3]+"";return{c(){t=N("div"),n=N("div"),l=R(i),r=C(),s=N("div"),c=C(),T(n,"class","column is-4 is-bold"),T(s,"class",o="column is-8 "+("-"===e[3]?"faded":"")),T(t,"class","datum is-middle columns svelte-ln5qdg")},m(e,o){E(e,t,o),S(t,n),S(n,l),S(t,r),S(t,s),s.innerHTML=a,S(t,c)},p(e,t){1&t&&i!==(i=e[2]+"")&&U(l,i),1&t&&a!==(a=e[3]+"")&&(s.innerHTML=a),1&t&&o!==(o="column is-8 "+("-"===e[3]?"faded":""))&&T(s,"class",o)},d(e){e&&O(t)}}}function wt(e){let t,n=Object.entries(e[0].metadata),l=[];for(let t=0;t<n.length;t+=1)l[t]=yt(bt(e,n,t));return{c(){t=N("div");for(let e=0;e<l.length;e+=1)l[e].c();T(t,"slot","body"),T(t,"class","grid metadata pt-2 svelte-ln5qdg")},m(e,n){E(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,r){if(1&r){let s;for(n=Object.entries(e[0].metadata),s=0;s<n.length;s+=1){const o=bt(e,n,s);l[s]?l[s].p(o,r):(l[s]=yt(o),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){e&&O(t),L(l,e)}}}function kt(e){let t,n;return t=new $t({props:{item:e[0],recordsStore:e[1],$$slots:{body:[wt],buttons:[vt]},$$scope:{ctx:e}}}),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),2&n&&(l.recordsStore=e[1]),65&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function St(e,t,n){let{item:l}=t,{recordsStore:r}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item),"recordsStore"in e&&n(1,r=e.recordsStore)},[l,r]}class xt extends Oe{constructor(e){super(),Ee(this,e,St,kt,c,{item:0,recordsStore:1})}}function _t(t){let n,l,r,s,o,c,i,a,u,d="en"===Le?"Selection":"Sélection";return{c(){n=N("div"),l=N("button"),r=N("span"),s=N("i"),o=C(),c=R(d),i=R("\n            ("),a=R(t[0]),u=R(")"),T(s,"class","fa-solid fa-book-bookmark"),T(r,"id","btn-content"),T(l,"id","set-btn"),T(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),T(l,"data-target","selection-modal"),T(n,"class","set-container svelte-hs48f9")},m(e,t){E(e,n,t),S(n,l),S(l,r),S(r,s),S(r,o),S(r,c),S(r,i),S(r,a),S(r,u)},p(e,[t]){1&t&&U(a,e[0])},i:e,o:e,d(e){e&&O(n)}}}function Et(e,t,n){let{selectionLength:l=0}=t,r=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==r){const e=l>r;n(1,r=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,r]}class Ot extends Oe{constructor(e){super(),Ee(this,e,Et,_t,c,{selectionLength:0})}}function Lt(t){let n,l,r,s,o,c,i,a="en"===Le?"Save selection":"Sauvegarder la sélection";return{c(){n=N("button"),l=N("span"),r=N("i"),s=C(),o=R(a),T(r,"class","fa-solid fa-floppy-disk"),T(n,"class","button is-link")},m(e,a){E(e,n,a),S(n,l),S(l,r),S(l,s),S(l,o),c||(i=j(n,"click",t[6]),c=!0)},p:e,d(e){e&&O(n),c=!1,i()}}}function Nt(e){let t,n,l,r,s,o,c="en"===Le?"Go to treatment":"Accéder au traitement";return{c(){t=N("a"),n=N("span"),l=N("i"),r=C(),s=R(c),T(l,"class","fa-solid fa-gear"),T(t,"class","button is-link"),T(t,"href",o="/"+Ne+"/treatment/add/?document_set="+e[2](e[0]).id)},m(e,o){E(e,t,o),S(t,n),S(n,l),S(n,r),S(n,s)},p(e,n){5&n&&o!==(o="/"+Ne+"/treatment/add/?document_set="+e[2](e[0]).id)&&T(t,"href",o)},d(e){e&&O(t)}}}function Pt(t){let n,l,r,s,o,c,i,a,u,d,m,f,p,g,h,$,b,v,y,w,k="en"===Le?"JSON API":"API JSON",x="en"===Le?"Export as ZIP":"Exporter en ZIP";function _(e,t){return e[1]?Nt:Lt}let L=_(t),P=L(t);return{c(){n=N("footer"),l=N("div"),r=N("button"),r.textContent=""+("en"===Le?"Clear selection":"Vider la sélection"),s=C(),P.c(),o=C(),c=N("a"),i=N("span"),a=N("i"),u=C(),d=R(k),f=C(),p=N("a"),g=N("span"),h=N("i"),$=C(),b=R(x),T(r,"class","button button-close is-link is-light"),T(a,"class","fa-solid fa-file-export"),T(c,"class","button is-link"),T(c,"href",m="/"+Ne+"/document-set/"+t[2](t[0]).id+"/json"),T(c,"target","_blank"),T(h,"class","fa-solid fa-file-zipper"),T(p,"class","button is-link"),T(p,"href",v="/"+Ne+"/document-set/"+t[2](t[0]).id+"/zip"),T(p,"target","_blank"),T(l,"class","buttons"),T(n,"class","modal-card-foot is-center")},m(e,m){E(e,n,m),S(n,l),S(l,r),S(l,s),P.m(l,null),S(l,o),S(l,c),S(c,i),S(i,a),S(i,u),S(i,d),S(l,f),S(l,p),S(p,g),S(g,h),S(g,$),S(g,b),y||(w=j(r,"click",t[5]),y=!0)},p(e,[t]){L===(L=_(e))&&P?P.p(e,t):(P.d(1),P=L(e),P&&(P.c(),P.m(l,o))),5&t&&m!==(m="/"+Ne+"/document-set/"+e[2](e[0]).id+"/json")&&T(c,"href",m),5&t&&v!==(v="/"+Ne+"/document-set/"+e[2](e[0]).id+"/zip")&&T(p,"href",v)},i:e,o:e,d(e){e&&O(n),P.d(),y=!1,w()}}}function Rt(e,t,n){let l,r;const{isSaved:s,selection:o}=He;m(e,s,(e=>n(1,l=e))),m(e,o,(e=>n(2,r=e)));let{isRegion:c=!0}=t;return e.$$set=e=>{"isRegion"in e&&n(0,c=e.isRegion)},[c,l,r,s,o,()=>He.empty(c),()=>He.save(c)]}class Ct extends Oe{constructor(e){super(),Ee(this,e,Rt,Pt,c,{isRegion:0})}}function At(e){let t,n,l,r,o,c,i=e[5](e[0])+"";return{c(){t=N("span"),n=R(i),l=C(),r=N("span"),r.innerHTML='<i class="fas fa-edit"></i>',T(r,"class","pl-3 smaller has-text-link")},m(s,i){E(s,t,i),S(t,n),S(t,l),S(t,r),o||(c=[j(t,"click",e[7]),j(t,"keyup",null)],o=!0)},p(e,t){33&t&&i!==(i=e[5](e[0])+"")&&U(n,i)},d(e){e&&O(t),o=!1,s(c)}}}function jt(e){let t,n,l;return{c(){t=N("input"),T(t,"class","input selection-title svelte-sgypdx")},m(r,s){E(r,t,s),e[12](t),z(t,e[4]),n||(l=[j(t,"input",e[13]),j(t,"keydown",e[8]),j(t,"blur",e[9])],n=!0)},p(e,n){16&n&&t.value!==e[4]&&z(t,e[4])},d(r){r&&O(t),e[12](null),n=!1,s(l)}}}function It(e){let t,n,l,r,s,o,c,i,a,u,d,m,p,b,v,y,w,k;function x(e,t){return e[2]?jt:At}let _=x(e),L=_(e);const P=e[11].default,A=f(P,e,e[10],null);return w=new Ct({props:{isRegion:e[0]}}),{c(){t=N("div"),n=N("div"),l=C(),r=N("div"),s=N("div"),o=N("div"),c=N("i"),i=C(),L.c(),a=R("\n                ("),u=R(e[1]),d=R(")"),m=C(),p=N("button"),b=C(),v=N("section"),A&&A.c(),y=C(),ke(w.$$.fragment),T(n,"class","modal-background"),T(c,"class","fa-solid fa-book-bookmark"),T(o,"class","title is-4 mb-0 media-content"),T(p,"class","delete media-left"),T(p,"aria-label","close"),T(s,"class","modal-card-head media mb-0 is-middle"),T(v,"class","modal-card-body"),T(r,"class","modal-content"),T(t,"id","selection-modal"),T(t,"class","modal fade"),T(t,"tabindex","-1"),T(t,"aria-labelledby","selection-modal-label"),T(t,"aria-hidden","true")},m(e,f){E(e,t,f),S(t,n),S(t,l),S(t,r),S(r,s),S(s,o),S(o,c),S(o,i),L.m(o,null),S(o,a),S(o,u),S(o,d),S(s,m),S(s,p),S(r,b),S(r,v),A&&A.m(v,null),S(r,y),Se(w,r,null),k=!0},p(e,[t]){_===(_=x(e))&&L?L.p(e,t):(L.d(1),L=_(e),L&&(L.c(),L.m(o,a))),(!k||2&t)&&U(u,e[1]),A&&A.p&&(!k||1024&t)&&h(A,P,e,e[10],k?g(P,e[10],t,null):$(e[10]),null);const n={};1&t&&(n.isRegion=e[0]),w.$set(n)},i(e){k||($e(A,e),$e(w.$$.fragment,e),k=!0)},o(e){be(A,e),be(w.$$.fragment,e),k=!1},d(e){e&&O(t),L.d(),A&&A.d(e),xe(w)}}}function Tt(e,t,n){let l,{$$slots:r={},$$scope:s}=t;const{selectionTitle:o,updateTitle:c,save:i}=He;m(e,o,(e=>n(5,l=e)));let a,u,{isRegion:d=!1}=t,{selectionLength:f=!1}=t,p=!1;function g(){n(2,p=!1),c(u,d),i(d)}return e.$$set=e=>{"isRegion"in e&&n(0,d=e.isRegion),"selectionLength"in e&&n(1,f=e.selectionLength),"$$scope"in e&&n(10,s=e.$$scope)},[d,f,p,a,u,l,o,function(){n(2,p=!0),n(4,u=l(d)),setTimeout((()=>a&&a.focus()),0)},function(e){"Enter"===e.key&&g()},g,s,r,function(e){te[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(){u=this.value,n(4,u)}]}class Mt extends Oe{constructor(e){super(),Ee(this,e,Tt,It,c,{isRegion:0,selectionLength:1})}}function Dt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function Ft(e){let t,n=e[4],l=[];for(let t=0;t<n.length;t+=1)l[t]=Ut(Dt(e,n,t));return{c(){t=N("ul");for(let e=0;e<l.length;e+=1)l[e].c();T(t,"class","autocomplete-list is-wide svelte-109rw7p")},m(e,n){E(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,r){if(592&r){let s;for(n=e[4],s=0;s<n.length;s+=1){const o=Dt(e,n,s);l[s]?l[s].p(o,r):(l[s]=Ut(o),l[s].c(),l[s].m(t,null))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){e&&O(t),L(l,e)}}}function Ut(e){let t,n,l,r,o,c=e[15].label+"";function i(){return e[13](e[15])}return{c(){t=N("li"),n=R(c),l=C(),T(t,"class","svelte-109rw7p"),V(t,"selected",e[17]===e[6])},m(e,s){E(e,t,s),S(t,n),S(t,l),r||(o=[j(t,"click",i),j(t,"keyup",null)],r=!0)},p(l,r){e=l,16&r&&c!==(c=e[15].label+"")&&U(n,c),64&r&&V(t,"selected",e[17]===e[6])},d(e){e&&O(t),r=!1,s(o)}}}function zt(t){let n,l,r,o,c,i=t[5]&&Ft(t);return{c(){n=N("div"),l=N("input"),r=C(),i&&i.c(),T(l,"class","input is-small is-wide svelte-109rw7p"),T(l,"name",t[1]),T(l,"id",t[2]),T(l,"placeholder",t[0]),T(l,"autocomplete","off"),T(n,"class","autocomplete svelte-109rw7p")},m(e,s){E(e,n,s),S(n,l),z(l,t[3]),S(n,r),i&&i.m(n,null),o||(c=[j(l,"input",t[12]),j(l,"input",t[7]),j(l,"keydown",t[8])],o=!0)},p(e,[t]){2&t&&T(l,"name",e[1]),4&t&&T(l,"id",e[2]),1&t&&T(l,"placeholder",e[0]),8&t&&l.value!==e[3]&&z(l,e[3]),e[5]?i?i.p(e,t):(i=Ft(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&O(n),i&&i.d(),o=!1,s(c)}}}function Ht(e,t,n){let{items:l=[]}=t,{placeholder:r=("en"===Le?"Select":"Sélectionner")+" ..."}=t,{name:s=""}=t,{id:o=""}=t,c="",i=[],a=!1,u=-1,d=null;const m=function(){const e=K();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const s=J(t,n,{cancelable:l});return r.slice().forEach((t=>{t.call(e,s)})),!s.defaultPrevented}return!0}}();function f(e){n(3,c=e.label),n(11,d=e),n(5,a=!1),m("select",e)}return e.$$set=e=>{"items"in e&&n(10,l=e.items),"placeholder"in e&&n(0,r=e.placeholder),"name"in e&&n(1,s=e.name),"id"in e&&n(2,o=e.id)},e.$$.update=()=>{3080&e.$$.dirty&&(c.length>0?(n(4,i=l.filter((e=>e.label.toLowerCase().includes(c.toLowerCase())))),n(5,a=!0)):(n(4,i=[]),n(5,a=!1),d&&(n(11,d=null),m("select",{id:null,label:""}))))},[r,s,o,c,i,a,u,function(){n(6,u=-1)},function(e){"ArrowDown"===e.key?(e.preventDefault(),n(6,u=(u+1)%i.length)):"ArrowUp"===e.key?(e.preventDefault(),n(6,u=u<=0?i.length-1:u-1)):"Enter"===e.key&&-1!==u&&(e.preventDefault(),f(i[u]))},f,l,d,function(){c=this.value,n(3,c)},e=>f(e)]}class Bt extends Oe{constructor(e){super(),Ee(this,e,Ht,zt,c,{items:10,placeholder:0,name:1,id:2})}}function Vt(e,t,n){const l=e.slice();return l[16]=t[n],l[17]=t,l[18]=n,l}function Jt(e,t,n){const l=e.slice();return l[19]=t[n],l}function qt(e,t,n){const l=e.slice();return l[16]=t[n],l[22]=t,l[23]=n,l}function Gt(e){let t,n,l,r,s,o,c,i,a,u,d,m,f,p="en"===Le?"Search":"Rechercher",g=e[0],h=[];for(let t=0;t<g.length;t+=1)h[t]=Zt(qt(e,g,t));let $=e[0],b=[];for(let t=0;t<$.length;t+=1)b[t]=on(Vt(e,$,t));const v=e=>be(b[e],1,1,(()=>{b[e]=null}));return{c(){t=N("form"),n=N("article");for(let e=0;e<h.length;e+=1)h[e].c();l=C(),r=N("div");for(let e=0;e<b.length;e+=1)b[e].c();s=C(),o=N("div"),c=N("button"),i=N("i"),a=C(),u=R(p),T(r,"class","grid"),T(n,"class","message fixed-grid"),T(i,"class","fa-solid fa-magnifying-glass"),T(c,"type","submit"),T(c,"class","button is-link is-outlined is-fullwidth"),T(o,"class","panel-block columns"),T(t,"class","is-center pb-3")},m(p,g){E(p,t,g),S(t,n);for(let e=0;e<h.length;e+=1)h[e]&&h[e].m(n,null);S(n,l),S(n,r);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(r,null);S(t,s),S(t,o),S(o,c),S(c,i),S(c,a),S(c,u),d=!0,m||(f=j(t,"submit",e[3]),m=!0)},p(e,t){if(3&t){let r;for(g=e[0],r=0;r<g.length;r+=1){const s=qt(e,g,r);h[r]?h[r].p(s,t):(h[r]=Zt(s),h[r].c(),h[r].m(n,l))}for(;r<h.length;r+=1)h[r].d(1);h.length=g.length}if(51&t){let n;for($=e[0],n=0;n<$.length;n+=1){const l=Vt(e,$,n);b[n]?(b[n].p(l,t),$e(b[n],1)):(b[n]=on(l),b[n].c(),$e(b[n],1),b[n].m(r,null))}for(ge(),n=$.length;n<b.length;n+=1)v(n);he()}},i(e){if(!d){for(let e=0;e<$.length;e+=1)$e(b[e]);d=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)be(b[e]);d=!1},d(e){e&&O(t),L(h,e),L(b,e),m=!1,f()}}}function Wt(e){let t,n,l,r,s,o,c,i,a,u,d,m,f=e[16].label+"";function p(){e[7].call(c,e[16])}return{c(){t=N("div"),n=N("label"),l=R(f),s=C(),o=N("div"),c=N("input"),u=C(),T(n,"for",r=e[16].name),T(n,"class","label column is-small is-2 svelte-wwfwxh"),T(c,"type","text"),T(c,"class","input is-small is-wide"),T(c,"id",i=e[16].name),T(c,"name",a=e[16].name),T(o,"class","control has-icons-right column is-10"),T(t,"class","search-field field columns pb-3 svelte-wwfwxh")},m(r,i){E(r,t,i),S(t,n),S(n,l),S(t,s),S(t,o),S(o,c),z(c,e[1][e[16].name]),S(t,u),d||(m=j(c,"input",p),d=!0)},p(t,s){e=t,1&s&&f!==(f=e[16].label+"")&&U(l,f),1&s&&r!==(r=e[16].name)&&T(n,"for",r),1&s&&i!==(i=e[16].name)&&T(c,"id",i),1&s&&a!==(a=e[16].name)&&T(c,"name",a),3&s&&c.value!==e[1][e[16].name]&&z(c,e[1][e[16].name])},d(e){e&&O(t),d=!1,m()}}}function Zt(e){let t,n="search"===e[16].name&&Wt(e);return{c(){n&&n.c(),t=A()},m(e,l){n&&n.m(e,l),E(e,t,l)},p(e,l){"search"===e[16].name?n?n.p(e,l):(n=Wt(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&O(t)}}}function Xt(e){let t,n,l,r,s,o,c,i,a,u,d,m,f=e[16].label+"";const p=[tn,en,Qt,Kt,Yt],g=[];function h(e,t){return 1&t&&(c=null),1&t&&(i=null),null==c&&(c=!!e[16].type.includes("ChoiceField")),c?0:"BooleanField"===e[16].type?1:(null==i&&(i=!!e[16].type.includes("Date")),i?2:"IntegerField"===e[16].type||"FloatField"===e[16].type?3:4)}return a=h(e,-1),u=g[a]=p[a](e),{c(){t=N("div"),n=N("label"),l=R(f),s=C(),o=N("div"),u.c(),d=C(),T(n,"for",r=e[16].name),T(n,"class","label column is-small is-3 svelte-wwfwxh"),T(o,"class","control has-icons-right column is-9"),T(t,"class","search-field field columns is-middle svelte-wwfwxh")},m(e,r){E(e,t,r),S(t,n),S(n,l),S(t,s),S(t,o),g[a].m(o,null),S(t,d),m=!0},p(e,t){(!m||1&t)&&f!==(f=e[16].label+"")&&U(l,f),(!m||1&t&&r!==(r=e[16].name))&&T(n,"for",r);let s=a;a=h(e,t),a===s?g[a].p(e,t):(ge(),be(g[s],1,1,(()=>{g[s]=null})),he(),u=g[a],u?u.p(e,t):(u=g[a]=p[a](e),u.c()),$e(u,1),u.m(o,null))},i(e){m||($e(u),m=!0)},o(e){be(u),m=!1},d(e){e&&O(t),g[a].d()}}}function Yt(t){let n,l,r,s,o;function c(){t[13].call(n,t[16])}return{c(){n=N("input"),T(n,"type","text"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",r=t[16].name)},m(e,l){E(e,n,l),z(n,t[1][t[16].name]),s||(o=j(n,"input",c),s=!0)},p(e,s){t=e,1&s&&l!==(l=t[16].name)&&T(n,"id",l),1&s&&r!==(r=t[16].name)&&T(n,"name",r),3&s&&n.value!==t[1][t[16].name]&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),s=!1,o()}}}function Kt(t){let n,l,r,s,o;function c(){t[12].call(n,t[16])}return{c(){n=N("input"),T(n,"type","number"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",r=t[16].name)},m(e,l){E(e,n,l),z(n,t[1][t[16].name]),s||(o=j(n,"input",c),s=!0)},p(e,s){t=e,1&s&&l!==(l=t[16].name)&&T(n,"id",l),1&s&&r!==(r=t[16].name)&&T(n,"name",r),3&s&&F(n.value)!==t[1][t[16].name]&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),s=!1,o()}}}function Qt(t){let n,l,r,s,o;function c(){t[11].call(n,t[16])}return{c(){n=N("input"),T(n,"type","date"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",r=t[16].name)},m(e,l){E(e,n,l),z(n,t[1][t[16].name]),s||(o=j(n,"input",c),s=!0)},p(e,s){t=e,1&s&&l!==(l=t[16].name)&&T(n,"id",l),1&s&&r!==(r=t[16].name)&&T(n,"name",r),3&s&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),s=!1,o()}}}function en(t){let n,l,r,s,o;function c(){t[10].call(n,t[16])}return{c(){n=N("input"),T(n,"type","checkbox"),T(n,"id",l=t[16].name),T(n,"name",r=t[16].name)},m(e,l){E(e,n,l),n.checked=t[1][t[16].name],s||(o=j(n,"change",c),s=!0)},p(e,s){t=e,1&s&&l!==(l=t[16].name)&&T(n,"id",l),1&s&&r!==(r=t[16].name)&&T(n,"name",r),3&s&&(n.checked=t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),s=!1,o()}}}function tn(e){let t,n,l,r,s;const o=[ln,nn],c=[];function i(e,n){var l;return 1&n&&(t=null),null==t&&(l=e[16],t=!!(l.type.includes("ChoiceField")&&l.choices.length>5)),t?0:1}return n=i(e,-1),l=c[n]=o[n](e),{c(){l.c(),r=A()},m(e,t){c[n].m(e,t),E(e,r,t),s=!0},p(e,t){let s=n;n=i(e,t),n===s?c[n].p(e,t):(ge(),be(c[s],1,1,(()=>{c[s]=null})),he(),l=c[n],l?l.p(e,t):(l=c[n]=o[n](e),l.c()),$e(l,1),l.m(r.parentNode,r))},i(e){s||($e(l),s=!0)},o(e){be(l),s=!1},d(e){c[n].d(e),e&&O(r)}}}function nn(t){let l,r,s,o,c,i,a,u,d=!t[5](t[16]),m=d&&rn(),f=t[16].choices,p=[];for(let e=0;e<f.length;e+=1)p[e]=sn(Jt(t,f,e));let g=[{id:o=t[16].name},{name:c=t[16].name},{class:"is-wide"},t[5](t[16])?{size:3,multiple:!0}:{}],h={};for(let e=0;e<g.length;e+=1)h=n(h,g[e]);function $(){t[9].call(r,t[16])}return{c(){l=N("div"),r=N("select"),m&&m.c(),s=A();for(let e=0;e<p.length;e+=1)p[e].c();D(r,h),void 0===t[1][t[16].name]&&oe($),V(r,"svelte-wwfwxh",!0),T(l,"class",i="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))},m(e,n){E(e,l,n),S(l,r),m&&m.m(r,null),S(r,s);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(r,null);"value"in h&&(h.multiple?B:H)(r,h.value),r.autofocus&&r.focus(),H(r,t[1][t[16].name],!0),a||(u=j(r,"change",$),a=!0)},p(e,n){if(t=e,1&n&&(d=!t[5](t[16])),d?m?m.p(t,n):(m=rn(),m.c(),m.m(r,s)):m&&(m.d(1),m=null),1&n){let e;for(f=t[16].choices,e=0;e<f.length;e+=1){const l=Jt(t,f,e);p[e]?p[e].p(l,n):(p[e]=sn(l),p[e].c(),p[e].m(r,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=f.length}D(r,h=function(e,t){const n={},l={},r={$$scope:1};let s=e.length;for(;s--;){const o=e[s],c=t[s];if(c){for(const e in o)e in c||(l[e]=1);for(const e in c)r[e]||(n[e]=c[e],r[e]=1);e[s]=c}else for(const e in o)r[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(g,[1&n&&o!==(o=t[16].name)&&{id:o},1&n&&c!==(c=t[16].name)&&{name:c},{class:"is-wide"},1&n&&(t[5](t[16])?{size:3,multiple:!0}:{})])),33&n&&"value"in h&&(h.multiple?B:H)(r,h.value),3&n&&H(r,t[1][t[16].name]),V(r,"svelte-wwfwxh",!0),1&n&&i!==(i="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))&&T(l,"class",i)},i:e,o:e,d(e){e&&O(l),m&&m.d(),L(p,e),a=!1,u()}}}function ln(e){let t,n;return t=new Bt({props:{items:e[16].choices,name:e[16].name,id:e[16].name}}),t.$on("select",(function(...t){return e[8](e[16],...t)})),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(n,l){e=n;const r={};1&l&&(r.items=e[16].choices),1&l&&(r.name=e[16].name),1&l&&(r.id=e[16].name),t.$set(r)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function rn(t){let n;return{c(){n=N("option"),n.textContent=("en"===Le?"Select":"Sélectionner")+" ...\n                                                    ",n.__value="",n.value=n.__value,n.disabled=!0,n.selected=!0,T(n,"class","faded")},m(e,t){E(e,n,t)},p:e,d(e){e&&O(n)}}}function sn(e){let t,n,l,r=e[19].label+"";return{c(){t=N("option"),n=R(r),t.__value=l=e[19].id,t.value=t.__value},m(e,l){E(e,t,l),S(t,n)},p(e,s){1&s&&r!==(r=e[19].label+"")&&U(n,r),1&s&&l!==(l=e[19].id)&&(t.__value=l,t.value=t.__value)},d(e){e&&O(t)}}}function on(e){let t,n,l="search"!==e[16].name&&Xt(e);return{c(){l&&l.c(),t=A()},m(e,r){l&&l.m(e,r),E(e,t,r),n=!0},p(e,n){"search"!==e[16].name?l?(l.p(e,n),1&n&&$e(l,1)):(l=Xt(e),l.c(),$e(l,1),l.m(t.parentNode,t)):l&&(ge(),be(l,1,1,(()=>{l=null})),he())},i(e){n||($e(l),n=!0)},o(e){be(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function cn(e){let t,n,l=e[0].length>0&&Gt(e);return{c(){l&&l.c(),t=A()},m(e,r){l&&l.m(e,r),E(e,t,r),n=!0},p(e,[n]){e[0].length>0?l?(l.p(e,n),1&n&&$e(l,1)):(l=Gt(e),l.c(),$e(l,1),l.m(t.parentNode,t)):l&&(ge(),be(l,1,1,(()=>{l=null})),he())},i(e){n||($e(l),n=!0)},o(e){be(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function an(e,t,n){let l,{recordsStore:r}=t;const{recordSearch:s,searchParams:o}=r;m(e,o,(e=>n(14,l=e)));let{searchFields:c=[]}=t,i={};var a;function u(e,t){n(1,i[e.name]=t.detail.id,i)}a=()=>{const e=l??new URLSearchParams(window.location.search);c.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},K().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(6,r=e.recordsStore),"searchFields"in e&&n(0,c=e.searchFields)},[c,i,o,function(e){e.preventDefault(),s(i)},u,e=>e.type.includes("Multiple"),r,function(e){i[e.name]=this.value,n(1,i),n(0,c)},(e,t)=>u(e,t),function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,c)},function(e){i[e.name]=this.checked,n(1,i),n(0,c)},function(e){i[e.name]=this.value,n(1,i),n(0,c)},function(e){i[e.name]=F(this.value),n(1,i),n(0,c)},function(e){i[e.name]=this.value,n(1,i),n(0,c)}]}class un extends Oe{constructor(e){super(),Ee(this,e,an,cn,c,{recordsStore:6,searchFields:0})}}function dn(e){let t,n,l,r,s,o,c,i,a,u=e[5]>1&&mn(e),d=e[5]<e[3]&&gn(e);return{c(){t=N("nav"),n=N("ul"),u&&u.c(),l=C(),r=N("li"),s=N("a"),o=R(e[5]),c=C(),d&&d.c(),T(s,"class","pagination-link is-current"),T(s,"href",null),T(n,"class","pagination-list ml-0"),T(t,"class","pagination is-centered mb-2"),T(t,"aria-label","pagination")},m(m,f){E(m,t,f),S(t,n),u&&u.m(n,null),S(n,l),S(n,r),S(r,s),S(s,o),S(n,c),d&&d.m(n,null),i||(a=j(s,"click",I(e[9])),i=!0)},p(e,t){e[5]>1?u?u.p(e,t):(u=mn(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),32&t&&U(o,e[5]),e[5]<e[3]?d?d.p(e,t):(d=gn(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&O(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function mn(e){let t,n,l,r,s,o,c=e[5]-1>1&&fn(e);return{c(){t=N("li"),n=N("a"),n.textContent="1",l=C(),c&&c.c(),r=A(),T(n,"class","pagination-link"),T(n,"href",null)},m(i,a){E(i,t,a),S(t,n),E(i,l,a),c&&c.m(i,a),E(i,r,a),s||(o=j(n,"click",I(e[7])),s=!0)},p(e,t){e[5]-1>1?c?c.p(e,t):(c=fn(e),c.c(),c.m(r.parentNode,r)):c&&(c.d(1),c=null)},d(e){e&&O(t),e&&O(l),c&&c.d(e),e&&O(r),s=!1,o()}}}function fn(e){let t,n,l,r,s,o,c=e[5]-1+"",i=e[5]-1>2&&pn();return{c(){i&&i.c(),t=C(),n=N("li"),l=N("a"),r=R(c),T(l,"class","pagination-link"),T(l,"href",null)},m(c,a){i&&i.m(c,a),E(c,t,a),E(c,n,a),S(n,l),S(l,r),s||(o=j(l,"click",I(e[8])),s=!0)},p(e,n){e[5]-1>2?i||(i=pn(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),32&n&&c!==(c=e[5]-1+"")&&U(r,c)},d(e){i&&i.d(e),e&&O(t),e&&O(n),s=!1,o()}}}function pn(e){let t;return{c(){t=N("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function gn(e){let t,n,l,r,s,o,c=e[5]+1<e[3]&&hn(e);return{c(){c&&c.c(),t=C(),n=N("li"),l=N("a"),r=R(e[3]),T(l,"class","pagination-link"),T(l,"href",null)},m(i,a){c&&c.m(i,a),E(i,t,a),E(i,n,a),S(n,l),S(l,r),s||(o=j(l,"click",I(e[11])),s=!0)},p(e,n){e[5]+1<e[3]?c?c.p(e,n):(c=hn(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),8&n&&U(r,e[3])},d(e){c&&c.d(e),e&&O(t),e&&O(n),s=!1,o()}}}function hn(e){let t,n,l,r,s,o,c,i=e[5]+1+"",a=e[5]+2<e[3]&&$n();return{c(){t=N("li"),n=N("a"),l=R(i),r=C(),a&&a.c(),s=A(),T(n,"class","pagination-link"),T(n,"href",null)},m(i,u){E(i,t,u),S(t,n),S(n,l),E(i,r,u),a&&a.m(i,u),E(i,s,u),o||(c=j(n,"click",I(e[10])),o=!0)},p(e,t){32&t&&i!==(i=e[5]+1+"")&&U(l,i),e[5]+2<e[3]?a||(a=$n(),a.c(),a.m(s.parentNode,s)):a&&(a.d(1),a=null)},d(e){e&&O(t),e&&O(r),a&&a.d(e),e&&O(s),o=!1,c()}}}function $n(e){let t;return{c(){t=N("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function bn(t){let n,l,r,s,o,c,i,a,u=t[5]*t[2]-t[2]+1+"",d=Math.min(t[5]*t[2],t[1])+"",m=t[4]&&dn(t);return{c(){m&&m.c(),n=C(),l=N("div"),r=R(u),s=R(" - "),o=R(d),c=R(" / "),i=R(t[1]),T(l,"class",a="is-size-7 is-center mb-4 "+(t[4]?"":"mt-4"))},m(e,t){m&&m.m(e,t),E(e,n,t),E(e,l,t),S(l,r),S(l,s),S(l,o),S(l,c),S(l,i)},p(e,[t]){e[4]?m?m.p(e,t):(m=dn(e),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null),36&t&&u!==(u=e[5]*e[2]-e[2]+1+"")&&U(r,u),38&t&&d!==(d=Math.min(e[5]*e[2],e[1])+"")&&U(o,d),2&t&&U(i,e[1]),16&t&&a!==(a="is-size-7 is-center mb-4 "+(e[4]?"":"mt-4"))&&T(l,"class",a)},i:e,o:e,d(e){m&&m.d(e),e&&O(n),e&&O(l)}}}function vn(e,t,n){let l,r,s,{store:o}=t;const{currentPage:c}=o;m(e,c,(e=>n(5,s=e)));let{nbOfItems:i}=t,{pageLength:a=Me}=t;return e.$$set=e=>{"store"in e&&n(0,o=e.store),"nbOfItems"in e&&n(1,i=e.nbOfItems),"pageLength"in e&&n(2,a=e.pageLength)},e.$$.update=()=>{6&e.$$.dirty&&n(3,l=a<Me?1:Math.ceil(i/a)),14&e.$$.dirty&&n(4,r=l>1||i>a)},[o,i,a,l,r,s,c,()=>o.handlePageUpdate(1),()=>o.handlePageUpdate(s-1),()=>o.handlePageUpdate(s),()=>o.handlePageUpdate(s+1),()=>o.handlePageUpdate(l)]}class yn extends Oe{constructor(e){super(),Ee(this,e,vn,bn,c,{store:0,nbOfItems:1,pageLength:2})}}function wn(t){let n,l,r,s,o,c,i,a,u,d,m,f,p,g,h;return{c(){n=N("button"),l=C(),r=N("div"),s=N("div"),o=C(),c=N("div"),i=N("div"),i.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=C(),u=N("section"),d=C(),m=N("footer"),f=N("div"),p=N("button"),p.textContent=""+("en"===Le?"Abort":"Retour"),g=C(),h=N("button"),h.textContent="OK",T(n,"id","hidden-msg-btn"),T(n,"class","js-modal-trigger"),T(n,"data-target","msg-modal"),n.hidden=!0,T(s,"id","modal-bkg"),T(s,"class","modal-background"),T(i,"class","modal-card-head media mb-0"),T(u,"id","modal-body"),T(u,"class","modal-card-body"),T(p,"id","cancel-btn"),T(p,"class","button is-link is-light button-close"),T(h,"id","ok-btn"),T(h,"class","button is-link button-close"),T(f,"class","buttons"),T(m,"id","modal-footer"),T(m,"class","modal-card-foot is-center pt-3"),m.hidden=!0,T(c,"class","modal-content"),T(r,"id","msg-modal"),T(r,"class","modal fade"),T(r,"tabindex","-1"),T(r,"aria-labelledby","selection-modal-label"),T(r,"aria-hidden","true")},m(e,t){E(e,n,t),E(e,l,t),E(e,r,t),S(r,s),S(r,o),S(r,c),S(c,i),S(c,a),S(c,u),S(c,d),S(c,m),S(m,f),S(f,p),S(f,g),S(f,h)},p:e,i:e,o:e,d(e){e&&O(n),e&&O(l),e&&O(r)}}}class kn extends Oe{constructor(e){super(),Ee(this,e,null,wn,c,{})}}function Sn(e){const t=e,n=Ue(1),l=Ue([]),r=Ue(0),s=Ue(new URLSearchParams(window.location.search));async function o(){const e=d(s);e.set("p",`${d(n)}`);try{const s=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),o=await s.json();l.set(o.results),r.set(o.count),n.set(o.current_page),e.set("p",String(d(n)));const c=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",c),o}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let c=o();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),c=o()}return{currentPage:n,pageRecords:l,resultPage:c,resultNumber:r,fetchPage:o,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);s.set(t),i(1)},remove:function(e){l.update((t=>t.filter((t=>t.id!==e))))}}}function xn(e,t,n){const l=e.slice();return l[8]=t[n][0],l[9]=t[n][1],l}function _n(e,t,n){const l=e.slice();return l[12]=t[n][0],l[13]=t[n][1],l}function En(e,t,n){const l=e.slice();return l[12]=t[n][0],l[13]=t[n][1],l}function On(e){let t,n,l=e[2]?"Retirer de la":"Charger dans la";return{c(){t=R(l),n=R(" sélection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){4&n&&l!==(l=e[2]?"Retirer de la":"Charger dans la")&&U(t,l)},d(e){e&&O(t),e&&O(n)}}}function Ln(e){let t,n,l=e[2]?"Unload from":"Load to";return{c(){t=R(l),n=R(" selection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){4&n&&l!==(l=e[2]?"Unload from":"Load to")&&U(t,l)},d(e){e&&O(t),e&&O(n)}}}function Nn(e){let t;return{c(){t=P("path"),T(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Pn(e){let t;return{c(){t=P("path"),T(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Rn(e){let t,n,l,r,o,c,i,a,u,d,m,f,p="en"===Le?"Export":"Exporter";let g=("en"===Le?Ln:On)(e);function h(e,t){return e[2]?Pn:Nn}let $=h(e),b=$(e);return{c(){t=N("div"),n=N("button"),g.c(),l=C(),r=P("svg"),b.c(),o=C(),c=N("button"),i=N("span"),a=N("i"),u=C(),d=R(p),T(r,"xmlns","http://www.w3.org/2000/svg"),T(r,"viewBox","0 0 384 512"),T(n,"class","button"),V(n,"is-inverted",e[2]),T(a,"class","fa-solid fa-file-export"),T(c,"class","button is-link"),V(c,"is-inverted",e[2]),T(t,"slot","buttons")},m(s,p){E(s,t,p),S(t,n),g.m(n,null),S(n,l),S(n,r),b.m(r,null),S(t,o),S(t,c),S(c,i),S(i,a),S(i,u),S(i,d),m||(f=[j(n,"click",e[6]),j(c,"click",e[7])],m=!0)},p(e,t){g.p(e,t),$!==($=h(e))&&(b.d(1),b=$(e),b&&(b.c(),b.m(r,null))),4&t&&V(n,"is-inverted",e[2]),4&t&&V(c,"is-inverted",e[2])},d(e){e&&O(t),g.d(),b.d(),m=!1,s(f)}}}function Cn(e){let t,n,l,r,s,o,c,i=e[13].task_type+"",a=e[12]+"";return{c(){t=N("a"),n=R(i),l=R(" #"),r=R(a),s=C(),T(t,"href",o=e[13].url),T(t,"class",c="tag is-rounded is-small "+Mn(e[13].status))},m(e,o){E(e,t,o),S(t,n),S(t,l),S(t,r),S(t,s)},p(e,l){1&l&&i!==(i=e[13].task_type+"")&&U(n,i),1&l&&a!==(a=e[12]+"")&&U(r,a),1&l&&o!==(o=e[13].url)&&T(t,"href",o),1&l&&c!==(c="tag is-rounded is-small "+Mn(e[13].status))&&T(t,"class",c)},d(e){e&&O(t)}}}function An(e){let t,n,l,r,s,o,c,i,a=e[8]+"",u=e[12]+"",d=e[13].title+"";return{c(){t=N("div"),n=N("span"),l=R(a),r=R(" #"),s=R(u),o=C(),c=R(d),i=C(),T(n,"class","tag is-rounded is-accent")},m(e,a){E(e,t,a),S(t,n),S(n,l),S(n,r),S(n,s),S(t,o),S(t,c),S(t,i)},p(e,t){1&t&&a!==(a=e[8]+"")&&U(l,a),1&t&&u!==(u=e[12]+"")&&U(s,u),1&t&&d!==(d=e[13].title+"")&&U(c,d)},d(e){e&&O(t)}}}function jn(e){let t,n=Object.entries(e[9]),l=[];for(let t=0;t<n.length;t+=1)l[t]=An(_n(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,r){if(1&r){let s;for(n=Object.entries(e[9]),s=0;s<n.length;s+=1){const o=_n(e,n,s);l[s]?l[s].p(o,r):(l[s]=An(o),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function In(e){let t,n,l,r,s=Object.entries(e[0].treatments),o=[];for(let t=0;t<s.length;t+=1)o[t]=Cn(En(e,s,t));let c=Object.entries(e[0].selection.selected),i=[];for(let t=0;t<c.length;t+=1)i[t]=jn(xn(e,c,t));return{c(){t=N("div"),n=N("div");for(let e=0;e<o.length;e+=1)o[e].c();l=C(),r=N("div");for(let e=0;e<i.length;e+=1)i[e].c();T(n,"class","tags container"),T(r,"class","grid"),T(t,"slot","body")},m(e,s){E(e,t,s),S(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null);S(t,l),S(t,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(r,null)},p(e,t){if(1&t){let l;for(s=Object.entries(e[0].treatments),l=0;l<s.length;l+=1){const r=En(e,s,l);o[l]?o[l].p(r,t):(o[l]=Cn(r),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=s.length}if(1&t){let n;for(c=Object.entries(e[0].selection.selected),n=0;n<c.length;n+=1){const l=xn(e,c,n);i[n]?i[n].p(l,t):(i[n]=jn(l),i[n].c(),i[n].m(r,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=c.length}},d(e){e&&O(t),L(o,e),L(i,e)}}}function Tn(e){let t,n,l,r;return t=new kn({}),l=new $t({props:{item:e[0],recordsStore:e[1],$$slots:{body:[In],buttons:[Rn]},$$scope:{ctx:e}}}),{c(){ke(t.$$.fragment),n=C(),ke(l.$$.fragment)},m(e,s){Se(t,e,s),E(e,n,s),Se(l,e,s),r=!0},p(e,[t]){const n={};1&t&&(n.item=e[0]),2&t&&(n.recordsStore=e[1]),262149&t&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){r||($e(t.$$.fragment,e),$e(l.$$.fragment,e),r=!0)},o(e){be(t.$$.fragment,e),be(l.$$.fragment,e),r=!1},d(e){xe(t,e),e&&O(n),xe(l,e)}}}function Mn(e){return e?"CANCELLED"===e?"is-info":"ERROR"===e?"is-danger":"IN PROGRESS"===e?"is-warning":"PENDING"===e||"STARTED"===e?"is-info":"SUCCESS"===e?"is-success":"is-dark":"is-dark"}function Dn(e,t,n){let l,r;const{isSetSelected:s}=He;m(e,s,(e=>n(5,r=e)));let{item:o}=t,{recordsStore:c}=t;async function i(e){let t="en"===Le?"You can export the contents of this set as a ZIP archive or reach our JSON API.":"Vous pouvez exporter le contenu de cet ensemble en archive ZIP ou interroger notre API JSON.",n=document.createElement("div");n.style="display: flex; gap: 1rem; align-items: center; justify-content: center; margin-top: 1em;";let l=document.createElement("a");l.classList.add("button","is-link"),l.innerHTML="<span>"+("en"===Le?"JSON API":"API JSON")+"</span>",l.href=`/${Ne}/document-set/${e.id}/json`,l.target="_blank";let r=document.createElement("a");r.classList.add("button","is-link"),r.innerHTML="<span>ZIP</span>",r.href=`/${Ne}/document-set/${e.id}/zip`,r.target="_blank",n.appendChild(l),n.appendChild(r),await Qe(t+"<br/>"+n.outerHTML,"Export",!1)}return e.$$set=e=>{"item"in e&&n(0,o=e.item),"recordsStore"in e&&n(1,c=e.recordsStore)},e.$$.update=()=>{33&e.$$.dirty&&n(2,l=r(o))},[o,c,l,s,i,r,()=>He.toggleSet(o),()=>i(o)]}let Fn=class extends Oe{constructor(e){super(),Ee(this,e,Dn,Tn,c,{item:0,recordsStore:1})}};function Un(e,t,n){const l=e.slice();return l[5]=t[n][0],l[6]=t[n][1],l}function zn(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function Hn(e){let t,n,l,r,s;return{c(){t=N("a"),n=N("i"),l=C(),r=N("span"),r.textContent=""+("en"===Le?"Relaunch same treatment":"Relancer le même traitement"),T(n,"class","fa-solid fa-arrow-rotate-left"),T(t,"href",s="add/"+e[0].query_parameters),T(t,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),T(t,"title","en"===Le?"Relaunch same treatment":"Relancer le même traitement")},m(e,s){E(e,t,s),S(t,n),S(t,l),S(t,r)},p(e,n){1&n&&s!==(s="add/"+e[0].query_parameters)&&T(t,"href",s)},d(e){e&&O(t)}}}function Bn(t){let n,l,r,s,o,c;return{c(){n=N("button"),l=N("i"),r=C(),s=N("span"),s.textContent=""+("en"===Le?"Cancel treatment":"Annuler le traitement"),T(l,"class","fa-solid fa-ban"),T(n,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),T(n,"title","en"===Le?"Cancel treatment":"Annuler le traitement")},m(e,i){E(e,n,i),S(n,l),S(n,r),S(n,s),o||(c=j(n,"click",t[4]),o=!0)},p:e,d(e){e&&O(n),o=!1,c()}}}function Vn(e){let t,n;return{c(){t=N("span"),n=R(e[2]),T(t,"class","tag is-info p-1 mb-1")},m(e,l){E(e,t,l),S(t,n)},p(e,t){4&t&&U(n,e[2])},d(e){e&&O(t)}}}function Jn(e){let t,n,l;return{c(){t=N("span"),n=R(e[2]),T(t,"class","tag is-danger p-1 mb-1"),T(t,"title",l=e[0].info||"Unknown error")},m(e,l){E(e,t,l),S(t,n)},p(e,r){4&r&&U(n,e[2]),1&r&&l!==(l=e[0].info||"Unknown error")&&T(t,"title",l)},d(e){e&&O(t)}}}function qn(e){let t,n;return{c(){t=N("span"),n=R(e[2]),T(t,"class","tag is-success p-1 mb-1")},m(e,l){E(e,t,l),S(t,n)},p(e,t){4&t&&U(n,e[2])},d(e){e&&O(t)}}}function Gn(e){let t,n;function l(e,t){return!e[3]&&e[0].api_tracking_id?Bn:e[3]&&"ERROR"===e[2]?Hn:void 0}let r=l(e),s=r&&r(e);function o(e,t){return"SUCCESS"===e[2]?qn:"ERROR"===e[2]?Jn:Vn}let c=o(e),i=c(e);return{c(){t=N("div"),s&&s.c(),n=C(),i.c(),T(t,"slot","buttons")},m(e,l){E(e,t,l),s&&s.m(t,null),S(t,n),i.m(t,null)},p(e,a){r===(r=l(e))&&s?s.p(e,a):(s&&s.d(1),s=r&&r(e),s&&(s.c(),s.m(t,n))),c===(c=o(e))&&i?i.p(e,a):(i.d(1),i=c(e),i&&(i.c(),i.m(t,null)))},d(e){e&&O(t),s&&s.d(),i.d()}}}function Wn(e){let t,n=Object.entries(e[0].selection.selected),l=[];for(let t=0;t<n.length;t+=1)l[t]=Xn(Un(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,r){if(1&r){let s;for(n=Object.entries(e[0].selection.selected),s=0;s<n.length;s+=1){const o=Un(e,n,s);l[s]?l[s].p(o,r):(l[s]=Xn(o),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function Zn(e){let t,n,l,r,s,o,c,i,a=e[5]+"",u=e[9]+"",d=e[10].title+"";return{c(){t=N("div"),n=N("span"),l=R(a),r=R(" #"),s=R(u),o=C(),c=R(d),i=C(),T(n,"class","tag is-rounded is-accent")},m(e,a){E(e,t,a),S(t,n),S(n,l),S(n,r),S(n,s),S(t,o),S(t,c),S(t,i)},p(e,t){1&t&&a!==(a=e[5]+"")&&U(l,a),1&t&&u!==(u=e[9]+"")&&U(s,u),1&t&&d!==(d=e[10].title+"")&&U(c,d)},d(e){e&&O(t)}}}function Xn(e){let t,n=Object.entries(e[6]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Zn(zn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,r){if(1&r){let s;for(n=Object.entries(e[6]),s=0;s<n.length;s+=1){const o=zn(e,n,s);l[s]?l[s].p(o,r):(l[s]=Zn(o),l[s].c(),l[s].m(t.parentNode,t))}for(;s<l.length;s+=1)l[s].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function Yn(e){let t,n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected,l=n&&Wn(e);return{c(){t=N("div"),l&&l.c(),T(t,"slot","body"),T(t,"class","pt-2 grid")},m(e,n){E(e,t,n),l&&l.m(t,null)},p(e,r){1&r&&(n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected),n?l?l.p(e,r):(l=Wn(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&O(t),l&&l.d()}}}function Kn(e){let t,n;return t=new $t({props:{item:e[0],recordsStore:e[1],$$slots:{body:[Yn],buttons:[Gn]},$$scope:{ctx:e}}}),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),2&n&&(l.recordsStore=e[1]),8205&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Qn(e,t,n){let l,r,{item:s}=t,{recordsStore:o}=t;return e.$$set=e=>{"item"in e&&n(0,s=e.item),"recordsStore"in e&&n(1,o=e.recordsStore)},e.$$.update=()=>{1&e.$$.dirty&&n(3,l=s.is_finished),1&e.$$.dirty&&n(2,r=s.status)},[s,o,r,l,async function(){if(!await Qe("en"===Le?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?","en"===Le?"Confirm cancel":"Confirmer l'annulation",!0))return;await et(`/${Ne}/treatment/${s.id}/cancel`)?(n(3,l=!0),n(2,r="CANCELLED")):await Qe("en"===Le?"Failed to cancel treatment":"Erreur lors de l'annulation du traitement","en"===Le?"Error":"Erreur")}]}class el extends Oe{constructor(e){super(),Ee(this,e,Qn,Kn,c,{item:0,recordsStore:1})}}function tl(e,t,n){const l=e.slice();return l[17]=t[n][0],l[18]=t[n][1],l}function nl(e,t,n){const l=e.slice();return l[21]=t[n][0],l[22]=t[n][1],l}function ll(e,t,n){const l=e.slice();return l[26]=t[n],l}function rl(t){let n,l,r,s,o;return{c(){n=N("span"),l=N("a"),r=N("i"),s=C(),o=N("span"),o.textContent=""+("en"===Le?"Add":"Ajouter"),T(r,"class","fa-solid fa-plus"),T(l,"href",t[12]),T(l,"class","button is-rounded is-primary mb-4"),T(l,"title","en"===Le?"Add":"Ajouter"),T(n,"class","is-right")},m(e,t){E(e,n,t),S(n,l),S(l,r),S(l,s),S(l,o)},p:e,d(e){e&&O(n)}}}function sl(t){let n,l,r,s,o="en"===Le?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",c=t[29]+"";return{c(){n=N("div"),l=R(o),r=C(),s=R(c),T(n,"class","faded is-center")},m(e,t){E(e,n,t),S(n,l),S(n,r),S(n,s)},p:e,i:e,o:e,d(e){e&&O(n)}}}function ol(e){let t,n,l=0!==e[4].length&&cl(e);return{c(){l&&l.c(),t=A()},m(e,r){l&&l.m(e,r),E(e,t,r),n=!0},p(e,n){0!==e[4].length?l?(l.p(e,n),16&n&&$e(l,1)):(l=cl(e),l.c(),$e(l,1),l.m(t.parentNode,t)):l&&(ge(),be(l,1,1,(()=>{l=null})),he())},i(e){n||($e(l),n=!0)},o(e){be(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function cl(e){let t,n,l,r,o,c,i=[],a=new Map;t=new yn({props:{store:e[8],nbOfItems:e[5],pageLength:e[4].length}});let u=e[4];const d=e=>e[26].id;for(let t=0;t<u.length;t+=1){let n=ll(e,u,t),l=d(n);a.set(l,i[t]=ml(l,n))}let m=null;return u.length||(m=il()),o=new yn({props:{store:e[8],nbOfItems:e[5],pageLength:e[4].length}}),{c(){ke(t.$$.fragment),n=C(),l=N("div");for(let e=0;e<i.length;e+=1)i[e].c();m&&m.c(),r=C(),ke(o.$$.fragment)},m(e,s){Se(t,e,s),E(e,n,s),E(e,l,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(l,null);m&&m.m(l,null),E(e,r,s),Se(o,e,s),c=!0},p(e,n){const r={};32&n&&(r.nbOfItems=e[5]),16&n&&(r.pageLength=e[4].length),t.$set(r),272&n&&(u=e[4],ge(),i=function(e,t,n,l,r,o,c,i,a,u,d,m){let f=e.length,p=o.length,g=f;const h={};for(;g--;)h[e[g].key]=g;const $=[],b=new Map,v=new Map,y=[];for(g=p;g--;){const e=m(r,o,g),s=n(e);let i=c.get(s);i?l&&y.push((()=>i.p(e,t))):(i=u(s,e),i.c()),b.set(s,$[g]=i),s in h&&v.set(s,Math.abs(g-h[s]))}const w=new Set,k=new Set;function S(e){$e(e,1),e.m(i,d),c.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=$[p-1],n=e[f-1],l=t.key,r=n.key;t===n?(d=t.first,f--,p--):b.has(r)?!c.has(l)||w.has(l)?S(t):k.has(r)?f--:v.get(l)>v.get(r)?(k.add(l),S(t)):(w.add(r),f--):(a(n,c),f--)}for(;f--;){const t=e[f];b.has(t.key)||a(t,c)}for(;p;)S($[p-1]);return s(y),$}(i,n,d,1,e,u,a,l,we,ml,null,ll),he(),!u.length&&m?m.p(e,n):u.length?m&&(m.d(1),m=null):(m=il(),m.c(),m.m(l,null)));const c={};32&n&&(c.nbOfItems=e[5]),16&n&&(c.pageLength=e[4].length),o.$set(c)},i(e){if(!c){$e(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)$e(i[e]);$e(o.$$.fragment,e),c=!0}},o(e){be(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)be(i[e]);be(o.$$.fragment,e),c=!1},d(e){xe(t,e),e&&O(n),e&&O(l);for(let e=0;e<i.length;e+=1)i[e].d();m&&m.d(),e&&O(r),xe(o,e)}}}function il(t){let n;return{c(){n=N("p"),n.textContent=""+("en"===Le?"No records found":"Aucun enregistrement trouvé")},m(e,t){E(e,n,t)},p:e,d(e){e&&O(n)}}}function al(e){let t,n;return t=new xt({props:{item:e[26],recordsStore:e[8]}}),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function ul(e){let t,n;return t=new Fn({props:{item:e[26],recordsStore:e[8]}}),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function dl(e){let t,n;return t=new el({props:{item:e[26],recordsStore:e[8]}}),{c(){ke(t.$$.fragment)},m(e,l){Se(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||($e(t.$$.fragment,e),n=!0)},o(e){be(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function ml(e,t){let n,l,r,s,o,c,i;const a=[dl,ul,al],u=[];function d(e,t){return 16&t&&(l=null),16&t&&(r=null),null==l&&(l=!!e[26].class.includes("Treatment")),l?0:(null==r&&(r=!!e[26].class.includes("Set")),r?1:2)}return s=d(t,-1),o=u[s]=a[s](t),{key:e,first:null,c(){n=A(),o.c(),c=A(),this.first=n},m(e,t){E(e,n,t),u[s].m(e,t),E(e,c,t),i=!0},p(e,n){let l=s;s=d(t=e,n),s===l?u[s].p(t,n):(ge(),be(u[l],1,1,(()=>{u[l]=null})),he(),o=u[s],o?o.p(t,n):(o=u[s]=a[s](t),o.c()),$e(o,1),o.m(c.parentNode,c))},i(e){i||($e(o),i=!0)},o(e){be(o),i=!1},d(e){e&&O(n),u[s].d(e),e&&O(c)}}}function fl(t){let n;return{c(){n=N("div"),n.textContent=""+("en"===Le?"Retrieving records...":"Récupération des enregistrements..."),T(n,"class","faded is-center")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function pl(t){let n,l,r;return{c(){n=N("tr"),l=N("td"),l.textContent=""+("en"===Le?"No documents in selection":"Aucun document sélectionné"),r=C()},m(e,t){E(e,n,t),S(n,l),S(n,r)},p:e,d(e){e&&O(n)}}}function gl(e){let t,n,l,r,s,o,c=De[e[17]]+"",i=Object.entries(e[18]),a=[];for(let t=0;t<i.length;t+=1)a[t]=hl(nl(e,i,t));return{c(){t=N("h3"),n=R(c),l=C(),r=N("table"),s=N("tbody");for(let e=0;e<a.length;e+=1)a[e].c();o=C(),T(r,"class","table pl-2 is-fullwidth")},m(e,c){E(e,t,c),S(t,n),E(e,l,c),E(e,r,c),S(r,s);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(s,null);S(r,o)},p(e,t){if(8&t&&c!==(c=De[e[17]]+"")&&U(n,c),8&t){let n;for(i=Object.entries(e[18]),n=0;n<i.length;n+=1){const l=nl(e,i,n);a[n]?a[n].p(l,t):(a[n]=hl(l),a[n].c(),a[n].m(s,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(e){e&&O(t),e&&O(l),e&&O(r),L(a,e)}}}function hl(e){let t,n,l,r,s,o,c,i,a,u,d,m,f,p,g,h,$=e[21]+"",b=e[22].title+"";function v(){return e[16](e[21],e[17])}return{c(){t=N("tr"),n=N("th"),l=N("span"),r=R("#"),s=R($),o=C(),c=N("td"),i=N("a"),a=R(b),d=C(),m=N("td"),f=N("button"),p=C(),T(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),T(n,"class","is-narrow is-3"),T(i,"href",u=e[22].url),T(i,"target","_blank"),T(f,"class","delete"),T(f,"aria-label","close"),T(m,"class","is-narrow")},m(e,u){E(e,t,u),S(t,n),S(n,l),S(l,r),S(l,s),S(t,o),S(t,c),S(c,i),S(i,a),S(t,d),S(t,m),S(m,f),E(e,p,u),g||(h=j(f,"click",v),g=!0)},p(t,n){e=t,8&n&&$!==($=e[21]+"")&&U(s,$),8&n&&b!==(b=e[22].title+"")&&U(a,b),8&n&&u!==(u=e[22].url)&&T(i,"href",u)},d(e){e&&O(t),e&&O(p),g=!1,h()}}}function $l(e){let t,n=Object.values(e[18]).length>0,l=n&&gl(e);return{c(){l&&l.c(),t=A()},m(e,n){l&&l.m(e,n),E(e,t,n)},p(e,r){8&r&&(n=Object.values(e[18]).length>0),n?l?l.p(e,r):(l=gl(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function bl(e){let t,n=e[3],l=[];for(let t=0;t<n.length;t+=1)l[t]=$l(tl(e,n,t));let r=null;return n.length||(r=pl()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A(),r&&r.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n),r&&r.m(e,n)},p(e,s){if(8&s){let o;for(n=e[3],o=0;o<n.length;o+=1){const r=tl(e,n,o);l[o]?l[o].p(r,s):(l[o]=$l(r),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length,!n.length&&r?r.p(e,s):n.length?r&&(r.d(1),r=null):(r=pl(),r.c(),r.m(t.parentNode,t))}},d(e){L(l,e),e&&O(t),r&&r.d(e)}}}function vl(e){let t,n,l,r,s,o,c,i,a,u,d=!e[0].includes("set")&&Ae;t=new kn({}),l=new Ot({props:{selectionLength:e[2]}}),s=new un({props:{recordsStore:e[8],searchFields:e[1]}});let m=d&&rl(e),f={ctx:e,current:null,token:null,hasCatch:!0,pending:fl,then:ol,catch:sl,value:25,error:29,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,r,s){if(t.token!==n)return;t.resolved=s;let o=t.ctx;void 0!==r&&(o=o.slice(),o[r]=s);const c=e&&(t.current=e)(o);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(ge(),be(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),he())})):t.block.d(1),c.c(),$e(c,1),c.m(t.mount(),t.anchor),i=!0),t.block=c,t.blocks&&(t.blocks[l]=c),i&&ue()}if(!(r=e)||"object"!=typeof r&&"function"!=typeof r||"function"!=typeof r.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=K();if(e.then((e=>{Y(n),l(t.then,1,t.value,e),Y(null)}),(e=>{if(Y(n),l(t.catch,2,t.error,e),Y(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var r}(e[10],f),a=new Mt({props:{selectionLength:e[2],$$slots:{default:[bl]},$$scope:{ctx:e}}}),{c(){ke(t.$$.fragment),n=C(),ke(l.$$.fragment),r=C(),ke(s.$$.fragment),o=C(),m&&m.c(),c=C(),f.block.c(),i=C(),ke(a.$$.fragment)},m(e,d){Se(t,e,d),E(e,n,d),Se(l,e,d),E(e,r,d),Se(s,e,d),E(e,o,d),m&&m.m(e,d),E(e,c,d),f.block.m(e,f.anchor=d),f.mount=()=>i.parentNode,f.anchor=i,E(e,i,d),Se(a,e,d),u=!0},p(t,[n]){e=t;const r={};4&n&&(r.selectionLength=e[2]),l.$set(r);const o={};2&n&&(o.searchFields=e[1]),s.$set(o),1&n&&(d=!e[0].includes("set")&&Ae),d?m?m.p(e,n):(m=rl(e),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null),function(e,t,n){const l=t.slice(),{resolved:r}=e;e.current===e.then&&(l[e.value]=r),e.current===e.catch&&(l[e.error]=r),e.block.p(l,n)}(f,e,n);const i={};4&n&&(i.selectionLength=e[2]),1073741832&n&&(i.$$scope={dirty:n,ctx:e}),a.$set(i)},i(e){u||($e(t.$$.fragment,e),$e(l.$$.fragment,e),$e(s.$$.fragment,e),$e(f.block),$e(a.$$.fragment,e),u=!0)},o(e){be(t.$$.fragment,e),be(l.$$.fragment,e),be(s.$$.fragment,e);for(let e=0;e<3;e+=1){be(f.blocks[e])}be(a.$$.fragment,e),u=!1},d(e){xe(t,e),e&&O(n),xe(l,e),e&&O(r),xe(s,e),e&&O(o),m&&m.d(e),e&&O(c),f.block.d(e),f.token=null,f=null,e&&O(i),xe(a,e)}}}function yl(e,t,n){let l,r,s,o,c,i;const{selected:a,nbSelected:u}=He;m(e,a,(e=>n(15,o=e))),m(e,u,(e=>n(14,s=e)));let{modelName:d=""}=t;Q("modelName",d);let{modelTitle:f=""}=t;Q("modelTitle",f);const p=Sn(d),{pageRecords:g,resultPage:h,resultNumber:$}=p;m(e,g,(e=>n(4,c=e))),m(e,$,(e=>n(5,i=e)));let{searchFields:b=[]}=t;const v=d.includes("treatment")?`/${Ne}/${d}/add/`:`/${Ne}-admin/${Pe}/${d}/add/`;return e.$$set=e=>{"modelName"in e&&n(13,d=e.modelName),"modelTitle"in e&&n(0,f=e.modelTitle),"searchFields"in e&&n(1,b=e.searchFields)},e.$$.update=()=>{32768&e.$$.dirty&&n(3,l=o(!1)),16384&e.$$.dirty&&n(2,r=s(!1))},[f,b,r,l,c,i,a,u,p,g,h,$,v,d,s,o,(e,t)=>He.remove(e,t)]}return new class extends Oe{constructor(e){super(),Ee(this,e,yl,vl,c,{modelName:13,modelTitle:0,searchFields:1})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName,modelTitle:modelTitle}})}();
//# sourceMappingURL=recordList.js.map

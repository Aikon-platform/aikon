(function(){"use strict";function A(){}const st=t=>t;function ot(t,e){for(const n in e)t[n]=e[n];return t}function Fl(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}function rt(t){return t()}function ct(){return Object.create(null)}function G(t){t.forEach(rt)}function Le(t){return typeof t=="function"}function K(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let Ce;function ut(t,e){return Ce||(Ce=document.createElement("a")),Ce.href=e,t===Ce.href}function Bl(t){return Object.keys(t).length===0}function We(t,...e){if(t==null)return A;const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function je(t){let e;return We(t,n=>e=n)(),e}function re(t,e,n){t.$$.on_destroy.push(We(e,n))}function Me(t,e,n,l){if(t){const i=ft(t,e,n,l);return t[0](i)}}function ft(t,e,n,l){return t[1]&&l?ot(n.ctx.slice(),t[1](l(e))):n.ctx}function Te(t,e,n,l){if(t[2]&&l){const i=t[2](l(n));if(e.dirty===void 0)return i;if(typeof i=="object"){const s=[],o=Math.max(e.dirty.length,i.length);for(let r=0;r<o;r+=1)s[r]=e.dirty[r]|i[r];return s}return e.dirty|i}return e.dirty}function Ue(t,e,n,l,i,s){if(i){const o=ft(e,n,l,s);t.p(o,i)}}function De(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let l=0;l<n;l++)e[l]=-1;return e}return-1}function Fe(t){return t&&Le(t.destroy)?t.destroy:A}const at=typeof window<"u";let zl=at?()=>window.performance.now():()=>Date.now(),Ze=at?t=>requestAnimationFrame(t):A;const ke=new Set;function dt(t){ke.forEach(e=>{e.c(t)||(ke.delete(e),e.f())}),ke.size!==0&&Ze(dt)}function Hl(t){let e;return ke.size===0&&Ze(dt),{promise:new Promise(n=>{ke.add(e={c:t,f:n})}),abort(){ke.delete(e)}}}function p(t,e){t.appendChild(e)}function _t(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Vl(t){const e=b("style");return ql(_t(t),e),e.sheet}function ql(t,e){return p(t.head||t,e),e.sheet}function S(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function b(t){return document.createElement(t)}function ve(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function O(t){return document.createTextNode(t)}function L(){return O(" ")}function H(){return O("")}function F(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function Oe(t){return function(e){return e.preventDefault(),t.call(this,e)}}function m(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}const Jl=["width","height"];function mt(t,e){const n=Object.getOwnPropertyDescriptors(t.__proto__);for(const l in e)e[l]==null?t.removeAttribute(l):l==="style"?t.style.cssText=e[l]:l==="__value"?t.value=t[l]=e[l]:n[l]&&n[l].set&&Jl.indexOf(l)===-1?t[l]=e[l]:m(t,l,e[l])}function pt(t){return t===""?null:+t}function Gl(t){return Array.from(t.childNodes)}function M(t,e){e=""+e,t.data!==e&&(t.data=e)}function ie(t,e){t.value=e??""}function Be(t,e,n){for(let l=0;l<t.options.length;l+=1){const i=t.options[l];if(i.__value===e){i.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function ht(t,e){for(let n=0;n<t.options.length;n+=1){const l=t.options[n];l.selected=~e.indexOf(l.__value)}}function Kl(t){const e=t.querySelector(":checked");return e&&e.__value}function fe(t,e,n){t.classList[n?"add":"remove"](e)}function bt(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(t,n,l,e),i}const ze=new Map;let He=0;function Wl(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Zl(t,e){const n={stylesheet:Vl(e),rules:{}};return ze.set(t,n),n}function gt(t,e,n,l,i,s,o,r=0){const c=16.666/l;let u=`{
`;for(let v=0;v<=1;v+=c){const y=e+(n-e)*s(v);u+=v*100+`%{${o(y,1-y)}}
`}const a=u+`100% {${o(n,1-n)}}
}`,f=`__svelte_${Wl(a)}_${r}`,d=_t(t),{stylesheet:_,rules:h}=ze.get(d)||Zl(d,t);h[f]||(h[f]=!0,_.insertRule(`@keyframes ${f} ${a}`,_.cssRules.length));const g=t.style.animation||"";return t.style.animation=`${g?`${g}, `:""}${f} ${l}ms linear ${i}ms 1 both`,He+=1,f}function Xl(t,e){const n=(t.style.animation||"").split(", "),l=n.filter(e?s=>s.indexOf(e)<0:s=>s.indexOf("__svelte")===-1),i=n.length-l.length;i&&(t.style.animation=l.join(", "),He-=i,He||Yl())}function Yl(){Ze(()=>{He||(ze.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&w(e)}),ze.clear())})}let Pe;function ae(t){Pe=t}function Ve(){if(!Pe)throw new Error("Function called outside component initialization");return Pe}function Ql(t){Ve().$$.on_mount.push(t)}function xl(){const t=Ve();return(e,n,{cancelable:l=!1}={})=>{const i=t.$$.callbacks[e];if(i){const s=bt(e,n,{cancelable:l});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function kt(t,e){return Ve().$$.context.set(t,e),e}const we=[],Xe=[];let Se=[];const vt=[],en=Promise.resolve();let Ye=!1;function tn(){Ye||(Ye=!0,en.then(xe))}function ye(t){Se.push(t)}const Qe=new Set;let Ee=0;function xe(){if(Ee!==0)return;const t=Pe;do{try{for(;Ee<we.length;){const e=we[Ee];Ee++,ae(e),ln(e.$$)}}catch(e){throw we.length=0,Ee=0,e}for(ae(null),we.length=0,Ee=0;Xe.length;)Xe.pop()();for(let e=0;e<Se.length;e+=1){const n=Se[e];Qe.has(n)||(Qe.add(n),n())}Se.length=0}while(we.length);for(;vt.length;)vt.pop()();Ye=!1,Qe.clear(),ae(t)}function ln(t){if(t.fragment!==null){t.update(),G(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(ye)}}function nn(t){const e=[],n=[];Se.forEach(l=>t.indexOf(l)===-1?e.push(l):n.push(l)),n.forEach(l=>l()),Se=e}let Ne;function sn(){return Ne||(Ne=Promise.resolve(),Ne.then(()=>{Ne=null})),Ne}function et(t,e,n){t.dispatchEvent(bt(`${e?"intro":"outro"}${n}`))}const qe=new Set;let de;function _e(){de={r:0,c:[],p:de}}function me(){de.r||G(de.c),de=de.p}function C(t,e){t&&t.i&&(qe.delete(t),t.i(e))}function T(t,e,n,l){if(t&&t.o){if(qe.has(t))return;qe.add(t),de.c.push(()=>{qe.delete(t),l&&(n&&t.d(1),l())}),t.o(e)}else l&&l()}const on={duration:0};function wt(t,e,n,l){const i={direction:"both"};let s=e(t,n,i),o=l?0:1,r=null,c=null,u=null;function a(){u&&Xl(t,u)}function f(_,h){const g=_.b-o;return h*=Math.abs(g),{a:o,b:_.b,d:g,duration:h,start:_.start,end:_.start+h,group:_.group}}function d(_){const{delay:h=0,duration:g=300,easing:v=st,tick:y=A,css:k}=s||on,$={start:zl()+h,b:_};_||($.group=de,de.r+=1),r||c?c=$:(k&&(a(),u=gt(t,o,_,g,h,v,k)),_&&y(0,1),r=f($,g),ye(()=>et(t,_,"start")),Hl(E=>{if(c&&E>c.start&&(r=f(c,g),c=null,et(t,r.b,"start"),k&&(a(),u=gt(t,o,r.b,r.duration,0,v,s.css))),r){if(E>=r.end)y(o=r.b,1-o),et(t,r.b,"end"),c||(r.b?a():--r.group.r||G(r.group.c)),r=null;else if(E>=r.start){const R=E-r.start;o=r.a+r.d*v(R/r.duration),y(o,1-o)}}return!!(r||c)}))}return{run(_){Le(s)?sn().then(()=>{s=s(i),d(_)}):d(_)},end(){a(),r=c=null}}}function rn(t,e){const n=e.token={};function l(i,s,o,r){if(e.token!==n)return;e.resolved=r;let c=e.ctx;o!==void 0&&(c=c.slice(),c[o]=r);const u=i&&(e.current=i)(c);let a=!1;e.block&&(e.blocks?e.blocks.forEach((f,d)=>{d!==s&&f&&(_e(),T(f,1,1,()=>{e.blocks[d]===f&&(e.blocks[d]=null)}),me())}):e.block.d(1),u.c(),C(u,1),u.m(e.mount(),e.anchor),a=!0),e.block=u,e.blocks&&(e.blocks[s]=u),a&&xe()}if(Fl(t)){const i=Ve();if(t.then(s=>{ae(i),l(e.then,1,e.value,s),ae(null)},s=>{if(ae(i),l(e.catch,2,e.error,s),ae(null),!e.hasCatch)throw s}),e.current!==e.pending)return l(e.pending,0),!0}else{if(e.current!==e.then)return l(e.then,1,e.value,t),!0;e.resolved=t}}function cn(t,e,n){const l=e.slice(),{resolved:i}=t;t.current===t.then&&(l[t.value]=i),t.current===t.catch&&(l[t.error]=i),t.block.p(l,n)}function un(t,e){T(t,1,1,()=>{e.delete(t.key)})}function fn(t,e,n,l,i,s,o,r,c,u,a,f){let d=t.length,_=s.length,h=d;const g={};for(;h--;)g[t[h].key]=h;const v=[],y=new Map,k=new Map,$=[];for(h=_;h--;){const N=f(i,s,h),D=n(N);let U=o.get(D);U?l&&$.push(()=>U.p(N,e)):(U=u(D,N),U.c()),y.set(D,v[h]=U),D in g&&k.set(D,Math.abs(h-g[D]))}const E=new Set,R=new Set;function P(N){C(N,1),N.m(r,a),o.set(N.key,N),a=N.first,_--}for(;d&&_;){const N=v[_-1],D=t[d-1],U=N.key,B=D.key;N===D?(a=N.first,d--,_--):y.has(B)?!o.has(U)||E.has(U)?P(N):R.has(B)?d--:k.get(U)>k.get(B)?(R.add(U),P(N)):(E.add(B),d--):(c(D,o),d--)}for(;d--;){const N=t[d];y.has(N.key)||c(N,o)}for(;_;)P(v[_-1]);return G($),v}function an(t,e){const n={},l={},i={$$scope:1};let s=t.length;for(;s--;){const o=t[s],r=e[s];if(r){for(const c in o)c in r||(l[c]=1);for(const c in r)i[c]||(n[c]=r[c],i[c]=1);t[s]=r}else for(const c in o)i[c]=1}for(const o in l)o in n||(n[o]=void 0);return n}function J(t){t&&t.c()}function V(t,e,n,l){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),l||ye(()=>{const o=t.$$.on_mount.map(rt).filter(Le);t.$$.on_destroy?t.$$.on_destroy.push(...o):G(o),t.$$.on_mount=[]}),s.forEach(ye)}function q(t,e){const n=t.$$;n.fragment!==null&&(nn(n.after_update),G(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dn(t,e){t.$$.dirty[0]===-1&&(we.push(t),tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ee(t,e,n,l,i,s,o,r=[-1]){const c=Pe;ae(t);const u=t.$$={fragment:null,ctx:[],props:s,update:A,not_equal:i,bound:ct(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:ct(),dirty:r,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let a=!1;if(u.ctx=n?n(t,e.props||{},(f,d,..._)=>{const h=_.length?_[0]:d;return u.ctx&&i(u.ctx[f],u.ctx[f]=h)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](h),a&&dn(t,f)),d}):[],u.update(),a=!0,G(u.before_update),u.fragment=l?l(u.ctx):!1,e.target){if(e.hydrate){const f=Gl(e.target);u.fragment&&u.fragment.l(f),f.forEach(w)}else u.fragment&&u.fragment.c();e.intro&&C(t.$$.fragment),V(t,e.target,e.anchor,e.customElement),xe()}ae(c)}class te{$destroy(){q(this,1),this.$destroy=A}$on(e,n){if(!Le(n))return A;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const i=l.indexOf(n);i!==-1&&l.splice(i,1)}}$set(e){this.$$set&&!Bl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const j=APP_LANG,se=APP_NAME,_n=WEBAPP_NAME,St=USER_ID,yt=IS_SUPERUSER,Et=ADD_PERMISSION,mn=CSRF_TOKEN;ADDITIONAL_MODULES,APP_URL,SAS_APP_URL,CANTALOUPE_APP_URL,MEDIA_PATH;const pn=PAGE_LEN,Je={Witness:j==="en"?"Witness":"Témoin",Work:j==="en"?"Work":"Œuvre",Series:j==="en"?"Series":"Série d'imprimés",Regions:j==="en"?"Region Extraction":"Extraction d'illustrations"},$e=[];function hn(t,e){return{subscribe:he(t,e).subscribe}}function he(t,e=A){let n;const l=new Set;function i(r){if(K(t,r)&&(t=r,n)){const c=!$e.length;for(const u of l)u[1](),$e.push(u,t);if(c){for(let u=0;u<$e.length;u+=2)$e[u][0]($e[u+1]);$e.length=0}}}function s(r){i(r(t))}function o(r,c=A){const u=[r,c];return l.add(u),l.size===1&&(n=e(i)||A),r(t),()=>{l.delete(u),l.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:o}}function Ie(t,e,n){const l=!Array.isArray(t),i=l?[t]:t,s=e.length<2;return hn(n,o=>{let r=!1;const c=[];let u=0,a=A;const f=()=>{if(u)return;a();const _=e(l?c[0]:c,o);s?o(_):a=Le(_)?_:A},d=i.map((_,h)=>We(_,g=>{c[h]=g,u&=~(1<<h),r&&f()},()=>{u|=1<<h}));return r=!0,f(),function(){G(d),a(),r=!1}})}function tt(t){const{type:e,modelName:n,title:l,extractMeta:i=_=>_}=t,s={id:null,type:e,title:l,selected:{}},o=JSON.parse(localStorage.getItem(e))||s,r=he(o),c=he(!1);function u(_,h=!1){c.set(h),localStorage.setItem(e,JSON.stringify(_))}function a(){r.update(_=>{if(e!=="documentSet")return console.error("Document set management is the only type currently supported for saving."),_;const h=Object.fromEntries(Object.entries(_.selected).map(([v,y])=>[v,Object.keys(y)])),g=_.id?`${_.id}/edit`:"new";return fetch(`${window.location.origin}/${n}/${g}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":mn},body:JSON.stringify({title:_.title,selection:_,...h})}).then(v=>v.json()).then(v=>{if(!(v!=null&&v.document_set_id))throw new Error("Failed to save");r.update(y=>(y.id=v.document_set_id,y.title=v.document_set_title,u(y,!0),y))}).catch(v=>console.error("Error:",v)),_})}const f=_=>r.update(()=>{const h=_.selection.id?_.selection:{..._.selection,id:_.id};return u(h),h}),d=()=>r.update(()=>{const _={...s,selected:{}};return u(_),_});return{type:e,subscribe:r.subscribe,add:_=>r.update(h=>(h.selected[_.class]={...h.selected[_.class]||{},[_.id]:i(_)},u(h),h)),addAll:_=>r.update(h=>(_.forEach(g=>{h.selected[g.class]={...h.selected[g.class]||{},[g.id]:i(g)}}),u(h),h)),remove:(_,h)=>r.update(g=>{const{[_]:v,...y}=g.selected[h];return g.selected[h]=y,u(g),g}),removeAll:(_,h)=>r.update(g=>(_.forEach(v=>{var y;return(y=g.selected[h])==null?!0:delete y[v]}),u(g),g)),toggle:_=>r.update(h=>{var g;if((g=h.selected[_.class])!=null&&g[_.id]){const{[_.id]:v,...y}=h.selected[_.class];h.selected[_.class]=y}else h.selected[_.class]={...h.selected[_.class]||{},[_.id]:i(_)};return u(h),h}),toggleSet:_=>{je(r).id===_.id?d():f(_)},empty:()=>r.update(_=>(_.id=null,_.title=l,_.selected={},u(_,!0),_)),updateTitle:_=>r.update(h=>(h.title=_,u(h,!0),h)),save:a,isSaved:c,selection:r,selectionTitle:Ie(r,_=>_.title),isSelected:Ie(r,_=>h=>{var g;return((g=_.selected[h.class])==null?void 0:g[h.id])||!1}),selected:Ie(r,_=>_.selected),nbSelected:Ie(r,_=>Object.values(_.selected).reduce((h,g)=>h+Object.keys(g).length,0)),isSetSelected:Ie(r,_=>h=>_.id===h.id)}}const be=tt({type:"documentSet",modelName:"document-set",title:j==="en"?"Document set":"Set de documents",extractMeta:t=>({title:t.title,url:t.url})});tt({type:"regionsSet",modelName:"regions-set",title:j==="en"?"Regions set":"Set de régions",extractMeta:t=>t}),tt({type:"clusterSet",modelName:"cluster-set",title:j==="en"?"Selected regions":"Régions sélectionnées",extractMeta:t=>({imgRef:t.id,clusterId:t.clusterId,title:t.title,xywh:t.xywh,img:t.img})});const Zi="";function bn(t){let e=t[1]?"Retirer de la":"Ajouter à la",n,l;return{c(){n=O(e),l=O(" sélection")},m(i,s){S(i,n,s),S(i,l,s)},p(i,s){s&2&&e!==(e=i[1]?"Retirer de la":"Ajouter à la")&&M(n,e)},d(i){i&&w(n),i&&w(l)}}}function gn(t){let e=t[1]?"Remove from":"Add to",n,l;return{c(){n=O(e),l=O(" selection")},m(i,s){S(i,n,s),S(i,l,s)},p(i,s){s&2&&e!==(e=i[1]?"Remove from":"Add to")&&M(n,e)},d(i){i&&w(n),i&&w(l)}}}function kn(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function vn(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function wn(t){let e,n,l,i,s;function o(d,_){return j==="en"?gn:bn}let c=o()(t);function u(d,_){return d[1]?vn:kn}let a=u(t),f=a(t);return{c(){e=b("button"),c.c(),n=L(),l=ve("svg"),f.c(),m(l,"xmlns","http://www.w3.org/2000/svg"),m(l,"viewBox","0 0 384 512"),m(l,"class","svelte-135nggd"),m(e,"class","button"),fe(e,"is-inverted",t[1])},m(d,_){S(d,e,_),c.m(e,null),p(e,n),p(e,l),f.m(l,null),i||(s=F(e,"click",t[4]),i=!0)},p(d,[_]){c.p(d,_),a!==(a=u(d))&&(f.d(1),f=a(d),f&&(f.c(),f.m(l,null))),_&2&&fe(e,"is-inverted",d[1])},i:A,o:A,d(d){d&&w(e),c.d(),f.d(),i=!1,s()}}}function Sn(t,e,n){let l,i;const{isSelected:s}=be;re(t,s,c=>n(3,i=c));let{item:o}=e;const r=()=>be.toggle(o);return t.$$set=c=>{"item"in c&&n(0,o=c.item)},t.$$.update=()=>{t.$$.dirty&9&&n(1,l=i(o))},[o,l,s,i,r]}class yn extends te{constructor(e){super(),ee(this,e,Sn,wn,K,{item:0})}}function $t(t,{delay:e=0,duration:n=400,easing:l=st}={}){const i=+getComputedStyle(t).opacity;return{delay:e,duration:n,easing:l,css:s=>`opacity: ${s*i}`}}const En=t=>typeof t=="string"||t instanceof String;function $n(){return"https://vhs.huma-num.fr"}function Ln(t,e){if(typeof window<"u"){const n=parseInt(new URLSearchParams(window.location.search).get(e));if(!isNaN(n))return t.set(n),n}return t.set(1),1}function On(t,e,n){if(e.set(t),typeof window<"u"){const l=new URL(window.location.href);l.searchParams.set(n,t),window.history.pushState({},"",l)}}function Pn(t=null){return t=t.split("_"),t.length<3?void 0:`${t.slice(0,3).join("_").replace(".jpg","")}.jpg`}function Nn(t=null){const e=Pn(t);return e===void 0?void 0:`${$n()}/iiif/2/${e}`}function Lt(t=null,e=null,n="full"){if(e=En(e)?e.replace(".jpg",""):e,!t)return"https://placehold.co/96x96/png?text=No+image";const l=Nn(t);if(l===void 0)return"https://placehold.co/96x96/png?text=No+image";const i=t.split("_");return e||(e=i[i.length-1].includes(",")?i.pop().replace(".jpg",""):"full"),`${l}/${e}/${n}/0/default.jpg`}function Re(t,e=null,n=!1){return new Promise(l=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:l(void 0),e&&(document.getElementById("modal-title").innerHTML=e),document.getElementById("modal-msg").innerHTML=t,document.getElementById("hidden-msg-btn").click();const s=document.getElementById("cancel-btn"),o=document.getElementById("ok-btn"),r=document.getElementById("modal-bkg"),c=()=>{s.removeEventListener("click",u),r.removeEventListener("click",u),o.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},u=()=>{c(),l(!1)},a=()=>{c(),l(!0)};s.addEventListener("click",u),o.addEventListener("click",a)}else n?l(window.confirm(t)):(window.alert(t),l(void 0))})}async function Ot(t){try{return(await fetch(t)).ok}catch(e){return console.error("Error:",e),!1}}async function In(t,e){return Ot(`/${se}/${e.toLowerCase()}/${t}/delete`)}function Pt(t){const e=t.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button-close"),n=()=>t.classList.remove("is-active");e.forEach(i=>i.addEventListener("click",n));const l=i=>{i.key==="Escape"&&t.classList.contains("is-active")&&n()};return document.addEventListener("keydown",l),{destroy(){e.forEach(i=>i.removeEventListener("click",n)),document.removeEventListener("keydown",l)}}}function Nt(t){const e=()=>{const n=document.getElementById(t.dataset.target);n==null||n.classList.add("is-active")};return t.addEventListener("click",e),{destroy(){t.removeEventListener("click",e)}}}const Xi="",Rn=t=>({}),It=t=>({}),An=t=>({}),Rt=t=>({});function At(t,e,n){const l=t.slice();return l[7]=e[n],l}function Ct(t){let e,n,l,i;return{c(){e=b("div"),n=b("figure"),l=b("img"),ut(l.src,i=Lt(t[0].img,"full","250,"))||m(l,"src",i),m(l,"alt","Record illustration"),m(n,"class","card image is-96x96 svelte-1f9ag52"),m(e,"class","media-left")},m(s,o){S(s,e,o),p(e,n),p(n,l)},p(s,o){o&1&&!ut(l.src,i=Lt(s[0].img,"full","250,"))&&m(l,"src",i)},d(s){s&&w(e)}}}function jt(t){let e;return{c(){e=b("span"),e.innerHTML=`<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span>
                            <span style="margin-left: -0.5rem">Public</span>`,m(e,"class","pl-3 pt-1 icon-text is-size-7 is-center has-text-weight-normal")},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function Mt(t){let e=t[0].user+"",n;return{c(){n=O(e)},m(l,i){S(l,n,i)},p(l,i){i&1&&e!==(e=l[0].user+"")&&M(n,e)},d(l){l&&w(n)}}}function Tt(t){let e,n=t[0].updated_at+"",l;return{c(){e=b("span"),l=O(n),m(e,"class","tag p-1 mb-1")},m(i,s){S(i,e,s),p(e,l)},p(i,s){s&1&&n!==(n=i[0].updated_at+"")&&M(l,n)},d(i){i&&w(e)}}}function Cn(t){let e,n,l,i,s;return{c(){e=b("a"),n=b("span"),l=L(),i=b("span"),i.textContent=`${j==="en"?"Edit":"Éditer"}`,m(n,"class","iconify"),m(n,"data-icon","entypo:edit"),m(i,"class","ml-2"),m(e,"href",s=t[2]?t[0].edit_url:null),m(e,"class","edit-btn button is-small is-rounded is-link px-2 svelte-1f9ag52"),m(e,"title",j==="en"?"Edit":"Éditer")},m(o,r){S(o,e,r),p(e,n),p(e,l),p(e,i)},p(o,r){r&1&&s!==(s=o[2]?o[0].edit_url:null)&&m(e,"href",s)},d(o){o&&w(e)}}}function Ut(t){let e=t[0].hasOwnProperty("iiif"),n,l=e&&Dt(t);return{c(){l&&l.c(),n=H()},m(i,s){l&&l.m(i,s),S(i,n,s)},p(i,s){s&1&&(e=i[0].hasOwnProperty("iiif")),e?l?l.p(i,s):(l=Dt(i),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(i){l&&l.d(i),i&&w(n)}}}function Dt(t){let e,n=t[0].iiif,l=[];for(let i=0;i<n.length;i+=1)l[i]=Ft(At(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=H()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){n=i[0].iiif;let o;for(o=0;o<n.length;o+=1){const r=At(i,n,o);l[o]?l[o].p(r,s):(l[o]=Ft(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){x(l,i),i&&w(e)}}}function Ft(t){let e,n=t[7]+"";return{c(){e=b("span"),m(e,"class","tag logo mt-1")},m(l,i){S(l,e,i),e.innerHTML=n},p(l,i){i&1&&n!==(n=l[7]+"")&&(e.innerHTML=n)},d(l){l&&w(e)}}}function Bt(t){let e=t[0].user_id===parseInt(St)||yt,n,l=e&&zt(t);return{c(){l&&l.c(),n=H()},m(i,s){l&&l.m(i,s),S(i,n,s)},p(i,s){s&1&&(e=i[0].user_id===parseInt(St)||yt),e?l?l.p(i,s):(l=zt(i),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(i){l&&l.d(i),i&&w(n)}}}function zt(t){let e,n,l;return{c(){e=b("button"),m(e,"class","delete is-medium"),m(e,"title",j==="en"?"Delete":"Supprimer")},m(i,s){S(i,e,s),n||(l=F(e,"click",t[3]),n=!0)},p:A,d(i){i&&w(e),n=!1,l()}}}function jn(t){let e,n,l,i,s=t[0].hasOwnProperty("img"),o,r,c,u,a=t[0].type+"",f,d,_=t[0].id+"",h,g,v=t[0].title+"",y,k,$,E=t[0].hasOwnProperty("is_public")&&t[0].is_public,R,P,N,D,U,B,oe=t[0].hasOwnProperty("buttons")&&Object.keys(t[0].buttons).length!==0,Ae,Ge,Ul,Dl,Ke,pe,le,W=s&&Ct(t),ne=E&&jt(),Z=t[0].user&&Mt(t),X=t[0].updated_at&&Tt(t),ge=t[2]&&Cn(t),Y=oe&&Ut(t);const nt=t[6].buttons,ce=Me(nt,t,t[5],Rt);let Q=(t[0].class==="Treatment"||t[0].class==="DocumentSet")&&Bt(t);const it=t[6].body,ue=Me(it,t,t[5],It);return{c(){e=b("div"),n=b("div"),l=b("div"),i=b("div"),W&&W.c(),o=L(),r=b("div"),c=b("a"),u=b("span"),f=O(a),d=O(" #"),h=O(_),g=L(),y=O(v),$=L(),ne&&ne.c(),R=L(),P=b("p"),Z&&Z.c(),N=L(),X&&X.c(),D=L(),U=b("p"),ge&&ge.c(),B=L(),Y&&Y.c(),Ae=L(),Ge=b("div"),ce&&ce.c(),Ul=L(),Q&&Q.c(),Dl=L(),Ke=b("div"),ue&&ue.c(),m(u,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),m(c,"href",k=t[1]?t[0].view_url:null),m(c,"class","title is-4 "+(t[1]?"hoverable":"")+" pt-2 svelte-1f9ag52"),m(P,"class","subtitle is-6 mb-0 ml-2 pt-2"),m(U,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle"),m(r,"class","media-content"),m(Ge,"class","media-right"),m(i,"class","media"),m(Ke,"class","content fixed-grid px-5"),m(l,"class","card-content"),m(n,"class","card mb-5"),m(e,"class","item")},m(I,z){S(I,e,z),p(e,n),p(n,l),p(l,i),W&&W.m(i,null),p(i,o),p(i,r),p(r,c),p(c,u),p(u,f),p(u,d),p(u,h),p(c,g),p(c,y),p(r,$),ne&&ne.m(r,null),p(r,R),p(r,P),Z&&Z.m(P,null),p(P,N),X&&X.m(P,null),p(r,D),p(r,U),ge&&ge.m(U,null),p(U,B),Y&&Y.m(U,null),p(i,Ae),p(i,Ge),ce&&ce.m(Ge,null),p(i,Ul),Q&&Q.m(i,null),p(l,Dl),p(l,Ke),ue&&ue.m(Ke,null),le=!0},p(I,[z]){z&1&&(s=I[0].hasOwnProperty("img")),s?W?W.p(I,z):(W=Ct(I),W.c(),W.m(i,o)):W&&(W.d(1),W=null),(!le||z&1)&&a!==(a=I[0].type+"")&&M(f,a),(!le||z&1)&&_!==(_=I[0].id+"")&&M(h,_),(!le||z&1)&&v!==(v=I[0].title+"")&&M(y,v),(!le||z&1&&k!==(k=I[1]?I[0].view_url:null))&&m(c,"href",k),z&1&&(E=I[0].hasOwnProperty("is_public")&&I[0].is_public),E?ne||(ne=jt(),ne.c(),ne.m(r,R)):ne&&(ne.d(1),ne=null),I[0].user?Z?Z.p(I,z):(Z=Mt(I),Z.c(),Z.m(P,N)):Z&&(Z.d(1),Z=null),I[0].updated_at?X?X.p(I,z):(X=Tt(I),X.c(),X.m(P,null)):X&&(X.d(1),X=null),I[2]&&ge.p(I,z),z&1&&(oe=I[0].hasOwnProperty("buttons")&&Object.keys(I[0].buttons).length!==0),oe?Y?Y.p(I,z):(Y=Ut(I),Y.c(),Y.m(U,null)):Y&&(Y.d(1),Y=null),ce&&ce.p&&(!le||z&32)&&Ue(ce,nt,I,I[5],le?Te(nt,I[5],z,An):De(I[5]),Rt),I[0].class==="Treatment"||I[0].class==="DocumentSet"?Q?Q.p(I,z):(Q=Bt(I),Q.c(),Q.m(i,null)):Q&&(Q.d(1),Q=null),ue&&ue.p&&(!le||z&32)&&Ue(ue,it,I,I[5],le?Te(it,I[5],z,Rn):De(I[5]),It)},i(I){le||(C(ce,I),C(ue,I),ye(()=>{le&&(pe||(pe=wt(e,$t,{duration:500},!0)),pe.run(1))}),le=!0)},o(I){T(ce,I),T(ue,I),pe||(pe=wt(e,$t,{duration:500},!1)),pe.run(0),le=!1},d(I){I&&w(e),W&&W.d(),ne&&ne.d(),Z&&Z.d(),X&&X.d(),ge&&ge.d(),Y&&Y.d(),ce&&ce.d(I),Q&&Q.d(),ue&&ue.d(I),I&&pe&&pe.end()}}}function Mn(t,e,n){let{$$slots:l={},$$scope:i}=e,{recordsStore:s}=e,{item:o}=e;const r=o.hasOwnProperty("view_url")&&o.view_url!=="",c=o.hasOwnProperty("edit_url")&&o.edit_url!=="";async function u(){if(!await Re(j==="en"?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement ?",j==="en"?"Confirm deletion":"Confirmer la suppression",!0))return;await In(o.id,o.class)?s.remove(o.id):await Re(j==="en"?"Failed to delete record":"Erreur lors de la suppression de l'enregistrement",j==="en"?"Error":"Erreur")}return t.$$set=a=>{"recordsStore"in a&&n(4,s=a.recordsStore),"item"in a&&n(0,o=a.item),"$$scope"in a&&n(5,i=a.$$scope)},[o,r,c,u,s,i,l]}class lt extends te{constructor(e){super(),ee(this,e,Mn,jn,K,{recordsStore:4,item:0})}}const Yi="";function Ht(t,e,n){const l=t.slice();return l[2]=e[n][0],l[3]=e[n][1],l}function Tn(t){let e,n,l;return n=new yn({props:{item:t[0]}}),{c(){e=b("div"),J(n.$$.fragment),m(e,"slot","buttons")},m(i,s){S(i,e,s),V(n,e,null),l=!0},p(i,s){const o={};s&1&&(o.item=i[0]),n.$set(o)},i(i){l||(C(n.$$.fragment,i),l=!0)},o(i){T(n.$$.fragment,i),l=!1},d(i){i&&w(e),q(n)}}}function Vt(t){let e,n,l=t[2]+"",i,s,o,r=t[3]+"",c,u;return{c(){e=b("div"),n=b("div"),i=O(l),s=L(),o=b("div"),u=L(),m(n,"class","column is-4 is-bold"),m(o,"class",c="column is-8 "+(t[3]==="-"?"faded":"")),m(e,"class","datum is-middle columns svelte-ln5qdg")},m(a,f){S(a,e,f),p(e,n),p(n,i),p(e,s),p(e,o),o.innerHTML=r,p(e,u)},p(a,f){f&1&&l!==(l=a[2]+"")&&M(i,l),f&1&&r!==(r=a[3]+"")&&(o.innerHTML=r),f&1&&c!==(c="column is-8 "+(a[3]==="-"?"faded":""))&&m(o,"class",c)},d(a){a&&w(e)}}}function Un(t){let e,n=Object.entries(t[0].metadata),l=[];for(let i=0;i<n.length;i+=1)l[i]=Vt(Ht(t,n,i));return{c(){e=b("div");for(let i=0;i<l.length;i+=1)l[i].c();m(e,"slot","body"),m(e,"class","grid metadata pt-2 svelte-ln5qdg")},m(i,s){S(i,e,s);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(i,s){if(s&1){n=Object.entries(i[0].metadata);let o;for(o=0;o<n.length;o+=1){const r=Ht(i,n,o);l[o]?l[o].p(r,s):(l[o]=Vt(r),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&w(e),x(l,i)}}}function Dn(t){let e,n;return e=new lt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[Un],buttons:[Tn]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,[i]){const s={};i&1&&(s.item=l[0]),i&2&&(s.recordsStore=l[1]),i&65&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Fn(t,e,n){let{item:l}=e,{recordsStore:i}=e;return t.$$set=s=>{"item"in s&&n(0,l=s.item),"recordsStore"in s&&n(1,i=s.recordsStore)},[l,i]}class Bn extends te{constructor(e){super(),ee(this,e,Fn,Dn,K,{item:0,recordsStore:1})}}const Qi="";function zn(t){let e,n,l,i,s,o=j==="en"?"Selection":"Sélection",r,c,u,a,f,d;return{c(){e=b("div"),n=b("button"),l=b("span"),i=b("i"),s=L(),r=O(o),c=O(`
            (`),u=O(t[0]),a=O(")"),m(i,"class","fa-solid fa-book-bookmark"),m(l,"id","btn-content"),m(n,"id","set-btn"),m(n,"class","button px-5 py-4 is-link svelte-gmt9z5"),m(n,"data-target","selection-modal"),m(e,"class","set-container svelte-gmt9z5")},m(_,h){S(_,e,h),p(e,n),p(n,l),p(l,i),p(l,s),p(l,r),p(l,c),p(l,u),p(l,a),f||(d=Fe(Nt.call(null,n)),f=!0)},p(_,[h]){h&1&&M(u,_[0])},i:A,o:A,d(_){_&&w(e),f=!1,d()}}}function Hn(t,e,n){let{selectionLength:l=0}=e,i=l;return t.$$set=s=>{"selectionLength"in s&&n(0,l=s.selectionLength)},t.$$.update=()=>{if(t.$$.dirty&3&&l!==i){const s=l>i;n(1,i=l);const o=document.getElementById("btn-content");o&&o.animate([{transform:s?"translateY(-7px)":"translateX(-5px)"},{transform:s?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,i]}class Vn extends te{constructor(e){super(),ee(this,e,Hn,zn,K,{selectionLength:0})}}function qn(t){let e,n,l,i,s=j==="en"?"Save selection":"Sauvegarder la sélection",o,r,c;return{c(){e=b("button"),n=b("span"),l=b("i"),i=L(),o=O(s),m(l,"class","fa-solid fa-floppy-disk"),m(e,"class","button is-link")},m(u,a){S(u,e,a),p(e,n),p(n,l),p(n,i),p(n,o),r||(c=F(e,"click",t[7]),r=!0)},p:A,d(u){u&&w(e),r=!1,c()}}}function Jn(t){let e,n,l,i,s=j==="en"?"Go to treatment":"Accéder au traitement",o,r;return{c(){var c;e=b("a"),n=b("span"),l=b("i"),i=L(),o=O(s),m(l,"class","fa-solid fa-gear"),m(e,"class","button is-link"),m(e,"href",r="/"+se+"/treatment/add/?document_set="+((c=t[3])==null?void 0:c.id))},m(c,u){S(c,e,u),p(e,n),p(n,l),p(n,i),p(n,o)},p(c,u){var a;u&8&&r!==(r="/"+se+"/treatment/add/?document_set="+((a=c[3])==null?void 0:a.id))&&m(e,"href",r)},d(c){c&&w(e)}}}function qt(t){let e,n,l,i,s,o,r;return{c(){var c,u;e=b("a"),n=b("span"),n.innerHTML='<i class="fa-solid fa-file-export"></i> JSON',i=L(),s=b("a"),o=b("span"),o.innerHTML='<i class="fa-solid fa-file-zipper"></i> ZIP',m(e,"class","button is-link is-dark"),m(e,"href",l="/"+se+"/document-set/"+((c=t[3])==null?void 0:c.id)+"/json"),m(e,"target","_blank"),m(s,"class","button is-link is-dark"),m(s,"href",r="/"+se+"/document-set/"+((u=t[3])==null?void 0:u.id)+"/zip"),m(s,"target","_blank")},m(c,u){S(c,e,u),p(e,n),S(c,i,u),S(c,s,u),p(s,o)},p(c,u){var a,f;u&8&&l!==(l="/"+se+"/document-set/"+((a=c[3])==null?void 0:a.id)+"/json")&&m(e,"href",l),u&8&&r!==(r="/"+se+"/document-set/"+((f=c[3])==null?void 0:f.id)+"/zip")&&m(s,"href",r)},d(c){c&&w(e),c&&w(i),c&&w(s)}}}function Gn(t){let e,n,l,i,s,o,r;function c(d,_){return d[2]&&!d[1]?Jn:qn}let u=c(t),a=u(t),f=!t[1]&&qt(t);return{c(){e=b("footer"),n=b("div"),l=b("button"),l.textContent=`${j==="en"?"Clear selection":"Vider la sélection"}`,i=L(),a.c(),s=L(),f&&f.c(),m(l,"class","button button-close is-link is-light"),m(n,"class","buttons"),m(e,"class","modal-card-foot is-center")},m(d,_){S(d,e,_),p(e,n),p(n,l),p(n,i),a.m(n,null),p(n,s),f&&f.m(n,null),o||(r=F(l,"click",t[6]),o=!0)},p(d,[_]){u===(u=c(d))&&a?a.p(d,_):(a.d(1),a=u(d),a&&(a.c(),a.m(n,s))),d[1]?f&&(f.d(1),f=null):f?f.p(d,_):(f=qt(d),f.c(),f.m(n,null))},i:A,o:A,d(d){d&&w(e),a.d(),f&&f.d(),o=!1,r()}}}function Kn(t,e,n){let l,i,{selectionStore:s}=e;const{isSaved:o,selection:r}=s;re(t,o,f=>n(2,l=f)),re(t,r,f=>n(3,i=f));let{isRegion:c=s.type!=="documentSet"}=e;const u=()=>s.empty(),a=()=>s.save();return t.$$set=f=>{"selectionStore"in f&&n(0,s=f.selectionStore),"isRegion"in f&&n(1,c=f.isRegion)},[s,c,l,i,o,r,u,a]}class Wn extends te{constructor(e){super(),ee(this,e,Kn,Gn,K,{selectionStore:0,isRegion:1})}}const xi="";function Zn(t){let e,n,l,i,s,o;return{c(){e=b("span"),n=O(t[5]),l=L(),i=b("span"),i.innerHTML='<i class="fas fa-edit"></i>',m(i,"class","pl-3 smaller has-text-link")},m(r,c){S(r,e,c),p(e,n),p(e,l),p(e,i),s||(o=[F(e,"click",t[7]),F(e,"keyup",null)],s=!0)},p(r,c){c&32&&M(n,r[5])},d(r){r&&w(e),s=!1,G(o)}}}function Xn(t){let e,n,l;return{c(){e=b("input"),m(e,"class","input selection-title svelte-sgypdx")},m(i,s){S(i,e,s),t[12](e),ie(e,t[4]),n||(l=[F(e,"input",t[13]),F(e,"keydown",t[8]),F(e,"blur",t[9])],n=!0)},p(i,s){s&16&&e.value!==i[4]&&ie(e,i[4])},d(i){i&&w(e),t[12](null),n=!1,G(l)}}}function Yn(t){let e,n,l,i,s,o,r,c,u,a,f,d,_,h,g,v,y,k,$,E;function R(B,oe){return B[2]?Xn:Zn}let P=R(t),N=P(t);const D=t[11].default,U=Me(D,t,t[10],null);return y=new Wn({props:{selectionStore:t[0]}}),{c(){e=b("div"),n=b("div"),l=L(),i=b("div"),s=b("div"),o=b("div"),r=b("i"),c=L(),N.c(),u=O(`
                (`),a=O(t[1]),f=O(")"),d=L(),_=b("button"),h=L(),g=b("section"),U&&U.c(),v=L(),J(y.$$.fragment),m(n,"class","modal-background"),m(r,"class","fa-solid fa-book-bookmark"),m(o,"class","title is-4 mb-0 media-content"),m(_,"class","delete media-left"),m(_,"aria-label","close"),m(s,"class","modal-card-head media mb-0 is-middle"),m(g,"class","modal-card-body"),m(i,"class","modal-content"),m(e,"id","selection-modal"),m(e,"class","modal fade"),m(e,"tabindex","-1"),m(e,"aria-labelledby","selection-modal-label"),m(e,"aria-hidden","true")},m(B,oe){S(B,e,oe),p(e,n),p(e,l),p(e,i),p(i,s),p(s,o),p(o,r),p(o,c),N.m(o,null),p(o,u),p(o,a),p(o,f),p(s,d),p(s,_),p(i,h),p(i,g),U&&U.m(g,null),p(i,v),V(y,i,null),k=!0,$||(E=Fe(Pt.call(null,e)),$=!0)},p(B,[oe]){P===(P=R(B))&&N?N.p(B,oe):(N.d(1),N=P(B),N&&(N.c(),N.m(o,u))),(!k||oe&2)&&M(a,B[1]),U&&U.p&&(!k||oe&1024)&&Ue(U,D,B,B[10],k?Te(D,B[10],oe,null):De(B[10]),null);const Ae={};oe&1&&(Ae.selectionStore=B[0]),y.$set(Ae)},i(B){k||(C(U,B),C(y.$$.fragment,B),k=!0)},o(B){T(U,B),T(y.$$.fragment,B),k=!1},d(B){B&&w(e),N.d(),U&&U.d(B),q(y),$=!1,E()}}}function Qn(t,e,n){let l,{$$slots:i={},$$scope:s}=e,{selectionStore:o}=e;const{selectionTitle:r,updateTitle:c,save:u}=o;re(t,r,$=>n(5,l=$));let{selectionLength:a=!1}=e,f=!1,d,_;function h(){n(2,f=!0),n(4,_=l),setTimeout(()=>d&&d.focus(),0)}function g($){$.key==="Enter"&&v()}function v(){n(2,f=!1),c(_),u()}function y($){Xe[$?"unshift":"push"](()=>{d=$,n(3,d)})}function k(){_=this.value,n(4,_)}return t.$$set=$=>{"selectionStore"in $&&n(0,o=$.selectionStore),"selectionLength"in $&&n(1,a=$.selectionLength),"$$scope"in $&&n(10,s=$.$$scope)},[o,a,f,d,_,l,r,h,g,v,s,i,y,k]}class xn extends te{constructor(e){super(),ee(this,e,Qn,Yn,K,{selectionStore:0,selectionLength:1})}}const es="";function Jt(t,e,n){const l=t.slice();return l[15]=e[n],l[17]=n,l}function Gt(t){let e,n=t[4],l=[];for(let i=0;i<n.length;i+=1)l[i]=Kt(Jt(t,n,i));return{c(){e=b("ul");for(let i=0;i<l.length;i+=1)l[i].c();m(e,"class","autocomplete-list is-wide svelte-109rw7p")},m(i,s){S(i,e,s);for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(e,null)},p(i,s){if(s&592){n=i[4];let o;for(o=0;o<n.length;o+=1){const r=Jt(i,n,o);l[o]?l[o].p(r,s):(l[o]=Kt(r),l[o].c(),l[o].m(e,null))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){i&&w(e),x(l,i)}}}function Kt(t){let e,n=t[15].label+"",l,i,s,o;function r(){return t[13](t[15])}return{c(){e=b("li"),l=O(n),i=L(),m(e,"class","svelte-109rw7p"),fe(e,"selected",t[17]===t[6])},m(c,u){S(c,e,u),p(e,l),p(e,i),s||(o=[F(e,"click",r),F(e,"keyup",null)],s=!0)},p(c,u){t=c,u&16&&n!==(n=t[15].label+"")&&M(l,n),u&64&&fe(e,"selected",t[17]===t[6])},d(c){c&&w(e),s=!1,G(o)}}}function ei(t){let e,n,l,i,s,o=t[5]&&Gt(t);return{c(){e=b("div"),n=b("input"),l=L(),o&&o.c(),m(n,"class","input is-small is-wide svelte-109rw7p"),m(n,"name",t[1]),m(n,"id",t[2]),m(n,"placeholder",t[0]),m(n,"autocomplete","off"),m(e,"class","autocomplete svelte-109rw7p")},m(r,c){S(r,e,c),p(e,n),ie(n,t[3]),p(e,l),o&&o.m(e,null),i||(s=[F(n,"input",t[12]),F(n,"input",t[7]),F(n,"keydown",t[8])],i=!0)},p(r,[c]){c&2&&m(n,"name",r[1]),c&4&&m(n,"id",r[2]),c&1&&m(n,"placeholder",r[0]),c&8&&n.value!==r[3]&&ie(n,r[3]),r[5]?o?o.p(r,c):(o=Gt(r),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},i:A,o:A,d(r){r&&w(e),o&&o.d(),i=!1,G(s)}}}function ti(t,e,n){let{items:l=[]}=e,{placeholder:i=`${j==="en"?"Select":"Sélectionner"} ...`}=e,{name:s=""}=e,{id:o=""}=e,r="",c=[],u=!1,a=-1,f=null;const d=xl();function _(){n(6,a=-1)}function h(k){k.key==="ArrowDown"?(k.preventDefault(),n(6,a=(a+1)%c.length)):k.key==="ArrowUp"?(k.preventDefault(),n(6,a=a<=0?c.length-1:a-1)):k.key==="Enter"&&a!==-1&&(k.preventDefault(),g(c[a]))}function g(k){n(3,r=k.label),n(11,f=k),n(5,u=!1),d("select",k)}function v(){r=this.value,n(3,r)}const y=k=>g(k);return t.$$set=k=>{"items"in k&&n(10,l=k.items),"placeholder"in k&&n(0,i=k.placeholder),"name"in k&&n(1,s=k.name),"id"in k&&n(2,o=k.id)},t.$$.update=()=>{t.$$.dirty&3080&&(r.length>0?(n(4,c=l.filter(k=>k.label.toLowerCase().includes(r.toLowerCase()))),n(5,u=!0)):(n(4,c=[]),n(5,u=!1),f&&(n(11,f=null),d("select",{id:null,label:""}))))},[i,s,o,r,c,u,a,_,h,g,l,f,v,y]}class li extends te{constructor(e){super(),ee(this,e,ti,ei,K,{items:10,placeholder:0,name:1,id:2})}}const ts="";function Wt(t,e,n){const l=t.slice();return l[16]=e[n],l[17]=e,l[18]=n,l}function Zt(t,e,n){const l=t.slice();return l[19]=e[n],l}function Xt(t,e,n){const l=t.slice();return l[16]=e[n],l[22]=e,l[23]=n,l}function Yt(t){let e,n,l,i,s,o,r,c,u,a=j==="en"?"Search":"Rechercher",f,d,_,h,g=t[0],v=[];for(let E=0;E<g.length;E+=1)v[E]=xt(Xt(t,g,E));let y=t[0],k=[];for(let E=0;E<y.length;E+=1)k[E]=nl(Wt(t,y,E));const $=E=>T(k[E],1,1,()=>{k[E]=null});return{c(){e=b("form"),n=b("article");for(let E=0;E<v.length;E+=1)v[E].c();l=L(),i=b("div");for(let E=0;E<k.length;E+=1)k[E].c();s=L(),o=b("div"),r=b("button"),c=b("i"),u=L(),f=O(a),m(i,"class","grid"),m(n,"class","message fixed-grid"),m(c,"class","fa-solid fa-magnifying-glass"),m(r,"type","submit"),m(r,"class","button is-link is-outlined is-fullwidth"),m(o,"class","panel-block columns"),m(e,"class","is-center pb-3")},m(E,R){S(E,e,R),p(e,n);for(let P=0;P<v.length;P+=1)v[P]&&v[P].m(n,null);p(n,l),p(n,i);for(let P=0;P<k.length;P+=1)k[P]&&k[P].m(i,null);p(e,s),p(e,o),p(o,r),p(r,c),p(r,u),p(r,f),d=!0,_||(h=F(e,"submit",t[3]),_=!0)},p(E,R){if(R&3){g=E[0];let P;for(P=0;P<g.length;P+=1){const N=Xt(E,g,P);v[P]?v[P].p(N,R):(v[P]=xt(N),v[P].c(),v[P].m(n,l))}for(;P<v.length;P+=1)v[P].d(1);v.length=g.length}if(R&51){y=E[0];let P;for(P=0;P<y.length;P+=1){const N=Wt(E,y,P);k[P]?(k[P].p(N,R),C(k[P],1)):(k[P]=nl(N),k[P].c(),C(k[P],1),k[P].m(i,null))}for(_e(),P=y.length;P<k.length;P+=1)$(P);me()}},i(E){if(!d){for(let R=0;R<y.length;R+=1)C(k[R]);d=!0}},o(E){k=k.filter(Boolean);for(let R=0;R<k.length;R+=1)T(k[R]);d=!1},d(E){E&&w(e),x(v,E),x(k,E),_=!1,h()}}}function Qt(t){let e,n,l=t[16].label+"",i,s,o,r,c,u,a,f,d,_;function h(){t[7].call(c,t[16])}return{c(){e=b("div"),n=b("label"),i=O(l),o=L(),r=b("div"),c=b("input"),f=L(),m(n,"for",s=t[16].name),m(n,"class","label column is-small is-2 svelte-wwfwxh"),m(c,"type","text"),m(c,"class","input is-small is-wide"),m(c,"id",u=t[16].name),m(c,"name",a=t[16].name),m(r,"class","control has-icons-right column is-10"),m(e,"class","search-field field columns pb-3 svelte-wwfwxh")},m(g,v){S(g,e,v),p(e,n),p(n,i),p(e,o),p(e,r),p(r,c),ie(c,t[1][t[16].name]),p(e,f),d||(_=F(c,"input",h),d=!0)},p(g,v){t=g,v&1&&l!==(l=t[16].label+"")&&M(i,l),v&1&&s!==(s=t[16].name)&&m(n,"for",s),v&1&&u!==(u=t[16].name)&&m(c,"id",u),v&1&&a!==(a=t[16].name)&&m(c,"name",a),v&3&&c.value!==t[1][t[16].name]&&ie(c,t[1][t[16].name])},d(g){g&&w(e),d=!1,_()}}}function xt(t){let e,n=t[16].name==="search"&&Qt(t);return{c(){n&&n.c(),e=H()},m(l,i){n&&n.m(l,i),S(l,e,i)},p(l,i){l[16].name==="search"?n?n.p(l,i):(n=Qt(l),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(l){n&&n.d(l),l&&w(e)}}}function el(t){let e,n,l=t[16].label+"",i,s,o,r,c,u,a,f,d,_;const h=[ri,oi,si,ii,ni],g=[];function v(y,k){return k&1&&(c=null),k&1&&(u=null),c==null&&(c=!!y[16].type.includes("ChoiceField")),c?0:y[16].type==="BooleanField"?1:(u==null&&(u=!!y[16].type.includes("Date")),u?2:y[16].type==="IntegerField"||y[16].type==="FloatField"?3:4)}return a=v(t,-1),f=g[a]=h[a](t),{c(){e=b("div"),n=b("label"),i=O(l),o=L(),r=b("div"),f.c(),d=L(),m(n,"for",s=t[16].name),m(n,"class","label column is-small is-3 svelte-wwfwxh"),m(r,"class","control has-icons-right column is-9"),m(e,"class","search-field field columns is-middle svelte-wwfwxh")},m(y,k){S(y,e,k),p(e,n),p(n,i),p(e,o),p(e,r),g[a].m(r,null),p(e,d),_=!0},p(y,k){(!_||k&1)&&l!==(l=y[16].label+"")&&M(i,l),(!_||k&1&&s!==(s=y[16].name))&&m(n,"for",s);let $=a;a=v(y,k),a===$?g[a].p(y,k):(_e(),T(g[$],1,1,()=>{g[$]=null}),me(),f=g[a],f?f.p(y,k):(f=g[a]=h[a](y),f.c()),C(f,1),f.m(r,null))},i(y){_||(C(f),_=!0)},o(y){T(f),_=!1},d(y){y&&w(e),g[a].d()}}}function ni(t){let e,n,l,i,s;function o(){t[13].call(e,t[16])}return{c(){e=b("input"),m(e,"type","text"),m(e,"class","input is-small is-wide"),m(e,"id",n=t[16].name),m(e,"name",l=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&n!==(n=t[16].name)&&m(e,"id",n),c&1&&l!==(l=t[16].name)&&m(e,"name",l),c&3&&e.value!==t[1][t[16].name]&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function ii(t){let e,n,l,i,s;function o(){t[12].call(e,t[16])}return{c(){e=b("input"),m(e,"type","number"),m(e,"class","input is-small is-wide"),m(e,"id",n=t[16].name),m(e,"name",l=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&n!==(n=t[16].name)&&m(e,"id",n),c&1&&l!==(l=t[16].name)&&m(e,"name",l),c&3&&pt(e.value)!==t[1][t[16].name]&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function si(t){let e,n,l,i,s;function o(){t[11].call(e,t[16])}return{c(){e=b("input"),m(e,"type","date"),m(e,"class","input is-small is-wide"),m(e,"id",n=t[16].name),m(e,"name",l=t[16].name)},m(r,c){S(r,e,c),ie(e,t[1][t[16].name]),i||(s=F(e,"input",o),i=!0)},p(r,c){t=r,c&1&&n!==(n=t[16].name)&&m(e,"id",n),c&1&&l!==(l=t[16].name)&&m(e,"name",l),c&3&&ie(e,t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function oi(t){let e,n,l,i,s;function o(){t[10].call(e,t[16])}return{c(){e=b("input"),m(e,"type","checkbox"),m(e,"id",n=t[16].name),m(e,"name",l=t[16].name)},m(r,c){S(r,e,c),e.checked=t[1][t[16].name],i||(s=F(e,"change",o),i=!0)},p(r,c){t=r,c&1&&n!==(n=t[16].name)&&m(e,"id",n),c&1&&l!==(l=t[16].name)&&m(e,"name",l),c&3&&(e.checked=t[1][t[16].name])},i:A,o:A,d(r){r&&w(e),i=!1,s()}}}function ri(t){let e,n,l,i,s;const o=[ui,ci],r=[];function c(u,a){return a&1&&(e=null),e==null&&(e=!!ai(u[16])),e?0:1}return n=c(t,-1),l=r[n]=o[n](t),{c(){l.c(),i=H()},m(u,a){r[n].m(u,a),S(u,i,a),s=!0},p(u,a){let f=n;n=c(u,a),n===f?r[n].p(u,a):(_e(),T(r[f],1,1,()=>{r[f]=null}),me(),l=r[n],l?l.p(u,a):(l=r[n]=o[n](u),l.c()),C(l,1),l.m(i.parentNode,i))},i(u){s||(C(l),s=!0)},o(u){T(l),s=!1},d(u){r[n].d(u),u&&w(i)}}}function ci(t){let e,n,l=!t[5](t[16]),i,s,o,r,c,u,a=l&&tl(),f=t[16].choices,d=[];for(let v=0;v<f.length;v+=1)d[v]=ll(Zt(t,f,v));let _=[{id:s=t[16].name},{name:o=t[16].name},{class:"is-wide"},t[5](t[16])?{size:3,multiple:!0}:{}],h={};for(let v=0;v<_.length;v+=1)h=ot(h,_[v]);function g(){t[9].call(n,t[16])}return{c(){e=b("div"),n=b("select"),a&&a.c(),i=H();for(let v=0;v<d.length;v+=1)d[v].c();mt(n,h),t[1][t[16].name]===void 0&&ye(g),fe(n,"svelte-wwfwxh",!0),m(e,"class",r="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))},m(v,y){S(v,e,y),p(e,n),a&&a.m(n,null),p(n,i);for(let k=0;k<d.length;k+=1)d[k]&&d[k].m(n,null);"value"in h&&(h.multiple?ht:Be)(n,h.value),n.autofocus&&n.focus(),Be(n,t[1][t[16].name],!0),c||(u=F(n,"change",g),c=!0)},p(v,y){if(t=v,y&1&&(l=!t[5](t[16])),l?a?a.p(t,y):(a=tl(),a.c(),a.m(n,i)):a&&(a.d(1),a=null),y&1){f=t[16].choices;let k;for(k=0;k<f.length;k+=1){const $=Zt(t,f,k);d[k]?d[k].p($,y):(d[k]=ll($),d[k].c(),d[k].m(n,null))}for(;k<d.length;k+=1)d[k].d(1);d.length=f.length}mt(n,h=an(_,[y&1&&s!==(s=t[16].name)&&{id:s},y&1&&o!==(o=t[16].name)&&{name:o},{class:"is-wide"},y&1&&(t[5](t[16])?{size:3,multiple:!0}:{})])),y&33&&"value"in h&&(h.multiple?ht:Be)(n,h.value),y&3&&Be(n,t[1][t[16].name]),fe(n,"svelte-wwfwxh",!0),y&1&&r!==(r="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))&&m(e,"class",r)},i:A,o:A,d(v){v&&w(e),a&&a.d(),x(d,v),c=!1,u()}}}function ui(t){let e,n;function l(...i){return t[8](t[16],...i)}return e=new li({props:{items:t[16].choices,name:t[16].name,id:t[16].name}}),e.$on("select",l),{c(){J(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){t=i;const o={};s&1&&(o.items=t[16].choices),s&1&&(o.name=t[16].name),s&1&&(o.id=t[16].name),e.$set(o)},i(i){n||(C(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){q(e,i)}}}function tl(t){let e;return{c(){e=b("option"),e.textContent=`${j==="en"?"Select":"Sélectionner"} ...
                                                    `,e.__value="",e.value=e.__value,e.disabled=!0,e.selected=!0,m(e,"class","faded")},m(n,l){S(n,e,l)},p:A,d(n){n&&w(e)}}}function ll(t){let e,n=t[19].label+"",l,i;return{c(){e=b("option"),l=O(n),e.__value=i=t[19].id,e.value=e.__value},m(s,o){S(s,e,o),p(e,l)},p(s,o){o&1&&n!==(n=s[19].label+"")&&M(l,n),o&1&&i!==(i=s[19].id)&&(e.__value=i,e.value=e.__value)},d(s){s&&w(e)}}}function nl(t){let e,n,l=t[16].name!=="search"&&el(t);return{c(){l&&l.c(),e=H()},m(i,s){l&&l.m(i,s),S(i,e,s),n=!0},p(i,s){i[16].name!=="search"?l?(l.p(i,s),s&1&&C(l,1)):(l=el(i),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(_e(),T(l,1,1,()=>{l=null}),me())},i(i){n||(C(l),n=!0)},o(i){T(l),n=!1},d(i){l&&l.d(i),i&&w(e)}}}function fi(t){let e,n,l=t[0].length>0&&Yt(t);return{c(){l&&l.c(),e=H()},m(i,s){l&&l.m(i,s),S(i,e,s),n=!0},p(i,[s]){i[0].length>0?l?(l.p(i,s),s&1&&C(l,1)):(l=Yt(i),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(_e(),T(l,1,1,()=>{l=null}),me())},i(i){n||(C(l),n=!0)},o(i){T(l),n=!1},d(i){l&&l.d(i),i&&w(e)}}}function ai(t){return t.type.includes("ChoiceField")&&t.choices.length>5}function di(t,e,n){let l,{recordsStore:i}=e;const{recordSearch:s,searchParams:o}=i;re(t,o,$=>n(14,l=$));let{searchFields:r=[]}=e,c={};Ql(()=>{const $=l??new URLSearchParams(window.location.search);r.forEach(E=>{n(1,c[E.name]=$.get(E.name)||E.initial||"",c)})});function u($){$.preventDefault(),s(c)}function a($,E){n(1,c[$.name]=E.detail.id,c)}const f=$=>$.type.includes("Multiple");function d($){c[$.name]=this.value,n(1,c),n(0,r)}const _=($,E)=>a($,E);function h($){c[$.name]=Kl(this),n(1,c),n(0,r)}function g($){c[$.name]=this.checked,n(1,c),n(0,r)}function v($){c[$.name]=this.value,n(1,c),n(0,r)}function y($){c[$.name]=pt(this.value),n(1,c),n(0,r)}function k($){c[$.name]=this.value,n(1,c),n(0,r)}return t.$$set=$=>{"recordsStore"in $&&n(6,i=$.recordsStore),"searchFields"in $&&n(0,r=$.searchFields)},[r,c,o,u,a,f,i,d,_,h,g,v,y,k]}class _i extends te{constructor(e){super(),ee(this,e,di,fi,K,{recordsStore:6,searchFields:0})}}function il(t){let e,n,l,i,s,o,r,c,u,a=t[5]>1&&sl(t),f=t[5]<t[3]&&cl(t);return{c(){e=b("nav"),n=b("ul"),a&&a.c(),l=L(),i=b("li"),s=b("a"),o=O(t[5]),r=L(),f&&f.c(),m(s,"class","pagination-link is-current"),m(s,"href",null),m(n,"class","pagination-list ml-0"),m(e,"class","pagination is-centered mb-2"),m(e,"aria-label","pagination")},m(d,_){S(d,e,_),p(e,n),a&&a.m(n,null),p(n,l),p(n,i),p(i,s),p(s,o),p(n,r),f&&f.m(n,null),c||(u=F(s,"click",Oe(t[9])),c=!0)},p(d,_){d[5]>1?a?a.p(d,_):(a=sl(d),a.c(),a.m(n,l)):a&&(a.d(1),a=null),_&32&&M(o,d[5]),d[5]<d[3]?f?f.p(d,_):(f=cl(d),f.c(),f.m(n,null)):f&&(f.d(1),f=null)},d(d){d&&w(e),a&&a.d(),f&&f.d(),c=!1,u()}}}function sl(t){let e,n,l,i,s,o,r=t[5]-1>1&&ol(t);return{c(){e=b("li"),n=b("a"),n.textContent="1",l=L(),r&&r.c(),i=H(),m(n,"class","pagination-link"),m(n,"href",null)},m(c,u){S(c,e,u),p(e,n),S(c,l,u),r&&r.m(c,u),S(c,i,u),s||(o=F(n,"click",Oe(t[7])),s=!0)},p(c,u){c[5]-1>1?r?r.p(c,u):(r=ol(c),r.c(),r.m(i.parentNode,i)):r&&(r.d(1),r=null)},d(c){c&&w(e),c&&w(l),r&&r.d(c),c&&w(i),s=!1,o()}}}function ol(t){let e,n,l,i=t[5]-1+"",s,o,r,c=t[5]-1>2&&rl();return{c(){c&&c.c(),e=L(),n=b("li"),l=b("a"),s=O(i),m(l,"class","pagination-link"),m(l,"href",null)},m(u,a){c&&c.m(u,a),S(u,e,a),S(u,n,a),p(n,l),p(l,s),o||(r=F(l,"click",Oe(t[8])),o=!0)},p(u,a){u[5]-1>2?c||(c=rl(),c.c(),c.m(e.parentNode,e)):c&&(c.d(1),c=null),a&32&&i!==(i=u[5]-1+"")&&M(s,i)},d(u){c&&c.d(u),u&&w(e),u&&w(n),o=!1,r()}}}function rl(t){let e;return{c(){e=b("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function cl(t){let e,n,l,i,s,o,r=t[5]+1<t[3]&&ul(t);return{c(){r&&r.c(),e=L(),n=b("li"),l=b("a"),i=O(t[3]),m(l,"class","pagination-link"),m(l,"href",null)},m(c,u){r&&r.m(c,u),S(c,e,u),S(c,n,u),p(n,l),p(l,i),s||(o=F(l,"click",Oe(t[11])),s=!0)},p(c,u){c[5]+1<c[3]?r?r.p(c,u):(r=ul(c),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),u&8&&M(i,c[3])},d(c){r&&r.d(c),c&&w(e),c&&w(n),s=!1,o()}}}function ul(t){let e,n,l=t[5]+1+"",i,s,o,r,c,u=t[5]+2<t[3]&&fl();return{c(){e=b("li"),n=b("a"),i=O(l),s=L(),u&&u.c(),o=H(),m(n,"class","pagination-link"),m(n,"href",null)},m(a,f){S(a,e,f),p(e,n),p(n,i),S(a,s,f),u&&u.m(a,f),S(a,o,f),r||(c=F(n,"click",Oe(t[10])),r=!0)},p(a,f){f&32&&l!==(l=a[5]+1+"")&&M(i,l),a[5]+2<a[3]?u||(u=fl(),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},d(a){a&&w(e),a&&w(s),u&&u.d(a),a&&w(o),r=!1,c()}}}function fl(t){let e;return{c(){e=b("li"),e.innerHTML='<span class="pagination-ellipsis">…</span>'},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function mi(t){let e,n,l=t[5]*t[2]-t[2]+1+"",i,s,o=Math.min(t[5]*t[2],t[1])+"",r,c,u,a,f=t[4]&&il(t);return{c(){f&&f.c(),e=L(),n=b("div"),i=O(l),s=O(" - "),r=O(o),c=O(" / "),u=O(t[1]),m(n,"class",a="is-size-7 is-center mb-4 "+(t[4]?"":"mt-4"))},m(d,_){f&&f.m(d,_),S(d,e,_),S(d,n,_),p(n,i),p(n,s),p(n,r),p(n,c),p(n,u)},p(d,[_]){d[4]?f?f.p(d,_):(f=il(d),f.c(),f.m(e.parentNode,e)):f&&(f.d(1),f=null),_&36&&l!==(l=d[5]*d[2]-d[2]+1+"")&&M(i,l),_&38&&o!==(o=Math.min(d[5]*d[2],d[1])+"")&&M(r,o),_&2&&M(u,d[1]),_&16&&a!==(a="is-size-7 is-center mb-4 "+(d[4]?"":"mt-4"))&&m(n,"class",a)},i:A,o:A,d(d){f&&f.d(d),d&&w(e),d&&w(n)}}}function pi(t,e,n){let l,i,s,{store:o}=e;const{currentPage:r}=o;re(t,r,g=>n(5,s=g));let{nbOfItems:c}=e,{pageLength:u=pn}=e;const a=()=>o.handlePageUpdate(1),f=()=>o.handlePageUpdate(s-1),d=()=>o.handlePageUpdate(s),_=()=>o.handlePageUpdate(s+1),h=()=>o.handlePageUpdate(l);return t.$$set=g=>{"store"in g&&n(0,o=g.store),"nbOfItems"in g&&n(1,c=g.nbOfItems),"pageLength"in g&&n(2,u=g.pageLength)},t.$$.update=()=>{t.$$.dirty&6&&n(3,l=u>0?Math.ceil(c/u):1),t.$$.dirty&14&&n(4,i=l>1||c>u)},[o,c,u,l,i,s,r,a,f,d,_,h]}class al extends te{constructor(e){super(),ee(this,e,pi,mi,K,{store:0,nbOfItems:1,pageLength:2})}}const hi=t=>({}),dl=t=>({});function bi(t){let e,n,l,i,s,o,r,c,u,a,f,d,_,h,g,v,y,k,$,E,R;const P=t[1].content,N=Me(P,t,t[0],dl);return{c(){e=b("button"),n=L(),l=b("div"),i=b("div"),s=L(),o=b("div"),r=b("div"),r.innerHTML=`<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div>
            <button class="delete media-left" aria-label="close"></button>`,c=L(),u=b("section"),a=b("div"),f=L(),d=b("div"),N&&N.c(),_=L(),h=b("footer"),g=b("div"),v=b("button"),v.textContent=`${j==="en"?"Abort":"Retour"}`,y=L(),k=b("button"),k.textContent="OK",m(e,"id","hidden-msg-btn"),m(e,"data-target","msg-modal"),e.hidden=!0,m(i,"id","modal-bkg"),m(i,"class","modal-background"),m(r,"class","modal-card-head media mb-0"),m(a,"id","modal-msg"),m(d,"class","py-3"),m(u,"id","modal-body"),m(u,"class","modal-card-body"),m(v,"id","cancel-btn"),m(v,"class","button is-link is-light button-close"),m(k,"id","ok-btn"),m(k,"class","button is-link button-close"),m(g,"class","buttons"),m(h,"id","modal-footer"),m(h,"class","modal-card-foot is-center pt-3"),h.hidden=!0,m(o,"class","modal-content"),m(l,"id","msg-modal"),m(l,"class","modal fade"),m(l,"tabindex","-1"),m(l,"aria-labelledby","selection-modal-label"),m(l,"aria-hidden","true")},m(D,U){S(D,e,U),S(D,n,U),S(D,l,U),p(l,i),p(l,s),p(l,o),p(o,r),p(o,c),p(o,u),p(u,a),p(u,f),p(u,d),N&&N.m(d,null),p(o,_),p(o,h),p(h,g),p(g,v),p(g,y),p(g,k),$=!0,E||(R=[Fe(Nt.call(null,e)),Fe(Pt.call(null,l))],E=!0)},p(D,[U]){N&&N.p&&(!$||U&1)&&Ue(N,P,D,D[0],$?Te(P,D[0],U,hi):De(D[0]),dl)},i(D){$||(C(N,D),$=!0)},o(D){T(N,D),$=!1},d(D){D&&w(e),D&&w(n),D&&w(l),N&&N.d(D),E=!1,G(R)}}}function gi(t,e,n){let{$$slots:l={},$$scope:i}=e;return t.$$set=s=>{"$$scope"in s&&n(0,i=s.$$scope)},[i,l]}class _l extends te{constructor(e){super(),ee(this,e,gi,bi,K,{})}}function ki(t){const e=t,n=he(1),l=he([]),i=he(0),s=he(new URLSearchParams(window.location.search));Ln(n,"p");async function o(){const f=je(s);f.set("p",`${je(n)}`);try{const _=await(await fetch(`${window.location.origin}/search/${e}/?${f.toString()}`)).json();l.set(_.results),i.set(_.count),n.set(_.current_page),f.set("p",String(je(n)));const h=`${window.location.pathname}?${f.toString()}`;return history.pushState(null,"",h),_}catch(d){throw console.error("Error fetching page:",d),d}}let r=o();function c(f){On(f,n,"p"),r=o()}function u(f){const d=new URLSearchParams(f);s.set(d),c(1)}function a(f){l.update(d=>d.filter(_=>_.id!==f))}return{currentPage:n,pageRecords:l,resultPage:r,resultNumber:i,fetchPage:o,handlePageUpdate:c,recordSearch:u,remove:a}}function ml(t,e,n){const l=t.slice();return l[8]=e[n][0],l[9]=e[n][1],l}function pl(t,e,n){const l=t.slice();return l[12]=e[n][0],l[13]=e[n][1],l}function hl(t,e,n){const l=t.slice();return l[12]=e[n][0],l[13]=e[n][1],l}function vi(t){let e=t[2]?"Retirer de la":"Charger dans la",n,l;return{c(){n=O(e),l=O(" sélection")},m(i,s){S(i,n,s),S(i,l,s)},p(i,s){s&4&&e!==(e=i[2]?"Retirer de la":"Charger dans la")&&M(n,e)},d(i){i&&w(n),i&&w(l)}}}function wi(t){let e=t[2]?"Unload from":"Load to",n,l;return{c(){n=O(e),l=O(" selection")},m(i,s){S(i,n,s),S(i,l,s)},p(i,s){s&4&&e!==(e=i[2]?"Unload from":"Load to")&&M(n,e)},d(i){i&&w(n),i&&w(l)}}}function Si(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function yi(t){let e;return{c(){e=ve("path"),m(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(n,l){S(n,e,l)},d(n){n&&w(e)}}}function Ei(t){let e,n,l,i,s,o,r,c,u,a=j==="en"?"Export":"Exporter",f,d,_;function h(E,R){return j==="en"?wi:vi}let v=h()(t);function y(E,R){return E[2]?yi:Si}let k=y(t),$=k(t);return{c(){e=b("div"),n=b("button"),v.c(),l=L(),i=ve("svg"),$.c(),s=L(),o=b("button"),r=b("span"),c=b("i"),u=L(),f=O(a),m(i,"xmlns","http://www.w3.org/2000/svg"),m(i,"viewBox","0 0 384 512"),m(n,"class","button"),fe(n,"is-inverted",t[2]),m(c,"class","fa-solid fa-file-export"),m(o,"class","button is-link"),fe(o,"is-inverted",t[2]),m(e,"slot","buttons")},m(E,R){S(E,e,R),p(e,n),v.m(n,null),p(n,l),p(n,i),$.m(i,null),p(e,s),p(e,o),p(o,r),p(r,c),p(r,u),p(r,f),d||(_=[F(n,"click",t[6]),F(o,"click",t[7])],d=!0)},p(E,R){v.p(E,R),k!==(k=y(E))&&($.d(1),$=k(E),$&&($.c(),$.m(i,null))),R&4&&fe(n,"is-inverted",E[2]),R&4&&fe(o,"is-inverted",E[2])},d(E){E&&w(e),v.d(),$.d(),d=!1,G(_)}}}function bl(t){let e,n=t[13].task_type+"",l,i,s=t[12]+"",o,r,c,u;return{c(){e=b("a"),l=O(n),i=O(" #"),o=O(s),r=L(),m(e,"href",c=t[13].url),m(e,"class",u="tag is-rounded is-small "+vl(t[13].status))},m(a,f){S(a,e,f),p(e,l),p(e,i),p(e,o),p(e,r)},p(a,f){f&1&&n!==(n=a[13].task_type+"")&&M(l,n),f&1&&s!==(s=a[12]+"")&&M(o,s),f&1&&c!==(c=a[13].url)&&m(e,"href",c),f&1&&u!==(u="tag is-rounded is-small "+vl(a[13].status))&&m(e,"class",u)},d(a){a&&w(e)}}}function gl(t){let e,n,l=t[8]+"",i,s,o=t[12]+"",r,c,u=t[13].title+"",a,f;return{c(){e=b("div"),n=b("span"),i=O(l),s=O(" #"),r=O(o),c=L(),a=O(u),f=L(),m(n,"class","tag is-rounded is-accent")},m(d,_){S(d,e,_),p(e,n),p(n,i),p(n,s),p(n,r),p(e,c),p(e,a),p(e,f)},p(d,_){_&1&&l!==(l=d[8]+"")&&M(i,l),_&1&&o!==(o=d[12]+"")&&M(r,o),_&1&&u!==(u=d[13].title+"")&&M(a,u)},d(d){d&&w(e)}}}function kl(t){let e,n=Object.entries(t[9]),l=[];for(let i=0;i<n.length;i+=1)l[i]=gl(pl(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=H()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){n=Object.entries(i[9]);let o;for(o=0;o<n.length;o+=1){const r=pl(i,n,o);l[o]?l[o].p(r,s):(l[o]=gl(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){x(l,i),i&&w(e)}}}function $i(t){let e,n,l,i,s=Object.entries(t[0].treatments),o=[];for(let u=0;u<s.length;u+=1)o[u]=bl(hl(t,s,u));let r=Object.entries(t[0].selection.selected),c=[];for(let u=0;u<r.length;u+=1)c[u]=kl(ml(t,r,u));return{c(){e=b("div"),n=b("div");for(let u=0;u<o.length;u+=1)o[u].c();l=L(),i=b("div");for(let u=0;u<c.length;u+=1)c[u].c();m(n,"class","tags container"),m(i,"class","grid"),m(e,"slot","body")},m(u,a){S(u,e,a),p(e,n);for(let f=0;f<o.length;f+=1)o[f]&&o[f].m(n,null);p(e,l),p(e,i);for(let f=0;f<c.length;f+=1)c[f]&&c[f].m(i,null)},p(u,a){if(a&1){s=Object.entries(u[0].treatments);let f;for(f=0;f<s.length;f+=1){const d=hl(u,s,f);o[f]?o[f].p(d,a):(o[f]=bl(d),o[f].c(),o[f].m(n,null))}for(;f<o.length;f+=1)o[f].d(1);o.length=s.length}if(a&1){r=Object.entries(u[0].selection.selected);let f;for(f=0;f<r.length;f+=1){const d=ml(u,r,f);c[f]?c[f].p(d,a):(c[f]=kl(d),c[f].c(),c[f].m(i,null))}for(;f<c.length;f+=1)c[f].d(1);c.length=r.length}},d(u){u&&w(e),x(o,u),x(c,u)}}}function Li(t){let e,n,l,i;return e=new _l({}),l=new lt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[$i],buttons:[Ei]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),n=L(),J(l.$$.fragment)},m(s,o){V(e,s,o),S(s,n,o),V(l,s,o),i=!0},p(s,[o]){const r={};o&1&&(r.item=s[0]),o&2&&(r.recordsStore=s[1]),o&262149&&(r.$$scope={dirty:o,ctx:s}),l.$set(r)},i(s){i||(C(e.$$.fragment,s),C(l.$$.fragment,s),i=!0)},o(s){T(e.$$.fragment,s),T(l.$$.fragment,s),i=!1},d(s){q(e,s),s&&w(n),q(l,s)}}}function vl(t){return t?t==="CANCELLED"?"is-info":t==="ERROR"?"is-danger":t==="IN PROGRESS"?"is-warning":t==="PENDING"||t==="STARTED"?"is-info":t==="SUCCESS"?"is-success":"is-dark":"is-dark"}function Oi(t,e,n){let l,i,{item:s}=e,{recordsStore:o}=e;const{isSetSelected:r}=be;re(t,r,f=>n(5,i=f));async function c(f){let d=j==="en"?"You can export the contents of this set as a ZIP archive or reach our JSON API.":"Vous pouvez exporter le contenu de cet ensemble en archive ZIP ou interroger notre API JSON.",_=document.createElement("div");_.style="display: flex; gap: 1rem; align-items: center; justify-content: center; margin-top: 1em;";let h=document.createElement("a");h.classList.add("button","is-link"),h.innerHTML="<span>"+(j==="en"?"JSON API":"API JSON")+"</span>",h.href=`/${se}/document-set/${f.id}/json`,h.target="_blank";let g=document.createElement("a");g.classList.add("button","is-link"),g.innerHTML="<span>ZIP</span>",g.href=`/${se}/document-set/${f.id}/zip`,g.target="_blank",_.appendChild(h),_.appendChild(g),await Re(d+"<br/>"+_.outerHTML,"Export",!1)}const u=()=>be.toggleSet(s),a=()=>c(s);return t.$$set=f=>{"item"in f&&n(0,s=f.item),"recordsStore"in f&&n(1,o=f.recordsStore)},t.$$.update=()=>{t.$$.dirty&33&&n(2,l=i(s))},[s,o,l,r,c,i,u,a]}let Pi=class extends te{constructor(e){super(),ee(this,e,Oi,Li,K,{item:0,recordsStore:1})}};function wl(t,e,n){const l=t.slice();return l[5]=e[n][0],l[6]=e[n][1],l}function Sl(t,e,n){const l=t.slice();return l[9]=e[n][0],l[10]=e[n][1],l}function Ni(t){let e,n,l,i,s;return{c(){e=b("a"),n=b("i"),l=L(),i=b("span"),i.textContent=`${j==="en"?"Relaunch same treatment":"Relancer le même traitement"}`,m(n,"class","fa-solid fa-arrow-rotate-left"),m(e,"href",s="add/"+t[0].query_parameters),m(e,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),m(e,"title",j==="en"?"Relaunch same treatment":"Relancer le même traitement")},m(o,r){S(o,e,r),p(e,n),p(e,l),p(e,i)},p(o,r){r&1&&s!==(s="add/"+o[0].query_parameters)&&m(e,"href",s)},d(o){o&&w(e)}}}function Ii(t){let e,n,l,i,s,o;return{c(){e=b("button"),n=b("i"),l=L(),i=b("span"),i.textContent=`${j==="en"?"Cancel treatment":"Annuler le traitement"}`,m(n,"class","fa-solid fa-ban"),m(e,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),m(e,"title",j==="en"?"Cancel treatment":"Annuler le traitement")},m(r,c){S(r,e,c),p(e,n),p(e,l),p(e,i),s||(o=F(e,"click",t[4]),s=!0)},p:A,d(r){r&&w(e),s=!1,o()}}}function Ri(t){let e,n;return{c(){e=b("span"),n=O(t[2]),m(e,"class","tag is-info p-1 mb-1")},m(l,i){S(l,e,i),p(e,n)},p(l,i){i&4&&M(n,l[2])},d(l){l&&w(e)}}}function Ai(t){let e,n,l;return{c(){e=b("span"),n=O(t[2]),m(e,"class","tag is-danger p-1 mb-1"),m(e,"title",l=t[0].info||"Unknown error")},m(i,s){S(i,e,s),p(e,n)},p(i,s){s&4&&M(n,i[2]),s&1&&l!==(l=i[0].info||"Unknown error")&&m(e,"title",l)},d(i){i&&w(e)}}}function Ci(t){let e,n;return{c(){e=b("span"),n=O(t[2]),m(e,"class","tag is-success p-1 mb-1")},m(l,i){S(l,e,i),p(e,n)},p(l,i){i&4&&M(n,l[2])},d(l){l&&w(e)}}}function ji(t){let e,n;function l(u,a){if(!u[3]&&u[0].api_tracking_id)return Ii;if(u[3]&&u[2]==="ERROR")return Ni}let i=l(t),s=i&&i(t);function o(u,a){return u[2]==="SUCCESS"?Ci:u[2]==="ERROR"?Ai:Ri}let r=o(t),c=r(t);return{c(){e=b("div"),s&&s.c(),n=L(),c.c(),m(e,"slot","buttons")},m(u,a){S(u,e,a),s&&s.m(e,null),p(e,n),c.m(e,null)},p(u,a){i===(i=l(u))&&s?s.p(u,a):(s&&s.d(1),s=i&&i(u),s&&(s.c(),s.m(e,n))),r===(r=o(u))&&c?c.p(u,a):(c.d(1),c=r(u),c&&(c.c(),c.m(e,null)))},d(u){u&&w(e),s&&s.d(),c.d()}}}function yl(t){let e,n=Object.entries(t[0].selection.selected),l=[];for(let i=0;i<n.length;i+=1)l[i]=$l(wl(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=H()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){n=Object.entries(i[0].selection.selected);let o;for(o=0;o<n.length;o+=1){const r=wl(i,n,o);l[o]?l[o].p(r,s):(l[o]=$l(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){x(l,i),i&&w(e)}}}function El(t){let e,n,l=t[5]+"",i,s,o=t[9]+"",r,c,u=t[10].title+"",a,f;return{c(){e=b("div"),n=b("span"),i=O(l),s=O(" #"),r=O(o),c=L(),a=O(u),f=L(),m(n,"class","tag is-rounded is-accent")},m(d,_){S(d,e,_),p(e,n),p(n,i),p(n,s),p(n,r),p(e,c),p(e,a),p(e,f)},p(d,_){_&1&&l!==(l=d[5]+"")&&M(i,l),_&1&&o!==(o=d[9]+"")&&M(r,o),_&1&&u!==(u=d[10].title+"")&&M(a,u)},d(d){d&&w(e)}}}function $l(t){let e,n=Object.entries(t[6]),l=[];for(let i=0;i<n.length;i+=1)l[i]=El(Sl(t,n,i));return{c(){for(let i=0;i<l.length;i+=1)l[i].c();e=H()},m(i,s){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(i,s);S(i,e,s)},p(i,s){if(s&1){n=Object.entries(i[6]);let o;for(o=0;o<n.length;o+=1){const r=Sl(i,n,o);l[o]?l[o].p(r,s):(l[o]=El(r),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(i){x(l,i),i&&w(e)}}}function Mi(t){let e,n=t[0].hasOwnProperty("selection")&&t[0].selection.hasOwnProperty("selected")&&t[0].selection.selected,l=n&&yl(t);return{c(){e=b("div"),l&&l.c(),m(e,"slot","body"),m(e,"class","pt-2 grid")},m(i,s){S(i,e,s),l&&l.m(e,null)},p(i,s){s&1&&(n=i[0].hasOwnProperty("selection")&&i[0].selection.hasOwnProperty("selected")&&i[0].selection.selected),n?l?l.p(i,s):(l=yl(i),l.c(),l.m(e,null)):l&&(l.d(1),l=null)},d(i){i&&w(e),l&&l.d()}}}function Ti(t){let e,n;return e=new lt({props:{item:t[0],recordsStore:t[1],$$slots:{body:[Mi],buttons:[ji]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,[i]){const s={};i&1&&(s.item=l[0]),i&2&&(s.recordsStore=l[1]),i&8205&&(s.$$scope={dirty:i,ctx:l}),e.$set(s)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Ui(t,e,n){let l,i,{item:s}=e,{recordsStore:o}=e;async function r(){if(!await Re(j==="en"?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?",j==="en"?"Confirm cancel":"Confirmer l'annulation",!0))return;await Ot(`/${se}/treatment/${s.id}/cancel`)?(n(3,l=!0),n(2,i="CANCELLED")):await Re(j==="en"?"Failed to cancel treatment":"Erreur lors de l'annulation du traitement",j==="en"?"Error":"Erreur")}return t.$$set=c=>{"item"in c&&n(0,s=c.item),"recordsStore"in c&&n(1,o=c.recordsStore)},t.$$.update=()=>{t.$$.dirty&1&&n(3,l=s.is_finished),t.$$.dirty&1&&n(2,i=s.status)},[s,o,i,l,r]}class Di extends te{constructor(e){super(),ee(this,e,Ui,Ti,K,{item:0,recordsStore:1})}}function Ll(t,e,n){const l=t.slice();return l[17]=e[n][0],l[18]=e[n][1],l}function Ol(t,e,n){const l=t.slice();return l[21]=e[n][0],l[22]=e[n][1],l}function Pl(t,e,n){const l=t.slice();return l[26]=e[n],l}function Nl(t){let e,n,l,i,s;return{c(){e=b("span"),n=b("a"),l=b("i"),i=L(),s=b("span"),s.textContent=`${j==="en"?"Add":"Ajouter"}`,m(l,"class","fa-solid fa-plus"),m(n,"href",t[12]),m(n,"class","button is-rounded is-primary mb-4"),m(n,"title",j==="en"?"Add":"Ajouter"),m(e,"class","is-right")},m(o,r){S(o,e,r),p(e,n),p(n,l),p(n,i),p(n,s)},p:A,d(o){o&&w(e)}}}function Fi(t){let e,n=j==="en"?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",l,i,s=t[29]+"",o;return{c(){e=b("div"),l=O(n),i=L(),o=O(s),m(e,"class","faded is-center")},m(r,c){S(r,e,c),p(e,l),p(e,i),p(e,o)},p:A,i:A,o:A,d(r){r&&w(e)}}}function Bi(t){let e,n,l=t[4].length!==0&&Il(t);return{c(){l&&l.c(),e=H()},m(i,s){l&&l.m(i,s),S(i,e,s),n=!0},p(i,s){i[4].length!==0?l?(l.p(i,s),s&16&&C(l,1)):(l=Il(i),l.c(),C(l,1),l.m(e.parentNode,e)):l&&(_e(),T(l,1,1,()=>{l=null}),me())},i(i){n||(C(l),n=!0)},o(i){T(l),n=!1},d(i){l&&l.d(i),i&&w(e)}}}function Il(t){let e,n,l,i=[],s=new Map,o,r,c;e=new al({props:{store:t[8],nbOfItems:t[5]}});let u=t[4];const a=d=>d[26].id;for(let d=0;d<u.length;d+=1){let _=Pl(t,u,d),h=a(_);s.set(h,i[d]=Al(h,_))}let f=null;return u.length||(f=Rl()),r=new al({props:{store:t[8],nbOfItems:t[5]}}),{c(){J(e.$$.fragment),n=L(),l=b("div");for(let d=0;d<i.length;d+=1)i[d].c();f&&f.c(),o=L(),J(r.$$.fragment)},m(d,_){V(e,d,_),S(d,n,_),S(d,l,_);for(let h=0;h<i.length;h+=1)i[h]&&i[h].m(l,null);f&&f.m(l,null),S(d,o,_),V(r,d,_),c=!0},p(d,_){const h={};_&32&&(h.nbOfItems=d[5]),e.$set(h),_&272&&(u=d[4],_e(),i=fn(i,_,a,1,d,u,s,l,un,Al,null,Pl),me(),!u.length&&f?f.p(d,_):u.length?f&&(f.d(1),f=null):(f=Rl(),f.c(),f.m(l,null)));const g={};_&32&&(g.nbOfItems=d[5]),r.$set(g)},i(d){if(!c){C(e.$$.fragment,d);for(let _=0;_<u.length;_+=1)C(i[_]);C(r.$$.fragment,d),c=!0}},o(d){T(e.$$.fragment,d);for(let _=0;_<i.length;_+=1)T(i[_]);T(r.$$.fragment,d),c=!1},d(d){q(e,d),d&&w(n),d&&w(l);for(let _=0;_<i.length;_+=1)i[_].d();f&&f.d(),d&&w(o),q(r,d)}}}function Rl(t){let e;return{c(){e=b("p"),e.textContent=`${j==="en"?"No records found":"Aucun enregistrement trouvé"}`},m(n,l){S(n,e,l)},p:A,d(n){n&&w(e)}}}function zi(t){let e,n;return e=new Bn({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,i){const s={};i&16&&(s.item=l[26]),e.$set(s)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Hi(t){let e,n;return e=new Pi({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,i){const s={};i&16&&(s.item=l[26]),e.$set(s)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Vi(t){let e,n;return e=new Di({props:{item:t[26],recordsStore:t[8]}}),{c(){J(e.$$.fragment)},m(l,i){V(e,l,i),n=!0},p(l,i){const s={};i&16&&(s.item=l[26]),e.$set(s)},i(l){n||(C(e.$$.fragment,l),n=!0)},o(l){T(e.$$.fragment,l),n=!1},d(l){q(e,l)}}}function Al(t,e){let n,l,i,s,o,r,c;const u=[Vi,Hi,zi],a=[];function f(d,_){return _&16&&(l=null),_&16&&(i=null),l==null&&(l=!!d[26].class.includes("Treatment")),l?0:(i==null&&(i=!!d[26].class.includes("Set")),i?1:2)}return s=f(e,-1),o=a[s]=u[s](e),{key:t,first:null,c(){n=H(),o.c(),r=H(),this.first=n},m(d,_){S(d,n,_),a[s].m(d,_),S(d,r,_),c=!0},p(d,_){e=d;let h=s;s=f(e,_),s===h?a[s].p(e,_):(_e(),T(a[h],1,1,()=>{a[h]=null}),me(),o=a[s],o?o.p(e,_):(o=a[s]=u[s](e),o.c()),C(o,1),o.m(r.parentNode,r))},i(d){c||(C(o),c=!0)},o(d){T(o),c=!1},d(d){d&&w(n),a[s].d(d),d&&w(r)}}}function qi(t){let e;return{c(){e=b("div"),e.textContent=`${j==="en"?"Retrieving records...":"Récupération des enregistrements..."}`,m(e,"class","faded is-center")},m(n,l){S(n,e,l)},p:A,i:A,o:A,d(n){n&&w(e)}}}function Cl(t){let e,n,l;return{c(){e=b("tr"),n=b("td"),n.textContent=`${j==="en"?"No documents in selection":"Aucun document sélectionné"}`,l=L()},m(i,s){S(i,e,s),p(e,n),p(e,l)},p:A,d(i){i&&w(e)}}}function jl(t){let e,n=Je[t[17]]+"",l,i,s,o,r,c=Object.entries(t[18]),u=[];for(let a=0;a<c.length;a+=1)u[a]=Ml(Ol(t,c,a));return{c(){e=b("h3"),l=O(n),i=L(),s=b("table"),o=b("tbody");for(let a=0;a<u.length;a+=1)u[a].c();r=L(),m(s,"class","table pl-2 is-fullwidth")},m(a,f){S(a,e,f),p(e,l),S(a,i,f),S(a,s,f),p(s,o);for(let d=0;d<u.length;d+=1)u[d]&&u[d].m(o,null);p(s,r)},p(a,f){if(f&8&&n!==(n=Je[a[17]]+"")&&M(l,n),f&8){c=Object.entries(a[18]);let d;for(d=0;d<c.length;d+=1){const _=Ol(a,c,d);u[d]?u[d].p(_,f):(u[d]=Ml(_),u[d].c(),u[d].m(o,null))}for(;d<u.length;d+=1)u[d].d(1);u.length=c.length}},d(a){a&&w(e),a&&w(i),a&&w(s),x(u,a)}}}function Ml(t){let e,n,l,i,s=t[21]+"",o,r,c,u,a=t[22].title+"",f,d,_,h,g,v,y,k;function $(){return t[16](t[21],t[17])}return{c(){e=b("tr"),n=b("th"),l=b("span"),i=O("#"),o=O(s),r=L(),c=b("td"),u=b("a"),f=O(a),_=L(),h=b("td"),g=b("button"),v=L(),m(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),m(n,"class","is-narrow is-3"),m(u,"href",d=t[22].url),m(u,"target","_blank"),m(g,"class","delete"),m(g,"aria-label","close"),m(h,"class","is-narrow")},m(E,R){S(E,e,R),p(e,n),p(n,l),p(l,i),p(l,o),p(e,r),p(e,c),p(c,u),p(u,f),p(e,_),p(e,h),p(h,g),S(E,v,R),y||(k=F(g,"click",$),y=!0)},p(E,R){t=E,R&8&&s!==(s=t[21]+"")&&M(o,s),R&8&&a!==(a=t[22].title+"")&&M(f,a),R&8&&d!==(d=t[22].url)&&m(u,"href",d)},d(E){E&&w(e),E&&w(v),y=!1,k()}}}function Tl(t){let e=Object.values(t[18]).length>0&&t[17]in Je,n,l=e&&jl(t);return{c(){l&&l.c(),n=H()},m(i,s){l&&l.m(i,s),S(i,n,s)},p(i,s){s&8&&(e=Object.values(i[18]).length>0&&i[17]in Je),e?l?l.p(i,s):(l=jl(i),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},d(i){l&&l.d(i),i&&w(n)}}}function Ji(t){let e,n=Object.entries(t[3]),l=[];for(let s=0;s<n.length;s+=1)l[s]=Tl(Ll(t,n,s));let i=null;return n.length||(i=Cl()),{c(){for(let s=0;s<l.length;s+=1)l[s].c();e=H(),i&&i.c()},m(s,o){for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(s,o);S(s,e,o),i&&i.m(s,o)},p(s,o){if(o&8){n=Object.entries(s[3]);let r;for(r=0;r<n.length;r+=1){const c=Ll(s,n,r);l[r]?l[r].p(c,o):(l[r]=Tl(c),l[r].c(),l[r].m(e.parentNode,e))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length,!n.length&&i?i.p(s,o):n.length?i&&(i.d(1),i=null):(i=Cl(),i.c(),i.m(e.parentNode,e))}},d(s){x(l,s),s&&w(e),i&&i.d(s)}}}function Gi(t){let e,n,l,i,s,o,r=!t[0].includes("set")&&Et,c,u,a,f;e=new _l({}),l=new Vn({props:{selectionLength:t[2]}}),s=new _i({props:{recordsStore:t[8],searchFields:t[1]}});let d=r&&Nl(t),_={ctx:t,current:null,token:null,hasCatch:!0,pending:qi,then:Bi,catch:Fi,value:25,error:29,blocks:[,,,]};return rn(t[10],_),a=new xn({props:{selectionLength:t[2],selectionStore:be,$$slots:{default:[Ji]},$$scope:{ctx:t}}}),{c(){J(e.$$.fragment),n=L(),J(l.$$.fragment),i=L(),J(s.$$.fragment),o=L(),d&&d.c(),c=L(),_.block.c(),u=L(),J(a.$$.fragment)},m(h,g){V(e,h,g),S(h,n,g),V(l,h,g),S(h,i,g),V(s,h,g),S(h,o,g),d&&d.m(h,g),S(h,c,g),_.block.m(h,_.anchor=g),_.mount=()=>u.parentNode,_.anchor=u,S(h,u,g),V(a,h,g),f=!0},p(h,[g]){t=h;const v={};g&4&&(v.selectionLength=t[2]),l.$set(v);const y={};g&2&&(y.searchFields=t[1]),s.$set(y),g&1&&(r=!t[0].includes("set")&&Et),r?d?d.p(t,g):(d=Nl(t),d.c(),d.m(c.parentNode,c)):d&&(d.d(1),d=null),cn(_,t,g);const k={};g&4&&(k.selectionLength=t[2]),g&1073741832&&(k.$$scope={dirty:g,ctx:t}),a.$set(k)},i(h){f||(C(e.$$.fragment,h),C(l.$$.fragment,h),C(s.$$.fragment,h),C(_.block),C(a.$$.fragment,h),f=!0)},o(h){T(e.$$.fragment,h),T(l.$$.fragment,h),T(s.$$.fragment,h);for(let g=0;g<3;g+=1){const v=_.blocks[g];T(v)}T(a.$$.fragment,h),f=!1},d(h){q(e,h),h&&w(n),q(l,h),h&&w(i),q(s,h),h&&w(o),d&&d.d(h),h&&w(c),_.block.d(h),_.token=null,_=null,h&&w(u),q(a,h)}}}function Ki(t,e,n){let l,i,s,o,r,c;const{selected:u,nbSelected:a}=be;re(t,u,E=>n(15,o=E)),re(t,a,E=>n(14,s=E));let{modelName:f=""}=e;kt("modelName",f);let{modelTitle:d=""}=e;kt("modelTitle",d);const _=ki(f),{pageRecords:h,resultPage:g,resultNumber:v}=_;re(t,h,E=>n(4,r=E)),re(t,v,E=>n(5,c=E));let{searchFields:y=[]}=e;const k=f.includes("treatment")?`/${se}/${f}/add/`:`/${se}-admin/${_n}/${f}/add/`,$=(E,R)=>be.remove(E,R);return t.$$set=E=>{"modelName"in E&&n(13,f=E.modelName),"modelTitle"in E&&n(0,d=E.modelTitle),"searchFields"in E&&n(1,y=E.searchFields)},t.$$.update=()=>{t.$$.dirty&32768&&n(3,l=o),t.$$.dirty&16384&&n(2,i=s)},[d,y,i,l,r,c,u,a,_,h,g,v,k,f,s,o,$]}class Wi extends te{constructor(e){super(),ee(this,e,Ki,Gi,K,{modelName:13,modelTitle:0,searchFields:1})}}new Wi({target:document.getElementById("record-list"),props:{searchFields,modelName,modelTitle}})})();
//# sourceMappingURL=recordList.js.map

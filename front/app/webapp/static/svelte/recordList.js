var recordList=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function l(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(l)}function c(e){return"function"==typeof e}function o(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i;function a(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function u(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function d(e){let t;return u(e,(e=>t=e))(),t}function m(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,l){if(e){const s=p(e,t,n,l);return e[0](s)}}function p(e,t,l,s){return e[1]&&s?n(l.ctx.slice(),e[1](s(t))):l.ctx}function h(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}function g(e,t,n,l,s,r){if(s){const c=p(t,n,l,r);e.p(c,s)}}function $(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}function b(t){return t&&c(t.destroy)?t.destroy:e}const v="undefined"!=typeof window;let y=v?()=>window.performance.now():()=>Date.now(),w=v?e=>requestAnimationFrame(e):e;const k=new Set;function S(e){k.forEach((t=>{t.c(e)||(k.delete(t),t.f())})),0!==k.size&&w(S)}function _(e,t){e.appendChild(t)}function x(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function E(e){const t=P("style");return function(e,t){_(e.head||e,t),t.sheet}(x(e),t),t.sheet}function L(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function N(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function P(e){return document.createElement(e)}function R(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function C(e){return document.createTextNode(e)}function A(){return C(" ")}function j(){return C("")}function I(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function M(e){return function(t){return t.preventDefault(),e.call(this,t)}}function T(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const U=["width","height"];function D(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===U.indexOf(l)?e[l]=t[l]:T(e,l,t[l])}function F(e){return""===e?null:+e}function H(e,t){t=""+t,e.data!==t&&(e.data=t)}function z(e,t){e.value=null==t?"":t}function B(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function V(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function q(e,t,n){e.classList[n?"add":"remove"](t)}function J(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,l,t),s}const G=new Map;let W,Z=0;function X(e,t,n,l,s,r,c,o=0){const i=16.666/l;let a="{\n";for(let e=0;e<=1;e+=i){const l=t+(n-t)*r(e);a+=100*e+`%{${c(l,1-l)}}\n`}const u=a+`100% {${c(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${o}`,m=x(e),{stylesheet:f,rules:p}=G.get(m)||function(e,t){const n={stylesheet:E(t),rules:{}};return G.set(e,n),n}(m,e);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${d} ${l}ms linear ${s}ms 1 both`,Z+=1,d}function Y(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-l.length;s&&(e.style.animation=l.join(", "),Z-=s,Z||w((()=>{Z||(G.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&O(t)})),G.clear())})))}function K(e){W=e}function Q(){if(!W)throw new Error("Function called outside component initialization");return W}function ee(e,t){return Q().$$.context.set(e,t),t}const te=[],ne=[];let le=[];const se=[],re=Promise.resolve();let ce=!1;function oe(e){le.push(e)}const ie=new Set;let ae,ue=0;function de(){if(0!==ue)return;const e=W;do{try{for(;ue<te.length;){const e=te[ue];ue++,K(e),me(e.$$)}}catch(e){throw te.length=0,ue=0,e}for(K(null),te.length=0,ue=0;ne.length;)ne.pop()();for(let e=0;e<le.length;e+=1){const t=le[e];ie.has(t)||(ie.add(t),t())}le.length=0}while(te.length);for(;se.length;)se.pop()();ce=!1,ie.clear(),K(e)}function me(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}function fe(e,t,n){e.dispatchEvent(J(`${t?"intro":"outro"}${n}`))}const pe=new Set;let he;function ge(){he={r:0,c:[],p:he}}function $e(){he.r||r(he.c),he=he.p}function be(e,t){e&&e.i&&(pe.delete(e),e.i(t))}function ve(e,t,n,l){if(e&&e.o){if(pe.has(e))return;pe.add(e),he.c.push((()=>{pe.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}const ye={duration:0};function we(n,l,s,o){const i={direction:"both"};let a=l(n,s,i),u=o?0:1,d=null,m=null,f=null;function p(){f&&Y(n,f)}function h(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function g(l){const{delay:s=0,duration:c=300,easing:o=t,tick:i=e,css:g}=a||ye,$={start:y()+s,b:l};l||($.group=he,he.r+=1),d||m?m=$:(g&&(p(),f=X(n,u,l,c,s,o,g)),l&&i(0,1),d=h($,c),oe((()=>fe(n,l,"start"))),function(e){let t;0===k.size&&w(S),new Promise((n=>{k.add(t={c:e,f:n})}))}((e=>{if(m&&e>m.start&&(d=h(m,c),m=null,fe(n,d.b,"start"),g&&(p(),f=X(n,u,d.b,d.duration,0,o,a.css))),d)if(e>=d.end)i(u=d.b,1-u),fe(n,d.b,"end"),m||(d.b?p():--d.group.r||r(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*o(t/d.duration),i(u,1-u)}return!(!d&&!m)})))}return{run(e){c(a)?(ae||(ae=Promise.resolve(),ae.then((()=>{ae=null}))),ae).then((()=>{a=a(i),g(e)})):g(e)},end(){p(),d=m=null}}}function ke(e,t){e.d(1),t.delete(e.key)}function Se(e,t){ve(e,1,1,(()=>{t.delete(e.key)}))}function _e(e,t,n,l,s,c,o,i,a,u,d,m){let f=e.length,p=c.length,h=f;const g={};for(;h--;)g[e[h].key]=h;const $=[],b=new Map,v=new Map,y=[];for(h=p;h--;){const e=m(s,c,h),r=n(e);let i=o.get(r);i?l&&y.push((()=>i.p(e,t))):(i=u(r,e),i.c()),b.set(r,$[h]=i),r in g&&v.set(r,Math.abs(h-g[r]))}const w=new Set,k=new Set;function S(e){be(e,1),e.m(i,d),o.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=$[p-1],n=e[f-1],l=t.key,s=n.key;t===n?(d=t.first,f--,p--):b.has(s)?!o.has(l)||w.has(l)?S(t):k.has(s)?f--:v.get(l)>v.get(s)?(k.add(l),S(t)):(w.add(s),f--):(a(n,o),f--)}for(;f--;){const t=e[f];b.has(t.key)||a(t,o)}for(;p;)S($[p-1]);return r(y),$}function xe(e){e&&e.c()}function Ee(e,t,n,s){const{fragment:o,after_update:i}=e.$$;o&&o.m(t,n),s||oe((()=>{const t=e.$$.on_mount.map(l).filter(c);e.$$.on_destroy?e.$$.on_destroy.push(...t):r(t),e.$$.on_mount=[]})),i.forEach(oe)}function Le(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];le.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),le=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function Oe(e,t){-1===e.$$.dirty[0]&&(te.push(e),ce||(ce=!0,re.then(de)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Ne(t,n,l,c,o,i,a,u=[-1]){const d=W;K(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:o,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(m.root);let f=!1;if(m.ctx=l?l(t,n.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return m.ctx&&o(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),f&&Oe(t,e)),n})):[],m.update(),f=!0,r(m.before_update),m.fragment=!!c&&c(m.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);m.fragment&&m.fragment.l(e),e.forEach(O)}else m.fragment&&m.fragment.c();n.intro&&be(t.$$.fragment),Ee(t,n.target,n.anchor,n.customElement),de()}K(d)}class Pe{$destroy(){Le(this,1),this.$destroy=e}$on(t,n){if(!c(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Re=APP_LANG,Ce=APP_NAME,Ae=WEBAPP_NAME,je=USER_ID,Ie=IS_SUPERUSER,Me=ADD_PERMISSION,Te=CSRF_TOKEN;ADDITIONAL_MODULES,APP_URL,SAS_APP_URL;const Ue=CANTALOUPE_APP_URL;MEDIA_PATH;const De=PAGE_LEN,Fe={Witness:"en"===Re?"Witness":"Témoin",Work:"en"===Re?"Work":"Œuvre",Series:"en"===Re?"Series":"Série d'imprimés",Regions:"en"===Re?"Region Extraction":"Extraction d'illustrations",User:"en"===Re?"User":"Utilisateur"},He=[];function ze(t,n=e){let l;const s=new Set;function r(e){if(o(t,e)&&(t=e,l)){const e=!He.length;for(const e of s)e[1](),He.push(e,t);if(e){for(let e=0;e<He.length;e+=2)He[e][0](He[e+1]);He.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(c,o=e){const i=[c,o];return s.add(i),1===s.size&&(l=n(r)||e),c(t),()=>{s.delete(i),0===s.size&&l&&(l(),l=null)}}}}function Be(t,n,l){const s=!Array.isArray(t),o=s?[t]:t,i=n.length<2;return a=t=>{let l=!1;const a=[];let d=0,m=e;const f=()=>{if(d)return;m();const l=n(s?a[0]:a,t);i?t(l):m=c(l)?l:e},p=o.map(((e,t)=>u(e,(e=>{a[t]=e,d&=~(1<<t),l&&f()}),(()=>{d|=1<<t}))));return l=!0,f(),function(){r(p),m(),l=!1}},{subscribe:ze(l,a).subscribe};var a}function Ve(e){const{type:t,modelName:n,title:l,extractMeta:s=(e=>e)}=e,r={id:null,type:t,title:l,is_public:!1,selected:{}},c=ze(JSON.parse(localStorage.getItem(t))||r),o=ze(!1);function i(e,n=!1){o.set(n),localStorage.setItem(t,JSON.stringify(e))}return{type:t,subscribe:c.subscribe,add:e=>c.update((t=>(t.selected[e.class]={...t.selected[e.class]||{},[e.id]:s(e)},i(t),t))),addAll:e=>c.update((t=>(e.forEach((e=>{t.selected[e.class]={...t.selected[e.class]||{},[e.id]:s(e)}})),i(t),t))),remove:(e,t)=>c.update((n=>{const{[e]:l,...s}=n.selected[t];return n.selected[t]=s,i(n),n})),removeAll:(e,t)=>c.update((n=>(e.forEach((e=>delete n.selected[t]?.[e])),i(n),n))),toggle:e=>c.update((t=>{if(t.selected[e.class]?.[e.id]){const{[e.id]:n,...l}=t.selected[e.class];t.selected[e.class]=l}else t.selected[e.class]={...t.selected[e.class]||{},[e.id]:s(e)};return i(t),t})),toggleSet:e=>{var t;d(c).id===e.id?c.update((()=>{const e={...r,selected:{}};return i(e),e})):(t=e,c.update((()=>{const e=t.selection.id?t.selection:{...t.selection,id:t.id};return i(e),e})))},empty:()=>c.update((e=>(e.id=null,e.title=l,e.selected={},i(e,!0),e))),updateTitle:e=>c.update((t=>(t.title=e,i(t,!0),t))),updatePublic:e=>c.update((t=>(t.is_public=e,i(t,!0),t))),save:function(){c.update((e=>{if("documentSet"!==t)return console.error("Document set management is the only type currently supported for saving."),e;const l=Object.fromEntries(Object.entries(e.selected).map((([e,t])=>[e,Object.keys(t)]))),s=e.id?`${e.id}/edit`:"new";return fetch(`${window.location.origin}/${n}/${s}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Te},body:JSON.stringify({title:e.title,is_public:e.is_public,user:e.user,selection:e,...l})}).then((e=>e.json())).then((e=>{if(!e?.document_set_id)throw new Error("Failed to save");c.update((t=>(t.id=e.document_set_id,t.title=e.document_set_title,t.user=e.user,t.is_public=e.is_public,i(t,!0),t)))})).catch((e=>console.error("Error:",e))),e}))},isSaved:o,selectionTitle:Be(c,(e=>e.title)),isSelected:Be(c,(e=>t=>e.selected[t.class]?.[t.id]||!1)),selected:Be(c,(e=>e.selected)),nbSelected:Be(c,(e=>Object.entries(e.selected).reduce(((e,[t,n])=>"User"===t?e:e+Object.keys(n).length),0))),isSetSelected:Be(c,(e=>t=>e.id===t.id))}}const qe=Ve({type:"documentSet",modelName:"document-set",title:"en"===Re?"Document set":"Set de documents",extractMeta:e=>({title:e.title,url:e.url})});function Je(e){let t,n,l=e[1]?"Retirer de la":"Ajouter à la";return{c(){t=C(l),n=C(" sélection")},m(e,l){L(e,t,l),L(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter à la")&&H(t,l)},d(e){e&&O(t),e&&O(n)}}}function Ge(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=C(l),n=C(" selection")},m(e,l){L(e,t,l),L(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&H(t,l)},d(e){e&&O(t),e&&O(n)}}}function We(e){let t;return{c(){t=R("path"),T(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Ze(e){let t;return{c(){t=R("path"),T(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Xe(t){let n,l,s,r,c;let o=("en"===Re?Ge:Je)(t);function i(e,t){return e[1]?Ze:We}let a=i(t),u=a(t);return{c(){n=P("button"),o.c(),l=A(),s=R("svg"),u.c(),T(s,"xmlns","http://www.w3.org/2000/svg"),T(s,"viewBox","0 0 384 512"),T(s,"class","svelte-135nggd"),T(n,"class","button"),q(n,"is-inverted",t[1])},m(e,i){L(e,n,i),o.m(n,null),_(n,l),_(n,s),u.m(s,null),r||(c=I(n,"click",t[4]),r=!0)},p(e,[t]){o.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(s,null))),2&t&&q(n,"is-inverted",e[1])},i:e,o:e,d(e){e&&O(n),o.d(),u.d(),r=!1,c()}}}function Ye(e,t,n){let l,s;const{isSelected:r}=qe;m(e,r,(e=>n(3,s=e)));let{item:c}=t;return e.$$set=e=>{"item"in e&&n(0,c=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=s(c))},[c,l,r,s,()=>qe.toggle(c)]}Ve({type:"regionsSet",modelName:"regions-set",title:"en"===Re?"Regions set":"Set de régions",extractMeta:e=>e}),Ve({type:"clusterSet",modelName:"cluster-set",title:"en"===Re?"Selected regions":"Régions sélectionnées",extractMeta:e=>({imgRef:e.id,clusterId:e.clusterId,title:e.title,xywh:e.xywh,img:e.img})});class Ke extends Pe{constructor(e){super(),Ne(this,e,Ye,Xe,o,{item:0})}}function Qe(e,{delay:n=0,duration:l=400,easing:s=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:s,css:e=>"opacity: "+e*r}}const et=e=>"string"==typeof e||e instanceof String;function tt(e=null){const t=function(e=null){return(e=e.split("_")).length<3?void 0:`${e.slice(0,3).join("_").replace(".jpg","")}.jpg`}(e);return void 0===t?void 0:`${Ue??"http://localhost:8182"}/iiif/2/${t}`}function nt(e=null,t=null,n="full"){if(t=et(t)?t.replace(".jpg",""):t,!e)return"https://placehold.co/96x96/png?text=No+image";const l=tt(e);if(void 0===l)return"https://placehold.co/96x96/png?text=No+image";const s=e.split("_");return t||(t=s[s.length-1].includes(",")?s.pop().replace(".jpg",""):"full"),`${l}/${t}/${n}/0/default.jpg`}function lt(e,t=null,n=!1){return new Promise((l=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:l(void 0),t&&(document.getElementById("modal-title").innerHTML=t),document.getElementById("modal-msg").innerHTML=e,document.getElementById("hidden-msg-btn").click();const s=document.getElementById("cancel-btn"),r=document.getElementById("ok-btn"),c=document.getElementById("modal-bkg"),o=()=>{s.removeEventListener("click",i),c.removeEventListener("click",i),r.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},i=()=>{o(),l(!1)},a=()=>{o(),l(!0)};s.addEventListener("click",i),r.addEventListener("click",a)}else n?l(window.confirm(e)):(window.alert(e),l(void 0))}))}async function st(e){try{return(await fetch(e)).ok}catch(e){return console.error("Error:",e),!1}}function rt(e){const t=e.querySelectorAll(".modal-background, .modal-close, .modal-card-head .delete, .modal-card-foot .button-close"),n=()=>e.classList.remove("is-active");t.forEach((e=>e.addEventListener("click",n)));const l=t=>{"Escape"===t.key&&e.classList.contains("is-active")&&n()};return document.addEventListener("keydown",l),{destroy(){t.forEach((e=>e.removeEventListener("click",n))),document.removeEventListener("keydown",l)}}}function ct(e){const t=()=>{const t=document.getElementById(e.dataset.target);t?.classList.add("is-active")};return e.addEventListener("click",t),{destroy(){e.removeEventListener("click",t)}}}const ot=e=>({}),it=e=>({}),at=e=>({}),ut=e=>({});function dt(e,t,n){const l=e.slice();return l[7]=t[n],l}function mt(e){let t,n,l,s;return{c(){t=P("div"),n=P("figure"),l=P("img"),a(l.src,s=nt(e[0].img,"full","250,"))||T(l,"src",s),T(l,"alt","Record illustration"),T(n,"class","card image is-96x96 svelte-1f9ag52"),T(t,"class","media-left")},m(e,s){L(e,t,s),_(t,n),_(n,l)},p(e,t){1&t&&!a(l.src,s=nt(e[0].img,"full","250,"))&&T(l,"src",s)},d(e){e&&O(t)}}}function ft(e){let t;return{c(){t=P("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                            <span style="margin-left: -0.5rem">Public</span>',T(t,"class","pl-3 pt-1 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function pt(e){let t,n=e[0].user+"";return{c(){t=C(n)},m(e,n){L(e,t,n)},p(e,l){1&l&&n!==(n=e[0].user+"")&&H(t,n)},d(e){e&&O(t)}}}function ht(e){let t,n,l=e[0].updated_at+"";return{c(){t=P("span"),n=C(l),T(t,"class","tag p-1 mb-1")},m(e,l){L(e,t,l),_(t,n)},p(e,t){1&t&&l!==(l=e[0].updated_at+"")&&H(n,l)},d(e){e&&O(t)}}}function gt(e){let t,n=e[0].hasOwnProperty("iiif"),l=n&&$t(e);return{c(){l&&l.c(),t=j()},m(e,n){l&&l.m(e,n),L(e,t,n)},p(e,s){1&s&&(n=e[0].hasOwnProperty("iiif")),n?l?l.p(e,s):(l=$t(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function $t(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=bt(dt(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=j()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);L(e,t,n)},p(e,s){if(1&s){let r;for(n=e[0].iiif,r=0;r<n.length;r+=1){const c=dt(e,n,r);l[r]?l[r].p(c,s):(l[r]=bt(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){N(l,e),e&&O(t)}}}function bt(e){let t,n=e[7]+"";return{c(){t=P("span"),T(t,"class","tag logo mt-1")},m(e,l){L(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[7]+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function vt(e){let t,n=e[0].user_id===parseInt(je)||Ie,l=n&&yt(e);return{c(){l&&l.c(),t=j()},m(e,n){l&&l.m(e,n),L(e,t,n)},p(e,s){1&s&&(n=e[0].user_id===parseInt(je)||Ie),n?l?l.p(e,s):(l=yt(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function yt(t){let n,l,s;return{c(){n=P("button"),T(n,"class","delete is-medium"),T(n,"title","en"===Re?"Delete":"Supprimer")},m(e,r){L(e,n,r),l||(s=I(n,"click",t[3]),l=!0)},p:e,d(e){e&&O(n),l=!1,s()}}}function wt(e){let t,n,l,s,r,c,o,i,a,u,d,m,p,b,v,y,w,k,S,x,E,N,R,j,I,M,U,D,F=e[0].hasOwnProperty("img"),z=e[0].type+"",B=e[0].id+"",V=e[0].title+"",q=e[0].hasOwnProperty("is_public")&&e[0].is_public,J=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length,G=F&&mt(e),W=q&&ft(),Z=e[0].user&&pt(e),X=e[0].updated_at&&ht(e),Y=e[2]&&function(e){let t,n,l,s,r;return{c(){t=P("a"),n=P("span"),l=A(),s=P("span"),s.textContent="en"===Re?"Edit":"Éditer",T(n,"class","iconify"),T(n,"data-icon","entypo:edit"),T(s,"class","ml-2"),T(t,"href",r=e[2]?e[0].edit_url:null),T(t,"class","edit-btn button is-small is-rounded is-link px-2 svelte-1f9ag52"),T(t,"title","en"===Re?"Edit":"Éditer")},m(e,r){L(e,t,r),_(t,n),_(t,l),_(t,s)},p(e,n){1&n&&r!==(r=e[2]?e[0].edit_url:null)&&T(t,"href",r)},d(e){e&&O(t)}}}(e),K=J&&gt(e);const Q=e[6].buttons,ee=f(Q,e,e[5],ut);let te=("Treatment"===e[0].class||"DocumentSet"===e[0].class)&&vt(e);const ne=e[6].body,le=f(ne,e,e[5],it);return{c(){t=P("div"),n=P("div"),l=P("div"),s=P("div"),G&&G.c(),r=A(),c=P("div"),o=P("a"),i=P("span"),a=C(z),u=C(" #"),d=C(B),m=A(),p=C(V),v=A(),W&&W.c(),y=A(),w=P("p"),Z&&Z.c(),k=A(),X&&X.c(),S=A(),x=P("p"),Y&&Y.c(),E=A(),K&&K.c(),N=A(),R=P("div"),ee&&ee.c(),j=A(),te&&te.c(),I=A(),M=P("div"),le&&le.c(),T(i,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),T(o,"href",b=e[1]?e[0].view_url:null),T(o,"class","title is-4 "+(e[1]?"hoverable":"")+" pt-2 svelte-1f9ag52"),T(w,"class","subtitle is-6 mb-0 ml-2 pt-2"),T(x,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle"),T(c,"class","media-content"),T(R,"class","media-right"),T(s,"class","media"),T(M,"class","content fixed-grid px-5"),T(l,"class","card-content"),T(n,"class","card mb-5"),T(t,"class","item")},m(e,f){L(e,t,f),_(t,n),_(n,l),_(l,s),G&&G.m(s,null),_(s,r),_(s,c),_(c,o),_(o,i),_(i,a),_(i,u),_(i,d),_(o,m),_(o,p),_(c,v),W&&W.m(c,null),_(c,y),_(c,w),Z&&Z.m(w,null),_(w,k),X&&X.m(w,null),_(c,S),_(c,x),Y&&Y.m(x,null),_(x,E),K&&K.m(x,null),_(s,N),_(s,R),ee&&ee.m(R,null),_(s,j),te&&te.m(s,null),_(l,I),_(l,M),le&&le.m(M,null),D=!0},p(e,[t]){1&t&&(F=e[0].hasOwnProperty("img")),F?G?G.p(e,t):(G=mt(e),G.c(),G.m(s,r)):G&&(G.d(1),G=null),(!D||1&t)&&z!==(z=e[0].type+"")&&H(a,z),(!D||1&t)&&B!==(B=e[0].id+"")&&H(d,B),(!D||1&t)&&V!==(V=e[0].title+"")&&H(p,V),(!D||1&t&&b!==(b=e[1]?e[0].view_url:null))&&T(o,"href",b),1&t&&(q=e[0].hasOwnProperty("is_public")&&e[0].is_public),q?W||(W=ft(),W.c(),W.m(c,y)):W&&(W.d(1),W=null),e[0].user?Z?Z.p(e,t):(Z=pt(e),Z.c(),Z.m(w,k)):Z&&(Z.d(1),Z=null),e[0].updated_at?X?X.p(e,t):(X=ht(e),X.c(),X.m(w,null)):X&&(X.d(1),X=null),e[2]&&Y.p(e,t),1&t&&(J=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length),J?K?K.p(e,t):(K=gt(e),K.c(),K.m(x,null)):K&&(K.d(1),K=null),ee&&ee.p&&(!D||32&t)&&g(ee,Q,e,e[5],D?h(Q,e[5],t,at):$(e[5]),ut),"Treatment"===e[0].class||"DocumentSet"===e[0].class?te?te.p(e,t):(te=vt(e),te.c(),te.m(s,null)):te&&(te.d(1),te=null),le&&le.p&&(!D||32&t)&&g(le,ne,e,e[5],D?h(ne,e[5],t,ot):$(e[5]),it)},i(e){D||(be(ee,e),be(le,e),oe((()=>{D&&(U||(U=we(t,Qe,{duration:500},!0)),U.run(1))})),D=!0)},o(e){ve(ee,e),ve(le,e),U||(U=we(t,Qe,{duration:500},!1)),U.run(0),D=!1},d(e){e&&O(t),G&&G.d(),W&&W.d(),Z&&Z.d(),X&&X.d(),Y&&Y.d(),K&&K.d(),ee&&ee.d(e),te&&te.d(),le&&le.d(e),e&&U&&U.end()}}}function kt(e,t,n){let{$$slots:l={},$$scope:s}=t,{recordsStore:r}=t,{item:c}=t;const o=c.hasOwnProperty("view_url")&&""!==c.view_url,i=c.hasOwnProperty("edit_url")&&""!==c.edit_url;return e.$$set=e=>{"recordsStore"in e&&n(4,r=e.recordsStore),"item"in e&&n(0,c=e.item),"$$scope"in e&&n(5,s=e.$$scope)},[c,o,i,async function(){if(!await lt("en"===Re?"Are you sure you want to delete this record?":"Voulez-vous vraiment supprimer cet enregistrement ?","en"===Re?"Confirm deletion":"Confirmer la suppression",!0))return;await async function(e,t){return st(`/${Ce}/${t.toLowerCase()}/${e}/delete`)}(c.id,c.class)?r.remove(c.id):await lt("en"===Re?"Failed to delete record":"Erreur lors de la suppression de l'enregistrement","en"===Re?"Error":"Erreur")},r,s,l]}class St extends Pe{constructor(e){super(),Ne(this,e,kt,wt,o,{recordsStore:4,item:0})}}function _t(e,t,n){const l=e.slice();return l[2]=t[n][0],l[3]=t[n][1],l}function xt(e){let t,n,l;return n=new Ke({props:{item:e[0]}}),{c(){t=P("div"),xe(n.$$.fragment),T(t,"slot","buttons")},m(e,s){L(e,t,s),Ee(n,t,null),l=!0},p(e,t){const l={};1&t&&(l.item=e[0]),n.$set(l)},i(e){l||(be(n.$$.fragment,e),l=!0)},o(e){ve(n.$$.fragment,e),l=!1},d(e){e&&O(t),Le(n)}}}function Et(e){let t,n,l,s,r,c,o,i=e[2]+"",a=e[3]+"";return{c(){t=P("div"),n=P("div"),l=C(i),s=A(),r=P("div"),o=A(),T(n,"class","column is-4 is-bold"),T(r,"class",c="column is-8 "+("-"===e[3]?"faded":"")),T(t,"class","datum is-middle columns svelte-ln5qdg")},m(e,c){L(e,t,c),_(t,n),_(n,l),_(t,s),_(t,r),r.innerHTML=a,_(t,o)},p(e,t){1&t&&i!==(i=e[2]+"")&&H(l,i),1&t&&a!==(a=e[3]+"")&&(r.innerHTML=a),1&t&&c!==(c="column is-8 "+("-"===e[3]?"faded":""))&&T(r,"class",c)},d(e){e&&O(t)}}}function Lt(e){let t,n=Object.entries(e[0].metadata),l=[];for(let t=0;t<n.length;t+=1)l[t]=Et(_t(e,n,t));return{c(){t=P("div");for(let e=0;e<l.length;e+=1)l[e].c();T(t,"slot","body"),T(t,"class","grid metadata pt-2 svelte-ln5qdg")},m(e,n){L(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].metadata),r=0;r<n.length;r+=1){const c=_t(e,n,r);l[r]?l[r].p(c,s):(l[r]=Et(c),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){e&&O(t),N(l,e)}}}function Ot(e){let t,n;return t=new St({props:{item:e[0],recordsStore:e[1],$$slots:{body:[Lt],buttons:[xt]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),2&n&&(l.recordsStore=e[1]),65&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function Nt(e,t,n){let{item:l}=t,{recordsStore:s}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item),"recordsStore"in e&&n(1,s=e.recordsStore)},[l,s]}class Pt extends Pe{constructor(e){super(),Ne(this,e,Nt,Ot,o,{item:0,recordsStore:1})}}function Rt(t){let n,l,s,r,c,o,i,a,u,d,m,f="en"===Re?"Selection":"Sélection";return{c(){n=P("div"),l=P("button"),s=P("span"),r=P("i"),c=A(),o=C(f),i=C("\n            ("),a=C(t[0]),u=C(")"),T(r,"class","fa-solid fa-book-bookmark"),T(s,"id","btn-content"),T(l,"id","set-btn"),T(l,"class","button px-5 py-4 is-link svelte-gmt9z5"),T(l,"data-target","selection-modal"),T(n,"class","set-container svelte-gmt9z5")},m(e,t){L(e,n,t),_(n,l),_(l,s),_(s,r),_(s,c),_(s,o),_(s,i),_(s,a),_(s,u),d||(m=b(ct.call(null,l)),d=!0)},p(e,[t]){1&t&&H(a,e[0])},i:e,o:e,d(e){e&&O(n),d=!1,m()}}}function Ct(e,t,n){let{selectionLength:l=0}=t,s=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==s){const e=l>s;n(1,s=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,s]}class At extends Pe{constructor(e){super(),Ne(this,e,Ct,Rt,o,{selectionLength:0})}}function jt(t){let n,l,s,r,c,o,i,a="en"===Re?"Save selection":"Sauvegarder la sélection";return{c(){n=P("button"),l=P("span"),s=P("i"),r=A(),c=C(a),T(s,"class","fa-solid fa-floppy-disk"),T(n,"class","button is-link")},m(e,a){L(e,n,a),_(n,l),_(l,s),_(l,r),_(l,c),o||(i=I(n,"click",t[7]),o=!0)},p:e,d(e){e&&O(n),o=!1,i()}}}function It(e){let t,n,l,s,r,c,o="en"===Re?"Go to treatment":"Accéder au traitement";return{c(){t=P("a"),n=P("span"),l=P("i"),s=A(),r=C(o),T(l,"class","fa-solid fa-gear"),T(t,"class","button is-link"),T(t,"href",c="/"+Ce+"/treatment/add/?document_set="+e[3].id)},m(e,c){L(e,t,c),_(t,n),_(n,l),_(n,s),_(n,r)},p(e,n){8&n&&c!==(c="/"+Ce+"/treatment/add/?document_set="+e[3].id)&&T(t,"href",c)},d(e){e&&O(t)}}}function Mt(e){let t,n,l,s,r,c,o;return{c(){t=P("a"),n=P("span"),n.innerHTML='<i class="fa-solid fa-file-export"></i> JSON',s=A(),r=P("a"),c=P("span"),c.innerHTML='<i class="fa-solid fa-file-zipper"></i> ZIP',T(t,"class","button is-link is-dark"),T(t,"href",l="/"+Ce+"/document-set/"+e[3].id+"/json"),T(t,"target","_blank"),T(r,"class","button is-link is-dark"),T(r,"href",o="/"+Ce+"/document-set/"+e[3].id+"/zip"),T(r,"target","_blank")},m(e,l){L(e,t,l),_(t,n),L(e,s,l),L(e,r,l),_(r,c)},p(e,n){8&n&&l!==(l="/"+Ce+"/document-set/"+e[3].id+"/json")&&T(t,"href",l),8&n&&o!==(o="/"+Ce+"/document-set/"+e[3].id+"/zip")&&T(r,"href",o)},d(e){e&&O(t),e&&O(s),e&&O(r)}}}function Tt(t){let n,l,s,r,c,o,i;function a(e,t){return e[2]&&!e[1]?It:jt}let u=a(t),d=u(t),m=!t[1]&&Mt(t);return{c(){n=P("footer"),l=P("div"),s=P("button"),s.textContent=""+("en"===Re?"Clear selection":"Vider la sélection"),r=A(),d.c(),c=A(),m&&m.c(),T(s,"class","button button-close is-link is-light"),T(l,"class","buttons"),T(n,"class","modal-card-foot is-center")},m(e,a){L(e,n,a),_(n,l),_(l,s),_(l,r),d.m(l,null),_(l,c),m&&m.m(l,null),o||(i=I(s,"click",t[6]),o=!0)},p(e,[t]){u===(u=a(e))&&d?d.p(e,t):(d.d(1),d=u(e),d&&(d.c(),d.m(l,c))),e[1]?m&&(m.d(1),m=null):m?m.p(e,t):(m=Mt(e),m.c(),m.m(l,null))},i:e,o:e,d(e){e&&O(n),d.d(),m&&m.d(),o=!1,i()}}}function Ut(e,t,n){let l,s,{selectionStore:r}=t;const{isSaved:c,selection:o}=r;m(e,c,(e=>n(2,l=e))),m(e,o,(e=>n(3,s=e)));let{isRegion:i="document"!==r.type}=t;return e.$$set=e=>{"selectionStore"in e&&n(0,r=e.selectionStore),"isRegion"in e&&n(1,i=e.isRegion)},[r,i,l,s,c,o,()=>r.empty(),()=>r.save()]}class Dt extends Pe{constructor(e){super(),Ne(this,e,Ut,Tt,o,{selectionStore:0,isRegion:1})}}function Ft(e,t,n){const l=e.slice();return l[31]=t[n],l}function Ht(e,t,n){const l=e.slice();return l[31]=t[n],l}function zt(e){let t,n,l,s,c,o;return{c(){t=P("span"),n=C(e[10]),l=A(),s=P("span"),s.innerHTML='<i class="fas fa-edit"></i>',T(s,"class","pl-3 smaller has-text-link")},m(r,i){L(r,t,i),_(t,n),_(t,l),_(t,s),c||(o=[I(t,"click",e[14]),I(t,"keyup",null)],c=!0)},p(e,t){1024&t[0]&&H(n,e[10])},d(e){e&&O(t),c=!1,r(o)}}}function Bt(e){let t,n,l;return{c(){t=P("input"),T(t,"class","input selection-title svelte-fumu7c")},m(s,r){L(s,t,r),e[23](t),z(t,e[5]),n||(l=[I(t,"input",e[24]),I(t,"keydown",e[15]),I(t,"blur",e[16])],n=!0)},p(e,n){32&n[0]&&t.value!==e[5]&&z(t,e[5])},d(s){s&&O(t),e[23](null),n=!1,r(l)}}}function Vt(e){let t,n,l;function s(){return e[25](e[31])}return{c(){t=P("button"),T(t,"class","tag is-delete")},m(e,r){L(e,t,r),n||(l=I(t,"click",s),n=!0)},p(t,n){e=t},d(e){e&&O(t),n=!1,l()}}}function qt(e,t){let n,l,s,r,c,o=t[31].username+"",i=t[9]&&Vt(t);return{key:e,first:null,c(){n=P("div"),l=P("span"),s=C(o),r=A(),i&&i.c(),c=A(),T(l,"class","tag"),T(n,"class","tags has-addons svelte-fumu7c"),this.first=n},m(e,t){L(e,n,t),_(n,l),_(l,s),_(n,r),i&&i.m(n,null),_(n,c)},p(e,l){t=e,256&l[0]&&o!==(o=t[31].username+"")&&H(s,o),t[9]?i?i.p(t,l):(i=Vt(t),i.c(),i.m(n,c)):i&&(i.d(1),i=null)},d(e){e&&O(n),i&&i.d()}}}function Jt(e){let t,n,l,s,c,o,i,a,u,d,m,f,p,h,g,$,b,v="en"===Re?"Make public":"Rendre public",y=e[7].length>0&&Gt(e);return{c(){t=P("div"),n=P("div"),l=P("div"),s=P("p"),c=P("input"),o=A(),i=P("span"),i.innerHTML='<i class="fas fa-search"></i>',a=A(),y&&y.c(),u=A(),d=P("div"),m=P("label"),f=P("input"),h=A(),g=C(v),T(c,"class","input svelte-fumu7c"),T(c,"placeholder","Search users…"),T(i,"class","icon is-small is-right"),T(s,"class","control is-expanded has-icons-right"),T(l,"class","field"),T(n,"class","dropdown-trigger"),T(t,"class","dropdown is-active"),T(f,"type","checkbox"),f.checked=p=e[2]?.is_public,T(m,"class","checkbox"),T(d,"class","field mt-3 is-right")},m(r,p){L(r,t,p),_(t,n),_(n,l),_(l,s),_(s,c),z(c,e[6]),_(s,o),_(s,i),_(t,a),y&&y.m(t,null),L(r,u,p),L(r,d,p),_(d,m),_(m,f),_(m,h),_(m,g),$||(b=[I(c,"input",e[26]),I(c,"input",e[17]),I(f,"change",e[28])],$=!0)},p(e,n){64&n[0]&&c.value!==e[6]&&z(c,e[6]),e[7].length>0?y?y.p(e,n):(y=Gt(e),y.c(),y.m(t,null)):y&&(y.d(1),y=null),4&n[0]&&p!==(p=e[2]?.is_public)&&(f.checked=p)},d(e){e&&O(t),y&&y.d(),e&&O(u),e&&O(d),$=!1,r(b)}}}function Gt(e){let t,n,l=e[7],s=[];for(let t=0;t<l.length;t+=1)s[t]=Wt(Ft(e,l,t));return{c(){t=P("div"),n=P("div");for(let e=0;e<s.length;e+=1)s[e].c();T(n,"class","dropdown-content"),T(t,"class","dropdown-menu"),T(t,"id","dropdown-menu"),T(t,"role","menu")},m(e,l){L(e,t,l),_(t,n);for(let e=0;e<s.length;e+=1)s[e]&&s[e].m(n,null)},p(e,t){if(262272&t[0]){let r;for(l=e[7],r=0;r<l.length;r+=1){const c=Ft(e,l,r);s[r]?s[r].p(c,t):(s[r]=Wt(c),s[r].c(),s[r].m(n,null))}for(;r<s.length;r+=1)s[r].d(1);s.length=l.length}},d(e){e&&O(t),N(s,e)}}}function Wt(e){let t,n,l,s,c,o=e[31].username+"";function i(){return e[27](e[31])}return{c(){t=P("div"),n=C(o),l=A(),T(t,"class","dropdown-item")},m(e,r){L(e,t,r),_(t,n),_(t,l),s||(c=[I(t,"click",i),I(t,"keydown",null)],s=!0)},p(t,l){e=t,128&l[0]&&o!==(o=e[31].username+"")&&H(n,o)},d(e){e&&O(t),s=!1,r(c)}}}function Zt(e){let t,n,l,s,r,c,o,i,a,u,d,m,p,v,y,w,k,S,x,E,N,R,j,I,M,U=[],D=new Map;function F(e,t){return e[3]?Bt:zt}let z=F(e),B=z(e);const V=e[22].default,q=f(V,e,e[21],null);let J=e[8];const G=e=>e[31].id;for(let t=0;t<J.length;t+=1){let n=Ht(e,J,t),l=G(n);D.set(l,U[t]=qt(l,n))}let W=e[9]&&Jt(e);return R=new Dt({props:{selectionStore:e[0]}}),{c(){t=P("div"),n=P("div"),l=A(),s=P("div"),r=P("div"),c=P("div"),o=P("i"),i=A(),B.c(),a=C("\n\n                ("),u=C(e[1]),d=C(")"),m=A(),p=P("button"),v=A(),y=P("section"),q&&q.c(),w=A(),k=P("h4"),k.textContent=""+("en"===Re?"Shared with":"Partagé avec"),S=A(),x=P("div");for(let e=0;e<U.length;e+=1)U[e].c();E=A(),W&&W.c(),N=A(),xe(R.$$.fragment),T(n,"class","modal-background"),T(o,"class","fa-solid fa-book-bookmark"),T(c,"class","title is-4 mb-0 media-content"),T(p,"class","delete media-left"),T(p,"aria-label","close"),T(r,"class","modal-card-head media mb-0 is-middle"),T(x,"class","field is-grouped is-grouped-multiline"),T(y,"class","modal-card-body"),T(s,"class","modal-content"),T(t,"id","selection-modal"),T(t,"class","modal fade"),T(t,"tabindex","-1"),T(t,"aria-labelledby","selection-modal-label"),T(t,"aria-hidden","true")},m(e,f){L(e,t,f),_(t,n),_(t,l),_(t,s),_(s,r),_(r,c),_(c,o),_(c,i),B.m(c,null),_(c,a),_(c,u),_(c,d),_(r,m),_(r,p),_(s,v),_(s,y),q&&q.m(y,null),_(y,w),_(y,k),_(y,S),_(y,x);for(let e=0;e<U.length;e+=1)U[e]&&U[e].m(x,null);_(y,E),W&&W.m(y,null),_(s,N),Ee(R,s,null),j=!0,I||(M=b(rt.call(null,t)),I=!0)},p(e,t){z===(z=F(e))&&B?B.p(e,t):(B.d(1),B=z(e),B&&(B.c(),B.m(c,a))),(!j||2&t[0])&&H(u,e[1]),q&&q.p&&(!j||2097152&t[0])&&g(q,V,e,e[21],j?h(V,e[21],t,null):$(e[21]),null),525056&t[0]&&(J=e[8],U=_e(U,t,G,1,e,J,D,x,ke,qt,null,Ht)),e[9]?W?W.p(e,t):(W=Jt(e),W.c(),W.m(y,null)):W&&(W.d(1),W=null);const n={};1&t[0]&&(n.selectionStore=e[0]),R.$set(n)},i(e){j||(be(q,e),be(R.$$.fragment,e),j=!0)},o(e){ve(q,e),ve(R.$$.fragment,e),j=!1},d(e){e&&O(t),B.d(),q&&q.d(e);for(let e=0;e<U.length;e+=1)U[e].d();W&&W.d(),Le(R),I=!1,M()}}}function Xt(e,t,n){let l,s,r,c,o,{$$slots:i={},$$scope:a}=t;const{selected:u}=qe;m(e,u,(e=>n(2,c=e)));let{selectionStore:d}=t,{selectionLength:f=!1}=t;const{selectionTitle:p,updateTitle:h,updatePublic:g,save:$}=d;m(e,p,(e=>n(10,o=e)));let b,v,y=!1;function w(){n(3,y=!1),h(v),$()}let k="",S=[];function _(e){d.add({id:e.id,class:"User",title:e.username}),n(6,k=""),n(7,S=[])}function x(e){d.remove(e,"User")}return e.$$set=e=>{"selectionStore"in e&&n(0,d=e.selectionStore),"selectionLength"in e&&n(1,f=e.selectionLength),"$$scope"in e&&n(21,a=e.$$scope)},e.$$.update=()=>{4&e.$$.dirty[0]&&n(20,l=c?.owner_id),1048576&e.$$.dirty[0]&&n(9,s=Ie||l===je),4&e.$$.dirty[0]&&n(8,r=Object.entries(c?.User||{}).map((([e,t])=>({id:Number(e),username:t.title}))))},[d,f,c,y,b,v,k,S,r,s,o,u,p,g,function(){n(3,y=!0),n(5,v=o),setTimeout((()=>b?.focus()),0)},function(e){"Enter"===e.key&&w()},w,async function(){if(k.trim().length<1)return void n(7,S=[]);const e=await fetch(`${window.location.origin}/search/user?q=${encodeURIComponent(k)}`),t=await e.json();n(7,S=t.users||[])},_,x,l,a,i,function(e){ne[e?"unshift":"push"]((()=>{b=e,n(4,b)}))},function(){v=this.value,n(5,v)},e=>x(e.id),function(){k=this.value,n(6,k)},e=>_(e),e=>g(e.target.checked)]}class Yt extends Pe{constructor(e){super(),Ne(this,e,Xt,Zt,o,{selectionStore:0,selectionLength:1},null,[-1,-1])}}function Kt(e,t,n){const l=e.slice();return l[15]=t[n],l[17]=n,l}function Qt(e){let t,n=e[4],l=[];for(let t=0;t<n.length;t+=1)l[t]=en(Kt(e,n,t));return{c(){t=P("ul");for(let e=0;e<l.length;e+=1)l[e].c();T(t,"class","autocomplete-list is-wide svelte-109rw7p")},m(e,n){L(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,s){if(592&s){let r;for(n=e[4],r=0;r<n.length;r+=1){const c=Kt(e,n,r);l[r]?l[r].p(c,s):(l[r]=en(c),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){e&&O(t),N(l,e)}}}function en(e){let t,n,l,s,c,o=e[15].label+"";function i(){return e[13](e[15])}return{c(){t=P("li"),n=C(o),l=A(),T(t,"class","svelte-109rw7p"),q(t,"selected",e[17]===e[6])},m(e,r){L(e,t,r),_(t,n),_(t,l),s||(c=[I(t,"click",i),I(t,"keyup",null)],s=!0)},p(l,s){e=l,16&s&&o!==(o=e[15].label+"")&&H(n,o),64&s&&q(t,"selected",e[17]===e[6])},d(e){e&&O(t),s=!1,r(c)}}}function tn(t){let n,l,s,c,o,i=t[5]&&Qt(t);return{c(){n=P("div"),l=P("input"),s=A(),i&&i.c(),T(l,"class","input is-small is-wide svelte-109rw7p"),T(l,"name",t[1]),T(l,"id",t[2]),T(l,"placeholder",t[0]),T(l,"autocomplete","off"),T(n,"class","autocomplete svelte-109rw7p")},m(e,r){L(e,n,r),_(n,l),z(l,t[3]),_(n,s),i&&i.m(n,null),c||(o=[I(l,"input",t[12]),I(l,"input",t[7]),I(l,"keydown",t[8])],c=!0)},p(e,[t]){2&t&&T(l,"name",e[1]),4&t&&T(l,"id",e[2]),1&t&&T(l,"placeholder",e[0]),8&t&&l.value!==e[3]&&z(l,e[3]),e[5]?i?i.p(e,t):(i=Qt(e),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:e,o:e,d(e){e&&O(n),i&&i.d(),c=!1,r(o)}}}function nn(e,t,n){let{items:l=[]}=t,{placeholder:s=("en"===Re?"Select":"Sélectionner")+" ..."}=t,{name:r=""}=t,{id:c=""}=t,o="",i=[],a=!1,u=-1,d=null;const m=function(){const e=Q();return(t,n,{cancelable:l=!1}={})=>{const s=e.$$.callbacks[t];if(s){const r=J(t,n,{cancelable:l});return s.slice().forEach((t=>{t.call(e,r)})),!r.defaultPrevented}return!0}}();function f(e){n(3,o=e.label),n(11,d=e),n(5,a=!1),m("select",e)}return e.$$set=e=>{"items"in e&&n(10,l=e.items),"placeholder"in e&&n(0,s=e.placeholder),"name"in e&&n(1,r=e.name),"id"in e&&n(2,c=e.id)},e.$$.update=()=>{3080&e.$$.dirty&&(o.length>0?(n(4,i=l.filter((e=>e.label.toLowerCase().includes(o.toLowerCase())))),n(5,a=!0)):(n(4,i=[]),n(5,a=!1),d&&(n(11,d=null),m("select",{id:null,label:""}))))},[s,r,c,o,i,a,u,function(){n(6,u=-1)},function(e){"ArrowDown"===e.key?(e.preventDefault(),n(6,u=(u+1)%i.length)):"ArrowUp"===e.key?(e.preventDefault(),n(6,u=u<=0?i.length-1:u-1)):"Enter"===e.key&&-1!==u&&(e.preventDefault(),f(i[u]))},f,l,d,function(){o=this.value,n(3,o)},e=>f(e)]}class ln extends Pe{constructor(e){super(),Ne(this,e,nn,tn,o,{items:10,placeholder:0,name:1,id:2})}}function sn(e,t,n){const l=e.slice();return l[16]=t[n],l[17]=t,l[18]=n,l}function rn(e,t,n){const l=e.slice();return l[19]=t[n],l}function cn(e,t,n){const l=e.slice();return l[16]=t[n],l[22]=t,l[23]=n,l}function on(e){let t,n,l,s,r,c,o,i,a,u,d,m,f,p="en"===Re?"Search":"Rechercher",h=e[0],g=[];for(let t=0;t<h.length;t+=1)g[t]=un(cn(e,h,t));let $=e[0],b=[];for(let t=0;t<$.length;t+=1)b[t]=wn(sn(e,$,t));const v=e=>ve(b[e],1,1,(()=>{b[e]=null}));return{c(){t=P("form"),n=P("article");for(let e=0;e<g.length;e+=1)g[e].c();l=A(),s=P("div");for(let e=0;e<b.length;e+=1)b[e].c();r=A(),c=P("div"),o=P("button"),i=P("i"),a=A(),u=C(p),T(s,"class","grid"),T(n,"class","message fixed-grid"),T(i,"class","fa-solid fa-magnifying-glass"),T(o,"type","submit"),T(o,"class","button is-link is-outlined is-fullwidth"),T(c,"class","panel-block columns"),T(t,"class","is-center pb-3")},m(p,h){L(p,t,h),_(t,n);for(let e=0;e<g.length;e+=1)g[e]&&g[e].m(n,null);_(n,l),_(n,s);for(let e=0;e<b.length;e+=1)b[e]&&b[e].m(s,null);_(t,r),_(t,c),_(c,o),_(o,i),_(o,a),_(o,u),d=!0,m||(f=I(t,"submit",e[3]),m=!0)},p(e,t){if(3&t){let s;for(h=e[0],s=0;s<h.length;s+=1){const r=cn(e,h,s);g[s]?g[s].p(r,t):(g[s]=un(r),g[s].c(),g[s].m(n,l))}for(;s<g.length;s+=1)g[s].d(1);g.length=h.length}if(51&t){let n;for($=e[0],n=0;n<$.length;n+=1){const l=sn(e,$,n);b[n]?(b[n].p(l,t),be(b[n],1)):(b[n]=wn(l),b[n].c(),be(b[n],1),b[n].m(s,null))}for(ge(),n=$.length;n<b.length;n+=1)v(n);$e()}},i(e){if(!d){for(let e=0;e<$.length;e+=1)be(b[e]);d=!0}},o(e){b=b.filter(Boolean);for(let e=0;e<b.length;e+=1)ve(b[e]);d=!1},d(e){e&&O(t),N(g,e),N(b,e),m=!1,f()}}}function an(e){let t,n,l,s,r,c,o,i,a,u,d,m,f=e[16].label+"";function p(){e[7].call(o,e[16])}return{c(){t=P("div"),n=P("label"),l=C(f),r=A(),c=P("div"),o=P("input"),u=A(),T(n,"for",s=e[16].name),T(n,"class","label column is-small is-2 svelte-wwfwxh"),T(o,"type","text"),T(o,"class","input is-small is-wide"),T(o,"id",i=e[16].name),T(o,"name",a=e[16].name),T(c,"class","control has-icons-right column is-10"),T(t,"class","search-field field columns pb-3 svelte-wwfwxh")},m(s,i){L(s,t,i),_(t,n),_(n,l),_(t,r),_(t,c),_(c,o),z(o,e[1][e[16].name]),_(t,u),d||(m=I(o,"input",p),d=!0)},p(t,r){e=t,1&r&&f!==(f=e[16].label+"")&&H(l,f),1&r&&s!==(s=e[16].name)&&T(n,"for",s),1&r&&i!==(i=e[16].name)&&T(o,"id",i),1&r&&a!==(a=e[16].name)&&T(o,"name",a),3&r&&o.value!==e[1][e[16].name]&&z(o,e[1][e[16].name])},d(e){e&&O(t),d=!1,m()}}}function un(e){let t,n="search"===e[16].name&&an(e);return{c(){n&&n.c(),t=j()},m(e,l){n&&n.m(e,l),L(e,t,l)},p(e,l){"search"===e[16].name?n?n.p(e,l):(n=an(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&O(t)}}}function dn(e){let t,n,l,s,r,c,o,i,a,u,d,m,f=e[16].label+"";const p=[gn,hn,pn,fn,mn],h=[];function g(e,t){return 1&t&&(o=null),1&t&&(i=null),null==o&&(o=!!e[16].type.includes("ChoiceField")),o?0:"BooleanField"===e[16].type?1:(null==i&&(i=!!e[16].type.includes("Date")),i?2:"IntegerField"===e[16].type||"FloatField"===e[16].type?3:4)}return a=g(e,-1),u=h[a]=p[a](e),{c(){t=P("div"),n=P("label"),l=C(f),r=A(),c=P("div"),u.c(),d=A(),T(n,"for",s=e[16].name),T(n,"class","label column is-small is-3 svelte-wwfwxh"),T(c,"class","control has-icons-right column is-9"),T(t,"class","search-field field columns is-middle svelte-wwfwxh")},m(e,s){L(e,t,s),_(t,n),_(n,l),_(t,r),_(t,c),h[a].m(c,null),_(t,d),m=!0},p(e,t){(!m||1&t)&&f!==(f=e[16].label+"")&&H(l,f),(!m||1&t&&s!==(s=e[16].name))&&T(n,"for",s);let r=a;a=g(e,t),a===r?h[a].p(e,t):(ge(),ve(h[r],1,1,(()=>{h[r]=null})),$e(),u=h[a],u?u.p(e,t):(u=h[a]=p[a](e),u.c()),be(u,1),u.m(c,null))},i(e){m||(be(u),m=!0)},o(e){ve(u),m=!1},d(e){e&&O(t),h[a].d()}}}function mn(t){let n,l,s,r,c;function o(){t[13].call(n,t[16])}return{c(){n=P("input"),T(n,"type","text"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",s=t[16].name)},m(e,l){L(e,n,l),z(n,t[1][t[16].name]),r||(c=I(n,"input",o),r=!0)},p(e,r){t=e,1&r&&l!==(l=t[16].name)&&T(n,"id",l),1&r&&s!==(s=t[16].name)&&T(n,"name",s),3&r&&n.value!==t[1][t[16].name]&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),r=!1,c()}}}function fn(t){let n,l,s,r,c;function o(){t[12].call(n,t[16])}return{c(){n=P("input"),T(n,"type","number"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",s=t[16].name)},m(e,l){L(e,n,l),z(n,t[1][t[16].name]),r||(c=I(n,"input",o),r=!0)},p(e,r){t=e,1&r&&l!==(l=t[16].name)&&T(n,"id",l),1&r&&s!==(s=t[16].name)&&T(n,"name",s),3&r&&F(n.value)!==t[1][t[16].name]&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),r=!1,c()}}}function pn(t){let n,l,s,r,c;function o(){t[11].call(n,t[16])}return{c(){n=P("input"),T(n,"type","date"),T(n,"class","input is-small is-wide"),T(n,"id",l=t[16].name),T(n,"name",s=t[16].name)},m(e,l){L(e,n,l),z(n,t[1][t[16].name]),r||(c=I(n,"input",o),r=!0)},p(e,r){t=e,1&r&&l!==(l=t[16].name)&&T(n,"id",l),1&r&&s!==(s=t[16].name)&&T(n,"name",s),3&r&&z(n,t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),r=!1,c()}}}function hn(t){let n,l,s,r,c;function o(){t[10].call(n,t[16])}return{c(){n=P("input"),T(n,"type","checkbox"),T(n,"id",l=t[16].name),T(n,"name",s=t[16].name)},m(e,l){L(e,n,l),n.checked=t[1][t[16].name],r||(c=I(n,"change",o),r=!0)},p(e,r){t=e,1&r&&l!==(l=t[16].name)&&T(n,"id",l),1&r&&s!==(s=t[16].name)&&T(n,"name",s),3&r&&(n.checked=t[1][t[16].name])},i:e,o:e,d(e){e&&O(n),r=!1,c()}}}function gn(e){let t,n,l,s,r;const c=[bn,$n],o=[];function i(e,n){var l;return 1&n&&(t=null),null==t&&(l=e[16],t=!!(l.type.includes("ChoiceField")&&l.choices.length>5)),t?0:1}return n=i(e,-1),l=o[n]=c[n](e),{c(){l.c(),s=j()},m(e,t){o[n].m(e,t),L(e,s,t),r=!0},p(e,t){let r=n;n=i(e,t),n===r?o[n].p(e,t):(ge(),ve(o[r],1,1,(()=>{o[r]=null})),$e(),l=o[n],l?l.p(e,t):(l=o[n]=c[n](e),l.c()),be(l,1),l.m(s.parentNode,s))},i(e){r||(be(l),r=!0)},o(e){ve(l),r=!1},d(e){o[n].d(e),e&&O(s)}}}function $n(t){let l,s,r,c,o,i,a,u,d=!t[5](t[16]),m=d&&vn(),f=t[16].choices,p=[];for(let e=0;e<f.length;e+=1)p[e]=yn(rn(t,f,e));let h=[{id:c=t[16].name},{name:o=t[16].name},{class:"is-wide"},t[5](t[16])?{size:3,multiple:!0}:{}],g={};for(let e=0;e<h.length;e+=1)g=n(g,h[e]);function $(){t[9].call(s,t[16])}return{c(){l=P("div"),s=P("select"),m&&m.c(),r=j();for(let e=0;e<p.length;e+=1)p[e].c();D(s,g),void 0===t[1][t[16].name]&&oe($),q(s,"svelte-wwfwxh",!0),T(l,"class",i="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))},m(e,n){L(e,l,n),_(l,s),m&&m.m(s,null),_(s,r);for(let e=0;e<p.length;e+=1)p[e]&&p[e].m(s,null);"value"in g&&(g.multiple?V:B)(s,g.value),s.autofocus&&s.focus(),B(s,t[1][t[16].name],!0),a||(u=I(s,"change",$),a=!0)},p(e,n){if(t=e,1&n&&(d=!t[5](t[16])),d?m?m.p(t,n):(m=vn(),m.c(),m.m(s,r)):m&&(m.d(1),m=null),1&n){let e;for(f=t[16].choices,e=0;e<f.length;e+=1){const l=rn(t,f,e);p[e]?p[e].p(l,n):(p[e]=yn(l),p[e].c(),p[e].m(s,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=f.length}D(s,g=function(e,t){const n={},l={},s={$$scope:1};let r=e.length;for(;r--;){const c=e[r],o=t[r];if(o){for(const e in c)e in o||(l[e]=1);for(const e in o)s[e]||(n[e]=o[e],s[e]=1);e[r]=o}else for(const e in c)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(h,[1&n&&c!==(c=t[16].name)&&{id:c},1&n&&o!==(o=t[16].name)&&{name:o},{class:"is-wide"},1&n&&(t[5](t[16])?{size:3,multiple:!0}:{})])),33&n&&"value"in g&&(g.multiple?V:B)(s,g.value),3&n&&B(s,t[1][t[16].name]),q(s,"svelte-wwfwxh",!0),1&n&&i!==(i="select is-small is-wide "+(t[5](t[16])?"is-multiple":""))&&T(l,"class",i)},i:e,o:e,d(e){e&&O(l),m&&m.d(),N(p,e),a=!1,u()}}}function bn(e){let t,n;return t=new ln({props:{items:e[16].choices,name:e[16].name,id:e[16].name}}),t.$on("select",(function(...t){return e[8](e[16],...t)})),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(n,l){e=n;const s={};1&l&&(s.items=e[16].choices),1&l&&(s.name=e[16].name),1&l&&(s.id=e[16].name),t.$set(s)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function vn(t){let n;return{c(){n=P("option"),n.textContent=("en"===Re?"Select":"Sélectionner")+" ...\n                                                    ",n.__value="",n.value=n.__value,n.disabled=!0,n.selected=!0,T(n,"class","faded")},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function yn(e){let t,n,l,s=e[19].label+"";return{c(){t=P("option"),n=C(s),t.__value=l=e[19].id,t.value=t.__value},m(e,l){L(e,t,l),_(t,n)},p(e,r){1&r&&s!==(s=e[19].label+"")&&H(n,s),1&r&&l!==(l=e[19].id)&&(t.__value=l,t.value=t.__value)},d(e){e&&O(t)}}}function wn(e){let t,n,l="search"!==e[16].name&&dn(e);return{c(){l&&l.c(),t=j()},m(e,s){l&&l.m(e,s),L(e,t,s),n=!0},p(e,n){"search"!==e[16].name?l?(l.p(e,n),1&n&&be(l,1)):(l=dn(e),l.c(),be(l,1),l.m(t.parentNode,t)):l&&(ge(),ve(l,1,1,(()=>{l=null})),$e())},i(e){n||(be(l),n=!0)},o(e){ve(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function kn(e){let t,n,l=e[0].length>0&&on(e);return{c(){l&&l.c(),t=j()},m(e,s){l&&l.m(e,s),L(e,t,s),n=!0},p(e,[n]){e[0].length>0?l?(l.p(e,n),1&n&&be(l,1)):(l=on(e),l.c(),be(l,1),l.m(t.parentNode,t)):l&&(ge(),ve(l,1,1,(()=>{l=null})),$e())},i(e){n||(be(l),n=!0)},o(e){ve(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function Sn(e,t,n){let l,{recordsStore:s}=t;const{recordSearch:r,searchParams:c}=s;m(e,c,(e=>n(14,l=e)));let{searchFields:o=[]}=t,i={};var a;function u(e,t){n(1,i[e.name]=t.detail.id,i)}a=()=>{const e=l??new URLSearchParams(window.location.search);o.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},Q().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(6,s=e.recordsStore),"searchFields"in e&&n(0,o=e.searchFields)},[o,i,c,function(e){e.preventDefault(),r(i)},u,e=>e.type.includes("Multiple"),s,function(e){i[e.name]=this.value,n(1,i),n(0,o)},(e,t)=>u(e,t),function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,o)},function(e){i[e.name]=this.checked,n(1,i),n(0,o)},function(e){i[e.name]=this.value,n(1,i),n(0,o)},function(e){i[e.name]=F(this.value),n(1,i),n(0,o)},function(e){i[e.name]=this.value,n(1,i),n(0,o)}]}class _n extends Pe{constructor(e){super(),Ne(this,e,Sn,kn,o,{recordsStore:6,searchFields:0})}}function xn(e){let t,n,l,s,r,c,o,i,a,u=e[5]>1&&En(e),d=e[5]<e[3]&&Nn(e);return{c(){t=P("nav"),n=P("ul"),u&&u.c(),l=A(),s=P("li"),r=P("a"),c=C(e[5]),o=A(),d&&d.c(),T(r,"class","pagination-link is-current"),T(r,"href",null),T(n,"class","pagination-list ml-0"),T(t,"class","pagination is-centered mb-2"),T(t,"aria-label","pagination")},m(m,f){L(m,t,f),_(t,n),u&&u.m(n,null),_(n,l),_(n,s),_(s,r),_(r,c),_(n,o),d&&d.m(n,null),i||(a=I(r,"click",M(e[9])),i=!0)},p(e,t){e[5]>1?u?u.p(e,t):(u=En(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),32&t&&H(c,e[5]),e[5]<e[3]?d?d.p(e,t):(d=Nn(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&O(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function En(e){let t,n,l,s,r,c,o=e[5]-1>1&&Ln(e);return{c(){t=P("li"),n=P("a"),n.textContent="1",l=A(),o&&o.c(),s=j(),T(n,"class","pagination-link"),T(n,"href",null)},m(i,a){L(i,t,a),_(t,n),L(i,l,a),o&&o.m(i,a),L(i,s,a),r||(c=I(n,"click",M(e[7])),r=!0)},p(e,t){e[5]-1>1?o?o.p(e,t):(o=Ln(e),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null)},d(e){e&&O(t),e&&O(l),o&&o.d(e),e&&O(s),r=!1,c()}}}function Ln(e){let t,n,l,s,r,c,o=e[5]-1+"",i=e[5]-1>2&&On();return{c(){i&&i.c(),t=A(),n=P("li"),l=P("a"),s=C(o),T(l,"class","pagination-link"),T(l,"href",null)},m(o,a){i&&i.m(o,a),L(o,t,a),L(o,n,a),_(n,l),_(l,s),r||(c=I(l,"click",M(e[8])),r=!0)},p(e,n){e[5]-1>2?i||(i=On(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),32&n&&o!==(o=e[5]-1+"")&&H(s,o)},d(e){i&&i.d(e),e&&O(t),e&&O(n),r=!1,c()}}}function On(e){let t;return{c(){t=P("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Nn(e){let t,n,l,s,r,c,o=e[5]+1<e[3]&&Pn(e);return{c(){o&&o.c(),t=A(),n=P("li"),l=P("a"),s=C(e[3]),T(l,"class","pagination-link"),T(l,"href",null)},m(i,a){o&&o.m(i,a),L(i,t,a),L(i,n,a),_(n,l),_(l,s),r||(c=I(l,"click",M(e[11])),r=!0)},p(e,n){e[5]+1<e[3]?o?o.p(e,n):(o=Pn(e),o.c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),8&n&&H(s,e[3])},d(e){o&&o.d(e),e&&O(t),e&&O(n),r=!1,c()}}}function Pn(e){let t,n,l,s,r,c,o,i=e[5]+1+"",a=e[5]+2<e[3]&&Rn();return{c(){t=P("li"),n=P("a"),l=C(i),s=A(),a&&a.c(),r=j(),T(n,"class","pagination-link"),T(n,"href",null)},m(i,u){L(i,t,u),_(t,n),_(n,l),L(i,s,u),a&&a.m(i,u),L(i,r,u),c||(o=I(n,"click",M(e[10])),c=!0)},p(e,t){32&t&&i!==(i=e[5]+1+"")&&H(l,i),e[5]+2<e[3]?a||(a=Rn(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&O(t),e&&O(s),a&&a.d(e),e&&O(r),c=!1,o()}}}function Rn(e){let t;return{c(){t=P("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Cn(t){let n,l,s,r,c,o,i,a,u=t[5]*t[2]-t[2]+1+"",d=Math.min(t[5]*t[2],t[1])+"",m=t[4]&&xn(t);return{c(){m&&m.c(),n=A(),l=P("div"),s=C(u),r=C(" - "),c=C(d),o=C(" / "),i=C(t[1]),T(l,"class",a="is-size-7 is-center mb-4 "+(t[4]?"":"mt-4"))},m(e,t){m&&m.m(e,t),L(e,n,t),L(e,l,t),_(l,s),_(l,r),_(l,c),_(l,o),_(l,i)},p(e,[t]){e[4]?m?m.p(e,t):(m=xn(e),m.c(),m.m(n.parentNode,n)):m&&(m.d(1),m=null),36&t&&u!==(u=e[5]*e[2]-e[2]+1+"")&&H(s,u),38&t&&d!==(d=Math.min(e[5]*e[2],e[1])+"")&&H(c,d),2&t&&H(i,e[1]),16&t&&a!==(a="is-size-7 is-center mb-4 "+(e[4]?"":"mt-4"))&&T(l,"class",a)},i:e,o:e,d(e){m&&m.d(e),e&&O(n),e&&O(l)}}}function An(e,t,n){let l,s,r,{store:c}=t;const{currentPage:o}=c;m(e,o,(e=>n(5,r=e)));let{nbOfItems:i}=t,{pageLength:a=De}=t;return e.$$set=e=>{"store"in e&&n(0,c=e.store),"nbOfItems"in e&&n(1,i=e.nbOfItems),"pageLength"in e&&n(2,a=e.pageLength)},e.$$.update=()=>{6&e.$$.dirty&&n(3,l=a>0?Math.ceil(i/a):1),14&e.$$.dirty&&n(4,s=l>1||i>a)},[c,i,a,l,s,r,o,()=>c.handlePageUpdate(1),()=>c.handlePageUpdate(r-1),()=>c.handlePageUpdate(r),()=>c.handlePageUpdate(r+1),()=>c.handlePageUpdate(l)]}class jn extends Pe{constructor(e){super(),Ne(this,e,An,Cn,o,{store:0,nbOfItems:1,pageLength:2})}}const In=e=>({}),Mn=e=>({});function Tn(e){let t,n,l,s,c,o,i,a,u,d,m,p,v,y,w,k,S,x,E,N,R;const C=e[1].content,j=f(C,e,e[0],Mn);return{c(){t=P("button"),n=A(),l=P("div"),s=P("div"),c=A(),o=P("div"),i=P("div"),i.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=A(),u=P("section"),d=P("div"),m=A(),p=P("div"),j&&j.c(),v=A(),y=P("footer"),w=P("div"),k=P("button"),k.textContent=""+("en"===Re?"Abort":"Retour"),S=A(),x=P("button"),x.textContent="OK",T(t,"id","hidden-msg-btn"),T(t,"data-target","msg-modal"),t.hidden=!0,T(s,"id","modal-bkg"),T(s,"class","modal-background"),T(i,"class","modal-card-head media mb-0"),T(d,"id","modal-msg"),T(p,"class","py-3"),T(u,"id","modal-body"),T(u,"class","modal-card-body"),T(k,"id","cancel-btn"),T(k,"class","button is-link is-light button-close"),T(x,"id","ok-btn"),T(x,"class","button is-link button-close"),T(w,"class","buttons"),T(y,"id","modal-footer"),T(y,"class","modal-card-foot is-center pt-3"),y.hidden=!0,T(o,"class","modal-content"),T(l,"id","msg-modal"),T(l,"class","modal fade"),T(l,"tabindex","-1"),T(l,"aria-labelledby","selection-modal-label"),T(l,"aria-hidden","true")},m(e,r){L(e,t,r),L(e,n,r),L(e,l,r),_(l,s),_(l,c),_(l,o),_(o,i),_(o,a),_(o,u),_(u,d),_(u,m),_(u,p),j&&j.m(p,null),_(o,v),_(o,y),_(y,w),_(w,k),_(w,S),_(w,x),E=!0,N||(R=[b(ct.call(null,t)),b(rt.call(null,l))],N=!0)},p(e,[t]){j&&j.p&&(!E||1&t)&&g(j,C,e,e[0],E?h(C,e[0],t,In):$(e[0]),Mn)},i(e){E||(be(j,e),E=!0)},o(e){ve(j,e),E=!1},d(e){e&&O(t),e&&O(n),e&&O(l),j&&j.d(e),N=!1,r(R)}}}function Un(e,t,n){let{$$slots:l={},$$scope:s}=t;return e.$$set=e=>{"$$scope"in e&&n(0,s=e.$$scope)},[s,l]}class Dn extends Pe{constructor(e){super(),Ne(this,e,Un,Tn,o,{})}}function Fn(e){const t=e,n=ze(1),l=ze([]),s=ze(0),r=ze(new URLSearchParams(window.location.search));async function c(){const e=d(r);e.set("p",`${d(n)}`);try{const r=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),c=await r.json();l.set(c.results),s.set(c.count),n.set(c.current_page),e.set("p",String(d(n)));const o=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",o),c}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let o=c();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),o=c()}return{currentPage:n,pageRecords:l,resultPage:o,resultNumber:s,fetchPage:c,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);r.set(t),i(1)},remove:function(e){l.update((t=>t.filter((t=>t.id!==e))))}}}function Hn(e,t,n){const l=e.slice();return l[8]=t[n][0],l[9]=t[n][1],l}function zn(e,t,n){const l=e.slice();return l[12]=t[n][0],l[13]=t[n][1],l}function Bn(e,t,n){const l=e.slice();return l[12]=t[n][0],l[13]=t[n][1],l}function Vn(e){let t,n,l=e[2]?"Retirer de la":"Charger dans la";return{c(){t=C(l),n=C(" sélection")},m(e,l){L(e,t,l),L(e,n,l)},p(e,n){4&n&&l!==(l=e[2]?"Retirer de la":"Charger dans la")&&H(t,l)},d(e){e&&O(t),e&&O(n)}}}function qn(e){let t,n,l=e[2]?"Unload from":"Load to";return{c(){t=C(l),n=C(" selection")},m(e,l){L(e,t,l),L(e,n,l)},p(e,n){4&n&&l!==(l=e[2]?"Unload from":"Load to")&&H(t,l)},d(e){e&&O(t),e&&O(n)}}}function Jn(e){let t;return{c(){t=R("path"),T(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Gn(e){let t;return{c(){t=R("path"),T(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){L(e,t,n)},d(e){e&&O(t)}}}function Wn(e){let t,n,l,s,c,o,i,a,u,d,m,f,p="en"===Re?"Export":"Exporter";let h=("en"===Re?qn:Vn)(e);function g(e,t){return e[2]?Gn:Jn}let $=g(e),b=$(e);return{c(){t=P("div"),n=P("button"),h.c(),l=A(),s=R("svg"),b.c(),c=A(),o=P("button"),i=P("span"),a=P("i"),u=A(),d=C(p),T(s,"xmlns","http://www.w3.org/2000/svg"),T(s,"viewBox","0 0 384 512"),T(n,"class","button"),q(n,"is-inverted",e[2]),T(a,"class","fa-solid fa-file-export"),T(o,"class","button is-link"),q(o,"is-inverted",e[2]),T(t,"slot","buttons")},m(r,p){L(r,t,p),_(t,n),h.m(n,null),_(n,l),_(n,s),b.m(s,null),_(t,c),_(t,o),_(o,i),_(i,a),_(i,u),_(i,d),m||(f=[I(n,"click",e[6]),I(o,"click",e[7])],m=!0)},p(e,t){h.p(e,t),$!==($=g(e))&&(b.d(1),b=$(e),b&&(b.c(),b.m(s,null))),4&t&&q(n,"is-inverted",e[2]),4&t&&q(o,"is-inverted",e[2])},d(e){e&&O(t),h.d(),b.d(),m=!1,r(f)}}}function Zn(e){let t,n,l,s,r,c,o,i=e[13].task_type+"",a=e[12]+"";return{c(){t=P("a"),n=C(i),l=C(" #"),s=C(a),r=A(),T(t,"href",c=e[13].url),T(t,"class",o="tag is-rounded is-small "+tl(e[13].status))},m(e,c){L(e,t,c),_(t,n),_(t,l),_(t,s),_(t,r)},p(e,l){1&l&&i!==(i=e[13].task_type+"")&&H(n,i),1&l&&a!==(a=e[12]+"")&&H(s,a),1&l&&c!==(c=e[13].url)&&T(t,"href",c),1&l&&o!==(o="tag is-rounded is-small "+tl(e[13].status))&&T(t,"class",o)},d(e){e&&O(t)}}}function Xn(e){let t,n=Object.entries(e[9]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Yn(zn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=j()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);L(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[9]),r=0;r<n.length;r+=1){const c=zn(e,n,r);l[r]?l[r].p(c,s):(l[r]=Yn(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){N(l,e),e&&O(t)}}}function Yn(e){let t,n,l,s,r,c,o,i,a=e[8]+"",u=e[12]+"",d=e[13].title+"";return{c(){t=P("div"),n=P("span"),l=C(a),s=C(" #"),r=C(u),c=A(),o=C(d),i=A(),T(n,"class","tag is-rounded is-accent")},m(e,a){L(e,t,a),_(t,n),_(n,l),_(n,s),_(n,r),_(t,c),_(t,o),_(t,i)},p(e,t){1&t&&a!==(a=e[8]+"")&&H(l,a),1&t&&u!==(u=e[12]+"")&&H(r,u),1&t&&d!==(d=e[13].title+"")&&H(o,d)},d(e){e&&O(t)}}}function Kn(e){let t,n="User"!==e[8]&&Xn(e);return{c(){n&&n.c(),t=j()},m(e,l){n&&n.m(e,l),L(e,t,l)},p(e,l){"User"!==e[8]?n?n.p(e,l):(n=Xn(e),n.c(),n.m(t.parentNode,t)):n&&(n.d(1),n=null)},d(e){n&&n.d(e),e&&O(t)}}}function Qn(e){let t,n,l,s,r=Object.entries(e[0].treatments),c=[];for(let t=0;t<r.length;t+=1)c[t]=Zn(Bn(e,r,t));let o=Object.entries(e[0].selection.selected),i=[];for(let t=0;t<o.length;t+=1)i[t]=Kn(Hn(e,o,t));return{c(){t=P("div"),n=P("div");for(let e=0;e<c.length;e+=1)c[e].c();l=A(),s=P("div");for(let e=0;e<i.length;e+=1)i[e].c();T(n,"class","tags container"),T(s,"class","grid"),T(t,"slot","body")},m(e,r){L(e,t,r),_(t,n);for(let e=0;e<c.length;e+=1)c[e]&&c[e].m(n,null);_(t,l),_(t,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(s,null)},p(e,t){if(1&t){let l;for(r=Object.entries(e[0].treatments),l=0;l<r.length;l+=1){const s=Bn(e,r,l);c[l]?c[l].p(s,t):(c[l]=Zn(s),c[l].c(),c[l].m(n,null))}for(;l<c.length;l+=1)c[l].d(1);c.length=r.length}if(1&t){let n;for(o=Object.entries(e[0].selection.selected),n=0;n<o.length;n+=1){const l=Hn(e,o,n);i[n]?i[n].p(l,t):(i[n]=Kn(l),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=o.length}},d(e){e&&O(t),N(c,e),N(i,e)}}}function el(e){let t,n,l,s;return t=new Dn({}),l=new St({props:{item:e[0],recordsStore:e[1],$$slots:{body:[Qn],buttons:[Wn]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment),n=A(),xe(l.$$.fragment)},m(e,r){Ee(t,e,r),L(e,n,r),Ee(l,e,r),s=!0},p(e,[t]){const n={};1&t&&(n.item=e[0]),2&t&&(n.recordsStore=e[1]),262149&t&&(n.$$scope={dirty:t,ctx:e}),l.$set(n)},i(e){s||(be(t.$$.fragment,e),be(l.$$.fragment,e),s=!0)},o(e){ve(t.$$.fragment,e),ve(l.$$.fragment,e),s=!1},d(e){Le(t,e),e&&O(n),Le(l,e)}}}function tl(e){return e?"CANCELLED"===e?"is-info":"ERROR"===e?"is-danger":"IN PROGRESS"===e?"is-warning":"PENDING"===e||"STARTED"===e?"is-info":"SUCCESS"===e?"is-success":"is-dark":"is-dark"}function nl(e,t,n){let l,s,{item:r}=t,{recordsStore:c}=t;const{isSetSelected:o}=qe;async function i(e){let t="en"===Re?"You can export the contents of this set as a ZIP archive or reach our JSON API.":"Vous pouvez exporter le contenu de cet ensemble en archive ZIP ou interroger notre API JSON.",n=document.createElement("div");n.style="display: flex; gap: 1rem; align-items: center; justify-content: center; margin-top: 1em;";let l=document.createElement("a");l.classList.add("button","is-link"),l.innerHTML="<span>"+("en"===Re?"JSON API":"API JSON")+"</span>",l.href=`/${Ce}/document-set/${e.id}/json`,l.target="_blank";let s=document.createElement("a");s.classList.add("button","is-link"),s.innerHTML="<span>ZIP</span>",s.href=`/${Ce}/document-set/${e.id}/zip`,s.target="_blank",n.appendChild(l),n.appendChild(s),await lt(t+"<br/>"+n.outerHTML,"Export",!1)}m(e,o,(e=>n(5,s=e)));return e.$$set=e=>{"item"in e&&n(0,r=e.item),"recordsStore"in e&&n(1,c=e.recordsStore)},e.$$.update=()=>{33&e.$$.dirty&&n(2,l=s(r))},[r,c,l,o,i,s,()=>qe.toggleSet(r),()=>i(r)]}let ll=class extends Pe{constructor(e){super(),Ne(this,e,nl,el,o,{item:0,recordsStore:1})}};function sl(e,t,n){const l=e.slice();return l[5]=t[n][0],l[6]=t[n][1],l}function rl(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function cl(e){let t,n,l,s,r;return{c(){t=P("a"),n=P("i"),l=A(),s=P("span"),s.textContent=""+("en"===Re?"Relaunch same treatment":"Relancer le même traitement"),T(n,"class","fa-solid fa-arrow-rotate-left"),T(t,"href",r="add/"+e[0].query_parameters),T(t,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),T(t,"title","en"===Re?"Relaunch same treatment":"Relancer le même traitement")},m(e,r){L(e,t,r),_(t,n),_(t,l),_(t,s)},p(e,n){1&n&&r!==(r="add/"+e[0].query_parameters)&&T(t,"href",r)},d(e){e&&O(t)}}}function ol(t){let n,l,s,r,c,o;return{c(){n=P("button"),l=P("i"),s=A(),r=P("span"),r.textContent=""+("en"===Re?"Cancel treatment":"Annuler le traitement"),T(l,"class","fa-solid fa-ban"),T(n,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),T(n,"title","en"===Re?"Cancel treatment":"Annuler le traitement")},m(e,i){L(e,n,i),_(n,l),_(n,s),_(n,r),c||(o=I(n,"click",t[4]),c=!0)},p:e,d(e){e&&O(n),c=!1,o()}}}function il(e){let t,n;return{c(){t=P("span"),n=C(e[2]),T(t,"class","tag is-info p-1 mb-1")},m(e,l){L(e,t,l),_(t,n)},p(e,t){4&t&&H(n,e[2])},d(e){e&&O(t)}}}function al(e){let t,n,l;return{c(){t=P("span"),n=C(e[2]),T(t,"class","tag is-danger p-1 mb-1"),T(t,"title",l=e[0].info||"Unknown error")},m(e,l){L(e,t,l),_(t,n)},p(e,s){4&s&&H(n,e[2]),1&s&&l!==(l=e[0].info||"Unknown error")&&T(t,"title",l)},d(e){e&&O(t)}}}function ul(e){let t,n;return{c(){t=P("span"),n=C(e[2]),T(t,"class","tag is-success p-1 mb-1")},m(e,l){L(e,t,l),_(t,n)},p(e,t){4&t&&H(n,e[2])},d(e){e&&O(t)}}}function dl(e){let t,n;function l(e,t){return!e[3]&&e[0].api_tracking_id?ol:e[3]&&"ERROR"===e[2]?cl:void 0}let s=l(e),r=s&&s(e);function c(e,t){return"SUCCESS"===e[2]?ul:"ERROR"===e[2]?al:il}let o=c(e),i=o(e);return{c(){t=P("div"),r&&r.c(),n=A(),i.c(),T(t,"slot","buttons")},m(e,l){L(e,t,l),r&&r.m(t,null),_(t,n),i.m(t,null)},p(e,a){s===(s=l(e))&&r?r.p(e,a):(r&&r.d(1),r=s&&s(e),r&&(r.c(),r.m(t,n))),o===(o=c(e))&&i?i.p(e,a):(i.d(1),i=o(e),i&&(i.c(),i.m(t,null)))},d(e){e&&O(t),r&&r.d(),i.d()}}}function ml(e){let t,n=Object.entries(e[0].selection.selected),l=[];for(let t=0;t<n.length;t+=1)l[t]=pl(sl(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=j()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);L(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].selection.selected),r=0;r<n.length;r+=1){const c=sl(e,n,r);l[r]?l[r].p(c,s):(l[r]=pl(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){N(l,e),e&&O(t)}}}function fl(e){let t,n,l,s,r,c,o,i,a=e[5]+"",u=e[9]+"",d=e[10].title+"";return{c(){t=P("div"),n=P("span"),l=C(a),s=C(" #"),r=C(u),c=A(),o=C(d),i=A(),T(n,"class","tag is-rounded is-accent")},m(e,a){L(e,t,a),_(t,n),_(n,l),_(n,s),_(n,r),_(t,c),_(t,o),_(t,i)},p(e,t){1&t&&a!==(a=e[5]+"")&&H(l,a),1&t&&u!==(u=e[9]+"")&&H(r,u),1&t&&d!==(d=e[10].title+"")&&H(o,d)},d(e){e&&O(t)}}}function pl(e){let t,n=Object.entries(e[6]),l=[];for(let t=0;t<n.length;t+=1)l[t]=fl(rl(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=j()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);L(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[6]),r=0;r<n.length;r+=1){const c=rl(e,n,r);l[r]?l[r].p(c,s):(l[r]=fl(c),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){N(l,e),e&&O(t)}}}function hl(e){let t,n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected,l=n&&ml(e);return{c(){t=P("div"),l&&l.c(),T(t,"slot","body"),T(t,"class","pt-2 grid")},m(e,n){L(e,t,n),l&&l.m(t,null)},p(e,s){1&s&&(n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected),n?l?l.p(e,s):(l=ml(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&O(t),l&&l.d()}}}function gl(e){let t,n;return t=new St({props:{item:e[0],recordsStore:e[1],$$slots:{body:[hl],buttons:[dl]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),2&n&&(l.recordsStore=e[1]),8205&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function $l(e,t,n){let l,s,{item:r}=t,{recordsStore:c}=t;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"recordsStore"in e&&n(1,c=e.recordsStore)},e.$$.update=()=>{1&e.$$.dirty&&n(3,l=r.is_finished),1&e.$$.dirty&&n(2,s=r.status)},[r,c,s,l,async function(){if(!await lt("en"===Re?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?","en"===Re?"Confirm cancel":"Confirmer l'annulation",!0))return;await st(`/${Ce}/treatment/${r.id}/cancel`)?(n(3,l=!0),n(2,s="CANCELLED")):await lt("en"===Re?"Failed to cancel treatment":"Erreur lors de l'annulation du traitement","en"===Re?"Error":"Erreur")}]}class bl extends Pe{constructor(e){super(),Ne(this,e,$l,gl,o,{item:0,recordsStore:1})}}function vl(e,t,n){const l=e.slice();return l[17]=t[n][0],l[18]=t[n][1],l}function yl(e,t,n){const l=e.slice();return l[21]=t[n][0],l[22]=t[n][1],l}function wl(e,t,n){const l=e.slice();return l[26]=t[n],l}function kl(t){let n,l,s,r,c;return{c(){n=P("span"),l=P("a"),s=P("i"),r=A(),c=P("span"),c.textContent=""+("en"===Re?"Add":"Ajouter"),T(s,"class","fa-solid fa-plus"),T(l,"href",t[12]),T(l,"class","button is-rounded is-primary mb-4"),T(l,"title","en"===Re?"Add":"Ajouter"),T(n,"class","is-right")},m(e,t){L(e,n,t),_(n,l),_(l,s),_(l,r),_(l,c)},p:e,d(e){e&&O(n)}}}function Sl(t){let n,l,s,r,c="en"===Re?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",o=t[29]+"";return{c(){n=P("div"),l=C(c),s=A(),r=C(o),T(n,"class","faded is-center")},m(e,t){L(e,n,t),_(n,l),_(n,s),_(n,r)},p:e,i:e,o:e,d(e){e&&O(n)}}}function _l(e){let t,n,l=0!==e[4].length&&xl(e);return{c(){l&&l.c(),t=j()},m(e,s){l&&l.m(e,s),L(e,t,s),n=!0},p(e,n){0!==e[4].length?l?(l.p(e,n),16&n&&be(l,1)):(l=xl(e),l.c(),be(l,1),l.m(t.parentNode,t)):l&&(ge(),ve(l,1,1,(()=>{l=null})),$e())},i(e){n||(be(l),n=!0)},o(e){ve(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function xl(e){let t,n,l,s,r,c,o=[],i=new Map;t=new jn({props:{store:e[8],nbOfItems:e[5]}});let a=e[4];const u=e=>e[26].id;for(let t=0;t<a.length;t+=1){let n=wl(e,a,t),l=u(n);i.set(l,o[t]=Pl(l,n))}let d=null;return a.length||(d=El()),r=new jn({props:{store:e[8],nbOfItems:e[5]}}),{c(){xe(t.$$.fragment),n=A(),l=P("div");for(let e=0;e<o.length;e+=1)o[e].c();d&&d.c(),s=A(),xe(r.$$.fragment)},m(e,i){Ee(t,e,i),L(e,n,i),L(e,l,i);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(l,null);d&&d.m(l,null),L(e,s,i),Ee(r,e,i),c=!0},p(e,n){const s={};32&n&&(s.nbOfItems=e[5]),t.$set(s),272&n&&(a=e[4],ge(),o=_e(o,n,u,1,e,a,i,l,Se,Pl,null,wl),$e(),!a.length&&d?d.p(e,n):a.length?d&&(d.d(1),d=null):(d=El(),d.c(),d.m(l,null)));const c={};32&n&&(c.nbOfItems=e[5]),r.$set(c)},i(e){if(!c){be(t.$$.fragment,e);for(let e=0;e<a.length;e+=1)be(o[e]);be(r.$$.fragment,e),c=!0}},o(e){ve(t.$$.fragment,e);for(let e=0;e<o.length;e+=1)ve(o[e]);ve(r.$$.fragment,e),c=!1},d(e){Le(t,e),e&&O(n),e&&O(l);for(let e=0;e<o.length;e+=1)o[e].d();d&&d.d(),e&&O(s),Le(r,e)}}}function El(t){let n;return{c(){n=P("p"),n.textContent=""+("en"===Re?"No records found":"Aucun enregistrement trouvé")},m(e,t){L(e,n,t)},p:e,d(e){e&&O(n)}}}function Ll(e){let t,n;return t=new Pt({props:{item:e[26],recordsStore:e[8]}}),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function Ol(e){let t,n;return t=new ll({props:{item:e[26],recordsStore:e[8]}}),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function Nl(e){let t,n;return t=new bl({props:{item:e[26],recordsStore:e[8]}}),{c(){xe(t.$$.fragment)},m(e,l){Ee(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(be(t.$$.fragment,e),n=!0)},o(e){ve(t.$$.fragment,e),n=!1},d(e){Le(t,e)}}}function Pl(e,t){let n,l,s,r,c,o,i;const a=[Nl,Ol,Ll],u=[];function d(e,t){return 16&t&&(l=null),16&t&&(s=null),null==l&&(l=!!e[26].class.includes("Treatment")),l?0:(null==s&&(s=!!e[26].class.includes("Set")),s?1:2)}return r=d(t,-1),c=u[r]=a[r](t),{key:e,first:null,c(){n=j(),c.c(),o=j(),this.first=n},m(e,t){L(e,n,t),u[r].m(e,t),L(e,o,t),i=!0},p(e,n){let l=r;r=d(t=e,n),r===l?u[r].p(t,n):(ge(),ve(u[l],1,1,(()=>{u[l]=null})),$e(),c=u[r],c?c.p(t,n):(c=u[r]=a[r](t),c.c()),be(c,1),c.m(o.parentNode,o))},i(e){i||(be(c),i=!0)},o(e){ve(c),i=!1},d(e){e&&O(n),u[r].d(e),e&&O(o)}}}function Rl(t){let n;return{c(){n=P("div"),n.textContent=""+("en"===Re?"Retrieving records...":"Récupération des enregistrements..."),T(n,"class","faded is-center")},m(e,t){L(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Cl(t){let n,l,s;return{c(){n=P("tr"),l=P("td"),l.textContent=""+("en"===Re?"No documents in selection":"Aucun document sélectionné"),s=A()},m(e,t){L(e,n,t),_(n,l),_(n,s)},p:e,d(e){e&&O(n)}}}function Al(e){let t,n,l,s,r,c,o=Fe[e[17]]+"",i=Object.entries(e[18]),a=[];for(let t=0;t<i.length;t+=1)a[t]=jl(yl(e,i,t));return{c(){t=P("h3"),n=C(o),l=A(),s=P("table"),r=P("tbody");for(let e=0;e<a.length;e+=1)a[e].c();c=A(),T(s,"class","table pl-2 is-fullwidth")},m(e,o){L(e,t,o),_(t,n),L(e,l,o),L(e,s,o),_(s,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null);_(s,c)},p(e,t){if(8&t&&o!==(o=Fe[e[17]]+"")&&H(n,o),8&t){let n;for(i=Object.entries(e[18]),n=0;n<i.length;n+=1){const l=yl(e,i,n);a[n]?a[n].p(l,t):(a[n]=jl(l),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(e){e&&O(t),e&&O(l),e&&O(s),N(a,e)}}}function jl(e){let t,n,l,s,r,c,o,i,a,u,d,m,f,p,h,g,$=e[21]+"",b=e[22].title+"";function v(){return e[16](e[21],e[17])}return{c(){t=P("tr"),n=P("th"),l=P("span"),s=C("#"),r=C($),c=A(),o=P("td"),i=P("a"),a=C(b),d=A(),m=P("td"),f=P("button"),p=A(),T(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),T(n,"class","is-narrow is-3"),T(i,"href",u=e[22].url),T(i,"target","_blank"),T(f,"class","delete"),T(f,"aria-label","close"),T(m,"class","is-narrow")},m(e,u){L(e,t,u),_(t,n),_(n,l),_(l,s),_(l,r),_(t,c),_(t,o),_(o,i),_(i,a),_(t,d),_(t,m),_(m,f),L(e,p,u),h||(g=I(f,"click",v),h=!0)},p(t,n){e=t,8&n&&$!==($=e[21]+"")&&H(r,$),8&n&&b!==(b=e[22].title+"")&&H(a,b),8&n&&u!==(u=e[22].url)&&T(i,"href",u)},d(e){e&&O(t),e&&O(p),h=!1,g()}}}function Il(e){let t,n=Object.values(e[18]).length>0&&e[17]in Fe&&"User"!==e[17],l=n&&Al(e);return{c(){l&&l.c(),t=j()},m(e,n){l&&l.m(e,n),L(e,t,n)},p(e,s){8&s&&(n=Object.values(e[18]).length>0&&e[17]in Fe&&"User"!==e[17]),n?l?l.p(e,s):(l=Al(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function Ml(e){let t,n=Object.entries(e[3]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Il(vl(e,n,t));let s=null;return n.length||(s=Cl()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=j(),s&&s.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);L(e,t,n),s&&s.m(e,n)},p(e,r){if(8&r){let c;for(n=Object.entries(e[3]),c=0;c<n.length;c+=1){const s=vl(e,n,c);l[c]?l[c].p(s,r):(l[c]=Il(s),l[c].c(),l[c].m(t.parentNode,t))}for(;c<l.length;c+=1)l[c].d(1);l.length=n.length,!n.length&&s?s.p(e,r):n.length?s&&(s.d(1),s=null):(s=Cl(),s.c(),s.m(t.parentNode,t))}},d(e){N(l,e),e&&O(t),s&&s.d(e)}}}function Tl(e){let t,n,l,s,r,c,o,i,a,u,d=!e[0].includes("set")&&Me;t=new Dn({}),l=new At({props:{selectionLength:e[2]}}),r=new _n({props:{recordsStore:e[8],searchFields:e[1]}});let m=d&&kl(e),f={ctx:e,current:null,token:null,hasCatch:!0,pending:Rl,then:_l,catch:Sl,value:25,error:29,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,s,r){if(t.token!==n)return;t.resolved=r;let c=t.ctx;void 0!==s&&(c=c.slice(),c[s]=r);const o=e&&(t.current=e)(c);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(ge(),ve(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),$e())})):t.block.d(1),o.c(),be(o,1),o.m(t.mount(),t.anchor),i=!0),t.block=o,t.blocks&&(t.blocks[l]=o),i&&de()}if(!(s=e)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=Q();if(e.then((e=>{K(n),l(t.then,1,t.value,e),K(null)}),(e=>{if(K(n),l(t.catch,2,t.error,e),K(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var s}(e[10],f),a=new Yt({props:{selectionLength:e[2],selectionStore:qe,$$slots:{default:[Ml]},$$scope:{ctx:e}}}),{c(){xe(t.$$.fragment),n=A(),xe(l.$$.fragment),s=A(),xe(r.$$.fragment),c=A(),m&&m.c(),o=A(),f.block.c(),i=A(),xe(a.$$.fragment)},m(e,d){Ee(t,e,d),L(e,n,d),Ee(l,e,d),L(e,s,d),Ee(r,e,d),L(e,c,d),m&&m.m(e,d),L(e,o,d),f.block.m(e,f.anchor=d),f.mount=()=>i.parentNode,f.anchor=i,L(e,i,d),Ee(a,e,d),u=!0},p(t,[n]){e=t;const s={};4&n&&(s.selectionLength=e[2]),l.$set(s);const c={};2&n&&(c.searchFields=e[1]),r.$set(c),1&n&&(d=!e[0].includes("set")&&Me),d?m?m.p(e,n):(m=kl(e),m.c(),m.m(o.parentNode,o)):m&&(m.d(1),m=null),function(e,t,n){const l=t.slice(),{resolved:s}=e;e.current===e.then&&(l[e.value]=s),e.current===e.catch&&(l[e.error]=s),e.block.p(l,n)}(f,e,n);const i={};4&n&&(i.selectionLength=e[2]),1073741832&n&&(i.$$scope={dirty:n,ctx:e}),a.$set(i)},i(e){u||(be(t.$$.fragment,e),be(l.$$.fragment,e),be(r.$$.fragment,e),be(f.block),be(a.$$.fragment,e),u=!0)},o(e){ve(t.$$.fragment,e),ve(l.$$.fragment,e),ve(r.$$.fragment,e);for(let e=0;e<3;e+=1){ve(f.blocks[e])}ve(a.$$.fragment,e),u=!1},d(e){Le(t,e),e&&O(n),Le(l,e),e&&O(s),Le(r,e),e&&O(c),m&&m.d(e),e&&O(o),f.block.d(e),f.token=null,f=null,e&&O(i),Le(a,e)}}}function Ul(e,t,n){let l,s,r,c,o,i;const{selected:a,nbSelected:u}=qe;m(e,a,(e=>n(15,c=e))),m(e,u,(e=>n(14,r=e)));let{modelName:d=""}=t;ee("modelName",d);let{modelTitle:f=""}=t;ee("modelTitle",f);const p=Fn(d),{pageRecords:h,resultPage:g,resultNumber:$}=p;m(e,h,(e=>n(4,o=e))),m(e,$,(e=>n(5,i=e)));let{searchFields:b=[]}=t;const v=d.includes("treatment")?`/${Ce}/${d}/add/`:`/${Ce}-admin/${Ae}/${d}/add/`;return e.$$set=e=>{"modelName"in e&&n(13,d=e.modelName),"modelTitle"in e&&n(0,f=e.modelTitle),"searchFields"in e&&n(1,b=e.searchFields)},e.$$.update=()=>{32768&e.$$.dirty&&n(3,l=c),16384&e.$$.dirty&&n(2,s=r)},[f,b,s,l,o,i,a,u,p,h,g,$,v,d,r,c,(e,t)=>qe.remove(e,t)]}return new class extends Pe{constructor(e){super(),Ne(this,e,Ul,Tl,o,{modelName:13,modelTitle:0,searchFields:1})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName,modelTitle:modelTitle}})}();
//# sourceMappingURL=recordList.js.map

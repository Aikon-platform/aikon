{"version":3,"file":"ModalSimilarity-4b47f6d6.js","sources":["../../../../webpack/src/regions/modal/ModalSimilarityOverlay.svelte","../../../../webpack/src/regions/similarity/utils.js","../../../../webpack/src/regions/modal/ModalSimilaritySideBySide.svelte","../../../../webpack/src/regions/modal/ModalSimilarity.svelte"],"sourcesContent":["<script>\n    import { appLang } from \"../../constants.js\";\n    import { setContext } from 'svelte';\n    import { writable } from 'svelte/store';\n\n    import InputDropdown from \"../../ui/InputDropdown.svelte\";\n    import InputSlider from \"../../ui/InputSlider.svelte\";\n\n    /** @typedef {import(\"../../ui/InputDropdown.svelte\").DropdownChoiceArray} DropdownChoiceArray */\n    /** @typedef {import(\"./types.js\").SimilarityImgDataType} SimilarityImgDataType */\n\n    /////////////////////////////////////////////\n\n    /** @type {SimilarityImgDataType} */\n    export let imgData;\n\n    /** @type {DropdownChoiceArray} */\n    const flipChoices = [\n        { value:\"h\", label: appLang===\"fr\" ? \"Basculer horizontalement\" : \"Flip horizontally\" },\n        { value:\"v\", label: appLang===\"fr\" ? \"Basculer verticalement\" : \"Flip vertically\" },\n        { value:\"hv\", label: appLang===\"fr\" ? \"Basculer horizontalement et verticalement\" : \"Flip horizontally and vertically\" }\n    ]\n\n    /** @type {number} 0..1 */\n    let overlayOpacity = 0.5;\n    const startOverlayOpacity = overlayOpacity;\n\n    /** @type {number} 0..360 */\n    let overlayRotation = 0;\n    const startOverlayRotation = overlayRotation;\n\n    /** @type {number} 0..200. css uses 0..1 values, but to make things more readable we use a 0..200% scale */\n    let overlayScale = 100\n    const startOverlayScale = overlayScale;\n\n    /** @type {number[]} [0..2, 0..2] X/Y values for css `scale` to perform a flip. will be combined with overlayScale */\n    let overlayFlip = [1,1];\n    const startOverlayFlip = structuredClone(overlayFlip);\n\n    /** @type{number[]} [-100..100, -100..100] */\n    let overlayTranslate = [0,0];\n    const startOverlayTranslate = structuredClone(overlayTranslate);\n\n    let currentlyResetting = false;\n\n    /** @type {writable} set a new value to trigger an update in descendant form components that implement this behaviour */\n    const resetTrigger = writable(window.crypto.randomUUID());\n    setContext(\"resetTrigger\", resetTrigger);\n\n    $: cssTransforms = `translate(${overlayTranslate[0]-50}%, ${overlayTranslate[1]}%)\n                        rotate(${overlayRotation}deg)\n                        scale(${overlayFlip.map((x) => x * (overlayScale/100)).join()})`;\n\n    /////////////////////////////////////////////\n\n    const updateOverlayOpacity = (e) => overlayOpacity = e.detail;\n\n    const updateOverlayRotation = (e) => overlayRotation = e.detail;\n\n    const updateOverlayScale = (e) => overlayScale = e.detail;\n\n    // reassignment is necessary to redefine `cssTransforms`\n    const updateOverlayTranslateX = (e) => overlayTranslate = [ e.detail, overlayTranslate[1] ];\n\n    const updateOverlayTranslateY = (e) => overlayTranslate = [ overlayTranslate[0], e.detail ];\n\n    const updateOverlayFlip = (e) => {\n        let flip = e.detail[0];\n        overlayFlip =\n            flip === \"hv\"\n            ? [-1,-1]\n            : flip === \"h\"\n            ? [-1, 1]\n            : flip === \"v\"\n            ? [1,-1]\n            : [1,1];\n    }\n\n    const resetOverlayParams = () => {\n        overlayOpacity = startOverlayOpacity;\n        overlayRotation = startOverlayRotation;\n        overlayScale = startOverlayScale;\n        overlayFlip = startOverlayFlip;\n        overlayTranslate = startOverlayTranslate;\n        // forme elements will be reset\n        resetTrigger.set(window.crypto.randomUUID());\n        // will set a css class which will animate resetting.\n        currentlyResetting = true;\n        setTimeout(() => currentlyResetting = false, 1000);\n    }\n</script>\n\n<div class=\"similarity-overlay-wrapper\">\n    <div class=\"toolbar-wrapper is-flex is-flex-direction-column is-justify-content-center is-align-items-center\">\n        <div class=\"toolbar\">\n            <div class=\"toolbar-title mt-0 mb-2\">\n                <strong>{appLang === \"en\" ? \"Query image transformation\" : \"Modification de l'image requête\"}</strong>\n            </div>\n            <div class=\"toolbar-controls is-flex is-flex-direction-column is-align-items-start is-justify-content-center\">\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={1}\n                                start={startOverlayOpacity}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Opacité\" : \"Opacity\"}\n                                on:updateSlider={updateOverlayOpacity}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={360}\n                                start={startOverlayRotation}\n                                step={1}\n                                emitOnUpdate={true}\n                                title=\"Rotation\"\n                                on:updateSlider={updateOverlayRotation}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={200}\n                                step={1}\n                                start={startOverlayScale}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Redimensionner\" : \"Scale\"}\n                                on:updateSlider={updateOverlayScale}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={-100}\n                                maxVal={100}\n                                step={1}\n                                start={startOverlayTranslate[0]}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Translation horizontale\" : \"Horizontal translate\"}\n                                on:updateSlider={updateOverlayTranslateX}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={-100}\n                                maxVal={100}\n                                step={1}\n                                start={startOverlayTranslate[1]}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Translation verticale\" : \"Vertical translate\"}\n                                on:updateSlider={updateOverlayTranslateY}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputDropdown choicesItems={flipChoices}\n                                start={[]}\n                                lightDisplay={true}\n                                placeholder={appLang===\"fr\" ? \"Sélectionner\" : \"Select\"}\n                                title={appLang===\"fr\" ? \"Basculer\" : \"Flip\"}\n                                on:updateValues={updateOverlayFlip}\n                    ></InputDropdown>\n                </div>\n                <div class=\"mt-2 is-flex is-flex-direction-column is-justify-content-center is-align-items-flex-end\">\n                    <button class=\"button is-link\"\n                            on:click={resetOverlayParams}\n                    >{appLang===\"fr\" ? \"Réinitialiser\" : \"Reset\"}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"overlay-wrapper\">\n        <img class=\"compare-img\"\n             src={imgData.queryImage.href}\n             alt={imgData.queryImage.title}\n        >\n        <img class=\"main-img\"\n             class:overlay-reset={currentlyResetting}\n             src={imgData.similarityImage.href}\n             alt={imgData.similarityImage.title}\n             style:opacity={overlayOpacity}\n             style:transform={cssTransforms}\n        >\n    </div>\n</div>\n\n<style>\n    .similarity-overlay-wrapper {\n        display: grid;\n        grid-template-columns: max(230px, 25%) min(calc(100% - 230px), 75%);\n        grid-template-rows: 100%;\n    }\n    .toolbar-wrapper {\n        padding-right: 1rem;\n        border-right: var(--default-border);\n    }\n    .toolbar {\n        min-width: 200px;\n        width: 100%;\n    }\n    .toolbar-title {\n        width: 100%;\n    }\n    .toolbar-controls > * {\n        width: 100%;\n    }\n    .overlay-wrapper {\n        position: relative;\n        height: 100%;\n        overflow: scroll;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-left: 1rem;\n    }\n    .overlay-wrapper img {\n        position: absolute;\n        left: 50%;\n        transform: translate(-50%, 0);\n    }\n    .overlay-reset {\n        transition: opacity .3s ease-out, transform .3s ease-out;\n    }\n</style>\n","import { appLang } from \"../../constants.js\";\nimport { similarityStore } from './similarityStore.js';\n\nconst { getRegionsInfo } = similarityStore;\n\n/**\n * create a descripton to be displayed when hovering on a similarity image.\n * outside of `SimilarityMatches`, it is possible that the similarity's region (identified by `regionRef`) is not contained in `similarityStore.comparedRegions`, that contains metata om the regions. in that cxase, we fetch data from the backend.\n * @param {string} regionRef\n * @param {number} similarityType\n * @param {number?} score\n * @param {string} canvas\n * @param {string} baseUrl : window.location.origin\n * @param {string} path : pathname part of the url\n * @param {boolean} isPropagatedContext: is getDesc used in a descendant of `PropagatedMatches.svelte`\n * @param {boolean} displayScore: if false, no score info or similarityType will be displayed.\n * @returns {Promise<string>}\n *      if `!isPropagatedContext` the result could be synchronous, but\n *      it is returned as a promise to provide the same async interface\n *      for both branches\n */\nexport async function getDesc(regionRef, similarityType, score, canvas, baseUrl, path, isPropagatedContext= false, displayScore= true) {\n    const scoreString = () =>\n        displayScore\n        ? `<b>${\n            !isNaN(parseFloat(score)) && similarityType === 1\n            ? `Score: ${score}`\n            : similarityType === 2 && appLang === 'en'\n            ? 'Manual similarity'\n            : similarityType === 2 && appLang === 'fr'\n            ? 'Correspondance manuelle'\n            : similarityType === 3 && appLang === 'en'\n            ? 'Propagated match'\n            : 'Correspondance propagée'\n        }</b>`\n        : ``;\n    const formatter = (title) =>\n        `${title}<br>\n        Page ${parseInt(canvas)}<br>\n        ${scoreString()}`;\n    return isPropagatedContext===true\n        // TODO retrieve regions title ONCE per regions not for each crop\n        ? fetch(`${baseUrl}${path}get_regions_title/${regionRef}`)\n            .then(r => r.json())\n            .then(r => formatter(r.title))\n            .catch(e => {\n                console.error(\"similarity.utils.getDesc()\", e);\n                return formatter(appLang === \"fr\" ? \"Titre inconnu\" : \"Unknown title\");\n            })\n        : Promise.resolve(formatter(getRegionsInfo(regionRef).title));\n}\n","<script>\n    import { getContext } from \"svelte\";\n\n    import { appLang } from \"../../constants.js\";\n    import { getDesc } from \"../similarity/utils.js\";\n\n    import Region from \"../Region.svelte\";\n\n    /** @typedef {import(\"./types.js\").SimilarityImgDataType} SimilarityImgDataType */\n    /** @typedef {import(\"../similarity/types.js\").SimilarityPairType} SimilarityPairType */\n\n    //////////////////////////////////////////////\n\n    /** @type {SimilarityImgDataType} */\n    export let imgData;\n\n    /** @type {SimilarityPairType} */\n    const similarityPairContext = getContext(\"similarityPair\");\n\n    const windowUrl = new URL(window.location.href)\n    const baseUrl = windowUrl.origin;\n    const pathUrl = windowUrl.pathname;\n\n    const [qWit, qDigit, qCanvas, qXywh] = similarityPairContext.qImg.split('.')[0].split('_');\n    const [sWit, sDigit, sCanvas, sXywh] = similarityPairContext.sImg.split('.')[0].split('_');\n    const qRegionRef = `${qWit}_${qDigit}`;\n    const sRegionRef = `${sWit}_${sDigit}`;\n\n    /** @type {{ queryImage: Promise<string>, similarityImage: Promise<string> }}*/\n    const descPromiseObj = {\n        queryImage: getDesc(qRegionRef, similarityPairContext.similarityType, similarityPairContext.score, qCanvas, baseUrl, pathUrl, true, false),\n        similarityImage: getDesc(sRegionRef, similarityPairContext.similarityType, similarityPairContext.score, sCanvas, baseUrl, pathUrl, true, true),\n    }\n</script>\n\n<div class=\"side-by-side columns\">\n    {#each [\"queryImage\", \"similarityImage\"] as k}\n        <div class=\"img-legend-wrapper column is-flex is-flex-direction-column is-justify-content-center is-align-items-center\">\n            <span>{\n                k===\"queryImage\" && appLang===\"fr\"\n                ? \"Image requête\"\n                : k===\"similarityImage\" && appLang===\"fr\"\n                ? \"Similarité\"\n                : k===\"queryImage\" && appLang===\"en\"\n                ? \"Query image\"\n                : \"Similarity\"\n            }</span>\n            <Region item={imgData[k]}\n                    descPromise={descPromiseObj[k]}\n                    height=\"full\"\n            ></Region>\n        </div>\n    {/each}\n</div>\n\n<style>\n\n</style>\n","<script>\n    import { refToIIIF } from \"../../utils\";\n    import { appLang } from \"../../constants.js\";\n\n    import InputToggle from \"../../ui/InputToggle.svelte\";\n    import ModalSimilarityOverlay from \"./ModalSimilarityOverlay.svelte\";\n    import ModalSimilaritySideBySide from \"./ModalSimilaritySideBySide.svelte\";\n\n    /** @typedef {import(\"../types.js\").RegionItemType} RegionItemType */\n    /** @typedef {import(\"./types.js\").SimilarityOverlayType} SimilarityOverlayType */\n    /** @typedef {import(\"./types.js\").SimilaritySideBySideType} SimilaritySideBySideType */\n\n    /////////////////////////////////////////////\n\n    /** @type {RegionItemType} */\n    export let mainImgItem;\n    /** @type {RegionItemType} */\n    export let compareImgItem;\n\n    /** @type {SimilarityOverlayType} */\n    const imgDataOverlay = {\n        similarityImage: { href: refToIIIF(mainImgItem.img, mainImgItem.img.split(\"_\").pop()), title: makeAlt(mainImgItem.title) },\n        queryImage: { href: refToIIIF(compareImgItem.img, compareImgItem.img.split(\"_\").pop()), title: makeAlt(compareImgItem.title) }\n    }\n    /** @type {SimilaritySideBySideType} */\n    const imgDataSideBySide = {\n        similarityImage: mainImgItem,\n        queryImage: compareImgItem\n    }\n    /** @type {boolean} */\n    let overlay = false;\n\n    /////////////////////////////////////////////\n\n    function makeAlt (title) {\n        return appLang===\"fr\"\n            ? `Vue principale de la région ${title}`\n            : `Main view of region ${title}`;\n    }\n\n    const updateToggleOverlay = () => overlay = !overlay;\n</script>\n\n<div class=\"modal-similarity\">\n    <div class=\"modal-similarity-images {overlay ? 'overlay-wrapper' : 'side-by-side-wrapper'}\">\n        {#if overlay}\n            <ModalSimilarityOverlay imgData={imgDataOverlay}/>\n        {:else}\n            <ModalSimilaritySideBySide imgData={imgDataSideBySide}/>\n        {/if}\n    </div>\n    <div>\n        <InputToggle start={false} buttonDisplay={true} on:updateChecked={updateToggleOverlay}\n                     toggleLabel={appLang===\"en\" ? \"Overlay view\" : \"Vue superposée\"}/>\n    </div>\n</div>\n\n<style>\n    .modal-similarity {\n        display: grid;\n        grid-template-columns: 100%;\n        height: 100%;\n        max-height: 100%;\n        grid-template-rows: 90% 10%;\n    }\n    .modal-similarity-images.overlay-wrapper {\n        display: grid;\n        grid-template-rows: 1fr 0fr;\n    }\n    :global(.modal-similarity-images > *) {\n        height: 100%;\n    }\n    :global(.modal-similarity-images img) {\n        object-fit: contain;\n        max-height: 100%;\n        max-width: 100%;\n        z-index: 2;\n        padding: .25rem;\n    }\n</style>\n"],"names":["ctx","title","appLang","start","placeholder","strong","textContent","button","queryImage","href","attr","img0","img0_src_value","similarityImage","img1","img1_src_value","insert","target","div12","anchor","append","div10","div9","div0","div8","div1","div2","div3","div4","div5","div6","div7","div11","imgData","$$props","flipChoices","value","label","overlayOpacity","startOverlayOpacity","overlayRotation","startOverlayRotation","overlayScale","startOverlayScale","overlayFlip","startOverlayFlip","structuredClone","overlayTranslate","startOverlayTranslate","currentlyResetting","resetTrigger","writable","window","crypto","randomUUID","setContext","$$invalidate","cssTransforms","map","x","join","e","detail","flip","set","setTimeout","getRegionsInfo","similarityStore","async","getDesc","regionRef","similarityType","score","canvas","baseUrl","path","isPropagatedContext","displayScore","formatter","parseInt","isNaN","parseFloat","fetch","then","r","json","catch","console","error","Promise","resolve","t0_value","item","descPromise","div","span","dirty","region_changes","each_value","similarityPairContext","getContext","windowUrl","URL","location","origin","pathUrl","pathname","qWit","qDigit","qCanvas","qXywh","qImg","split","sWit","sDigit","sCanvas","sXywh","sImg","sRegionRef","descPromiseObj","toggleLabel","mainImgItem","compareImgItem","imgDataOverlay","refToIIIF","img","pop","makeAlt","imgDataSideBySide","overlay"],"mappings":"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"}

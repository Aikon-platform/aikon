{"version":3,"file":"ModalSimilarity-061bea0e.js","sources":["../../../../svelte/src/regions/modal/ModalSimilarityOverlay.svelte","../../../../svelte/src/regions/similarity/utils.js","../../../../svelte/src/regions/modal/ModalSimilaritySideBySide.svelte","../../../../svelte/src/regions/modal/ModalSimilarity.svelte"],"sourcesContent":["<script>\n    import { appLang } from \"../../constants.js\";\n    import { setContext } from 'svelte';\n    import { writable } from 'svelte/store';\n\n    import InputDropdown from \"../../ui/InputDropdown.svelte\";\n    import InputSlider from \"../../ui/InputSlider.svelte\";\n\n    /** @typedef {import(\"../../ui/InputDropdown.svelte\").DropdownChoiceArray} DropdownChoiceArray */\n    /** @typedef {import(\"./types.js\").SimilarityImgDataType} SimilarityImgDataType */\n\n    /////////////////////////////////////////////\n\n    /** @type {SimilarityImgDataType} */\n    export let imgData;\n\n    /** @type {DropdownChoiceArray} */\n    const flipChoices = [\n        { value:\"h\", label: appLang===\"fr\" ? \"Basculer horizontalement\" : \"Flip horizontally\" },\n        { value:\"v\", label: appLang===\"fr\" ? \"Basculer verticalement\" : \"Flip vertically\" },\n        { value:\"hv\", label: appLang===\"fr\" ? \"Basculer horizontalement et verticalement\" : \"Flip horizontally and vertically\" }\n    ]\n\n    /** @type {number} 0..1 */\n    let overlayOpacity = 0.5;\n    const startOverlayOpacity = overlayOpacity;\n\n    /** @type {number} 0..360 */\n    let overlayRotation = 0;\n    const startOverlayRotation = overlayRotation;\n\n    /** @type {number} 0..200. css uses 0..1 values, but to make things more readable we use a 0..200% scale */\n    let overlayScale = 100\n    const startOverlayScale = overlayScale;\n\n    /** @type {number[]} [0..2, 0..2] X/Y values for css `scale` to perform a flip. will be combined with overlayScale */\n    let overlayFlip = [1,1];\n    const startOverlayFlip = structuredClone(overlayFlip);\n\n    /** @type{number[]} [-100..100, -100..100] */\n    let overlayTranslate = [0,0];\n    const startOverlayTranslate = structuredClone(overlayTranslate);\n\n    let currentlyResetting = false;\n\n    /** @type {writable} set a new value to trigger an update in descendant form components that implement this behaviour */\n    const resetTrigger = writable(window.crypto.randomUUID());\n    setContext(\"resetTrigger\", resetTrigger);\n\n    $: cssTransforms = `translate(${overlayTranslate[0]-50}%, ${overlayTranslate[1]}%)\n                        rotate(${overlayRotation}deg)\n                        scale(${overlayFlip.map((x) => x * (overlayScale/100)).join()})`;\n\n    /////////////////////////////////////////////\n\n    const updateOverlayOpacity = (e) => overlayOpacity = e.detail;\n\n    const updateOverlayRotation = (e) => overlayRotation = e.detail;\n\n    const updateOverlayScale = (e) => overlayScale = e.detail;\n\n    // reassignment is necessary to redefine `cssTransforms`\n    const updateOverlayTranslateX = (e) => overlayTranslate = [ e.detail, overlayTranslate[1] ];\n\n    const updateOverlayTranslateY = (e) => overlayTranslate = [ overlayTranslate[0], e.detail ];\n\n    const updateOverlayFlip = (e) => {\n        let flip = e.detail[0];\n        overlayFlip =\n            flip === \"hv\"\n            ? [-1,-1]\n            : flip === \"h\"\n            ? [-1, 1]\n            : flip === \"v\"\n            ? [1,-1]\n            : [1,1];\n    }\n\n    const resetOverlayParams = () => {\n        overlayOpacity = startOverlayOpacity;\n        overlayRotation = startOverlayRotation;\n        overlayScale = startOverlayScale;\n        overlayFlip = startOverlayFlip;\n        overlayTranslate = startOverlayTranslate;\n        // forme elements will be reset\n        resetTrigger.set(window.crypto.randomUUID());\n        // will set a css class which will animate resetting.\n        currentlyResetting = true;\n        setTimeout(() => currentlyResetting = false, 1000);\n    }\n</script>\n\n<div class=\"similarity-overlay-wrapper\">\n    <div class=\"toolbar-wrapper is-flex is-flex-direction-column is-justify-content-center is-align-items-center\">\n        <div class=\"toolbar\">\n            <div class=\"toolbar-title mt-0 mb-2\">\n                <strong>{appLang === \"en\" ? \"Query image transformation\" : \"Modification de l'image requête\"}</strong>\n            </div>\n            <div class=\"toolbar-controls is-flex is-flex-direction-column is-align-items-start is-justify-content-center\">\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={1}\n                                start={startOverlayOpacity}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Opacité\" : \"Opacity\"}\n                                on:updateSlider={updateOverlayOpacity}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={360}\n                                start={startOverlayRotation}\n                                step={1}\n                                emitOnUpdate={true}\n                                title=\"Rotation\"\n                                on:updateSlider={updateOverlayRotation}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={0}\n                                maxVal={200}\n                                step={1}\n                                start={startOverlayScale}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Redimensionner\" : \"Scale\"}\n                                on:updateSlider={updateOverlayScale}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={-100}\n                                maxVal={100}\n                                step={1}\n                                start={startOverlayTranslate[0]}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Translation horizontale\" : \"Horizontal translate\"}\n                                on:updateSlider={updateOverlayTranslateX}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputSlider minVal={-100}\n                                maxVal={100}\n                                step={1}\n                                start={startOverlayTranslate[1]}\n                                emitOnUpdate={true}\n                                title={appLang===\"fr\" ? \"Translation verticale\" : \"Vertical translate\"}\n                                on:updateSlider={updateOverlayTranslateY}\n                    ></InputSlider>\n                </div>\n                <div class=\"\">\n                    <InputDropdown choicesItems={flipChoices}\n                                start={[]}\n                                lightDisplay={true}\n                                placeholder={appLang===\"fr\" ? \"Sélectionner\" : \"Select\"}\n                                title={appLang===\"fr\" ? \"Basculer\" : \"Flip\"}\n                                on:updateValues={updateOverlayFlip}\n                    ></InputDropdown>\n                </div>\n                <div class=\"mt-2 is-flex is-flex-direction-column is-justify-content-center is-align-items-flex-end\">\n                    <button class=\"button is-link\"\n                            on:click={resetOverlayParams}\n                    >{appLang===\"fr\" ? \"Réinitialiser\" : \"Reset\"}</button>\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"overlay-wrapper\">\n        <img class=\"compare-img\"\n             src={imgData.queryImage.href}\n             alt={imgData.queryImage.title}\n        >\n        <img class=\"main-img\"\n             class:overlay-reset={currentlyResetting}\n             src={imgData.similarityImage.href}\n             alt={imgData.similarityImage.title}\n             style:opacity={overlayOpacity}\n             style:transform={cssTransforms}\n        >\n    </div>\n</div>\n\n<style>\n    .similarity-overlay-wrapper {\n        display: grid;\n        grid-template-columns: max(230px, 25%) min(calc(100% - 230px), 75%);\n        grid-template-rows: 100%;\n    }\n    .toolbar-wrapper {\n        padding-right: 1rem;\n        border-right: var(--default-border);\n    }\n    .toolbar {\n        min-width: 200px;\n        width: 100%;\n    }\n    .toolbar-title {\n        width: 100%;\n    }\n    .toolbar-controls > * {\n        width: 100%;\n    }\n    .overlay-wrapper {\n        position: relative;\n        height: 100%;\n        overflow: scroll;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        margin-left: 1rem;\n    }\n    .overlay-wrapper img {\n        position: absolute;\n        left: 50%;\n        transform: translate(-50%, 0);\n    }\n    .overlay-reset {\n        transition: opacity .3s ease-out, transform .3s ease-out;\n    }\n</style>\n","import { appLang } from \"../../constants.js\";\nimport { similarityStore } from './similarityStore.js';\n\nconst { getRegionsInfo } = similarityStore;\n\n/**\n * create a description to be displayed when hovering on a similarity image.\n * Outside `SimilarityMatches`, it is possible that the similarity's region (identified by `regionRef`)\n * is not contained in `similarityStore.comparedRegions`, that contains metadata on the regions.\n * In that case, we fetch data from the backend.\n * @param {string} regionRef\n * @param {number} similarityType\n * @param {number?} score\n * @param {string} canvas\n * @param {string} baseUrl : window.location.origin\n * @param {string} path : pathname part of the url\n * @param {boolean} isPropagatedContext: is getDesc used in a descendant of `PropagatedMatches.svelte`\n * @param {boolean} displayScore: if false, no score info or similarityType will be displayed.\n * @returns {Promise<string>}\n *      if `!isPropagatedContext` the result could be synchronous, but\n *      it is returned as a promise to provide the same async interface\n *      for both branches\n */\nexport async function getDesc(regionRef, similarityType, score, canvas, baseUrl, path, isPropagatedContext= false, displayScore= true) {\n    const scoreString = () =>\n        displayScore\n        ? `<b>${\n            !isNaN(parseFloat(score)) && similarityType === 1\n            ? `Score: ${score}`\n            : similarityType === 2 && appLang === 'en'\n            ? 'Manual similarity'\n            : similarityType === 2 && appLang === 'fr'\n            ? 'Correspondance manuelle'\n            : similarityType === 3 && appLang === 'en'\n            ? 'Propagated match'\n            : 'Correspondance propagée'\n        }</b>`\n        : ``;\n    const formatter = (title) =>\n        `${title}<br>\n        Page ${parseInt(canvas)}<br>\n        ${scoreString()}`;\n    return isPropagatedContext===true\n        // TODO retrieve regions title ONCE per regions not for each crop\n        ? fetch(`${baseUrl}${path}get_regions_title/${regionRef}`)\n            .then(r => r.json())\n            .then(r => formatter(r.title))\n            .catch(e => {\n                console.error(\"similarity.utils.getDesc()\", e);\n                return formatter(appLang === \"fr\" ? \"Titre inconnu\" : \"Unknown title\");\n            })\n        : Promise.resolve(formatter(getRegionsInfo(regionRef).title));\n}\n","<script>\n    import { getContext } from \"svelte\";\n\n    import { appLang } from \"../../constants.js\";\n    import { getDesc } from \"../similarity/utils.js\";\n\n    import Region from \"../Region.svelte\";\n\n    /** @typedef {import(\"./types.js\").SimilarityImgDataType} SimilarityImgDataType */\n    /** @typedef {import(\"../similarity/types.js\").SimilarityPairType} SimilarityPairType */\n\n    //////////////////////////////////////////////\n\n    /** @type {SimilarityImgDataType} */\n    export let imgData;\n\n    /** @type {SimilarityPairType} */\n    const similarityPairContext = getContext(\"similarityPair\");\n\n    const windowUrl = new URL(window.location.href)\n    const baseUrl = windowUrl.origin;\n    const pathUrl = windowUrl.pathname;\n\n    const [qWit, qDigit, qCanvas, qXywh] = similarityPairContext.qImg.split('.')[0].split('_');\n    const [sWit, sDigit, sCanvas, sXywh] = similarityPairContext.sImg.split('.')[0].split('_');\n    const qRegionRef = `${qWit}_${qDigit}`;\n    const sRegionRef = `${sWit}_${sDigit}`;\n\n    /** @type {{ queryImage: Promise<string>, similarityImage: Promise<string> }}*/\n    // TODO use toTitledRegion if possible\n    const descPromiseObj = {\n        queryImage: getDesc(qRegionRef, similarityPairContext.similarityType, similarityPairContext.score, qCanvas, baseUrl, pathUrl, true, false),\n        similarityImage: getDesc(sRegionRef, similarityPairContext.similarityType, similarityPairContext.score, sCanvas, baseUrl, pathUrl, true, true),\n    }\n</script>\n\n<div class=\"side-by-side columns\">\n    {#each [\"queryImage\", \"similarityImage\"] as k}\n        <div class=\"img-legend-wrapper column is-flex is-flex-direction-column is-justify-content-center is-align-items-center\">\n            <span>{\n                k===\"queryImage\" && appLang===\"fr\"\n                ? \"Image requête\"\n                : k===\"similarityImage\" && appLang===\"fr\"\n                ? \"Similarité\"\n                : k===\"queryImage\" && appLang===\"en\"\n                ? \"Query image\"\n                : \"Similarity\"\n            }</span>\n            <Region item={imgData[k]} descPromise={descPromiseObj[k]} height=\"full\"/>\n        </div>\n    {/each}\n</div>\n\n<style>\n\n</style>\n","<script>\n    import { refToIIIF } from \"../../utils\";\n    import { appLang } from \"../../constants.js\";\n\n    import InputToggle from \"../../ui/InputToggle.svelte\";\n    import ModalSimilarityOverlay from \"./ModalSimilarityOverlay.svelte\";\n    import ModalSimilaritySideBySide from \"./ModalSimilaritySideBySide.svelte\";\n\n    /** @typedef {import(\"../types.js\").RegionItemType} RegionItemType */\n    /** @typedef {import(\"./types.js\").SimilarityOverlayType} SimilarityOverlayType */\n    /** @typedef {import(\"./types.js\").SimilaritySideBySideType} SimilaritySideBySideType */\n\n    /////////////////////////////////////////////\n\n    /** @type {RegionItemType} */\n    export let mainImgItem;\n    /** @type {RegionItemType} */\n    export let compareImgItem;\n\n    /** @type {SimilarityOverlayType} */\n    const imgDataOverlay = {\n        similarityImage: { href: refToIIIF(mainImgItem.img, mainImgItem.img.split(\"_\").pop()), title: makeAlt(mainImgItem.title) },\n        queryImage: { href: refToIIIF(compareImgItem.img, compareImgItem.img.split(\"_\").pop()), title: makeAlt(compareImgItem.title) }\n    }\n    /** @type {SimilaritySideBySideType} */\n    const imgDataSideBySide = {\n        similarityImage: mainImgItem,\n        queryImage: compareImgItem\n    }\n    /** @type {boolean} */\n    let overlay = false;\n\n    /////////////////////////////////////////////\n\n    function makeAlt (title) {\n        return appLang===\"fr\"\n            ? `Vue principale de la région ${title}`\n            : `Main view of region ${title}`;\n    }\n\n    const updateToggleOverlay = () => overlay = !overlay;\n</script>\n\n<div class=\"modal-similarity\">\n    <div class=\"modal-similarity-images {overlay ? 'overlay-wrapper' : 'side-by-side-wrapper'}\">\n        {#if overlay}\n            <ModalSimilarityOverlay imgData={imgDataOverlay}/>\n        {:else}\n            <ModalSimilaritySideBySide imgData={imgDataSideBySide}/>\n        {/if}\n    </div>\n    <div>\n        <InputToggle start={false} buttonDisplay={true} on:updateChecked={updateToggleOverlay}\n                     toggleLabel={appLang===\"en\" ? \"Overlay view\" : \"Vue superposée\"}/>\n    </div>\n</div>\n\n<style>\n    .modal-similarity {\n        display: grid;\n        grid-template-columns: 100%;\n        height: 100%;\n        max-height: 100%;\n        grid-template-rows: 90% 10%;\n    }\n    .modal-similarity-images.overlay-wrapper {\n        display: grid;\n        grid-template-rows: 1fr 0fr;\n    }\n    :global(.modal-similarity-images > *) {\n        height: 100%;\n    }\n    :global(.modal-similarity-images img) {\n        object-fit: contain;\n        max-height: 100%;\n        max-width: 100%;\n        z-index: 2;\n        padding: .25rem;\n    }\n</style>\n"],"names":["ctx","appLang","strong","button","attr","img0","img0_src_value","img1","img1_src_value","insert","target","div12","anchor","append","div10","div9","div0","div8","div1","div2","div3","div4","div5","div6","div7","div11","imgData","$$props","flipChoices","overlayOpacity","startOverlayOpacity","overlayRotation","startOverlayRotation","overlayScale","startOverlayScale","overlayFlip","startOverlayFlip","overlayTranslate","startOverlayTranslate","currentlyResetting","resetTrigger","writable","setContext","updateOverlayOpacity","e","$$invalidate","updateOverlayRotation","updateOverlayScale","updateOverlayTranslateX","updateOverlayTranslateY","updateOverlayFlip","flip","resetOverlayParams","cssTransforms","x","getRegionsInfo","similarityStore","getDesc","regionRef","similarityType","score","canvas","baseUrl","path","isPropagatedContext","displayScore","scoreString","formatter","title","r","t0_value","div","span","dirty","region_changes","each_value","similarityPairContext","getContext","windowUrl","pathUrl","qWit","qDigit","qCanvas","qXywh","sWit","sDigit","sCanvas","sXywh","qRegionRef","sRegionRef","descPromiseObj","mainImgItem","compareImgItem","imgDataOverlay","refToIIIF","makeAlt","imgDataSideBySide","overlay","updateToggleOverlay"],"mappings":"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"}

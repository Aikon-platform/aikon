import{S as e,i as t,s as a,I as i,w as r,F as s,e as l,j as n,c as m,a as o,G as c,k as g,H as p,b as u,l as f,m as $,n as d,t as v,d as y,f as I,g as w,J as h,E as z,q as x,r as q,u as b,K as D,L as V,R as S,z as U,M as O,N as T,D as j}from"./region-list-64e98fb4.js";function R(e){let t,a,h,z,x,q,b,D,V,S,U,O,T,j,R,k,B,F,C,L,_,H,M,P,E,G,J,K,N,Q,A,W,X,Y,Z,ee,te,ae;return D=new i({props:{minVal:0,maxVal:1,start:e[5],emitOnUpdate:!0,title:"fr"===r?"Opacité":"Opacity"}}),D.$on("updateSlider",e[9]),U=new i({props:{minVal:0,maxVal:360,start:e[6],step:1,emitOnUpdate:!0,title:"Rotation"}}),U.$on("updateSlider",e[10]),j=new i({props:{minVal:0,maxVal:200,step:1,start:e[7],emitOnUpdate:!0,title:"fr"===r?"Redimensionner":"Scale"}}),j.$on("updateSlider",e[11]),B=new i({props:{minVal:-100,maxVal:100,step:1,start:e[8][0],emitOnUpdate:!0,title:"fr"===r?"Translation horizontale":"Horizontal translate"}}),B.$on("updateSlider",e[12]),L=new i({props:{minVal:-100,maxVal:100,step:1,start:e[8][1],emitOnUpdate:!0,title:"fr"===r?"Translation verticale":"Vertical translate"}}),L.$on("updateSlider",e[13]),M=new s({props:{choicesItems:e[4],start:[],lightDisplay:!0,placeholder:"fr"===r?"Séléctionner":"Select",title:"fr"===r?"Basculer":"Flip"}}),M.$on("updateValues",e[14]),{c(){t=l("div"),a=l("div"),h=l("div"),z=l("div"),z.innerHTML="<strong>Transform query image</strong>",x=n(),q=l("div"),b=l("div"),m(D.$$.fragment),V=n(),S=l("div"),m(U.$$.fragment),O=n(),T=l("div"),m(j.$$.fragment),R=n(),k=l("div"),m(B.$$.fragment),F=n(),C=l("div"),m(L.$$.fragment),_=n(),H=l("div"),m(M.$$.fragment),P=n(),E=l("div"),G=l("button"),G.textContent=""+("fr"===r?"Réinitialiser":"Reset"),J=n(),K=l("div"),N=l("img"),W=n(),X=l("img"),o(z,"class","toolbar-title mt-0 mb-2 svelte-nzei31"),o(b,"class"," svelte-nzei31"),o(S,"class"," svelte-nzei31"),o(T,"class"," svelte-nzei31"),o(k,"class"," svelte-nzei31"),o(C,"class"," svelte-nzei31"),o(H,"class"," svelte-nzei31"),o(G,"class","button is-link"),o(E,"class","mt-2 is-flex is-flex-direction-column is-justify-content-center is-align-items-flex-end svelte-nzei31"),o(q,"class","toolbar-controls is-flex is-flex-direction-column is-align-items-start is-justify-content-center svelte-nzei31"),o(h,"class","toolbar svelte-nzei31"),o(a,"class","toolbar-wrapper is-flex is-flex-direction-column is-justify-content-center is-align-items-center svelte-nzei31"),o(N,"class","compare-img svelte-nzei31"),c(N.src,Q=e[0].queryImage.href)||o(N,"src",Q),o(N,"alt",A=e[0].queryImage.title),o(X,"class","main-img svelte-nzei31"),c(X.src,Y=e[0].similarityImage.href)||o(X,"src",Y),o(X,"alt",Z=e[0].similarityImage.title),g(X,"overlay-reset",e[2]),p(X,"opacity",e[1]),p(X,"transform",e[3]),o(K,"class","overlay-wrapper svelte-nzei31"),o(t,"class","similarity-overlay-wrapper svelte-nzei31")},m(i,r){u(i,t,r),f(t,a),f(a,h),f(h,z),f(h,x),f(h,q),f(q,b),$(D,b,null),f(q,V),f(q,S),$(U,S,null),f(q,O),f(q,T),$(j,T,null),f(q,R),f(q,k),$(B,k,null),f(q,F),f(q,C),$(L,C,null),f(q,_),f(q,H),$(M,H,null),f(q,P),f(q,E),f(E,G),f(t,J),f(t,K),f(K,N),f(K,W),f(K,X),ee=!0,te||(ae=d(G,"click",e[15]),te=!0)},p(e,[t]){(!ee||1&t&&!c(N.src,Q=e[0].queryImage.href))&&o(N,"src",Q),(!ee||1&t&&A!==(A=e[0].queryImage.title))&&o(N,"alt",A),(!ee||1&t&&!c(X.src,Y=e[0].similarityImage.href))&&o(X,"src",Y),(!ee||1&t&&Z!==(Z=e[0].similarityImage.title))&&o(X,"alt",Z),(!ee||4&t)&&g(X,"overlay-reset",e[2]),2&t&&p(X,"opacity",e[1]),8&t&&p(X,"transform",e[3])},i(e){ee||(v(D.$$.fragment,e),v(U.$$.fragment,e),v(j.$$.fragment,e),v(B.$$.fragment,e),v(L.$$.fragment,e),v(M.$$.fragment,e),ee=!0)},o(e){y(D.$$.fragment,e),y(U.$$.fragment,e),y(j.$$.fragment,e),y(B.$$.fragment,e),y(L.$$.fragment,e),y(M.$$.fragment,e),ee=!1},d(e){e&&I(t),w(D),w(U),w(j),w(B),w(L),w(M),te=!1,ae()}}}function k(e,t,a){let i,{imgData:s}=t;const l=[{value:"h",label:"fr"===r?"Basculer horizontalement":"Flip horizontally"},{value:"v",label:"fr"===r?"Basculer verticalement":"Flip vertically"},{value:"hv",label:"fr"===r?"Basculer horizontalement et verticalement":"Flip horizontally and vertically"}];let n=.5;const m=n;let o=0;const c=o;let g=100;const p=g;let u=[1,1];const f=structuredClone(u);let $=[0,0];const d=structuredClone($);let v=!1;const y=h(window.crypto.randomUUID());z("resetTrigger",y);return e.$$set=e=>{"imgData"in e&&a(0,s=e.imgData)},e.$$.update=()=>{983040&e.$$.dirty&&a(3,i=`translate(${$[0]-50}%, ${$[1]}%)\n                        rotate(${o}deg)\n                        scale(${u.map((e=>e*(g/100))).join()})`)},[s,n,v,i,l,m,c,p,d,e=>a(1,n=e.detail),e=>a(16,o=e.detail),e=>a(17,g=e.detail),e=>a(19,$=[e.detail,$[1]]),e=>a(19,$=[$[0],e.detail]),e=>{let t=e.detail[0];a(18,u="hv"===t?[-1,-1]:"h"===t?[-1,1]:"v"===t?[1,-1]:[1,1])},()=>{a(1,n=m),a(16,o=c),a(17,g=p),a(18,u=f),a(19,$=d),y.set(window.crypto.randomUUID()),a(2,v=!0),setTimeout((()=>a(2,v=!1)),1e3)},o,g,u,$]}class B extends e{constructor(e){super(),t(this,e,k,R,a,{imgData:0})}}function F(e,t,a){const i=e.slice();return i[16]=t[a],i}function C(e){let t,a,i,s,c,g,p,d="queryImage"===e[16]&&"fr"===r?"Image requête":"similarityImage"===e[16]&&"fr"===r?"Similarité":"queryImage"===e[16]&&"en"===r?"Query image":"Similarity";return c=new S({props:{item:e[0][e[16]],descPromise:e[1][e[16]],height:"full"}}),{c(){t=l("div"),a=l("span"),i=U(d),s=n(),m(c.$$.fragment),g=n(),o(t,"class","img-legend-wrapper column is-flex is-flex-direction-column is-justify-content-center is-align-items-center")},m(e,r){u(e,t,r),f(t,a),f(a,i),f(t,s),$(c,t,null),f(t,g),p=!0},p(e,t){const a={};1&t&&(a.item=e[0][e[16]]),c.$set(a)},i(e){p||(v(c.$$.fragment,e),p=!0)},o(e){y(c.$$.fragment,e),p=!1},d(e){e&&I(t),w(c)}}}function L(e){let t,a,i=["queryImage","similarityImage"],r=[];for(let t=0;t<2;t+=1)r[t]=C(F(e,i,t));const s=e=>y(r[e],1,1,(()=>{r[e]=null}));return{c(){t=l("div");for(let e=0;e<2;e+=1)r[e].c();o(t,"class","side-by-side columns")},m(e,i){u(e,t,i);for(let e=0;e<2;e+=1)r[e]&&r[e].m(t,null);a=!0},p(e,[a]){if(3&a){let l;for(i=["queryImage","similarityImage"],l=0;l<2;l+=1){const s=F(e,i,l);r[l]?(r[l].p(s,a),v(r[l],1)):(r[l]=C(s),r[l].c(),v(r[l],1),r[l].m(t,null))}for(x(),l=2;l<2;l+=1)s(l);q()}},i(e){if(!a){for(let e=0;e<2;e+=1)v(r[e]);a=!0}},o(e){r=r.filter(Boolean);for(let e=0;e<2;e+=1)y(r[e]);a=!1},d(e){e&&I(t),b(r,e)}}}function _(e,t,a){let{imgData:i}=t;const r=D("similarityPair"),s=new URL(window.location.href),l=s.origin,n=s.pathname,[m,o,c,g]=r.qImg.split(".")[0].split("_"),[p,u,f,$]=r.sImg.split(".")[0].split("_"),d=`${p}_${u}`,v={queryImage:V(`${m}_${o}`,r.similarityType,r.score,c,l,n,!0,!1),similarityImage:V(d,r.similarityType,r.score,f,l,n,!0,!0)};return e.$$set=e=>{"imgData"in e&&a(0,i=e.imgData)},[i,v]}class H extends e{constructor(e){super(),t(this,e,_,L,a,{imgData:0})}}function M(e){let t,a;return t=new H({props:{imgData:e[2]}}),{c(){m(t.$$.fragment)},m(e,i){$(t,e,i),a=!0},p:j,i(e){a||(v(t.$$.fragment,e),a=!0)},o(e){y(t.$$.fragment,e),a=!1},d(e){w(t,e)}}}function P(e){let t,a;return t=new B({props:{imgData:e[1]}}),{c(){m(t.$$.fragment)},m(e,i){$(t,e,i),a=!0},p:j,i(e){a||(v(t.$$.fragment,e),a=!0)},o(e){y(t.$$.fragment,e),a=!1},d(e){w(t,e)}}}function E(e){let t,a,i,s,c,g,p,d,h;const z=[P,M],b=[];function D(e,t){return e[0]?0:1}return i=D(e),s=b[i]=z[i](e),d=new O({props:{start:!1,buttonDisplay:!0,checkboxLabel:"en"===r?"Overlay view":"Vue superposée"}}),d.$on("updateChecked",e[3]),{c(){t=l("div"),a=l("div"),s.c(),g=n(),p=l("div"),m(d.$$.fragment),o(a,"class",c="modal-similarity-images "+(e[0]?"overlay-wrapper":"side-by-side-wrapper")+" svelte-1qvtan5"),o(t,"class","modal-similarity svelte-1qvtan5")},m(e,r){u(e,t,r),f(t,a),b[i].m(a,null),f(t,g),f(t,p),$(d,p,null),h=!0},p(e,[t]){let r=i;i=D(e),i===r?b[i].p(e,t):(x(),y(b[r],1,1,(()=>{b[r]=null})),q(),s=b[i],s?s.p(e,t):(s=b[i]=z[i](e),s.c()),v(s,1),s.m(a,null)),(!h||1&t&&c!==(c="modal-similarity-images "+(e[0]?"overlay-wrapper":"side-by-side-wrapper")+" svelte-1qvtan5"))&&o(a,"class",c)},i(e){h||(v(s),v(d.$$.fragment,e),h=!0)},o(e){y(s),y(d.$$.fragment,e),h=!1},d(e){e&&I(t),b[i].d(),w(d)}}}function G(e,t,a){let{mainImgItem:i}=t,{compareImgItem:s}=t;const l={similarityImage:{href:T(i.img),title:o(i.title)},queryImage:{href:T(s.img),title:o(s.title)}},n={similarityImage:i,queryImage:s};let m=!1;function o(e){return"fr"===r?`Vue principale de la région ${e}`:`Main view of region ${e}`}return e.$$set=e=>{"mainImgItem"in e&&a(4,i=e.mainImgItem),"compareImgItem"in e&&a(5,s=e.compareImgItem)},[m,l,n,()=>a(0,m=!m),i,s]}class J extends e{constructor(e){super(),t(this,e,G,E,a,{mainImgItem:4,compareImgItem:5})}}export{J as default};
//# sourceMappingURL=ModalSimilarity-868b6158.js.map

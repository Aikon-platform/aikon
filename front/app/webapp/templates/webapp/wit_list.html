{% extends "admin/base_site.html" %}
{% load shared_tags static %}

{% block title %}{{ view_title }}{% endblock %}

{% block extrahead %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
    <style>
    .delete.is-medium {
        position: relative;
        top: -35px;
        left: 32px;
    }
    .metadata {
        color: var(--bulma-text-strong);
    }
    .metadata .datum:not(:nth-last-child(-n+2)) {
        border-bottom: 1px solid var(--bulma-border);
    }
    .columns {
        margin-bottom: 0.5rem;
    }
    </style>
{% endblock %}

{% block content %}
    <h1 class="is-title is-size-2 py-3">
        {{ view_title }}
    </h1>

    <div class="container">
        {% for id, witness in witnesses.items %}
            <div class="card mb-3 ">
                <div class="card-content">
                    <div class="media">
                        <div class="media-content">
                            <a href="{{ witness.buttons.regions }}" class="title is-4 hoverable pt-2">
                                <span class="tag px-2 py-1 mb-1 mr-1 is-dark is-rounded">{{ witness.type }} #{{ witness.id }}</span>
                                {{ witness.title }}
                            </a>
                            {% if witness.is_public %}
                                <span class="pl-3 pt-1 icon-text is-size-7 is-center has-text-weight-normal">
                                    <span class="icon has-text-success"><i class="fas fa-check-circle"></i></span>
                                    <span style="margin-left: -0.5rem">Public</span>
                                </span>
                            {% endif %}

                            <p class="subtitle is-6 mb-0 ml-2 pt-2">
                                {% if witness.user %}
                                    {{ witness.user }}
                                {% endif %}
                                {% if witness.updated_at %}
                                    <span class="tag p-1 mb-1">{{ witness.updated_at }}</span>
                                {% endif %}
                            </p>

                            <p class="subtitle is-6 mb-0 ml-2 pt-2 is-middle">
                                <a href="{{ witness.edit_url }}" class="edit-btn button is-small is-rounded is-link px-2"
                                   title='Edit'>
                                    <span class="iconify" data-icon="entypo:edit"/>
                                    <span class="ml-2">
                                        {% if APP_LANG == "en" %}Edit{% else %}Ã‰diter{% endif %}
                                    </span>
                                </a>
                                {% if witness.iiif %}
                                    {% for iiif in witness.iiif %}
                                        <span class="tag logo mt-1">
                                            {% autoescape off %}
                                                {{ iiif }}
                                            {% endautoescape %}
                                        </span>
                                     {% endfor %}
                                {% endif %}
                            </p>
                        </div>
                    </div>
                    <div class="content fixed-grid px-5">
                        <div class="grid metadata pt-2">
                            {%  for field, value in witness.metadata.items %}
                                <div class="datum is-middle columns">
                                    <div class="column is-4 is-bold">{{ field }}</div>
                                    <div class="column is-8">{{ value }}</div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>
{% endblock %}

{% block extra_js %}{% endblock %}

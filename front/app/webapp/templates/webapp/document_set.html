{% extends "admin/base_site.html" %}
{% load shared_tags static %}

{% block title %}{{ view_title }}{% endblock %}

{% block extrahead %}
    <link rel="stylesheet" href="{% static 'css/regions.css' %}">
    <link rel="stylesheet" href="{% static 'svelte/documentSet.css' %}">
    <style>
    .network-svg {
        display: block;
        width: 90%;
        height: 60vh;
        overflow: hidden;
        margin-bottom: 1.5rem !important;
        margin-top: 1.5rem !important;
        border: 1px solid var(--bulma-border-weak);
        border-radius: .75rem;
    }

    .link {
        stroke: var(--bulma-body-color);
        stroke-opacity: 1;
    }

    .node {
        stroke: #fff;
        stroke-width: 1.5;
        cursor: pointer;
        transition: stroke-width 0.2s;
    }

    .node:hover {
        stroke-width: 3;
    }

    .node.selected {
        stroke: var(--bulma-link);
        stroke-width: 5;
    }

    .selection-rect {
        fill: hsla(233, 100%, 63%, 0.2);
        stroke: var(--bulma-link);
        stroke-width: 3;
    }

    .toggle-button {
        margin-bottom: 1rem;
    }

    .selection-panel {
        margin-top: 1.5rem;
    }

    .selection-panel h3 {
        margin-bottom: 1rem;
    }

    .images-container {
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
    }

    .card {
        border: 1px solid var(--bulma-border-weak);
        border-radius: 4px;
        padding: 1rem;
        width: 200px;
    }

    .card img {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 4px;
    }

    .card-info {
        margin-top: 0.75rem;
        font-size: 0.875rem;
    }

    .legend-list {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        padding: 0.25rem 0;
    }

    .legend-color {
        width: 24px;
        height: 24px;
        border-radius: 50%;
        border: 2px solid var(--bulma-border-weak);
        box-shadow: 0 2px 3px rgba(0, 0, 0, 0.1);
        flex-shrink: 0;
    }

    .legend-label {
        font-size: 0.875rem;
        font-weight: 500;
    }

    .node-label {
        user-select: none;
    }
    </style>
{% endblock %}

{% block content %}
    {% if instance %}
        <div id="document-set"></div>
    {% else %}
        <div class="container px-5">
            <div class="container">
                <h1 class="is-title is-size-2 py-3">
                    {{ view_title }}
                </h1>
                <div class="notification is-warning">
                    <p>
                        {% if APP_LANG == "en" %}
                            This identifier is not associated with any document set
                        {% else %}
                            Cet identifiant n'est associé à aucun set de documents
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block extra_js %}
    {% if instance %}
        <script>
            const docSet = {{ instance.to_json|js|safe }};
        </script>
        <script src="{% static 'svelte/documentSet.js' %}"></script>
    {% endif %}
{% endblock %}

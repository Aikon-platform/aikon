var blockList=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function l(t){t.forEach(e)}function c(t){return"function"==typeof t}function o(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let i,s;function r(t,e){return i||(i=document.createElement("a")),i.href=e,t===i.href}function a(t,e){t.appendChild(e)}function u(t,e,n){t.insertBefore(e,n||null)}function d(t){t.parentNode&&t.parentNode.removeChild(t)}function f(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function p(t){return document.createElement(t)}function m(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function h(){return g(" ")}function b(){return g("")}function $(t,e,n,l){return t.addEventListener(e,n,l),()=>t.removeEventListener(e,n,l)}function y(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function v(t,e){e=""+e,t.data!==e&&(t.data=e)}function k(t,e,n){t.classList[n?"add":"remove"](e)}function w(t){s=t}function x(){const t=function(){if(!s)throw new Error("Function called outside component initialization");return s}();return(e,n,{cancelable:l=!1}={})=>{const c=t.$$.callbacks[e];if(c){const o=function(t,e,{bubbles:n=!1,cancelable:l=!1}={}){const c=document.createEvent("CustomEvent");return c.initCustomEvent(t,n,l,e),c}(e,n,{cancelable:l});return c.slice().forEach((e=>{e.call(t,o)})),!o.defaultPrevented}return!0}}const S=[],_=[];let L=[];const E=[],A=Promise.resolve();let O=!1;function j(t){L.push(t)}const C=new Set;let N=0;function V(){if(0!==N)return;const t=s;do{try{for(;N<S.length;){const t=S[N];N++,w(t),z(t.$$)}}catch(t){throw S.length=0,N=0,t}for(w(null),S.length=0,N=0;_.length;)_.pop()();for(let t=0;t<L.length;t+=1){const e=L[t];C.has(e)||(C.add(e),e())}L.length=0}while(S.length);for(;E.length;)E.pop()();O=!1,C.clear(),w(t)}function z(t){if(null!==t.fragment){t.update(),l(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const M=new Set;let P;function H(){P={r:0,c:[],p:P}}function I(){P.r||l(P.c),P=P.p}function T(t,e){t&&t.i&&(M.delete(t),t.i(e))}function B(t,e,n,l){if(t&&t.o){if(M.has(t))return;M.add(t),P.c.push((()=>{M.delete(t),l&&(n&&t.d(1),l())})),t.o(e)}else l&&l()}function R(t,e){B(t,1,1,(()=>{e.delete(t.key)}))}function q(t,e,n,c,o,i,s,r,a,u,d,f){let p=t.length,m=i.length,g=p;const h={};for(;g--;)h[t[g].key]=g;const b=[],$=new Map,y=new Map,v=[];for(g=m;g--;){const t=f(o,i,g),l=n(t);let r=s.get(l);r?c&&v.push((()=>r.p(t,e))):(r=u(l,t),r.c()),$.set(l,b[g]=r),l in h&&y.set(l,Math.abs(g-h[l]))}const k=new Set,w=new Set;function x(t){T(t,1),t.m(r,d),s.set(t.key,t),d=t.first,m--}for(;p&&m;){const e=b[m-1],n=t[p-1],l=e.key,c=n.key;e===n?(d=e.first,p--,m--):$.has(c)?!s.has(l)||k.has(l)?x(e):w.has(c)?p--:y.get(l)>y.get(c)?(w.add(l),x(e)):(k.add(c),p--):(a(n,s),p--)}for(;p--;){const e=t[p];$.has(e.key)||a(e,s)}for(;m;)x(b[m-1]);return l(v),b}function J(t){t&&t.c()}function D(t,n,o,i){const{fragment:s,after_update:r}=t.$$;s&&s.m(n,o),i||j((()=>{const n=t.$$.on_mount.map(e).filter(c);t.$$.on_destroy?t.$$.on_destroy.push(...n):l(n),t.$$.on_mount=[]})),r.forEach(j)}function U(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];L.forEach((l=>-1===t.indexOf(l)?e.push(l):n.push(l))),n.forEach((t=>t())),L=e}(n.after_update),l(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function F(t,e){-1===t.$$.dirty[0]&&(S.push(t),O||(O=!0,A.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function G(e,c,o,i,r,a,u,f=[-1]){const p=s;w(e);const m=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:r,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(c.context||(p?p.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:c.target||p.$$.root};u&&u(m.root);let g=!1;if(m.ctx=o?o(e,c.props||{},((t,n,...l)=>{const c=l.length?l[0]:n;return m.ctx&&r(m.ctx[t],m.ctx[t]=c)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](c),g&&F(e,t)),n})):[],m.update(),g=!0,l(m.before_update),m.fragment=!!i&&i(m.ctx),c.target){if(c.hydrate){const t=function(t){return Array.from(t.childNodes)}(c.target);m.fragment&&m.fragment.l(t),t.forEach(d)}else m.fragment&&m.fragment.c();c.intro&&T(e.$$.fragment),D(e,c.target,c.anchor,c.customElement),V()}w(p)}class K{$destroy(){U(this,1),this.$destroy=t}$on(e,n){if(!c(n))return t;const l=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return l.push(n),()=>{const t=l.indexOf(n);-1!==t&&l.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function Q(t=null,e="full",n="full"){if(!t)return"https://via.placeholder.com/96x96?text=No+Image";if((t=t.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=t[t.length-1].includes(",")?t.pop().replace(".jpg",""):e,c=t.join("_").replace(".jpg","");return`${CANTALOUPE_APP_URL??"http://localhost:8182"}/iiif/2/${c}.jpg/${l}/${n}/0/default.jpg`}function W(t){return document.getElementById(t)?JSON.parse(document.getElementById(t).textContent):[]}function X(t){let e;return{c(){e=m("path"),y(e,"fill","currentColor"),y(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z"),y(e,"class","svelte-13ytpws")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Y(t){let e;return{c(){e=m("path"),y(e,"fill","currentColor"),y(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z"),y(e,"class","svelte-13ytpws")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function Z(e){let n,c,o,i,s,f,g,b,v,k,w;function x(t,e){return t[1]?Y:X}let S=x(e),_=S(e);return{c(){n=p("div"),c=p("figure"),o=p("img"),f=h(),g=p("button"),b=m("svg"),_.c(),r(o.src,i=Q(e[0].metadata.img,e[0].metadata.xyhw,"96,"))||y(o,"src",i),y(o,"alt","Extracted region"),y(c,"id",s="region-"+e[0].id),y(c,"class","image is-96x96 card svelte-13ytpws"),y(b,"xmlns","http://www.w3.org/2000/svg"),y(b,"viewBox","0 0 384 512"),y(b,"class","svelte-13ytpws"),y(g,"class","button check-btn tag svelte-13ytpws"),y(n,"class",v="region image is-96x96 "+(e[1]?"checked":"")+" svelte-13ytpws"),y(n,"tabindex","-1")},m(t,l){u(t,n,l),a(n,c),a(c,o),a(n,f),a(n,g),a(g,b),_.m(b,null),k||(w=[$(n,"click",e[3]),$(n,"keyup",e[4])],k=!0)},p(t,[e]){1&e&&!r(o.src,i=Q(t[0].metadata.img,t[0].metadata.xyhw,"96,"))&&y(o,"src",i),1&e&&s!==(s="region-"+t[0].id)&&y(c,"id",s),S!==(S=x(t))&&(_.d(1),_=S(t),_&&(_.c(),_.m(b,null))),2&e&&v!==(v="region image is-96x96 "+(t[1]?"checked":"")+" svelte-13ytpws")&&y(n,"class",v)},i:t,o:t,d(t){t&&d(n),_.d(),k=!1,l(w)}}}function tt(t,e,n){const l=x();function c(t){l("toggleSelection",{block:t})}let{block:o}=e,{isSelected:i=!1}=e;return t.$$set=t=>{"block"in t&&n(0,o=t.block),"isSelected"in t&&n(1,i=t.isSelected)},t.$$.update=()=>{1&t.$$.dirty&&console.log(o)},[o,i,c,()=>c(o),t=>"Enter"===t.key&&c(o)]}class et extends K{constructor(t){super(),G(this,t,tt,Z,o,{block:0,isSelected:1})}}function nt(t,e,n){const l=t.slice();return l[6]=e[n][0],l[7]=e[n][1],l}function lt(t,e,n){const l=t.slice();return l[10]=e[n],l}function ct(t){let e;return{c(){e=p("span"),e.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',y(e,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function ot(t){let e,n,l,c,o=t[0].hasOwnProperty("iiif"),i=t[0].buttons.includes("regions"),s=t[0].buttons.includes("similarity"),r=t[0].buttons.includes("vectorization"),f=o&&it(t),m=i&&rt(t),g=s&&at(t),b=r&&ut(t);return{c(){e=p("p"),f&&f.c(),n=h(),m&&m.c(),l=h(),g&&g.c(),c=h(),b&&b.c(),y(e,"class","subtitle is-6 mb-0 ml-2 pt-2")},m(t,o){u(t,e,o),f&&f.m(e,null),a(e,n),m&&m.m(e,null),a(e,l),g&&g.m(e,null),a(e,c),b&&b.m(e,null)},p(t,a){1&a&&(o=t[0].hasOwnProperty("iiif")),o?f?f.p(t,a):(f=it(t),f.c(),f.m(e,n)):f&&(f.d(1),f=null),1&a&&(i=t[0].buttons.includes("regions")),i?m?m.p(t,a):(m=rt(t),m.c(),m.m(e,l)):m&&(m.d(1),m=null),1&a&&(s=t[0].buttons.includes("similarity")),s?g?g.p(t,a):(g=at(t),g.c(),g.m(e,c)):g&&(g.d(1),g=null),1&a&&(r=t[0].buttons.includes("vectorization")),r?b?b.p(t,a):(b=ut(t),b.c(),b.m(e,null)):b&&(b.d(1),b=null)},d(t){t&&d(e),f&&f.d(),m&&m.d(),g&&g.d(),b&&b.d()}}}function it(t){let e,n=t[0].iiif,l=[];for(let e=0;e<n.length;e+=1)l[e]=st(lt(t,n,e));return{c(){for(let t=0;t<l.length;t+=1)l[t].c();e=b()},m(t,n){for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,n);u(t,e,n)},p(t,c){if(1&c){let o;for(n=t[0].iiif,o=0;o<n.length;o+=1){const i=lt(t,n,o);l[o]?l[o].p(i,c):(l[o]=st(i),l[o].c(),l[o].m(e.parentNode,e))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length}},d(t){f(l,t),t&&d(e)}}}function st(t){let e,n=t[10]+"";return{c(){e=p("span"),y(e,"class","tag logo mt-1")},m(t,l){u(t,e,l),e.innerHTML=n},p(t,l){1&l&&n!==(n=t[10]+"")&&(e.innerHTML=n)},d(t){t&&d(e)}}}function rt(t){let e,n,l,c;return{c(){e=p("a"),n=p("span"),y(n,"class","iconify"),y(n,"data-icon","entypo:documents"),y(e,"href",l=t[0].url+"regions/"),y(e,"class","button is-small is-rounded is-link px-2"),y(e,"title",c="en"===t[1]?"Show extracted regions":"Afficher les zones d'images")},m(t,l){u(t,e,l),a(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"regions/")&&y(e,"href",l),2&n&&c!==(c="en"===t[1]?"Show extracted regions":"Afficher les zones d'images")&&y(e,"title",c)},d(t){t&&d(e)}}}function at(t){let e,n,l,c;return{c(){e=p("a"),n=p("span"),y(n,"class","iconify"),y(n,"data-icon","octicon:mirror-16"),y(e,"href",l=t[0].url+"similarity/"),y(e,"class","button is-small is-rounded is-link px-2"),y(e,"title",c="en"===t[1]?"Show similarity":"Afficher les similarités")},m(t,l){u(t,e,l),a(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"similarity/")&&y(e,"href",l),2&n&&c!==(c="en"===t[1]?"Show similarity":"Afficher les similarités")&&y(e,"title",c)},d(t){t&&d(e)}}}function ut(t){let e,n,l,c;return{c(){e=p("a"),n=p("span"),y(n,"class","iconify"),y(n,"data-icon","arcticons:geogebra-geometry"),y(e,"href",l=t[0].url+"vectorization/"),y(e,"class","button is-small is-rounded is-link px-2"),y(e,"title",c="en"===t[1]?"Show vectorizations":"Afficher les vectorisations")},m(t,l){u(t,e,l),a(e,n)},p(t,n){1&n&&l!==(l=t[0].url+"vectorization/")&&y(e,"href",l),2&n&&c!==(c="en"===t[1]?"Show vectorizations":"Afficher les vectorisations")&&y(e,"title",c)},d(t){t&&d(e)}}}function dt(t){let e,n,l=t[2]?"Retirer de":"Ajouter à la";return{c(){e=g(l),n=g(" sélection")},m(t,l){u(t,e,l),u(t,n,l)},p(t,n){4&n&&l!==(l=t[2]?"Retirer de":"Ajouter à la")&&v(e,l)},d(t){t&&d(e),t&&d(n)}}}function ft(t){let e,n,l=t[2]?"Remove from":"Add to";return{c(){e=g(l),n=g(" set")},m(t,l){u(t,e,l),u(t,n,l)},p(t,n){4&n&&l!==(l=t[2]?"Remove from":"Add to")&&v(e,l)},d(t){t&&d(e),t&&d(n)}}}function pt(t){let e;return{c(){e=m("path"),y(e,"fill","currentColor"),y(e,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function mt(t){let e;return{c(){e=m("path"),y(e,"fill","currentColor"),y(e,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(t,n){u(t,e,n)},d(t){t&&d(e)}}}function gt(t){let e,n,l,c,o,i,s,r=t[6]+"",f=t[7]+"";return{c(){e=p("tr"),n=p("th"),l=g(r),c=h(),o=p("td"),i=g(f),s=h(),y(n,"class","is-narrow is-3")},m(t,r){u(t,e,r),a(e,n),a(n,l),a(e,c),a(e,o),a(o,i),a(e,s)},p(t,e){1&e&&r!==(r=t[6]+"")&&v(l,r),1&e&&f!==(f=t[7]+"")&&v(i,f)},d(t){t&&d(e)}}}function ht(e){let n,l,c,o,i,s,b,k,w,x,S,_,L,E,A,O,j,C,N,V,z,M,P,H,I,T,B,R,q,J,D,U,F,G,K,W,X,Y,Z,tt=e[0].type+"",et=e[0].id+"",lt=e[0].title+"",it=e[0].user+"",st=e[0].updated_at+"",rt=e[0].is_public&&ct(),at=0!==e[0].buttons.length&&ot(e);function ut(t,e){return"en"===t[1]?ft:dt}let ht=ut(e),bt=ht(e);function $t(t,e){return t[2]?mt:pt}let yt=$t(e),vt=yt(e),kt=Object.entries(e[0].metadata),wt=[];for(let t=0;t<kt.length;t+=1)wt[t]=gt(nt(e,kt,t));return{c(){n=p("div"),l=p("div"),c=p("div"),o=p("div"),i=p("div"),s=p("figure"),b=p("img"),w=h(),x=p("div"),S=p("a"),_=p("span"),L=g(tt),E=g(" #"),A=g(et),O=h(),j=g(lt),C=h(),rt&&rt.c(),V=h(),z=p("p"),M=g(it),P=h(),H=p("span"),I=g(st),T=h(),at&&at.c(),B=h(),R=p("div"),q=p("button"),bt.c(),J=h(),D=m("svg"),vt.c(),F=h(),G=p("div"),K=p("table"),W=p("tbody");for(let t=0;t<wt.length;t+=1)wt[t].c();r(b.src,k=Q(e[0].img,"full","250,"))||y(b,"src",k),y(b,"alt","Record illustration"),y(s,"class","card image is-96x96 svelte-xqp9nk"),y(i,"class","media-left"),y(_,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),y(S,"href",N=e[0].url),y(S,"class","title is-4 hoverable pt-2 svelte-xqp9nk"),y(H,"class","tag p-1 mb-1"),y(z,"class","subtitle is-6 mb-0 ml-2 pt-2"),y(x,"class","media-content"),y(D,"xmlns","http://www.w3.org/2000/svg"),y(D,"viewBox","0 0 384 512"),y(D,"class","svelte-xqp9nk"),y(q,"class",U="button "+(e[2]?"is-inverted":"")),y(R,"class","media-right"),y(o,"class","media"),y(K,"class","table pl-2 is-fullwidth"),y(G,"class","content"),y(c,"class","card-content"),y(l,"id",X="block-"+e[0].id),y(l,"class","card"),y(n,"class","block")},m(t,r){u(t,n,r),a(n,l),a(l,c),a(c,o),a(o,i),a(i,s),a(s,b),a(o,w),a(o,x),a(x,S),a(S,_),a(_,L),a(_,E),a(_,A),a(S,O),a(S,j),a(S,C),rt&&rt.m(S,null),a(x,V),a(x,z),a(z,M),a(z,P),a(z,H),a(H,I),a(x,T),at&&at.m(x,null),a(o,B),a(o,R),a(R,q),bt.m(q,null),a(q,J),a(q,D),vt.m(D,null),a(c,F),a(c,G),a(G,K),a(K,W);for(let t=0;t<wt.length;t+=1)wt[t]&&wt[t].m(W,null);Y||(Z=$(q,"click",e[4]),Y=!0)},p(t,[e]){if(1&e&&!r(b.src,k=Q(t[0].img,"full","250,"))&&y(b,"src",k),1&e&&tt!==(tt=t[0].type+"")&&v(L,tt),1&e&&et!==(et=t[0].id+"")&&v(A,et),1&e&&lt!==(lt=t[0].title+"")&&v(j,lt),t[0].is_public?rt||(rt=ct(),rt.c(),rt.m(S,null)):rt&&(rt.d(1),rt=null),1&e&&N!==(N=t[0].url)&&y(S,"href",N),1&e&&it!==(it=t[0].user+"")&&v(M,it),1&e&&st!==(st=t[0].updated_at+"")&&v(I,st),0!==t[0].buttons.length?at?at.p(t,e):(at=ot(t),at.c(),at.m(x,null)):at&&(at.d(1),at=null),ht===(ht=ut(t))&&bt?bt.p(t,e):(bt.d(1),bt=ht(t),bt&&(bt.c(),bt.m(q,J))),yt!==(yt=$t(t))&&(vt.d(1),vt=yt(t),vt&&(vt.c(),vt.m(D,null))),4&e&&U!==(U="button "+(t[2]?"is-inverted":""))&&y(q,"class",U),1&e){let n;for(kt=Object.entries(t[0].metadata),n=0;n<kt.length;n+=1){const l=nt(t,kt,n);wt[n]?wt[n].p(l,e):(wt[n]=gt(l),wt[n].c(),wt[n].m(W,null))}for(;n<wt.length;n+=1)wt[n].d(1);wt.length=kt.length}1&e&&X!==(X="block-"+t[0].id)&&y(l,"id",X)},i:t,o:t,d(t){t&&d(n),rt&&rt.d(),at&&at.d(),bt.d(),vt.d(),f(wt,t),Y=!1,Z()}}}function bt(t,e,n){const l=x();function c(t){l("toggleSelection",{block:t})}let{block:o}=e,{appLang:i}=e,{isSelected:s=!1}=e;return t.$$set=t=>{"block"in t&&n(0,o=t.block),"appLang"in t&&n(1,i=t.appLang),"isSelected"in t&&n(2,s=t.isSelected)},[o,i,s,c,()=>c(o)]}class $t extends K{constructor(t){super(),G(this,t,bt,ht,o,{block:0,appLang:1,isSelected:2})}}function yt(t,e,n){const l=t.slice();return l[15]=e[n][0],l[16]=e[n][1],l}function vt(t,e,n){const l=t.slice();return l[19]=e[n][0],l[20]=e[n][1],l}function kt(t,e,n){const l=t.slice();return l[23]=e[n],l}function wt(t,e,n){const l=t.slice();return l[23]=e[n],l}function xt(t){let e,n,l,c=[],o=new Map,i=t[0];const s=t=>t[23].id;for(let e=0;e<i.length;e+=1){let n=wt(t,i,e),l=s(n);o.set(l,c[e]=St(l,n))}return{c(){e=p("div"),n=p("div");for(let t=0;t<c.length;t+=1)c[t].c();y(n,"class","grid is-gap-2"),y(e,"class","fixed-grid has-auto-count")},m(t,o){u(t,e,o),a(e,n);for(let t=0;t<c.length;t+=1)c[t]&&c[t].m(n,null);l=!0},p(t,e){2117&e&&(i=t[0],H(),c=q(c,e,s,1,t,i,o,n,R,St,null,wt),I())},i(t){if(!l){for(let t=0;t<i.length;t+=1)T(c[t]);l=!0}},o(t){for(let t=0;t<c.length;t+=1)B(c[t]);l=!1},d(t){t&&d(e);for(let t=0;t<c.length;t+=1)c[t].d()}}}function St(t,e){let n,l,c;return l=new et({props:{block:e[23],appLang:e[2],isSelected:e[6](e[23])}}),l.$on("toggleSelection",e[11]),{key:t,first:null,c(){n=b(),J(l.$$.fragment),this.first=n},m(t,e){u(t,n,e),D(l,t,e),c=!0},p(t,n){e=t;const c={};1&n&&(c.block=e[23]),4&n&&(c.appLang=e[2]),65&n&&(c.isSelected=e[6](e[23])),l.$set(c)},i(t){c||(T(l.$$.fragment,t),c=!0)},o(t){B(l.$$.fragment,t),c=!1},d(t){t&&d(n),U(l,t)}}}function _t(t){let e,n,l=[],c=new Map,o=t[1];const i=t=>t[23].id;for(let e=0;e<o.length;e+=1){let n=kt(t,o,e),s=i(n);c.set(s,l[e]=Lt(s,n))}return{c(){e=p("div");for(let t=0;t<l.length;t+=1)l[t].c()},m(t,c){u(t,e,c);for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,null);n=!0},p(t,n){2118&n&&(o=t[1],H(),l=q(l,n,i,1,t,o,c,e,R,Lt,null,kt),I())},i(t){if(!n){for(let t=0;t<o.length;t+=1)T(l[t]);n=!0}},o(t){for(let t=0;t<l.length;t+=1)B(l[t]);n=!1},d(t){t&&d(e);for(let t=0;t<l.length;t+=1)l[t].d()}}}function Lt(t,e){let n,l,c;return l=new $t({props:{block:e[23],appLang:e[2],isSelected:e[6](e[23])}}),l.$on("toggleSelection",e[11]),{key:t,first:null,c(){n=b(),J(l.$$.fragment),this.first=n},m(t,e){u(t,n,e),D(l,t,e),c=!0},p(t,n){e=t;const c={};2&n&&(c.block=e[23]),4&n&&(c.appLang=e[2]),66&n&&(c.isSelected=e[6](e[23])),l.$set(c)},i(t){c||(T(l.$$.fragment,t),c=!0)},o(t){B(l.$$.fragment,t),c=!1},d(t){t&&d(n),U(l,t)}}}function Et(t){let e,n,l,c,o="en"===t[2]?"No documents in selection":"Aucun document sélectionné";return{c(){e=p("tr"),n=p("td"),l=g(o),c=h()},m(t,o){u(t,e,o),a(e,n),a(n,l),a(e,c)},p(t,e){4&e&&o!==(o="en"===t[2]?"No documents in selection":"Aucun document sélectionné")&&v(l,o)},d(t){t&&d(e)}}}function At(t){let e,n,l,c,o,i,s,r,f,m,b,k,w,x,S,_,L=t[19]+"",E=t[20].title+"";function A(){return t[12](t[19],t[15])}return{c(){e=p("tr"),n=p("th"),l=p("span"),c=g("#"),o=g(L),i=h(),s=p("td"),r=p("a"),f=g(E),b=h(),k=p("td"),w=p("button"),x=h(),y(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),y(n,"class","is-narrow is-3"),y(r,"href",m=t[20].url),y(r,"target","_blank"),y(w,"class","delete"),y(w,"aria-label","close"),y(k,"class","is-narrow")},m(t,d){u(t,e,d),a(e,n),a(n,l),a(l,c),a(l,o),a(e,i),a(e,s),a(s,r),a(r,f),a(e,b),a(e,k),a(k,w),a(e,x),S||(_=$(w,"click",A),S=!0)},p(e,n){t=e,8&n&&L!==(L=t[19]+"")&&v(o,L),8&n&&E!==(E=t[20].title+"")&&v(f,E),8&n&&m!==(m=t[20].url)&&y(r,"href",m)},d(t){t&&d(e),S=!1,_()}}}function Ot(t){let e,n,l,c,o,i,s=t[15]+"",r=Object.entries(t[16]),m=[];for(let e=0;e<r.length;e+=1)m[e]=At(vt(t,r,e));let b=null;return r.length||(b=Et(t)),{c(){e=p("h2"),n=g(s),l=h(),c=p("table"),o=p("tbody");for(let t=0;t<m.length;t+=1)m[t].c();b&&b.c(),i=h(),y(c,"class","table pl-2 is-fullwidth")},m(t,s){u(t,e,s),a(e,n),u(t,l,s),u(t,c,s),a(c,o);for(let t=0;t<m.length;t+=1)m[t]&&m[t].m(o,null);b&&b.m(o,null),a(c,i)},p(t,e){if(8&e&&s!==(s=t[15]+"")&&v(n,s),1036&e){let n;for(r=Object.entries(t[16]),n=0;n<r.length;n+=1){const l=vt(t,r,n);m[n]?m[n].p(l,e):(m[n]=At(l),m[n].c(),m[n].m(o,null))}for(;n<m.length;n+=1)m[n].d(1);m.length=r.length,!r.length&&b?b.p(t,e):r.length?b&&(b.d(1),b=null):(b=Et(t),b.c(),b.m(o,null))}},d(t){t&&d(e),t&&d(l),t&&d(c),f(m,t),b&&b.d()}}}function jt(t){let e,n,c,o,i,s,r,m,b,w,x,S,_,L,E,A,O,j,C,N,V,z,M,P,R,q,J,D,U,F,G,K,Q,W,X,Y,Z,tt,et,nt,lt,ct,ot,it="en"===t[2]?"Selection":"Sélection",st="en"===t[2]?"Selected documents":"Documents sélectionnés",rt="en"===t[2]?"Clear selection":"Vider la sélection",at="en"===t[2]?"Save selection":"Sauvegarder la sélection",ut=0!==t[0].length&&xt(t),dt=0!==t[1].length&&_t(t),ft=Object.entries(t[3]),pt=[];for(let e=0;e<ft.length;e+=1)pt[e]=Ot(yt(t,ft,e));return{c(){e=p("div"),n=p("button"),c=p("span"),o=p("i"),i=h(),s=g(it),r=g("\n            ("),m=p("span"),b=g(t[7]),w=g(")"),x=h(),ut&&ut.c(),S=h(),dt&&dt.c(),_=h(),L=p("div"),E=p("div"),A=h(),O=p("div"),j=p("div"),C=p("div"),N=p("i"),V=h(),z=g(st),M=g("\n                ("),P=p("span"),R=g(t[7]),q=g(")"),J=h(),D=p("button"),U=h(),F=p("section");for(let t=0;t<pt.length;t+=1)pt[t].c();G=h(),K=p("footer"),Q=p("div"),W=p("button"),X=g(rt),Y=h(),Z=p("button"),tt=p("i"),et=h(),nt=g(at),y(o,"class","fa-solid fa-book-bookmark"),y(m,"id","selection-count"),y(m,"class","svelte-1ifntk3"),y(c,"class","svelte-1ifntk3"),y(n,"id","set-btn"),y(n,"class","button px-5 py-4 is-link js-modal-trigger svelte-1ifntk3"),y(n,"data-target","selection-modal"),k(n,"add-animation",t[4]),k(n,"remove-animation",t[5]),y(e,"class","set-container svelte-1ifntk3"),y(E,"class","modal-background"),y(N,"class","fa-solid fa-book-bookmark"),y(P,"id","selection-count"),y(C,"class","title is-4 mb-0 media-content"),y(D,"class","delete media-left"),y(D,"aria-label","close"),y(j,"class","modal-card-head media mb-0"),y(F,"class","modal-card-body"),y(W,"class","button is-link is-light"),y(tt,"class","fa-solid fa-floppy-disk"),y(Z,"class","button is-link"),y(Q,"class","buttons"),y(K,"class","modal-card-foot is-centered"),y(O,"class","modal-content"),y(L,"id","selection-modal"),y(L,"class","modal fade"),y(L,"tabindex","-1"),y(L,"aria-labelledby","selection-modal-label"),y(L,"aria-hidden","true")},m(l,d){u(l,e,d),a(e,n),a(n,c),a(c,o),a(c,i),a(c,s),a(c,r),a(c,m),a(m,b),a(c,w),u(l,x,d),ut&&ut.m(l,d),u(l,S,d),dt&&dt.m(l,d),u(l,_,d),u(l,L,d),a(L,E),a(L,A),a(L,O),a(O,j),a(j,C),a(C,N),a(C,V),a(C,z),a(C,M),a(C,P),a(P,R),a(C,q),a(j,J),a(j,D),a(O,U),a(O,F);for(let t=0;t<pt.length;t+=1)pt[t]&&pt[t].m(F,null);a(O,G),a(O,K),a(K,Q),a(Q,W),a(W,X),a(Q,Y),a(Q,Z),a(Z,tt),a(Z,et),a(Z,nt),lt=!0,ct||(ot=[$(W,"click",t[9]),$(Z,"click",t[8])],ct=!0)},p(t,[e]){if((!lt||4&e)&&it!==(it="en"===t[2]?"Selection":"Sélection")&&v(s,it),(!lt||128&e)&&v(b,t[7]),(!lt||16&e)&&k(n,"add-animation",t[4]),(!lt||32&e)&&k(n,"remove-animation",t[5]),0!==t[0].length?ut?(ut.p(t,e),1&e&&T(ut,1)):(ut=xt(t),ut.c(),T(ut,1),ut.m(S.parentNode,S)):ut&&(H(),B(ut,1,1,(()=>{ut=null})),I()),0!==t[1].length?dt?(dt.p(t,e),2&e&&T(dt,1)):(dt=_t(t),dt.c(),T(dt,1),dt.m(_.parentNode,_)):dt&&(H(),B(dt,1,1,(()=>{dt=null})),I()),(!lt||4&e)&&st!==(st="en"===t[2]?"Selected documents":"Documents sélectionnés")&&v(z,st),(!lt||128&e)&&v(R,t[7]),1036&e){let n;for(ft=Object.entries(t[3]),n=0;n<ft.length;n+=1){const l=yt(t,ft,n);pt[n]?pt[n].p(l,e):(pt[n]=Ot(l),pt[n].c(),pt[n].m(F,null))}for(;n<pt.length;n+=1)pt[n].d(1);pt.length=ft.length}(!lt||4&e)&&rt!==(rt="en"===t[2]?"Clear selection":"Vider la sélection")&&v(X,rt),(!lt||4&e)&&at!==(at="en"===t[2]?"Save selection":"Sauvegarder la sélection")&&v(nt,at)},i(t){lt||(T(ut),T(dt),lt=!0)},o(t){B(ut),B(dt),lt=!1},d(t){t&&d(e),t&&d(x),ut&&ut.d(t),t&&d(S),dt&&dt.d(t),t&&d(_),t&&d(L),f(pt,t),ct=!1,l(ot)}}}function Ct(t,e,n){let l,c,{regions:o=[]}=e,{records:i=[]}=e,{appLang:s="en"}=e,r=!1,a=!1,u=JSON.parse(localStorage.getItem("documentSet"))??{};function d(){localStorage.setItem("documentSet",JSON.stringify(u))}function f(t,e){const{[t]:l,...c}=u[e];n(3,u[e]=c,u),n(5,a=!0),setTimeout((()=>n(5,a=!1)),300),d()}return t.$$set=t=>{"regions"in t&&n(0,o=t.regions),"records"in t&&n(1,i=t.records),"appLang"in t&&n(2,s=t.appLang)},t.$$.update=()=>{8&t.$$.dirty&&n(7,l=Object.values(u).reduce(((t,e)=>t+Object.keys(e).length),0)),8&t.$$.dirty&&n(6,c=t=>!!u.hasOwnProperty(t.type)&&u[t.type].hasOwnProperty(t.id))},[o,i,s,u,r,a,c,l,function(){console.log(u)},function(){n(3,u={}),d()},f,function(t){const{block:e}=t.detail;c(e)?f(e.id,e.type):function(t){u.hasOwnProperty(t.type)||n(3,u[t.type]=[],u),n(3,u[t.type]={...u[t.type],[t.id]:t},u),n(4,r=!0),setTimeout((()=>n(4,r=!1)),300),d()}(e)},(t,e)=>f(t,e)]}const Nt=W("record-data"),Vt=W("regions-data");APP_LANG;return new class extends K{constructor(t){super(),G(this,t,Ct,jt,o,{regions:0,records:1,appLang:2})}}({target:document.getElementById("block-list"),props:{regions:Vt,records:Nt}})}();
//# sourceMappingURL=blockList.js.map

var recordList=function(){"use strict";function e(){}const t=e=>e;function n(e,t){for(const n in t)e[n]=t[n];return e}function l(e){return e()}function s(){return Object.create(null)}function r(e){e.forEach(l)}function o(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}let i;function a(e,t){return i||(i=document.createElement("a")),i.href=t,e===i.href}function u(t,...n){if(null==t)return e;const l=t.subscribe(...n);return l.unsubscribe?()=>l.unsubscribe():l}function d(e){let t;return u(e,(e=>t=e))(),t}function m(e,t,n){e.$$.on_destroy.push(u(t,n))}function f(e,t,n,l){if(e){const s=p(e,t,n,l);return e[0](s)}}function p(e,t,l,s){return e[1]&&s?n(l.ctx.slice(),e[1](s(t))):l.ctx}function g(e,t,n,l){if(e[2]&&l){const s=e[2](l(n));if(void 0===t.dirty)return s;if("object"==typeof s){const e=[],n=Math.max(t.dirty.length,s.length);for(let l=0;l<n;l+=1)e[l]=t.dirty[l]|s[l];return e}return t.dirty|s}return t.dirty}function h(e,t,n,l,s,r){if(s){const o=p(t,n,l,r);e.p(o,s)}}function $(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let e=0;e<n;e++)t[e]=-1;return t}return-1}const b="undefined"!=typeof window;let y=b?()=>window.performance.now():()=>Date.now(),v=b?e=>requestAnimationFrame(e):e;const w=new Set;function k(e){w.forEach((t=>{t.c(e)||(w.delete(t),t.f())})),0!==w.size&&v(k)}function x(e,t){e.appendChild(t)}function _(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function S(e){const t=N("style");return function(e,t){x(e.head||e,t),t.sheet}(_(e),t),t.sheet}function E(e,t,n){e.insertBefore(t,n||null)}function O(e){e.parentNode&&e.parentNode.removeChild(e)}function L(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function N(e){return document.createElement(e)}function R(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function P(e){return document.createTextNode(e)}function C(){return P(" ")}function A(){return P("")}function j(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function T(e){return function(t){return t.preventDefault(),e.call(this,t)}}function I(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}const M=["width","height"];function F(e,t){const n=Object.getOwnPropertyDescriptors(e.__proto__);for(const l in t)null==t[l]?e.removeAttribute(l):"style"===l?e.style.cssText=t[l]:"__value"===l?e.value=e[l]=t[l]:n[l]&&n[l].set&&-1===M.indexOf(l)?e[l]=t[l]:I(e,l,t[l])}function U(e){return""===e?null:+e}function D(e,t){t=""+t,e.data!==t&&(e.data=t)}function H(e,t){e.value=null==t?"":t}function V(e,t,n){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];if(l.__value===t)return void(l.selected=!0)}n&&void 0===t||(e.selectedIndex=-1)}function B(e,t){for(let n=0;n<e.options.length;n+=1){const l=e.options[n];l.selected=~t.indexOf(l.__value)}}function z(e,t,n){e.classList[n?"add":"remove"](t)}const q=new Map;let G,J=0;function X(e,t,n,l,s,r,o,c=0){const i=16.666/l;let a="{\n";for(let e=0;e<=1;e+=i){const l=t+(n-t)*r(e);a+=100*e+`%{${o(l,1-l)}}\n`}const u=a+`100% {${o(n,1-n)}}\n}`,d=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${c}`,m=_(e),{stylesheet:f,rules:p}=q.get(m)||function(e,t){const n={stylesheet:S(t),rules:{}};return q.set(e,n),n}(m,e);p[d]||(p[d]=!0,f.insertRule(`@keyframes ${d} ${u}`,f.cssRules.length));const g=e.style.animation||"";return e.style.animation=`${g?`${g}, `:""}${d} ${l}ms linear ${s}ms 1 both`,J+=1,d}function K(e,t){const n=(e.style.animation||"").split(", "),l=n.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),s=n.length-l.length;s&&(e.style.animation=l.join(", "),J-=s,J||v((()=>{J||(q.forEach((e=>{const{ownerNode:t}=e.stylesheet;t&&O(t)})),q.clear())})))}function Y(e){G=e}function W(){if(!G)throw new Error("Function called outside component initialization");return G}function Q(e,t){return W().$$.context.set(e,t),t}const Z=[],ee=[];let te=[];const ne=[],le=Promise.resolve();let se=!1;function re(e){te.push(e)}const oe=new Set;let ce,ie=0;function ae(){if(0!==ie)return;const e=G;do{try{for(;ie<Z.length;){const e=Z[ie];ie++,Y(e),ue(e.$$)}}catch(e){throw Z.length=0,ie=0,e}for(Y(null),Z.length=0,ie=0;ee.length;)ee.pop()();for(let e=0;e<te.length;e+=1){const t=te[e];oe.has(t)||(oe.add(t),t())}te.length=0}while(Z.length);for(;ne.length;)ne.pop()();se=!1,oe.clear(),Y(e)}function ue(e){if(null!==e.fragment){e.update(),r(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(re)}}function de(e,t,n){e.dispatchEvent(function(e,t,{bubbles:n=!1,cancelable:l=!1}={}){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,n,l,t),s}(`${t?"intro":"outro"}${n}`))}const me=new Set;let fe;function pe(){fe={r:0,c:[],p:fe}}function ge(){fe.r||r(fe.c),fe=fe.p}function he(e,t){e&&e.i&&(me.delete(e),e.i(t))}function $e(e,t,n,l){if(e&&e.o){if(me.has(e))return;me.add(e),fe.c.push((()=>{me.delete(e),l&&(n&&e.d(1),l())})),e.o(t)}else l&&l()}const be={duration:0};function ye(n,l,s,c){const i={direction:"both"};let a=l(n,s,i),u=c?0:1,d=null,m=null,f=null;function p(){f&&K(n,f)}function g(e,t){const n=e.b-u;return t*=Math.abs(n),{a:u,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function h(l){const{delay:s=0,duration:o=300,easing:c=t,tick:i=e,css:h}=a||be,$={start:y()+s,b:l};l||($.group=fe,fe.r+=1),d||m?m=$:(h&&(p(),f=X(n,u,l,o,s,c,h)),l&&i(0,1),d=g($,o),re((()=>de(n,l,"start"))),function(e){let t;0===w.size&&v(k),new Promise((n=>{w.add(t={c:e,f:n})}))}((e=>{if(m&&e>m.start&&(d=g(m,o),m=null,de(n,d.b,"start"),h&&(p(),f=X(n,u,d.b,d.duration,0,c,a.css))),d)if(e>=d.end)i(u=d.b,1-u),de(n,d.b,"end"),m||(d.b?p():--d.group.r||r(d.group.c)),d=null;else if(e>=d.start){const t=e-d.start;u=d.a+d.d*c(t/d.duration),i(u,1-u)}return!(!d&&!m)})))}return{run(e){o(a)?(ce||(ce=Promise.resolve(),ce.then((()=>{ce=null}))),ce).then((()=>{a=a(i),h(e)})):h(e)},end(){p(),d=m=null}}}function ve(e,t){$e(e,1,1,(()=>{t.delete(e.key)}))}function we(e){e&&e.c()}function ke(e,t,n,s){const{fragment:c,after_update:i}=e.$$;c&&c.m(t,n),s||re((()=>{const t=e.$$.on_mount.map(l).filter(o);e.$$.on_destroy?e.$$.on_destroy.push(...t):r(t),e.$$.on_mount=[]})),i.forEach(re)}function xe(e,t){const n=e.$$;null!==n.fragment&&(!function(e){const t=[],n=[];te.forEach((l=>-1===e.indexOf(l)?t.push(l):n.push(l))),n.forEach((e=>e())),te=t}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function _e(e,t){-1===e.$$.dirty[0]&&(Z.push(e),se||(se=!0,le.then(ae)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Se(t,n,l,o,c,i,a,u=[-1]){const d=G;Y(t);const m=t.$$={fragment:null,ctx:[],props:i,update:e,not_equal:c,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:s(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};a&&a(m.root);let f=!1;if(m.ctx=l?l(t,n.props||{},((e,n,...l)=>{const s=l.length?l[0]:n;return m.ctx&&c(m.ctx[e],m.ctx[e]=s)&&(!m.skip_bound&&m.bound[e]&&m.bound[e](s),f&&_e(t,e)),n})):[],m.update(),f=!0,r(m.before_update),m.fragment=!!o&&o(m.ctx),n.target){if(n.hydrate){const e=function(e){return Array.from(e.childNodes)}(n.target);m.fragment&&m.fragment.l(e),e.forEach(O)}else m.fragment&&m.fragment.c();n.intro&&he(t.$$.fragment),ke(t,n.target,n.anchor,n.customElement),ae()}Y(d)}class Ee{$destroy(){xe(this,1),this.$destroy=e}$on(t,n){if(!o(n))return e;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const e=l.indexOf(n);-1!==e&&l.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Oe=APP_LANG,Le=APP_NAME,Ne=WEBAPP_NAME;USER_ID;const Re=CSRF_TOKEN;ADDITIONAL_MODULES;const Pe="Regions";SAS_APP_URL;const Ce=CANTALOUPE_APP_URL;MEDIA_PATH;const Ae=[];function je(t,n=e){let l;const s=new Set;function r(e){if(c(t,e)&&(t=e,l)){const e=!Ae.length;for(const e of s)e[1](),Ae.push(e,t);if(e){for(let e=0;e<Ae.length;e+=2)Ae[e][0](Ae[e+1]);Ae.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(o,c=e){const i=[o,c];return s.add(i),1===s.size&&(l=n(r)||e),o(t),()=>{s.delete(i),0===s.size&&l&&(l(),l=null)}}}}function Te(t,n,l){const s=!Array.isArray(t),c=s?[t]:t,i=n.length<2;return a=t=>{let l=!1;const a=[];let d=0,m=e;const f=()=>{if(d)return;m();const l=n(s?a[0]:a,t);i?t(l):m=o(l)?l:e},p=c.map(((e,t)=>u(e,(e=>{a[t]=e,d&=~(1<<t),l&&f()}),(()=>{d|=1<<t}))));return l=!0,f(),function(){r(p),m(),l=!1}},{subscribe:je(l,a).subscribe};var a}const Ie=function(){const e={id:null,type:"documentSet",title:"en"===Oe?"Document set":"Set de document",selected:{}},t={id:null,type:"regionsSet",title:"en"===Oe?"Regions set":"Set de régions",selected:{}},n=je({records:JSON.parse(localStorage.getItem("documentSet"))||e,regions:JSON.parse(localStorage.getItem("regionsSet"))||t}),{subscribe:l,update:s,get:r}=n,o=je(!1);function c(e,t=!1){o.set(t),localStorage.setItem(e.type,JSON.stringify(e))}function i(e,t){return e[t?"regions":"records"]?.selected||{}}function a(e,t=!0){const n=i(e,t);return t?n[Pe]??{}:Object.entries(n)}function u(e,t,n){const l=n===Pe?"regions":"records",s=e[l],{[t]:r,...o}=s.selected[n];return e[l]={...s,selected:{...s.selected,[n]:o}},c(e[l]),e}function d(e,t,n=!0){const l=t.class===Pe?"regions":"records",s=e[l],r=s.selected,o=t.class===Pe?t:{title:t.title,url:t.url};return e[l]={...s,selected:{...r,[t.class]:{...r[t.class]||{},[t.id]:o}}},n&&c(e[l]),e}function m(e,t){return e[t.class.toLowerCase().includes("regions")?"regions":"records"].id===t.id}return{subscribe:l,save:e=>s((t=>function(e,t){const n=t?"regions-set":"document-set";if(t)return window.alert("Region set management is not yet implemented"),e;let l=e[t?"regions":"records"],r={};Object.entries(l.selected).forEach((([e,t])=>{r[e]=Object.keys(t)}));const c=null!==l.id?`${l.id}/change`:"add";return fetch(`${window.location.origin}/${Le}/${n}/${c}`,{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":Re},body:JSON.stringify({title:l.title,selection:l,...r})}).then((e=>e.json())).then((e=>{if(!e?.document_set_id)throw new Error("Failed to save selection");s((n=>{const l=n[t?"regions":"records"];return l.id=e.document_set_id,l.title=e.document_set_title,o.set(!0),n}))})).catch((e=>console.error("Error:",e))),e}(t,e))),empty:n=>s((l=>(l[n?"regions":"records"]=n?t:e,c(l[n?"regions":"records"]),l))),removeAll:(e,t)=>s((n=>function(e,t,n){const l=n===Pe?"regions":"records",s=e[l];let r=s.selected[n];return r&&Object.keys(r).length?(t.forEach((e=>{delete r[e]})),e[l]={...s,selected:{...s.selected,[n]:r}},c(e[l]),e):e}(n,e,t))),remove:(e,t)=>s((n=>u(n,e,t))),addAll:e=>s((t=>function(e,t){const n=t[0].type===Pe;return t.forEach((t=>{e=d(e,t,!1)})),c(e[n?"regions":"records"]),e}(t,e))),add:e=>s((t=>d(t,e))),toggle:e=>s((t=>{const n=i(t,e.class===Pe);return n[e.class]?.[e.id]?u(t,e.id,e.class):d(t,e)})),updateTitle:(e,t)=>s((n=>{const l=t?"regions":"records";return n[l]={...n[l],title:e},c(n[l],!0),n})),isSaved:o,isSelected:Te(n,(e=>t=>i(e,t.class===Pe)[t.class]?.hasOwnProperty(t.id)||!1)),isSetSelected:Te(n,(e=>t=>m(e,t))),selected:Te(n,(e=>t=>a(e,t))),nbSelected:Te(n,(e=>t=>{const n=a(e,t);return t?Object.keys(n).length:n.reduce(((e,[t,n])=>e+Object.keys(n).length),0)})),selectionTitle:Te(n,(e=>t=>e[t?"regions":"records"].title)),selection:Te(n,(e=>t=>e[t?"regions":"records"])),toggleSet:n=>s((l=>m(l,n)?function(n,l){const s=l.class.toLowerCase().includes("regions");return n[s?"regions":"records"]=s?t:e,n}(l,n):function(e,t){return e[t.class.toLowerCase().includes("regions")?"regions":"records"]=t.selection,e}(l,n)))}}();function Me(e){let t,n,l=e[1]?"Retirer de la":"Ajouter à la";return{c(){t=P(l),n=P(" sélection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Ajouter à la")&&D(t,l)},d(e){e&&O(t),e&&O(n)}}}function Fe(e){let t,n,l=e[1]?"Remove from":"Add to";return{c(){t=P(l),n=P(" selection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Remove from":"Add to")&&D(t,l)},d(e){e&&O(t),e&&O(n)}}}function Ue(e){let t;return{c(){t=R("path"),I(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function De(e){let t;return{c(){t=R("path"),I(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function He(t){let n,l,s,r,o;let c=("en"===Oe?Fe:Me)(t);function i(e,t){return e[1]?De:Ue}let a=i(t),u=a(t);return{c(){n=N("button"),c.c(),l=C(),s=R("svg"),u.c(),I(s,"xmlns","http://www.w3.org/2000/svg"),I(s,"viewBox","0 0 384 512"),I(s,"class","svelte-135nggd"),I(n,"class","button"),z(n,"is-inverted",t[1])},m(e,i){E(e,n,i),c.m(n,null),x(n,l),x(n,s),u.m(s,null),r||(o=j(n,"click",t[4]),r=!0)},p(e,[t]){c.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(s,null))),2&t&&z(n,"is-inverted",e[1])},i:e,o:e,d(e){e&&O(n),c.d(),u.d(),r=!1,o()}}}function Ve(e,t,n){let l,s;const{isSelected:r}=Ie;m(e,r,(e=>n(3,s=e)));let{item:o}=t;return e.$$set=e=>{"item"in e&&n(0,o=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=s(o))},[o,l,r,s,()=>Ie.toggle(o)]}class Be extends Ee{constructor(e){super(),Se(this,e,Ve,He,c,{item:0})}}function ze(e,{delay:n=0,duration:l=400,easing:s=t}={}){const r=+getComputedStyle(e).opacity;return{delay:n,duration:l,easing:s,css:e=>"opacity: "+e*r}}function qe(e=null,t="full",n="full"){if(!e)return"https://via.placeholder.com/96x96?text=No+Image";if((e=e.split("_")).length<3)return"https://via.placeholder.com/96x96?text=No+Image";const l=e[e.length-1].includes(",")?e.pop().replace(".jpg",""):t,s=e.join("_").replace(".jpg","");return`${Ce??"http://localhost:8182"}/iiif/2/${s}.jpg/${l}/${n}/0/default.jpg`}function Ge(e,t=null,n=!1){return new Promise((l=>{if(document.getElementById("msg-modal")){n?document.getElementById("modal-footer").hidden=!1:l(void 0),t&&(document.getElementById("modal-title").innerHTML=t),document.getElementById("modal-body").innerHTML=e,document.getElementById("hidden-msg-btn").click();const s=document.getElementById("cancel-btn"),r=document.getElementById("ok-btn"),o=document.getElementById("modal-bkg"),c=()=>{s.removeEventListener("click",i),o.removeEventListener("click",i),r.removeEventListener("click",a),document.getElementById("modal-footer").hidden=!0},i=()=>{c(),l(!1)},a=()=>{c(),l(!0)};s.addEventListener("click",i),r.addEventListener("click",a)}else n?l(window.confirm(e)):(window.alert(e),l(void 0))}))}async function Je(e){try{return(await fetch(e)).ok}catch(e){return console.error("Error:",e),!1}}const Xe=e=>({}),Ke=e=>({}),Ye=e=>({}),We=e=>({});function Qe(e,t,n){const l=e.slice();return l[4]=t[n],l}function Ze(e){let t,n,l,s;return{c(){t=N("div"),n=N("figure"),l=N("img"),a(l.src,s=qe(e[0].img,"full","250,"))||I(l,"src",s),I(l,"alt","Record illustration"),I(n,"class","card image is-96x96 svelte-1bxybuh"),I(t,"class","media-left")},m(e,s){E(e,t,s),x(t,n),x(n,l)},p(e,t){1&t&&!a(l.src,s=qe(e[0].img,"full","250,"))&&I(l,"src",s)},d(e){e&&O(t)}}}function et(e){let t;return{c(){t=N("span"),t.innerHTML='<span class="icon has-text-success"><i class="fas fa-check-circle"></i></span> \n                                <span style="margin-left: -0.5rem">Public</span>',I(t,"class","pl-3 icon-text is-size-7 is-center has-text-weight-normal")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function tt(e){let t,n=e[0].user+"";return{c(){t=P(n)},m(e,n){E(e,t,n)},p(e,l){1&l&&n!==(n=e[0].user+"")&&D(t,n)},d(e){e&&O(t)}}}function nt(e){let t,n,l=e[0].updated_at+"";return{c(){t=N("span"),n=P(l),I(t,"class","tag p-1 mb-1")},m(e,l){E(e,t,l),x(t,n)},p(e,t){1&t&&l!==(l=e[0].updated_at+"")&&D(n,l)},d(e){e&&O(t)}}}function lt(e){let t,n,l=e[0].hasOwnProperty("iiif"),s=e[0].buttons.hasOwnProperty("regions"),r=l&&st(e),o=s&&ot(e);return{c(){t=N("p"),r&&r.c(),n=C(),o&&o.c(),I(t,"class","subtitle is-6 mb-0 ml-2 pt-2 is-middle")},m(e,l){E(e,t,l),r&&r.m(t,null),x(t,n),o&&o.m(t,null)},p(e,c){1&c&&(l=e[0].hasOwnProperty("iiif")),l?r?r.p(e,c):(r=st(e),r.c(),r.m(t,n)):r&&(r.d(1),r=null),1&c&&(s=e[0].buttons.hasOwnProperty("regions")),s?o?o.p(e,c):(o=ot(e),o.c(),o.m(t,null)):o&&(o.d(1),o=null)},d(e){e&&O(t),r&&r.d(),o&&o.d()}}}function st(e){let t,n=e[0].iiif,l=[];for(let t=0;t<n.length;t+=1)l[t]=rt(Qe(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,s){if(1&s){let r;for(n=e[0].iiif,r=0;r<n.length;r+=1){const o=Qe(e,n,r);l[r]?l[r].p(o,s):(l[r]=rt(o),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function rt(e){let t,n=e[4]+"";return{c(){t=N("span"),I(t,"class","tag logo mt-1")},m(e,l){E(e,t,l),t.innerHTML=n},p(e,l){1&l&&n!==(n=e[4]+"")&&(t.innerHTML=n)},d(e){e&&O(t)}}}function ot(e){let t,n,l,s,r;return{c(){t=N("a"),n=N("span"),l=C(),s=N("span"),s.textContent=""+("en"===Oe?"Show regions":"Afficher les régions"),I(n,"class","iconify"),I(n,"data-icon","entypo:documents"),I(s,"class","ml-2"),I(t,"href",r=e[0].buttons.regions),I(t,"class","regions-btn button is-small is-rounded is-link px-2 svelte-1bxybuh"),I(t,"title","en"===Oe?"View image regions":"Afficher les régions d'images")},m(e,r){E(e,t,r),x(t,n),x(t,l),x(t,s)},p(e,n){1&n&&r!==(r=e[0].buttons.regions)&&I(t,"href",r)},d(e){e&&O(t)}}}function ct(e){let t,n,l,s,r,o,c,i,a,u,d,m,p,b,y,v,w,k,_,S,L,R,A,j,T,M=e[0].hasOwnProperty("img"),F=e[0].type+"",U=e[0].id+"",H=e[0].title+"",V=e[0].hasOwnProperty("is_public")&&e[0].is_public,B=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length,z=M&&Ze(e),q=V&&et(),G=e[0].user&&tt(e),J=e[0].updated_at&&nt(e),X=B&&lt(e);const K=e[3].buttons,Y=f(K,e,e[2],We),W=e[3].body,Q=f(W,e,e[2],Ke);return{c(){t=N("div"),n=N("div"),l=N("div"),s=N("div"),z&&z.c(),r=C(),o=N("div"),c=N("a"),i=N("span"),a=P(F),u=P(" #"),d=P(U),m=C(),p=P(H),b=C(),q&&q.c(),v=C(),w=N("p"),G&&G.c(),k=C(),J&&J.c(),_=C(),X&&X.c(),S=C(),L=N("div"),Y&&Y.c(),R=C(),A=N("div"),Q&&Q.c(),I(i,"class","tag px-2 py-1 mb-1 mr-1 is-dark is-rounded"),I(c,"href",y=e[1]?e[0].url:null),I(c,"class","title is-4 "+(e[1]?"hoverable":"")+" pt-2 svelte-1bxybuh"),I(w,"class","subtitle is-6 mb-0 ml-2 pt-2"),I(o,"class","media-content"),I(L,"class","media-right"),I(s,"class","media"),I(A,"class","content fixed-grid px-5"),I(l,"class","card-content"),I(n,"class","card mb-3"),I(t,"class","item")},m(e,f){E(e,t,f),x(t,n),x(n,l),x(l,s),z&&z.m(s,null),x(s,r),x(s,o),x(o,c),x(c,i),x(i,a),x(i,u),x(i,d),x(c,m),x(c,p),x(c,b),q&&q.m(c,null),x(o,v),x(o,w),G&&G.m(w,null),x(w,k),J&&J.m(w,null),x(o,_),X&&X.m(o,null),x(s,S),x(s,L),Y&&Y.m(L,null),x(l,R),x(l,A),Q&&Q.m(A,null),T=!0},p(e,[t]){1&t&&(M=e[0].hasOwnProperty("img")),M?z?z.p(e,t):(z=Ze(e),z.c(),z.m(s,r)):z&&(z.d(1),z=null),(!T||1&t)&&F!==(F=e[0].type+"")&&D(a,F),(!T||1&t)&&U!==(U=e[0].id+"")&&D(d,U),(!T||1&t)&&H!==(H=e[0].title+"")&&D(p,H),1&t&&(V=e[0].hasOwnProperty("is_public")&&e[0].is_public),V?q||(q=et(),q.c(),q.m(c,null)):q&&(q.d(1),q=null),(!T||1&t&&y!==(y=e[1]?e[0].url:null))&&I(c,"href",y),e[0].user?G?G.p(e,t):(G=tt(e),G.c(),G.m(w,k)):G&&(G.d(1),G=null),e[0].updated_at?J?J.p(e,t):(J=nt(e),J.c(),J.m(w,null)):J&&(J.d(1),J=null),1&t&&(B=e[0].hasOwnProperty("buttons")&&0!==Object.keys(e[0].buttons).length),B?X?X.p(e,t):(X=lt(e),X.c(),X.m(o,null)):X&&(X.d(1),X=null),Y&&Y.p&&(!T||4&t)&&h(Y,K,e,e[2],T?g(K,e[2],t,Ye):$(e[2]),We),Q&&Q.p&&(!T||4&t)&&h(Q,W,e,e[2],T?g(W,e[2],t,Xe):$(e[2]),Ke)},i(e){T||(he(Y,e),he(Q,e),re((()=>{T&&(j||(j=ye(t,ze,{duration:500},!0)),j.run(1))})),T=!0)},o(e){$e(Y,e),$e(Q,e),j||(j=ye(t,ze,{duration:500},!1)),j.run(0),T=!1},d(e){e&&O(t),z&&z.d(),q&&q.d(),G&&G.d(),J&&J.d(),X&&X.d(),Y&&Y.d(e),Q&&Q.d(e),e&&j&&j.end()}}}function it(e,t,n){let{$$slots:l={},$$scope:s}=t,{item:r}=t;const o=r.hasOwnProperty("url")&&""!==r.url;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"$$scope"in e&&n(2,s=e.$$scope)},[r,o,s,l]}class at extends Ee{constructor(e){super(),Se(this,e,it,ct,c,{item:0})}}function ut(e,t,n){const l=e.slice();return l[1]=t[n][0],l[2]=t[n][1],l}function dt(e){let t,n,l;return n=new Be({props:{item:e[0]}}),{c(){t=N("div"),we(n.$$.fragment),I(t,"slot","buttons")},m(e,s){E(e,t,s),ke(n,t,null),l=!0},p(e,t){const l={};1&t&&(l.item=e[0]),n.$set(l)},i(e){l||(he(n.$$.fragment,e),l=!0)},o(e){$e(n.$$.fragment,e),l=!1},d(e){e&&O(t),xe(n)}}}function mt(e){let t,n,l,s,r,o,c,i=e[1]+"",a=e[2]+"";return{c(){t=N("div"),n=N("div"),l=P(i),s=C(),r=N("div"),c=C(),I(n,"class","column is-4 is-bold"),I(r,"class",o="column is-8 "+("-"===e[2]?"faded":"")),I(t,"class","datum is-middle columns svelte-ln5qdg")},m(e,o){E(e,t,o),x(t,n),x(n,l),x(t,s),x(t,r),r.innerHTML=a,x(t,c)},p(e,t){1&t&&i!==(i=e[1]+"")&&D(l,i),1&t&&a!==(a=e[2]+"")&&(r.innerHTML=a),1&t&&o!==(o="column is-8 "+("-"===e[2]?"faded":""))&&I(r,"class",o)},d(e){e&&O(t)}}}function ft(e){let t,n=Object.entries(e[0].metadata),l=[];for(let t=0;t<n.length;t+=1)l[t]=mt(ut(e,n,t));return{c(){t=N("div");for(let e=0;e<l.length;e+=1)l[e].c();I(t,"slot","body"),I(t,"class","grid metadata pt-2 svelte-ln5qdg")},m(e,n){E(e,t,n);for(let e=0;e<l.length;e+=1)l[e]&&l[e].m(t,null)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].metadata),r=0;r<n.length;r+=1){const o=ut(e,n,r);l[r]?l[r].p(o,s):(l[r]=mt(o),l[r].c(),l[r].m(t,null))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){e&&O(t),L(l,e)}}}function pt(e){let t,n;return t=new at({props:{item:e[0],$$slots:{body:[ft],buttons:[dt]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),33&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function gt(e,t,n){let{item:l}=t;return e.$$set=e=>{"item"in e&&n(0,l=e.item)},[l]}class ht extends Ee{constructor(e){super(),Se(this,e,gt,pt,c,{item:0})}}function $t(t){let n,l,s,r,o,c,i,a,u,d="en"===Oe?"Selection":"Sélection";return{c(){n=N("div"),l=N("button"),s=N("span"),r=N("i"),o=C(),c=P(d),i=P("\n            ("),a=P(t[0]),u=P(")"),I(r,"class","fa-solid fa-book-bookmark"),I(s,"id","btn-content"),I(l,"id","set-btn"),I(l,"class","button px-5 py-4 is-link js-modal-trigger svelte-hs48f9"),I(l,"data-target","selection-modal"),I(n,"class","set-container svelte-hs48f9")},m(e,t){E(e,n,t),x(n,l),x(l,s),x(s,r),x(s,o),x(s,c),x(s,i),x(s,a),x(s,u)},p(e,[t]){1&t&&D(a,e[0])},i:e,o:e,d(e){e&&O(n)}}}function bt(e,t,n){let{selectionLength:l=0}=t,s=l;return e.$$set=e=>{"selectionLength"in e&&n(0,l=e.selectionLength)},e.$$.update=()=>{if(3&e.$$.dirty&&l!==s){const e=l>s;n(1,s=l);const t=document.getElementById("btn-content");t&&t.animate([{transform:e?"translateY(-7px)":"translateX(-5px)"},{transform:e?"translateY(7px)":"translateX(5px)"},{transform:"translate(0)"}],{duration:300,easing:"cubic-bezier(0.65, 0, 0.35, 1)"})}},[l,s]}class yt extends Ee{constructor(e){super(),Se(this,e,bt,$t,c,{selectionLength:0})}}function vt(t){let n,l,s,r,o,c,i,a="en"===Oe?"Save selection":"Sauvegarder la sélection";return{c(){n=N("button"),l=N("span"),s=N("i"),r=C(),o=P(a),I(s,"class","fa-solid fa-floppy-disk"),I(n,"class","button is-link")},m(e,a){E(e,n,a),x(n,l),x(l,s),x(l,r),x(l,o),c||(i=j(n,"click",t[6]),c=!0)},p:e,d(e){e&&O(n),c=!1,i()}}}function wt(e){let t,n,l,s,r,o,c="en"===Oe?"Go to treatment":"Accéder au traitement";return{c(){t=N("a"),n=N("span"),l=N("i"),s=C(),r=P(c),I(l,"class","fa-solid fa-gear"),I(t,"class","button is-link"),I(t,"href",o="/"+Le+"/treatment/add/?document_set="+e[2](e[0]).id)},m(e,o){E(e,t,o),x(t,n),x(n,l),x(n,s),x(n,r)},p(e,n){5&n&&o!==(o="/"+Le+"/treatment/add/?document_set="+e[2](e[0]).id)&&I(t,"href",o)},d(e){e&&O(t)}}}function kt(t){let n,l,s,r,o,c;function i(e,t){return e[1]?wt:vt}let a=i(t),u=a(t);return{c(){n=N("footer"),l=N("div"),s=N("button"),s.textContent=""+("en"===Oe?"Clear selection":"Vider la sélection"),r=C(),u.c(),I(s,"class","button button-close is-link is-light"),I(l,"class","buttons"),I(n,"class","modal-card-foot is-center")},m(e,i){E(e,n,i),x(n,l),x(l,s),x(l,r),u.m(l,null),o||(c=j(s,"click",t[5]),o=!0)},p(e,[t]){a===(a=i(e))&&u?u.p(e,t):(u.d(1),u=a(e),u&&(u.c(),u.m(l,null)))},i:e,o:e,d(e){e&&O(n),u.d(),o=!1,c()}}}function xt(e,t,n){let l,s;const{isSaved:r,selection:o}=Ie;m(e,r,(e=>n(1,l=e))),m(e,o,(e=>n(2,s=e)));let{isRegion:c=!0}=t;return e.$$set=e=>{"isRegion"in e&&n(0,c=e.isRegion)},[c,l,s,r,o,()=>Ie.empty(c),()=>Ie.save(c)]}class _t extends Ee{constructor(e){super(),Se(this,e,xt,kt,c,{isRegion:0})}}function St(e){let t,n,l,s,o,c,i=e[5](e[0])+"";return{c(){t=N("span"),n=P(i),l=C(),s=N("span"),s.innerHTML='<i class="fas fa-edit"></i>',I(s,"class","pl-3 smaller has-text-link")},m(r,i){E(r,t,i),x(t,n),x(t,l),x(t,s),o||(c=[j(t,"click",e[7]),j(t,"keyup",null)],o=!0)},p(e,t){33&t&&i!==(i=e[5](e[0])+"")&&D(n,i)},d(e){e&&O(t),o=!1,r(c)}}}function Et(e){let t,n,l;return{c(){t=N("input"),I(t,"class","input selection-title svelte-sgypdx")},m(s,r){E(s,t,r),e[12](t),H(t,e[4]),n||(l=[j(t,"input",e[13]),j(t,"keydown",e[8]),j(t,"blur",e[9])],n=!0)},p(e,n){16&n&&t.value!==e[4]&&H(t,e[4])},d(s){s&&O(t),e[12](null),n=!1,r(l)}}}function Ot(e){let t,n,l,s,r,o,c,i,a,u,d,m,p,b,y,v,w,k;function _(e,t){return e[2]?Et:St}let S=_(e),L=S(e);const R=e[11].default,A=f(R,e,e[10],null);return w=new _t({props:{isRegion:e[0]}}),{c(){t=N("div"),n=N("div"),l=C(),s=N("div"),r=N("div"),o=N("div"),c=N("i"),i=C(),L.c(),a=P("\n                ("),u=P(e[1]),d=P(")"),m=C(),p=N("button"),b=C(),y=N("section"),A&&A.c(),v=C(),we(w.$$.fragment),I(n,"class","modal-background"),I(c,"class","fa-solid fa-book-bookmark"),I(o,"class","title is-4 mb-0 media-content"),I(p,"class","delete media-left"),I(p,"aria-label","close"),I(r,"class","modal-card-head media mb-0 is-middle"),I(y,"class","modal-card-body"),I(s,"class","modal-content"),I(t,"id","selection-modal"),I(t,"class","modal fade"),I(t,"tabindex","-1"),I(t,"aria-labelledby","selection-modal-label"),I(t,"aria-hidden","true")},m(e,f){E(e,t,f),x(t,n),x(t,l),x(t,s),x(s,r),x(r,o),x(o,c),x(o,i),L.m(o,null),x(o,a),x(o,u),x(o,d),x(r,m),x(r,p),x(s,b),x(s,y),A&&A.m(y,null),x(s,v),ke(w,s,null),k=!0},p(e,[t]){S===(S=_(e))&&L?L.p(e,t):(L.d(1),L=S(e),L&&(L.c(),L.m(o,a))),(!k||2&t)&&D(u,e[1]),A&&A.p&&(!k||1024&t)&&h(A,R,e,e[10],k?g(R,e[10],t,null):$(e[10]),null);const n={};1&t&&(n.isRegion=e[0]),w.$set(n)},i(e){k||(he(A,e),he(w.$$.fragment,e),k=!0)},o(e){$e(A,e),$e(w.$$.fragment,e),k=!1},d(e){e&&O(t),L.d(),A&&A.d(e),xe(w)}}}function Lt(e,t,n){let l,{$$slots:s={},$$scope:r}=t;const{selectionTitle:o,updateTitle:c,save:i}=Ie;m(e,o,(e=>n(5,l=e)));let a,u,{isRegion:d=!1}=t,{selectionLength:f=!1}=t,p=!1;function g(){n(2,p=!1),c(u,d),i(d)}return e.$$set=e=>{"isRegion"in e&&n(0,d=e.isRegion),"selectionLength"in e&&n(1,f=e.selectionLength),"$$scope"in e&&n(10,r=e.$$scope)},[d,f,p,a,u,l,o,function(){n(2,p=!0),n(4,u=l(d)),setTimeout((()=>a&&a.focus()),0)},function(e){"Enter"===e.key&&g()},g,r,s,function(e){ee[e?"unshift":"push"]((()=>{a=e,n(3,a)}))},function(){u=this.value,n(4,u)}]}class Nt extends Ee{constructor(e){super(),Se(this,e,Lt,Ot,c,{isRegion:0,selectionLength:1})}}function Rt(e,t,n){const l=e.slice();return l[13]=t[n],l[14]=t,l[15]=n,l}function Pt(e,t,n){const l=e.slice();return l[16]=t[n],l}function Ct(e){let t,n,l,s,r,o,c,i,a,u,d="en"===Oe?"Search":"Rechercher",m=e[0],f=[];for(let t=0;t<m.length;t+=1)f[t]=Dt(Rt(e,m,t));return{c(){t=N("form"),n=N("article");for(let e=0;e<f.length;e+=1)f[e].c();l=C(),s=N("div"),r=N("button"),o=N("i"),c=C(),i=P(d),I(n,"class","message grid"),I(o,"class","fa-solid fa-magnifying-glass"),I(r,"type","submit"),I(r,"class","button is-link is-outlined is-fullwidth"),I(s,"class","panel-block columns"),I(t,"class","fixed-grid is-center")},m(d,m){E(d,t,m),x(t,n);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(n,null);x(t,l),x(t,s),x(s,r),x(r,o),x(r,c),x(r,i),a||(u=j(t,"submit",e[3]),a=!0)},p(e,t){if(19&t){let l;for(m=e[0],l=0;l<m.length;l+=1){const s=Rt(e,m,l);f[l]?f[l].p(s,t):(f[l]=Dt(s),f[l].c(),f[l].m(n,null))}for(;l<f.length;l+=1)f[l].d(1);f.length=m.length}},d(e){e&&O(t),L(f,e),a=!1,u()}}}function At(e){let t,n,l,s,r;function o(){e[10].call(t,e[13])}return{c(){t=N("input"),I(t,"type","text"),I(t,"class","input is-small is-wide"),I(t,"id",n=e[13].name),I(t,"name",l=e[13].name)},m(n,l){E(n,t,l),H(t,e[1][e[13].name]),s||(r=j(t,"input",o),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&I(t,"id",n),1&r&&l!==(l=e[13].name)&&I(t,"name",l),3&r&&t.value!==e[1][e[13].name]&&H(t,e[1][e[13].name])},d(e){e&&O(t),s=!1,r()}}}function jt(e){let t,n,l,s,r;function o(){e[9].call(t,e[13])}return{c(){t=N("input"),I(t,"type","number"),I(t,"class","input is-small is-wide"),I(t,"id",n=e[13].name),I(t,"name",l=e[13].name)},m(n,l){E(n,t,l),H(t,e[1][e[13].name]),s||(r=j(t,"input",o),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&I(t,"id",n),1&r&&l!==(l=e[13].name)&&I(t,"name",l),3&r&&U(t.value)!==e[1][e[13].name]&&H(t,e[1][e[13].name])},d(e){e&&O(t),s=!1,r()}}}function Tt(e){let t,n,l,s,r,o;function c(){e[8].call(n,e[13])}return{c(){t=P("}\n                            "),n=N("input"),I(n,"type","date"),I(n,"class","input is-small is-wide"),I(n,"id",l=e[13].name),I(n,"name",s=e[13].name)},m(l,s){E(l,t,s),E(l,n,s),H(n,e[1][e[13].name]),r||(o=j(n,"input",c),r=!0)},p(t,r){e=t,1&r&&l!==(l=e[13].name)&&I(n,"id",l),1&r&&s!==(s=e[13].name)&&I(n,"name",s),3&r&&H(n,e[1][e[13].name])},d(e){e&&O(t),e&&O(n),r=!1,o()}}}function It(e){let t,n,l,s,r;function o(){e[7].call(t,e[13])}return{c(){t=N("input"),I(t,"type","checkbox"),I(t,"id",n=e[13].name),I(t,"name",l=e[13].name)},m(n,l){E(n,t,l),t.checked=e[1][e[13].name],s||(r=j(t,"change",o),s=!0)},p(s,r){e=s,1&r&&n!==(n=e[13].name)&&I(t,"id",n),1&r&&l!==(l=e[13].name)&&I(t,"name",l),3&r&&(t.checked=e[1][e[13].name])},d(e){e&&O(t),s=!1,r()}}}function Mt(e){let t,l,s,r,o,c,i,a,u=!e[4](e[13]),d=u&&Ft(),m=e[13].choices,f=[];for(let t=0;t<m.length;t+=1)f[t]=Ut(Pt(e,m,t));let p=[{id:r=e[13].name},{name:o=e[13].name},{class:"is-wide"},e[4](e[13])?{size:3,multiple:!0}:{}],g={};for(let e=0;e<p.length;e+=1)g=n(g,p[e]);function h(){e[6].call(l,e[13])}return{c(){t=N("div"),l=N("select"),d&&d.c(),s=A();for(let e=0;e<f.length;e+=1)f[e].c();F(l,g),void 0===e[1][e[13].name]&&re(h),z(l,"svelte-wwfwxh",!0),I(t,"class",c="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))},m(n,r){E(n,t,r),x(t,l),d&&d.m(l,null),x(l,s);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(l,null);"value"in g&&(g.multiple?B:V)(l,g.value),l.autofocus&&l.focus(),V(l,e[1][e[13].name],!0),i||(a=j(l,"change",h),i=!0)},p(n,i){if(e=n,1&i&&(u=!e[4](e[13])),u?d?d.p(e,i):(d=Ft(),d.c(),d.m(l,s)):d&&(d.d(1),d=null),1&i){let t;for(m=e[13].choices,t=0;t<m.length;t+=1){const n=Pt(e,m,t);f[t]?f[t].p(n,i):(f[t]=Ut(n),f[t].c(),f[t].m(l,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=m.length}F(l,g=function(e,t){const n={},l={},s={$$scope:1};let r=e.length;for(;r--;){const o=e[r],c=t[r];if(c){for(const e in o)e in c||(l[e]=1);for(const e in c)s[e]||(n[e]=c[e],s[e]=1);e[r]=c}else for(const e in o)s[e]=1}for(const e in l)e in n||(n[e]=void 0);return n}(p,[1&i&&r!==(r=e[13].name)&&{id:r},1&i&&o!==(o=e[13].name)&&{name:o},{class:"is-wide"},1&i&&(e[4](e[13])?{size:3,multiple:!0}:{})])),17&i&&"value"in g&&(g.multiple?B:V)(l,g.value),3&i&&V(l,e[1][e[13].name]),z(l,"svelte-wwfwxh",!0),1&i&&c!==(c="select is-small is-wide "+(e[4](e[13])?"is-multiple":""))&&I(t,"class",c)},d(e){e&&O(t),d&&d.d(),L(f,e),i=!1,a()}}}function Ft(t){let n;return{c(){n=N("option"),n.textContent=("en"===Oe?"Select":"Sélectionner")+" ...\n                                        ",n.__value="",n.value=n.__value,n.disabled=!0,n.selected=!0,I(n,"class","faded")},m(e,t){E(e,n,t)},p:e,d(e){e&&O(n)}}}function Ut(e){let t,n,l,s=e[16].label+"";return{c(){t=N("option"),n=P(s),t.__value=l=e[16].id,t.value=t.__value},m(e,l){E(e,t,l),x(t,n)},p(e,r){1&r&&s!==(s=e[16].label+"")&&D(n,s),1&r&&l!==(l=e[16].id)&&(t.__value=l,t.value=t.__value)},d(e){e&&O(t)}}}function Dt(e){let t,n,l,s,r,o,c,i,a,u=e[13].label+"";function d(e,t){return 1&t&&(c=null),1&t&&(i=null),null==c&&(c=!!e[13].type.includes("ChoiceField")),c?Mt:"BooleanField"===e[13].type?It:(null==i&&(i=!!e[13].type.includes("Date")),i?Tt:"IntegerField"===e[13].type||"FloatField"===e[13].type?jt:At)}let m=d(e,-1),f=m(e);return{c(){t=N("div"),n=N("label"),l=P(u),r=C(),o=N("div"),f.c(),a=C(),I(n,"for",s=e[13].name),I(n,"class","label column is-small is-3 svelte-wwfwxh"),I(o,"class","control has-icons-right column is-9"),I(t,"class","search-field field columns is-middle svelte-wwfwxh")},m(e,s){E(e,t,s),x(t,n),x(n,l),x(t,r),x(t,o),f.m(o,null),x(t,a)},p(e,t){1&t&&u!==(u=e[13].label+"")&&D(l,u),1&t&&s!==(s=e[13].name)&&I(n,"for",s),m===(m=d(e,t))&&f?f.p(e,t):(f.d(1),f=m(e),f&&(f.c(),f.m(o,null)))},d(e){e&&O(t),f.d()}}}function Ht(t){let n,l=t[0].length>0&&Ct(t);return{c(){l&&l.c(),n=A()},m(e,t){l&&l.m(e,t),E(e,n,t)},p(e,[t]){e[0].length>0?l?l.p(e,t):(l=Ct(e),l.c(),l.m(n.parentNode,n)):l&&(l.d(1),l=null)},i:e,o:e,d(e){l&&l.d(e),e&&O(n)}}}function Vt(e,t,n){let l,{recordsStore:s}=t;const{recordSearch:r,searchParams:o}=s;m(e,o,(e=>n(11,l=e)));let{searchFields:c=[]}=t,i={};var a;a=()=>{const e=l??new URLSearchParams(window.location.search);c.forEach((t=>{n(1,i[t.name]=e.get(t.name)||t.initial||"",i)}))},W().$$.on_mount.push(a);return e.$$set=e=>{"recordsStore"in e&&n(5,s=e.recordsStore),"searchFields"in e&&n(0,c=e.searchFields)},[c,i,o,function(e){e.preventDefault(),r(i)},e=>e.type.includes("Multiple"),s,function(e){i[e.name]=function(e){const t=e.querySelector(":checked");return t&&t.__value}(this),n(1,i),n(0,c)},function(e){i[e.name]=this.checked,n(1,i),n(0,c)},function(e){i[e.name]=this.value,n(1,i),n(0,c)},function(e){i[e.name]=U(this.value),n(1,i),n(0,c)},function(e){i[e.name]=this.value,n(1,i),n(0,c)}]}class Bt extends Ee{constructor(e){super(),Se(this,e,Vt,Ht,c,{recordsStore:5,searchFields:0})}}function zt(e){let t,n,l,s,r,o,c,i,a,u=e[4]>1&&qt(e),d=e[4]<e[3]&&Xt(e);return{c(){t=N("nav"),n=N("ul"),u&&u.c(),l=C(),s=N("li"),r=N("a"),o=P(e[4]),c=C(),d&&d.c(),I(r,"class","pagination-link is-current"),I(r,"href",null),I(n,"class","pagination-list ml-0"),I(t,"class","pagination is-centered mb-2"),I(t,"aria-label","pagination")},m(m,f){E(m,t,f),x(t,n),u&&u.m(n,null),x(n,l),x(n,s),x(s,r),x(r,o),x(n,c),d&&d.m(n,null),i||(a=j(r,"click",T(e[8])),i=!0)},p(e,t){e[4]>1?u?u.p(e,t):(u=qt(e),u.c(),u.m(n,l)):u&&(u.d(1),u=null),16&t&&D(o,e[4]),e[4]<e[3]?d?d.p(e,t):(d=Xt(e),d.c(),d.m(n,null)):d&&(d.d(1),d=null)},d(e){e&&O(t),u&&u.d(),d&&d.d(),i=!1,a()}}}function qt(e){let t,n,l,s,r,o,c=e[4]-1>1&&Gt(e);return{c(){t=N("li"),n=N("a"),n.textContent="1",l=C(),c&&c.c(),s=A(),I(n,"class","pagination-link"),I(n,"href",null)},m(i,a){E(i,t,a),x(t,n),E(i,l,a),c&&c.m(i,a),E(i,s,a),r||(o=j(n,"click",T(e[6])),r=!0)},p(e,t){e[4]-1>1?c?c.p(e,t):(c=Gt(e),c.c(),c.m(s.parentNode,s)):c&&(c.d(1),c=null)},d(e){e&&O(t),e&&O(l),c&&c.d(e),e&&O(s),r=!1,o()}}}function Gt(e){let t,n,l,s,r,o,c=e[4]-1+"",i=e[4]-1>2&&Jt();return{c(){i&&i.c(),t=C(),n=N("li"),l=N("a"),s=P(c),I(l,"class","pagination-link"),I(l,"href",null)},m(c,a){i&&i.m(c,a),E(c,t,a),E(c,n,a),x(n,l),x(l,s),r||(o=j(l,"click",T(e[7])),r=!0)},p(e,n){e[4]-1>2?i||(i=Jt(),i.c(),i.m(t.parentNode,t)):i&&(i.d(1),i=null),16&n&&c!==(c=e[4]-1+"")&&D(s,c)},d(e){i&&i.d(e),e&&O(t),e&&O(n),r=!1,o()}}}function Jt(e){let t;return{c(){t=N("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Xt(e){let t,n,l,s,r,o,c=e[4]+1<e[3]&&Kt(e);return{c(){c&&c.c(),t=C(),n=N("li"),l=N("a"),s=P(e[3]),I(l,"class","pagination-link"),I(l,"href",null)},m(i,a){c&&c.m(i,a),E(i,t,a),E(i,n,a),x(n,l),x(l,s),r||(o=j(l,"click",T(e[10])),r=!0)},p(e,n){e[4]+1<e[3]?c?c.p(e,n):(c=Kt(e),c.c(),c.m(t.parentNode,t)):c&&(c.d(1),c=null),8&n&&D(s,e[3])},d(e){c&&c.d(e),e&&O(t),e&&O(n),r=!1,o()}}}function Kt(e){let t,n,l,s,r,o,c,i=e[4]+1+"",a=e[4]+2<e[3]&&Yt();return{c(){t=N("li"),n=N("a"),l=P(i),s=C(),a&&a.c(),r=A(),I(n,"class","pagination-link"),I(n,"href",null)},m(i,u){E(i,t,u),x(t,n),x(n,l),E(i,s,u),a&&a.m(i,u),E(i,r,u),o||(c=j(n,"click",T(e[9])),o=!0)},p(e,t){16&t&&i!==(i=e[4]+1+"")&&D(l,i),e[4]+2<e[3]?a||(a=Yt(),a.c(),a.m(r.parentNode,r)):a&&(a.d(1),a=null)},d(e){e&&O(t),e&&O(s),a&&a.d(e),e&&O(r),o=!1,c()}}}function Yt(e){let t;return{c(){t=N("li"),t.innerHTML='<span class="pagination-ellipsis">…</span>'},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function Wt(t){let n,l,s,r,o,c,i,a=t[4]*t[2]-t[2]+1+"",u=Math.min(t[4]*t[2],t[1])+"",d=t[3]>1&&zt(t);return{c(){d&&d.c(),n=C(),l=N("div"),s=P(a),r=P(" - "),o=P(u),c=P(" / "),i=P(t[1]),I(l,"class","is-size-7 is-center mb-4")},m(e,t){d&&d.m(e,t),E(e,n,t),E(e,l,t),x(l,s),x(l,r),x(l,o),x(l,c),x(l,i)},p(e,[t]){e[3]>1?d?d.p(e,t):(d=zt(e),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null),20&t&&a!==(a=e[4]*e[2]-e[2]+1+"")&&D(s,a),22&t&&u!==(u=Math.min(e[4]*e[2],e[1])+"")&&D(o,u),2&t&&D(i,e[1])},i:e,o:e,d(e){d&&d.d(e),e&&O(n),e&&O(l)}}}function Qt(e,t,n){let l,s,{store:r}=t;const{currentPage:o}=r;m(e,o,(e=>n(4,s=e)));let{nbOfItems:c}=t,{pageLength:i=50}=t;return e.$$set=e=>{"store"in e&&n(0,r=e.store),"nbOfItems"in e&&n(1,c=e.nbOfItems),"pageLength"in e&&n(2,i=e.pageLength)},e.$$.update=()=>{6&e.$$.dirty&&n(3,l=Math.ceil(c/i))},[r,c,i,l,s,o,()=>r.handlePageUpdate(1),()=>r.handlePageUpdate(s-1),()=>r.handlePageUpdate(s),()=>r.handlePageUpdate(s+1),()=>r.handlePageUpdate(l)]}class Zt extends Ee{constructor(e){super(),Se(this,e,Qt,Wt,c,{store:0,nbOfItems:1,pageLength:2})}}function en(t){let n,l,s,r,o,c,i,a,u,d,m,f,p,g,h;return{c(){n=N("button"),l=C(),s=N("div"),r=N("div"),o=C(),c=N("div"),i=N("div"),i.innerHTML='<div class="title is-4 mb-0 media-content"><span id="modal-title" class="mb-0"></span></div> \n            <button class="delete media-left" aria-label="close"></button>',a=C(),u=N("section"),d=C(),m=N("footer"),f=N("div"),p=N("button"),p.textContent=""+("en"===Oe?"Cancel":"Annuler"),g=C(),h=N("button"),h.textContent="OK",I(n,"id","hidden-msg-btn"),I(n,"class","js-modal-trigger"),I(n,"data-target","msg-modal"),n.hidden=!0,I(r,"id","modal-bkg"),I(r,"class","modal-background"),I(i,"class","modal-card-head media mb-0"),I(u,"id","modal-body"),I(u,"class","modal-card-body"),I(p,"id","cancel-btn"),I(p,"class","button is-link is-light button-close"),I(h,"id","ok-btn"),I(h,"class","button is-link button-close"),I(f,"class","buttons"),I(m,"id","modal-footer"),I(m,"class","modal-card-foot is-center pt-3"),m.hidden=!0,I(c,"class","modal-content"),I(s,"id","msg-modal"),I(s,"class","modal fade"),I(s,"tabindex","-1"),I(s,"aria-labelledby","selection-modal-label"),I(s,"aria-hidden","true")},m(e,t){E(e,n,t),E(e,l,t),E(e,s,t),x(s,r),x(s,o),x(s,c),x(c,i),x(c,a),x(c,u),x(c,d),x(c,m),x(m,f),x(f,p),x(f,g),x(f,h)},p:e,i:e,o:e,d(e){e&&O(n),e&&O(l),e&&O(s)}}}class tn extends Ee{constructor(e){super(),Se(this,e,null,en,c,{})}}function nn(e){const t=e,n=je(1),l=je([]),s=je(0),r=je(new URLSearchParams(window.location.search));async function o(){const e=d(r);e.set("p",`${d(n)}`);try{const r=await fetch(`${window.location.origin}/search/${t}/?${e.toString()}`),o=await r.json();l.set(o.results),s.set(o.count),n.set(o.current_page),e.set("p",String(d(n)));const c=`${window.location.pathname}?${e.toString()}`;return history.pushState(null,"",c),o}catch(e){throw console.error("Error fetching page:",e),e}}!function(e,t){if("undefined"!=typeof window){const n=parseInt(new URLSearchParams(window.location.search).get(t));if(!isNaN(n))return e.set(n),n}e.set(1)}(n,"p");let c=o();function i(e){!function(e,t,n){if(t.set(e),"undefined"!=typeof window){const t=new URL(window.location.href);t.searchParams.set(n,e),window.history.pushState({},"",t)}}(e,n,"p"),c=o()}return{currentPage:n,pageRecords:l,resultPage:c,resultNumber:s,fetchPage:o,handlePageUpdate:i,recordSearch:function(e){const t=new URLSearchParams(e);r.set(t),i(1)},remove:function(e){l.update((t=>t.filter((t=>t.id!==e))))}}}function ln(e,t,n){const l=e.slice();return l[5]=t[n][0],l[6]=t[n][1],l}function sn(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function rn(e,t,n){const l=e.slice();return l[9]=t[n][0],l[10]=t[n][1],l}function on(e){let t,n,l=e[1]?"Retirer de la":"Charger dans la";return{c(){t=P(l),n=P(" sélection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Retirer de la":"Charger dans la")&&D(t,l)},d(e){e&&O(t),e&&O(n)}}}function cn(e){let t,n,l=e[1]?"Unload from":"Load to";return{c(){t=P(l),n=P(" selection")},m(e,l){E(e,t,l),E(e,n,l)},p(e,n){2&n&&l!==(l=e[1]?"Unload from":"Load to")&&D(t,l)},d(e){e&&O(t),e&&O(n)}}}function an(e){let t;return{c(){t=R("path"),I(t,"d","M0 48C0 21.5 21.5 0 48 0l0 48V441.4l130.1-92.9c8.3-6 19.6-6 27.9 0L336 441.4V48H48V0H336c26.5 0 48 21.5 48 48V488c0 9-5 17.2-13 21.3s-17.6 3.4-24.9-1.8L192 397.5 37.9 507.5c-7.3 5.2-16.9 5.9-24.9 1.8S0 497 0 488V48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function un(e){let t;return{c(){t=R("path"),I(t,"d","M0 48V487.7C0 501.1 10.9 512 24.3 512c5 0 9.9-1.5 14-4.4L192 400 345.7 507.6c4.1 2.9 9 4.4 14 4.4c13.4 0 24.3-10.9 24.3-24.3V48c0-26.5-21.5-48-48-48H48C21.5 0 0 21.5 0 48z")},m(e,n){E(e,t,n)},d(e){e&&O(t)}}}function dn(e){let t,n,l,s,r,o;let c=("en"===Oe?cn:on)(e);function i(e,t){return e[1]?un:an}let a=i(e),u=a(e);return{c(){t=N("div"),n=N("button"),c.c(),l=C(),s=R("svg"),u.c(),I(s,"xmlns","http://www.w3.org/2000/svg"),I(s,"viewBox","0 0 384 512"),I(n,"class","button"),z(n,"is-inverted",e[1]),I(t,"slot","buttons")},m(i,a){E(i,t,a),x(t,n),c.m(n,null),x(n,l),x(n,s),u.m(s,null),r||(o=j(n,"click",e[4]),r=!0)},p(e,t){c.p(e,t),a!==(a=i(e))&&(u.d(1),u=a(e),u&&(u.c(),u.m(s,null))),2&t&&z(n,"is-inverted",e[1])},d(e){e&&O(t),c.d(),u.d(),r=!1,o()}}}function mn(e){let t,n,l,s,r,o,c,i=e[10].task_type+"",a=e[9]+"";return{c(){t=N("a"),n=P(i),l=P(" #"),s=P(a),r=C(),I(t,"href",o=e[10].url),I(t,"class",c="tag is-rounded is-small "+$n(e[10].status))},m(e,o){E(e,t,o),x(t,n),x(t,l),x(t,s),x(t,r)},p(e,l){1&l&&i!==(i=e[10].task_type+"")&&D(n,i),1&l&&a!==(a=e[9]+"")&&D(s,a),1&l&&o!==(o=e[10].url)&&I(t,"href",o),1&l&&c!==(c="tag is-rounded is-small "+$n(e[10].status))&&I(t,"class",c)},d(e){e&&O(t)}}}function fn(e){let t,n,l,s,r,o,c,i,a=e[5]+"",u=e[9]+"",d=e[10].title+"";return{c(){t=N("div"),n=N("span"),l=P(a),s=P(" #"),r=P(u),o=C(),c=P(d),i=C(),I(n,"class","tag is-rounded is-accent")},m(e,a){E(e,t,a),x(t,n),x(n,l),x(n,s),x(n,r),x(t,o),x(t,c),x(t,i)},p(e,t){1&t&&a!==(a=e[5]+"")&&D(l,a),1&t&&u!==(u=e[9]+"")&&D(r,u),1&t&&d!==(d=e[10].title+"")&&D(c,d)},d(e){e&&O(t)}}}function pn(e){let t,n=Object.entries(e[6]),l=[];for(let t=0;t<n.length;t+=1)l[t]=fn(sn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[6]),r=0;r<n.length;r+=1){const o=sn(e,n,r);l[r]?l[r].p(o,s):(l[r]=fn(o),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function gn(e){let t,n,l,s,r=Object.entries(e[0].treatments),o=[];for(let t=0;t<r.length;t+=1)o[t]=mn(rn(e,r,t));let c=Object.entries(e[0].selection.selected),i=[];for(let t=0;t<c.length;t+=1)i[t]=pn(ln(e,c,t));return{c(){t=N("div"),n=N("div");for(let e=0;e<o.length;e+=1)o[e].c();l=C(),s=N("div");for(let e=0;e<i.length;e+=1)i[e].c();I(n,"class","tags container"),I(s,"class","grid"),I(t,"slot","body")},m(e,r){E(e,t,r),x(t,n);for(let e=0;e<o.length;e+=1)o[e]&&o[e].m(n,null);x(t,l),x(t,s);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(s,null)},p(e,t){if(1&t){let l;for(r=Object.entries(e[0].treatments),l=0;l<r.length;l+=1){const s=rn(e,r,l);o[l]?o[l].p(s,t):(o[l]=mn(s),o[l].c(),o[l].m(n,null))}for(;l<o.length;l+=1)o[l].d(1);o.length=r.length}if(1&t){let n;for(c=Object.entries(e[0].selection.selected),n=0;n<c.length;n+=1){const l=ln(e,c,n);i[n]?i[n].p(l,t):(i[n]=pn(l),i[n].c(),i[n].m(s,null))}for(;n<i.length;n+=1)i[n].d(1);i.length=c.length}},d(e){e&&O(t),L(o,e),L(i,e)}}}function hn(e){let t,n;return t=new at({props:{item:e[0],$$slots:{body:[gn],buttons:[dn]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),32771&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function $n(e){return e?"CANCELLED"===e?"is-info":"ERROR"===e?"is-danger":"IN PROGRESS"===e?"is-warning":"PENDING"===e||"STARTED"===e?"is-info":"SUCCESS"===e?"is-success":"is-dark":"is-dark"}function bn(e,t,n){let l,s;const{isSetSelected:r}=Ie;m(e,r,(e=>n(3,s=e)));let{item:o}=t;return e.$$set=e=>{"item"in e&&n(0,o=e.item)},e.$$.update=()=>{9&e.$$.dirty&&n(1,l=s(o))},[o,l,r,s,()=>Ie.toggleSet(o)]}let yn=class extends Ee{constructor(e){super(),Se(this,e,bn,hn,c,{item:0})}};function vn(e,t,n){const l=e.slice();return l[6]=t[n][0],l[7]=t[n][1],l}function wn(e,t,n){const l=e.slice();return l[10]=t[n][0],l[11]=t[n][1],l}function kn(e){let t,n,l,s,r;return{c(){t=N("a"),n=N("i"),l=C(),s=N("span"),s.textContent=""+("en"===Oe?"Relaunch same treatment":"Relancer le même traitement"),I(n,"class","fa-solid fa-arrow-rotate-left"),I(t,"href",r="add/"+e[0].query_parameters),I(t,"class","button is-small is-rounded is-primary is-outlined px-2 py-1 mr-2"),I(t,"title","en"===Oe?"Relaunch same treatment":"Relancer le même traitement")},m(e,r){E(e,t,r),x(t,n),x(t,l),x(t,s)},p(e,n){1&n&&r!==(r="add/"+e[0].query_parameters)&&I(t,"href",r)},d(e){e&&O(t)}}}function xn(t){let n,l,s,r,o,c;return{c(){n=N("button"),l=N("i"),s=C(),r=N("span"),r.textContent=""+("en"===Oe?"Cancel treatment":"Annuler le traitement"),I(l,"class","fa-solid fa-ban"),I(n,"class","button is-small is-rounded is-danger is-outlined px-2 py-1 mr-2"),I(n,"title","en"===Oe?"Cancel treatment":"Annuler le traitement")},m(e,i){E(e,n,i),x(n,l),x(n,s),x(n,r),o||(c=j(n,"click",t[4]),o=!0)},p:e,d(e){e&&O(n),o=!1,c()}}}function _n(e){let t,n;return{c(){t=N("span"),n=P(e[1]),I(t,"class","tag is-info p-1 mb-1")},m(e,l){E(e,t,l),x(t,n)},p(e,t){2&t&&D(n,e[1])},d(e){e&&O(t)}}}function Sn(e){let t,n;return{c(){t=N("span"),n=P(e[1]),I(t,"class","tag is-danger p-1 mb-1")},m(e,l){E(e,t,l),x(t,n)},p(e,t){2&t&&D(n,e[1])},d(e){e&&O(t)}}}function En(e){let t,n;return{c(){t=N("span"),n=P(e[1]),I(t,"class","tag is-success p-1 mb-1")},m(e,l){E(e,t,l),x(t,n)},p(e,t){2&t&&D(n,e[1])},d(e){e&&O(t)}}}function On(e){let t,n,l,s,r,o;function c(e,t){return!e[2]&&e[0].api_tracking_id?xn:e[2]&&"ERROR"===e[1]?kn:void 0}let i=c(e),a=i&&i(e);function u(e,t){return"SUCCESS"===e[1]?En:"ERROR"===e[1]?Sn:_n}let d=u(e),m=d(e);return{c(){t=N("div"),a&&a.c(),n=C(),m.c(),l=C(),s=N("button"),I(s,"class","delete is-medium"),I(s,"title","en"===Oe?"Delete treatment":"Supprimer le traitement"),I(t,"slot","buttons")},m(c,i){E(c,t,i),a&&a.m(t,null),x(t,n),m.m(t,null),x(t,l),x(t,s),r||(o=j(s,"click",e[3]),r=!0)},p(e,s){i===(i=c(e))&&a?a.p(e,s):(a&&a.d(1),a=i&&i(e),a&&(a.c(),a.m(t,n))),d===(d=u(e))&&m?m.p(e,s):(m.d(1),m=d(e),m&&(m.c(),m.m(t,l)))},d(e){e&&O(t),a&&a.d(),m.d(),r=!1,o()}}}function Ln(e){let t,n=Object.entries(e[0].selection.selected),l=[];for(let t=0;t<n.length;t+=1)l[t]=Rn(vn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[0].selection.selected),r=0;r<n.length;r+=1){const o=vn(e,n,r);l[r]?l[r].p(o,s):(l[r]=Rn(o),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function Nn(e){let t,n,l,s,r,o,c,i,a=e[6]+"",u=e[10]+"",d=e[11].title+"";return{c(){t=N("div"),n=N("span"),l=P(a),s=P(" #"),r=P(u),o=C(),c=P(d),i=C(),I(n,"class","tag is-rounded is-accent")},m(e,a){E(e,t,a),x(t,n),x(n,l),x(n,s),x(n,r),x(t,o),x(t,c),x(t,i)},p(e,t){1&t&&a!==(a=e[6]+"")&&D(l,a),1&t&&u!==(u=e[10]+"")&&D(r,u),1&t&&d!==(d=e[11].title+"")&&D(c,d)},d(e){e&&O(t)}}}function Rn(e){let t,n=Object.entries(e[7]),l=[];for(let t=0;t<n.length;t+=1)l[t]=Nn(wn(e,n,t));return{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n)},p(e,s){if(1&s){let r;for(n=Object.entries(e[7]),r=0;r<n.length;r+=1){const o=wn(e,n,r);l[r]?l[r].p(o,s):(l[r]=Nn(o),l[r].c(),l[r].m(t.parentNode,t))}for(;r<l.length;r+=1)l[r].d(1);l.length=n.length}},d(e){L(l,e),e&&O(t)}}}function Pn(e){let t,n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected,l=n&&Ln(e);return{c(){t=N("div"),l&&l.c(),I(t,"slot","body"),I(t,"class","pt-2 grid")},m(e,n){E(e,t,n),l&&l.m(t,null)},p(e,s){1&s&&(n=e[0].hasOwnProperty("selection")&&e[0].selection.hasOwnProperty("selected")&&e[0].selection.selected),n?l?l.p(e,s):(l=Ln(e),l.c(),l.m(t,null)):l&&(l.d(1),l=null)},d(e){e&&O(t),l&&l.d()}}}function Cn(e){let t,n;return t=new at({props:{item:e[0],$$slots:{body:[Pn],buttons:[On]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,[n]){const l={};1&n&&(l.item=e[0]),16391&n&&(l.$$scope={dirty:n,ctx:e}),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function An(e,t,n){let l,s,{item:r}=t,{recordsStore:o}=t;return e.$$set=e=>{"item"in e&&n(0,r=e.item),"recordsStore"in e&&n(5,o=e.recordsStore)},e.$$.update=()=>{1&e.$$.dirty&&n(2,l=r.is_finished),1&e.$$.dirty&&n(1,s=r.status)},[r,s,l,async function(){if(!await Ge("en"===Oe?"Are you sure you want to delete this treatment?":"Voulez-vous vraiment supprimer ce traitement ?","en"===Oe?"Confirm deletion":"Confirmer la suppression",!0))return;await async function(e,t){return Je(`/${Le}/${t.toLowerCase()}/${e}/delete`)}(r.id,r.class)?o.remove(r.id):await Ge("en"===Oe?"Failed to delete treatment":"Erreur lors de la suppression du traitement","en"===Oe?"Error":"Erreur")},async function(){if(!await Ge("en"===Oe?"Are you sure you want to cancel treatment?":"Êtes-vous sûr de vouloir annuler le traitement en cours ?","en"===Oe?"Confirm cancel":"Confirmer l'annulation",!0))return;await Je(`/${Le}/treatment/${r.id}/cancel`)?(n(2,l=!0),n(1,s="CANCELLED")):await Ge("en"===Oe?"Failed to cancel treatment":"Erreur lors de l'annulation du traitement","en"===Oe?"Error":"Erreur")},o]}class jn extends Ee{constructor(e){super(),Se(this,e,An,Cn,c,{item:0,recordsStore:5})}}function Tn(e,t,n){const l=e.slice();return l[17]=t[n][0],l[18]=t[n][1],l}function In(e,t,n){const l=e.slice();return l[21]=t[n][0],l[22]=t[n][1],l}function Mn(e,t,n){const l=e.slice();return l[26]=t[n],l}function Fn(t){let n,l,s,r,o;return{c(){n=N("span"),l=N("a"),s=N("i"),r=C(),o=N("span"),o.textContent=""+("en"===Oe?"Add":"Ajouter"),I(s,"class","fa-solid fa-plus"),I(l,"href",t[12]),I(l,"class","button is-rounded is-primary mb-4"),I(l,"title","en"===Oe?"Add":"Ajouter"),I(n,"class","is-right")},m(e,t){E(e,n,t),x(n,l),x(l,s),x(l,r),x(l,o)},p:e,d(e){e&&O(n)}}}function Un(t){let n,l,s,r,o="en"===Oe?"Error when retrieving records: ":"Erreur lors de la récupération des enregistrements : ",c=t[29]+"";return{c(){n=N("div"),l=P(o),s=C(),r=P(c),I(n,"class","faded is-center")},m(e,t){E(e,n,t),x(n,l),x(n,s),x(n,r)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Dn(e){let t,n,l=0!==e[4].length&&Hn(e);return{c(){l&&l.c(),t=A()},m(e,s){l&&l.m(e,s),E(e,t,s),n=!0},p(e,n){0!==e[4].length?l?(l.p(e,n),16&n&&he(l,1)):(l=Hn(e),l.c(),he(l,1),l.m(t.parentNode,t)):l&&(pe(),$e(l,1,1,(()=>{l=null})),ge())},i(e){n||(he(l),n=!0)},o(e){$e(l),n=!1},d(e){l&&l.d(e),e&&O(t)}}}function Hn(e){let t,n,l,s,o,c,i=[],a=new Map;t=new Zt({props:{store:e[8],nbOfItems:e[5],pageLength:e[4].length}});let u=e[4];const d=e=>e[26].id;for(let t=0;t<u.length;t+=1){let n=Mn(e,u,t),l=d(n);a.set(l,i[t]=Gn(l,n))}let m=null;return u.length||(m=Vn()),o=new Zt({props:{store:e[8],nbOfItems:e[5],pageLength:e[4].length}}),{c(){we(t.$$.fragment),n=C(),l=N("div");for(let e=0;e<i.length;e+=1)i[e].c();m&&m.c(),s=C(),we(o.$$.fragment)},m(e,r){ke(t,e,r),E(e,n,r),E(e,l,r);for(let e=0;e<i.length;e+=1)i[e]&&i[e].m(l,null);m&&m.m(l,null),E(e,s,r),ke(o,e,r),c=!0},p(e,n){const s={};32&n&&(s.nbOfItems=e[5]),16&n&&(s.pageLength=e[4].length),t.$set(s),272&n&&(u=e[4],pe(),i=function(e,t,n,l,s,o,c,i,a,u,d,m){let f=e.length,p=o.length,g=f;const h={};for(;g--;)h[e[g].key]=g;const $=[],b=new Map,y=new Map,v=[];for(g=p;g--;){const e=m(s,o,g),r=n(e);let i=c.get(r);i?l&&v.push((()=>i.p(e,t))):(i=u(r,e),i.c()),b.set(r,$[g]=i),r in h&&y.set(r,Math.abs(g-h[r]))}const w=new Set,k=new Set;function x(e){he(e,1),e.m(i,d),c.set(e.key,e),d=e.first,p--}for(;f&&p;){const t=$[p-1],n=e[f-1],l=t.key,s=n.key;t===n?(d=t.first,f--,p--):b.has(s)?!c.has(l)||w.has(l)?x(t):k.has(s)?f--:y.get(l)>y.get(s)?(k.add(l),x(t)):(w.add(s),f--):(a(n,c),f--)}for(;f--;){const t=e[f];b.has(t.key)||a(t,c)}for(;p;)x($[p-1]);return r(v),$}(i,n,d,1,e,u,a,l,ve,Gn,null,Mn),ge(),!u.length&&m?m.p(e,n):u.length?m&&(m.d(1),m=null):(m=Vn(),m.c(),m.m(l,null)));const c={};32&n&&(c.nbOfItems=e[5]),16&n&&(c.pageLength=e[4].length),o.$set(c)},i(e){if(!c){he(t.$$.fragment,e);for(let e=0;e<u.length;e+=1)he(i[e]);he(o.$$.fragment,e),c=!0}},o(e){$e(t.$$.fragment,e);for(let e=0;e<i.length;e+=1)$e(i[e]);$e(o.$$.fragment,e),c=!1},d(e){xe(t,e),e&&O(n),e&&O(l);for(let e=0;e<i.length;e+=1)i[e].d();m&&m.d(),e&&O(s),xe(o,e)}}}function Vn(t){let n;return{c(){n=N("p"),n.textContent=""+("en"===Oe?"No records found":"Aucun enregistrement trouvé")},m(e,t){E(e,n,t)},p:e,d(e){e&&O(n)}}}function Bn(e){let t,n;return t=new ht({props:{item:e[26]}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function zn(e){let t,n;return t=new yn({props:{item:e[26]}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function qn(e){let t,n;return t=new jn({props:{item:e[26],recordsStore:e[8]}}),{c(){we(t.$$.fragment)},m(e,l){ke(t,e,l),n=!0},p(e,n){const l={};16&n&&(l.item=e[26]),t.$set(l)},i(e){n||(he(t.$$.fragment,e),n=!0)},o(e){$e(t.$$.fragment,e),n=!1},d(e){xe(t,e)}}}function Gn(e,t){let n,l,s,r,o,c,i;const a=[qn,zn,Bn],u=[];function d(e,t){return 16&t&&(l=null),16&t&&(s=null),null==l&&(l=!!e[26].class.includes("Treatment")),l?0:(null==s&&(s=!!e[26].class.includes("Set")),s?1:2)}return r=d(t,-1),o=u[r]=a[r](t),{key:e,first:null,c(){n=A(),o.c(),c=A(),this.first=n},m(e,t){E(e,n,t),u[r].m(e,t),E(e,c,t),i=!0},p(e,n){let l=r;r=d(t=e,n),r===l?u[r].p(t,n):(pe(),$e(u[l],1,1,(()=>{u[l]=null})),ge(),o=u[r],o?o.p(t,n):(o=u[r]=a[r](t),o.c()),he(o,1),o.m(c.parentNode,c))},i(e){i||(he(o),i=!0)},o(e){$e(o),i=!1},d(e){e&&O(n),u[r].d(e),e&&O(c)}}}function Jn(t){let n;return{c(){n=N("div"),n.textContent=""+("en"===Oe?"Retrieving records...":"Récupération des enregistrements..."),I(n,"class","faded is-center")},m(e,t){E(e,n,t)},p:e,i:e,o:e,d(e){e&&O(n)}}}function Xn(t){let n,l,s;return{c(){n=N("tr"),l=N("td"),l.textContent=""+("en"===Oe?"No documents in selection":"Aucun document sélectionné"),s=C()},m(e,t){E(e,n,t),x(n,l),x(n,s)},p:e,d(e){e&&O(n)}}}function Kn(e){let t,n,l,s,r,o,c=e[17]+"",i=Object.entries(e[18]),a=[];for(let t=0;t<i.length;t+=1)a[t]=Yn(In(e,i,t));return{c(){t=N("h3"),n=P(c),l=C(),s=N("table"),r=N("tbody");for(let e=0;e<a.length;e+=1)a[e].c();o=C(),I(s,"class","table pl-2 is-fullwidth")},m(e,c){E(e,t,c),x(t,n),E(e,l,c),E(e,s,c),x(s,r);for(let e=0;e<a.length;e+=1)a[e]&&a[e].m(r,null);x(s,o)},p(e,t){if(8&t&&c!==(c=e[17]+"")&&D(n,c),8&t){let n;for(i=Object.entries(e[18]),n=0;n<i.length;n+=1){const l=In(e,i,n);a[n]?a[n].p(l,t):(a[n]=Yn(l),a[n].c(),a[n].m(r,null))}for(;n<a.length;n+=1)a[n].d(1);a.length=i.length}},d(e){e&&O(t),e&&O(l),e&&O(s),L(a,e)}}}function Yn(e){let t,n,l,s,r,o,c,i,a,u,d,m,f,p,g,h,$=e[21]+"",b=e[22].title+"";function y(){return e[16](e[21],e[17])}return{c(){t=N("tr"),n=N("th"),l=N("span"),s=P("#"),r=P($),o=C(),c=N("td"),i=N("a"),a=P(b),d=C(),m=N("td"),f=N("button"),p=C(),I(l,"class","tag px-2 py-1 mb-1 is-dark is-rounded"),I(n,"class","is-narrow is-3"),I(i,"href",u=e[22].url),I(i,"target","_blank"),I(f,"class","delete"),I(f,"aria-label","close"),I(m,"class","is-narrow")},m(e,u){E(e,t,u),x(t,n),x(n,l),x(l,s),x(l,r),x(t,o),x(t,c),x(c,i),x(i,a),x(t,d),x(t,m),x(m,f),E(e,p,u),g||(h=j(f,"click",y),g=!0)},p(t,n){e=t,8&n&&$!==($=e[21]+"")&&D(r,$),8&n&&b!==(b=e[22].title+"")&&D(a,b),8&n&&u!==(u=e[22].url)&&I(i,"href",u)},d(e){e&&O(t),e&&O(p),g=!1,h()}}}function Wn(e){let t,n=Object.values(e[18]).length>0,l=n&&Kn(e);return{c(){l&&l.c(),t=A()},m(e,n){l&&l.m(e,n),E(e,t,n)},p(e,s){8&s&&(n=Object.values(e[18]).length>0),n?l?l.p(e,s):(l=Kn(e),l.c(),l.m(t.parentNode,t)):l&&(l.d(1),l=null)},d(e){l&&l.d(e),e&&O(t)}}}function Qn(e){let t,n=e[3],l=[];for(let t=0;t<n.length;t+=1)l[t]=Wn(Tn(e,n,t));let s=null;return n.length||(s=Xn()),{c(){for(let e=0;e<l.length;e+=1)l[e].c();t=A(),s&&s.c()},m(e,n){for(let t=0;t<l.length;t+=1)l[t]&&l[t].m(e,n);E(e,t,n),s&&s.m(e,n)},p(e,r){if(8&r){let o;for(n=e[3],o=0;o<n.length;o+=1){const s=Tn(e,n,o);l[o]?l[o].p(s,r):(l[o]=Wn(s),l[o].c(),l[o].m(t.parentNode,t))}for(;o<l.length;o+=1)l[o].d(1);l.length=n.length,!n.length&&s?s.p(e,r):n.length?s&&(s.d(1),s=null):(s=Xn(),s.c(),s.m(t.parentNode,t))}},d(e){L(l,e),e&&O(t),s&&s.d(e)}}}function Zn(e){let t,n,l,s,r,o,c,i,a,u,d=!e[0].includes("set");t=new tn({}),l=new yt({props:{selectionLength:e[2]}}),r=new Bt({props:{recordsStore:e[8],searchFields:e[1]}});let m=d&&Fn(e),f={ctx:e,current:null,token:null,hasCatch:!0,pending:Jn,then:Dn,catch:Un,value:25,error:29,blocks:[,,,]};return function(e,t){const n=t.token={};function l(e,l,s,r){if(t.token!==n)return;t.resolved=r;let o=t.ctx;void 0!==s&&(o=o.slice(),o[s]=r);const c=e&&(t.current=e)(o);let i=!1;t.block&&(t.blocks?t.blocks.forEach(((e,n)=>{n!==l&&e&&(pe(),$e(e,1,1,(()=>{t.blocks[n]===e&&(t.blocks[n]=null)})),ge())})):t.block.d(1),c.c(),he(c,1),c.m(t.mount(),t.anchor),i=!0),t.block=c,t.blocks&&(t.blocks[l]=c),i&&ae()}if(!(s=e)||"object"!=typeof s&&"function"!=typeof s||"function"!=typeof s.then){if(t.current!==t.then)return l(t.then,1,t.value,e),!0;t.resolved=e}else{const n=W();if(e.then((e=>{Y(n),l(t.then,1,t.value,e),Y(null)}),(e=>{if(Y(n),l(t.catch,2,t.error,e),Y(null),!t.hasCatch)throw e})),t.current!==t.pending)return l(t.pending,0),!0}var s}(e[10],f),a=new Nt({props:{selectionLength:e[2],$$slots:{default:[Qn]},$$scope:{ctx:e}}}),{c(){we(t.$$.fragment),n=C(),we(l.$$.fragment),s=C(),we(r.$$.fragment),o=C(),m&&m.c(),c=C(),f.block.c(),i=C(),we(a.$$.fragment)},m(e,d){ke(t,e,d),E(e,n,d),ke(l,e,d),E(e,s,d),ke(r,e,d),E(e,o,d),m&&m.m(e,d),E(e,c,d),f.block.m(e,f.anchor=d),f.mount=()=>i.parentNode,f.anchor=i,E(e,i,d),ke(a,e,d),u=!0},p(t,[n]){e=t;const s={};4&n&&(s.selectionLength=e[2]),l.$set(s);const o={};2&n&&(o.searchFields=e[1]),r.$set(o),1&n&&(d=!e[0].includes("set")),d?m?m.p(e,n):(m=Fn(e),m.c(),m.m(c.parentNode,c)):m&&(m.d(1),m=null),function(e,t,n){const l=t.slice(),{resolved:s}=e;e.current===e.then&&(l[e.value]=s),e.current===e.catch&&(l[e.error]=s),e.block.p(l,n)}(f,e,n);const i={};4&n&&(i.selectionLength=e[2]),1073741832&n&&(i.$$scope={dirty:n,ctx:e}),a.$set(i)},i(e){u||(he(t.$$.fragment,e),he(l.$$.fragment,e),he(r.$$.fragment,e),he(f.block),he(a.$$.fragment,e),u=!0)},o(e){$e(t.$$.fragment,e),$e(l.$$.fragment,e),$e(r.$$.fragment,e);for(let e=0;e<3;e+=1){$e(f.blocks[e])}$e(a.$$.fragment,e),u=!1},d(e){xe(t,e),e&&O(n),xe(l,e),e&&O(s),xe(r,e),e&&O(o),m&&m.d(e),e&&O(c),f.block.d(e),f.token=null,f=null,e&&O(i),xe(a,e)}}}function el(e,t,n){let l,s,r,o,c,i;const{selected:a,nbSelected:u}=Ie;m(e,a,(e=>n(15,o=e))),m(e,u,(e=>n(14,r=e)));let{modelName:d=""}=t;Q("modelName",d);let{modelTitle:f=""}=t;Q("modelTitle",f);const p=nn(d),{pageRecords:g,resultPage:h,resultNumber:$}=p;m(e,g,(e=>n(4,c=e))),m(e,$,(e=>n(5,i=e)));let{searchFields:b=[]}=t;const y=d.includes("treatment")?`/${Le}/${d}/add/`:`/${Le}-admin/${Ne}/${d}/add/`;return e.$$set=e=>{"modelName"in e&&n(13,d=e.modelName),"modelTitle"in e&&n(0,f=e.modelTitle),"searchFields"in e&&n(1,b=e.searchFields)},e.$$.update=()=>{32768&e.$$.dirty&&n(3,l=o(!1)),16384&e.$$.dirty&&n(2,s=r(!1))},[f,b,s,l,c,i,a,u,p,g,h,$,y,d,r,o,(e,t)=>Ie.remove(e,t)]}return new class extends Ee{constructor(e){super(),Se(this,e,el,Zn,c,{modelName:13,modelTitle:0,searchFields:1})}}({target:document.getElementById("record-list"),props:{searchFields:searchFields,modelName:modelName,modelTitle:modelTitle}})}();
//# sourceMappingURL=recordList.js.map
